!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=98)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(0),i=n(27),o=n(55),a=n(5),s=n(40),u=n(15),c=n(35),f=function(t){function e(n,r,i){var a=t.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.a;break;case 1:if(!n){a.destination=o.a;break}if("object"==typeof n){n instanceof e?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return r.a(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(a.a),h=function(t){function e(e,n,r,a){var s,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=a,u}return r.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(c.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(c.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(f)},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(52),i=n(1),o=n(40),a=n(55);var s=n(22),u=n(39),c=n(15),f=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(r?s.add(r.call(s,this.source)):s.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=h(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[s.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(u.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=h(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function h(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(14),i=n(42),o=n(2);function a(t,e,n,a,s){if(void 0===s&&(s=new r.a(t,n,a)),!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(7),i=n(51),o=n(27),a=n(41),s=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,s=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var f=0;f<n.length;++f){n[f].remove(this)}if(Object(o.a)(s))try{s.call(this)}catch(t){e=t instanceof a.a?u(t.errors):[t]}if(Object(r.a)(c)){f=-1;for(var h=c.length;++f<h;){var l=c[f];if(Object(i.a)(l))try{l.unsubscribe()}catch(t){e=e||[],t instanceof a.a?e=e.concat(u(t.errors)):e.push(t)}}}if(e)throw new a.a(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce((function(t,e){return t.concat(e instanceof a.a?e.errors:e)}),[])}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(2),o=n(1),a=n(5),s=n(23),u=n(70),c=n(40),f=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(e,t),e}(o.a),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new f(this)},e.prototype.lift=function(t){var e=new l(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new l(t,e)},e}(i.a),l=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(32),i=new(n(30).a)(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(2),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},function(t,e,n){"use strict";n.r(e),n.d(e,"Type",(function(){return f})),n.d(e,"identity",(function(){return h})),n.d(e,"getFunctionName",(function(){return l})),n.d(e,"getContextEntry",(function(){return d})),n.d(e,"appendContext",(function(){return p})),n.d(e,"failures",(function(){return m})),n.d(e,"failure",(function(){return y})),n.d(e,"success",(function(){return g})),n.d(e,"NullType",(function(){return x})),n.d(e,"nullType",(function(){return b})),n.d(e,"UndefinedType",(function(){return _})),n.d(e,"VoidType",(function(){return M})),n.d(e,"voidType",(function(){return T})),n.d(e,"UnknownType",(function(){return A})),n.d(e,"unknown",(function(){return S})),n.d(e,"StringType",(function(){return O})),n.d(e,"string",(function(){return E})),n.d(e,"NumberType",(function(){return k})),n.d(e,"number",(function(){return C})),n.d(e,"BigIntType",(function(){return P})),n.d(e,"bigint",(function(){return I})),n.d(e,"BooleanType",(function(){return R})),n.d(e,"boolean",(function(){return D})),n.d(e,"AnyArrayType",(function(){return N})),n.d(e,"UnknownArray",(function(){return B})),n.d(e,"AnyDictionaryType",(function(){return L})),n.d(e,"UnknownRecord",(function(){return j})),n.d(e,"FunctionType",(function(){return F})),n.d(e,"Function",(function(){return z})),n.d(e,"RefinementType",(function(){return V})),n.d(e,"brand",(function(){return U})),n.d(e,"Int",(function(){return G})),n.d(e,"LiteralType",(function(){return q})),n.d(e,"literal",(function(){return H})),n.d(e,"KeyofType",(function(){return W})),n.d(e,"keyof",(function(){return K})),n.d(e,"RecursiveType",(function(){return X})),n.d(e,"recursion",(function(){return $})),n.d(e,"ArrayType",(function(){return Z})),n.d(e,"array",(function(){return J})),n.d(e,"InterfaceType",(function(){return Q})),n.d(e,"type",(function(){return rt})),n.d(e,"PartialType",(function(){return it})),n.d(e,"partial",(function(){return at})),n.d(e,"DictionaryType",(function(){return st})),n.d(e,"getDomainKeys",(function(){return ut})),n.d(e,"record",(function(){return ct})),n.d(e,"UnionType",(function(){return ft})),n.d(e,"union",(function(){return lt})),n.d(e,"IntersectionType",(function(){return dt})),n.d(e,"intersection",(function(){return mt})),n.d(e,"TupleType",(function(){return yt})),n.d(e,"tuple",(function(){return gt})),n.d(e,"ReadonlyType",(function(){return vt})),n.d(e,"readonly",(function(){return xt})),n.d(e,"ReadonlyArrayType",(function(){return bt})),n.d(e,"readonlyArray",(function(){return _t})),n.d(e,"strict",(function(){return wt})),n.d(e,"TaggedUnionType",(function(){return Mt})),n.d(e,"taggedUnion",(function(){return Tt})),n.d(e,"ExactType",(function(){return At})),n.d(e,"exact",(function(){return Et})),n.d(e,"null",(function(){return b})),n.d(e,"undefined",(function(){return w})),n.d(e,"Array",(function(){return B})),n.d(e,"interface",(function(){return rt})),n.d(e,"void",(function(){return T})),n.d(e,"getValidationError",(function(){return kt})),n.d(e,"getDefaultContext",(function(){return Ct})),n.d(e,"NeverType",(function(){return Pt})),n.d(e,"never",(function(){return It})),n.d(e,"AnyType",(function(){return Rt})),n.d(e,"any",(function(){return Dt})),n.d(e,"Dictionary",(function(){return Nt})),n.d(e,"ObjectType",(function(){return Bt})),n.d(e,"object",(function(){return Lt})),n.d(e,"refinement",(function(){return jt})),n.d(e,"Integer",(function(){return Ft})),n.d(e,"dictionary",(function(){return zt})),n.d(e,"StrictType",(function(){return Vt})),n.d(e,"clean",(function(){return Ut})),n.d(e,"alias",(function(){return Gt})),n.d(e,"emptyTags",(function(){return qt})),n.d(e,"getTags",(function(){return Zt})),n.d(e,"getIndex",(function(){return Jt}));function r(t){return{_tag:"Left",left:t}}function i(t){return{_tag:"Right",right:t}}function o(t){switch(t._tag){case"Left":return!0;case"Right":return!1}}var a,s=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},f=function(){function t(t,e,n,r){this.name=t,this.is=e,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return t.prototype.pipe=function(e,n){var r=this;return void 0===n&&(n="pipe("+this.name+", "+e.name+")"),new t(n,e.is,(function(t,n){var i=r.validate(t,n);return o(i)?i:e.validate(i.right,n)}),this.encode===h&&e.encode===h?h:function(t){return r.encode(e.encode(t))})},t.prototype.asDecoder=function(){return this},t.prototype.asEncoder=function(){return this},t.prototype.decode=function(t){return this.validate(t,[{key:"",type:this,actual:t}])},t}(),h=function(t){return t},l=function(t){return t.displayName||t.name||"<function"+t.length+">"},d=function(t,e){return{key:t,type:e}},p=function(t,e,n,r){for(var i=t.length,o=Array(i+1),a=0;a<i;a++)o[a]=t[a];return o[i]={key:e,type:n,actual:r},o},m=r,y=function(t,e,n){return m([{value:t,context:e,message:n}])},g=i,v=function(t,e){for(var n=e.length,r=0;r<n;r++)t.push(e[r])},x=function(t){function e(){var e=t.call(this,"null",(function(t){return null===t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="NullType",e}return s(e,t),e}(f),b=new x,_=function(t){function e(){var e=t.call(this,"undefined",(function(t){return void 0===t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="UndefinedType",e}return s(e,t),e}(f),w=new _,M=function(t){function e(){var e=t.call(this,"void",w.is,w.validate,h)||this;return e._tag="VoidType",e}return s(e,t),e}(f),T=new M,A=function(t){function e(){var e=t.call(this,"unknown",(function(t){return!0}),g,h)||this;return e._tag="UnknownType",e}return s(e,t),e}(f),S=new A,O=function(t){function e(){var e=t.call(this,"string",(function(t){return"string"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="StringType",e}return s(e,t),e}(f),E=new O,k=function(t){function e(){var e=t.call(this,"number",(function(t){return"number"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="NumberType",e}return s(e,t),e}(f),C=new k,P=function(t){function e(){var e=t.call(this,"bigint",(function(t){return"bigint"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="BigIntType",e}return s(e,t),e}(f),I=new P,R=function(t){function e(){var e=t.call(this,"boolean",(function(t){return"boolean"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="BooleanType",e}return s(e,t),e}(f),D=new R,N=function(t){function e(){var e=t.call(this,"UnknownArray",Array.isArray,(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="AnyArrayType",e}return s(e,t),e}(f),B=new N,L=function(t){function e(){var e=t.call(this,"UnknownRecord",(function(t){var e=Object.prototype.toString.call(t);return"[object Object]"===e||"[object Window]"===e}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="AnyDictionaryType",e}return s(e,t),e}(f),j=new L,F=function(t){function e(){var e=t.call(this,"Function",(function(t){return"function"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="FunctionType",e}return s(e,t),e}(f),z=new F,V=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i)||this;return s.type=o,s.predicate=a,s._tag="RefinementType",s}return s(e,t),e}(f),U=function(t,e,n){return jt(t,e,n)},G=U(C,(function(t){return Number.isInteger(t)}),"Int"),q=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.value=o,a._tag="LiteralType",a}return s(e,t),e}(f),H=function(t,e){void 0===e&&(e=JSON.stringify(t));var n=function(e){return e===t};return new q(e,n,(function(e,r){return n(e)?g(t):y(e,r)}),h,t)},W=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.keys=o,a._tag="KeyofType",a}return s(e,t),e}(f),Y=Object.prototype.hasOwnProperty,K=function(t,e){void 0===e&&(e=Object.keys(t).map((function(t){return JSON.stringify(t)})).join(" | "));var n=function(e){return E.is(e)&&Y.call(t,e)};return new W(e,n,(function(t,e){return n(t)?g(t):y(t,e)}),h,t)},X=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.runDefinition=o,a._tag="RecursiveType",a}return s(e,t),e}(f);Object.defineProperty(X.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var $=function(t,e){var n,r=function(){return n||((n=e(i)).name=t),n},i=new X(t,(function(t){return r().is(t)}),(function(t,e){return r().validate(t,e)}),(function(t){return r().encode(t)}),r);return i},Z=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ArrayType",a}return s(e,t),e}(f),J=function(t,e){return void 0===e&&(e="Array<"+t.name+">"),new Z(e,(function(e){return B.is(e)&&e.every(t.is)}),(function(e,n){var r=B.validate(e,n);if(o(r))return r;for(var i=r.right,a=i.length,s=i,u=[],c=0;c<a;c++){var f=i[c],h=t.validate(f,p(n,String(c),t,f));if(o(h))v(u,h.left);else{var l=h.right;l!==f&&(s===i&&(s=i.slice()),s[c]=l)}}return u.length>0?m(u):g(s)}),t.encode===h?h:function(e){return e.map(t.encode)},t)},Q=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="InterfaceType",a}return s(e,t),e}(f),tt=function(t){return Object.keys(t).map((function(e){return e+": "+t[e].name})).join(", ")},et=function(t){for(var e=0;e<t.length;e++)if(t[e].encode!==h)return!1;return!0},nt=function(t){return"{ "+tt(t)+" }"},rt=function(t,e){void 0===e&&(e=nt(t));var n=Object.keys(t),r=n.map((function(e){return t[e]})),i=n.length;return new Q(e,(function(t){if(j.is(t)){for(var e=0;e<i;e++){var o=n[e],a=t[o];if(void 0===a&&!Y.call(t,o)||!r[e].is(a))return!1}return!0}return!1}),(function(t,e){var a=j.validate(t,e);if(o(a))return a;for(var s=a.right,c=s,f=[],h=0;h<i;h++){var l=n[h],d=c[l],y=r[h],x=y.validate(d,p(e,l,y,d));if(o(x))v(f,x.left);else{var b=x.right;(b!==d||void 0===b&&!Y.call(c,l))&&(c===s&&(c=u({},s)),c[l]=b)}}return f.length>0?m(f):g(c)}),et(r)?h:function(t){for(var e=u({},t),o=0;o<i;o++){var a=n[o],s=r[o].encode;s!==h&&(e[a]=s(t[a]))}return e},t)},it=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="PartialType",a}return s(e,t),e}(f),ot=function(t){return"Partial<"+t+">"},at=function(t,e){void 0===e&&(e=ot(nt(t)));var n=Object.keys(t),r=n.map((function(e){return t[e]})),i=n.length;return new it(e,(function(e){if(j.is(e)){for(var r=0;r<i;r++){var o=n[r],a=e[o];if(void 0!==a&&!t[o].is(a))return!1}return!0}return!1}),(function(e,r){var a=j.validate(e,r);if(o(a))return a;for(var s=a.right,c=s,f=[],h=0;h<i;h++){var l=n[h],d=c[l],y=t[l],x=y.validate(d,p(r,l,y,d));if(o(x))void 0!==d&&v(f,x.left);else{var b=x.right;b!==d&&(c===s&&(c=u({},s)),c[l]=b)}}return f.length>0?m(f):g(c)}),et(r)?h:function(t){for(var e=u({},t),o=0;o<i;o++){var a=n[o],s=t[a];void 0!==s&&(e[a]=r[o].encode(s))}return e},t)},st=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i)||this;return s.domain=o,s.codomain=a,s._tag="DictionaryType",s}return s(e,t),e}(f);function ut(t){var e;if(Yt(t)){var n=t.value;if(E.is(n))return(e={})[n]=null,e}else{if("KeyofType"===t._tag)return t.keys;if(Xt(t)){var r=t.types.map((function(t){return ut(t)}));return r.some(w.is)?void 0:Object.assign.apply(Object,c([{}],r))}}}function ct(t,e,n){var r=ut(t);return r?function(t,e,n,r){void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }");var i=t.length;return new st(r,(function(e){return j.is(e)&&t.every((function(t){return n.is(e[t])}))}),(function(e,r){var a=j.validate(e,r);if(o(a))return a;for(var s=a.right,u={},c=[],f=!1,h=0;h<i;h++){var l=t[h],d=s[l],y=n.validate(d,p(r,l,n,d));if(o(y))v(c,y.left);else{var x=y.right;f=f||x!==d,u[l]=x}}return c.length>0?m(c):g(f||Object.keys(s).length!==i?u:s)}),n.encode===h?h:function(e){for(var r={},o=0;o<i;o++){var a=t[o];r[a]=n.encode(e[a])}return r},e,n)}(Object.keys(r),t,e,n):function(t,e,n){return void 0===n&&(n="{ [K in "+t.name+"]: "+e.name+" }"),new st(n,(function(n){return j.is(n)?Object.keys(n).every((function(r){return t.is(r)&&e.is(n[r])})):Wt(e)&&Array.isArray(n)}),(function(n,r){if(j.is(n)){for(var i={},a=[],s=Object.keys(n),u=s.length,c=!1,f=0;f<u;f++){var h=s[f],l=n[h],d=t.validate(h,p(r,h,t,h));if(o(d))v(a,d.left);else{var x=d.right;c=c||x!==h,h=x;var b=e.validate(l,p(r,h,e,l));if(o(b))v(a,b.left);else{var _=b.right;c=c||_!==l,i[h]=_}}}return a.length>0?m(a):g(c?i:n)}return Wt(e)&&Array.isArray(n)?g(n):y(n,r)}),t.encode===h&&e.encode===h?h:function(n){for(var r={},i=Object.keys(n),o=i.length,a=0;a<o;a++){var s=i[a];r[String(t.encode(s))]=e.encode(n[s])}return r},t,e)}(t,e,n)}var ft=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="UnionType",a}return s(e,t),e}(f),ht=function(t){return"("+t.map((function(t){return t.name})).join(" | ")+")"},lt=function(t,e){void 0===e&&(e=ht(t));var n=Jt(t);if(void 0!==n&&t.length>0){var r=n[0],i=n[1],a=i.length,s=function(t){for(var e=0;e<a;e++)if(-1!==i[e].indexOf(t))return e};return new Mt(e,(function(e){if(j.is(e)){var n=s(e[r]);return void 0!==n&&t[n].is(e)}return!1}),(function(e,n){var i=j.validate(e,n);if(o(i))return i;var a=i.right,u=s(a[r]);if(void 0===u)return y(e,n);var c=t[u];return c.validate(a,p(n,String(u),c,a))}),et(t)?h:function(n){var i=s(n[r]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+e);return t[i].encode(n)},t,r)}return new ft(e,(function(e){return t.some((function(t){return t.is(e)}))}),(function(e,n){for(var r=[],i=0;i<t.length;i++){var a=t[i],s=a.validate(e,p(n,String(i),a,e));if(!o(s))return g(s.right);v(r,s.left)}return m(r)}),et(t)?h:function(n){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.is(n))return o.encode(n)}throw new Error("no codec found to encode value in union type "+e)},t)},dt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="IntersectionType",a}return s(e,t),e}(f),pt=function(t,e){for(var n=!0,r=!0,i=0,o=e;i<o.length;i++){(c=o[i])!==t&&(n=!1),j.is(c)&&(r=!1)}if(n)return t;if(r)return e[e.length-1];for(var a={},s=0,u=e;s<u.length;s++){var c=u[s];for(var f in c)c[f]===t[f]&&a.hasOwnProperty(f)||(a[f]=c[f])}return a};function mt(t,e){void 0===e&&(e="("+t.map((function(t){return t.name})).join(" & ")+")");var n=t.length;return new dt(e,(function(e){return t.every((function(t){return t.is(e)}))}),0===t.length?g:function(e,r){for(var i=[],a=[],s=0;s<n;s++){var u=t[s],c=u.validate(e,p(r,String(s),u,e));o(c)?v(a,c.left):i.push(c.right)}return a.length>0?m(a):g(pt(e,i))},0===t.length?h:function(e){return pt(e,t.map((function(t){return t.encode(e)})))},t)}var yt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="TupleType",a}return s(e,t),e}(f);function gt(t,e){void 0===e&&(e="["+t.map((function(t){return t.name})).join(", ")+"]");var n=t.length;return new yt(e,(function(e){return B.is(e)&&e.length===n&&t.every((function(t,n){return t.is(e[n])}))}),(function(e,r){var i=B.validate(e,r);if(o(i))return i;for(var a=i.right,s=a.length>n?a.slice(0,n):a,u=[],c=0;c<n;c++){var f=a[c],h=t[c],l=h.validate(f,p(r,String(c),h,f));if(o(l))v(u,l.left);else{var d=l.right;d!==f&&(s===a&&(s=a.slice()),s[c]=d)}}return u.length>0?m(u):g(s)}),et(t)?h:function(e){return t.map((function(t,n){return t.encode(e[n])}))},t)}var vt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ReadonlyType",a}return s(e,t),e}(f),xt=function(t,e){return void 0===e&&(e="Readonly<"+t.name+">"),new vt(e,t.is,(function(e,n){var r=t.validate(e,n);return o(r)?r:i(r.right)}),t.encode===h?h:t.encode,t)},bt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ReadonlyArrayType",a}return s(e,t),e}(f),_t=function(t,e){void 0===e&&(e="ReadonlyArray<"+t.name+">");var n=J(t);return new bt(e,n.is,(function(t,e){var r=n.validate(t,e);return o(r)?r:i(r.right)}),n.encode,t)},wt=function(t,e){return Et(rt(t),e)},Mt=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i,o)||this;return s.tag=a,s}return s(e,t),e}(ft),Tt=function(t,e,n){void 0===n&&(n=ht(e));var r=lt(e,n);return r instanceof Mt?r:(console.warn("[io-ts] Cannot build a tagged union for "+n+", returning a de-optimized union"),new Mt(n,r.is,r.validate,r.encode,e,t))},At=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ExactType",a}return s(e,t),e}(f),St=function(t){switch(t._tag){case"RefinementType":case"ReadonlyType":return St(t.type);case"InterfaceType":case"StrictType":case"PartialType":return t.props;case"IntersectionType":return t.types.reduce((function(t,e){return Object.assign(t,St(e))}),{})}},Ot=function(t,e){for(var n=Object.getOwnPropertyNames(t),r=!1,i={},o=0;o<n.length;o++){var a=n[o];Y.call(e,a)?i[a]=t[a]:r=!0}return r?i:t},Et=function(t,e){void 0===e&&(e=function(t){return Kt(t)?"{| "+tt(t.props)+" |}":function(t){return"PartialType"===t._tag}(t)?ot("{| "+tt(t.props)+" |}"):"Exact<"+t.name+">"}(t));var n=St(t);return new At(e,t.is,(function(e,r){var a=j.validate(e,r);if(o(a))return a;var s=t.validate(e,r);return o(s)?s:i(Ot(s.right,n))}),(function(e){return t.encode(Ot(e,n))}),t)},kt=function(t,e){return{value:t,context:e}},Ct=function(t){return[{key:"",type:t}]},Pt=function(t){function e(){var e=t.call(this,"never",(function(t){return!1}),(function(t,e){return y(t,e)}),(function(){throw new Error("cannot encode never")}))||this;return e._tag="NeverType",e}return s(e,t),e}(f),It=new Pt,Rt=function(t){function e(){var e=t.call(this,"any",(function(t){return!0}),g,h)||this;return e._tag="AnyType",e}return s(e,t),e}(f),Dt=new Rt,Nt=j,Bt=function(t){function e(){var e=t.call(this,"object",(function(t){return null!==t&&"object"==typeof t}),(function(t,n){return e.is(t)?g(t):y(t,n)}),h)||this;return e._tag="ObjectType",e}return s(e,t),e}(f),Lt=new Bt;function jt(t,e,n){return void 0===n&&(n="("+t.name+" | "+l(e)+")"),new V(n,(function(n){return t.is(n)&&e(n)}),(function(n,r){var i=t.validate(n,r);if(o(i))return i;var a=i.right;return e(a)?g(a):y(a,r)}),t.encode,t,e)}var Ft=jt(C,Number.isInteger,"Integer"),zt=ct,Vt=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="StrictType",a}return s(e,t),e}(f);function Ut(t){return t}function Gt(t){return function(){return t}}var qt={};function Ht(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];-1!==e.indexOf(o)&&n.push(o)}return n}function Wt(t){return"AnyType"===t._tag}function Yt(t){return"LiteralType"===t._tag}function Kt(t){return"InterfaceType"===t._tag}function Xt(t){return"UnionType"===t._tag}var $t=[];function Zt(t){if(-1!==$t.indexOf(t))return qt;if(Kt(t)||function(t){return"StrictType"===t._tag}(t)){var e=qt;for(var n in t.props){var r=t.props[n];Yt(r)&&(e===qt&&(e={}),e[n]=[r.value])}return e}if(function(t){return"ExactType"===t._tag}(t)||function(t){return"RefinementType"===t._tag}(t))return Zt(t.type);if(function(t){return"IntersectionType"===t._tag}(t))return t.types.reduce((function(t,e){return function(t,e){if(t===qt)return e;if(e===qt)return t;var n=Object.assign({},t);for(var r in e)if(t.hasOwnProperty(r)){var i=Ht(t[r],e[r]);if(!(i.length>0)){n=qt;break}n[r]=i}else n[r]=e[r];return n}(t,Zt(e))}),qt);if(Xt(t))return t.types.slice(1).reduce((function(t,e){return function(t,e){if(t===qt||e===qt)return qt;var n=qt;for(var r in t){if(e.hasOwnProperty(r))0===Ht(t[r],e[r]).length&&(n===qt&&(n={}),n[r]=t[r].concat(e[r]))}return n}(t,Zt(e))}),Zt(t.types[0]));if(function(t){return"RecursiveType"===t._tag}(t)){$t.push(t);var i=Zt(t.type);return $t.pop(),i}return qt}function Jt(t){var e=Zt(t[0]),n=Object.keys(e),r=t.length,i=function(n){for(var i=e[n].slice(),o=[e[n]],a=1;a<r;a++){var s=Zt(t[a])[n];if(void 0===s)return"continue-keys";if(s.some((function(t){return-1!==i.indexOf(t)})))return"continue-keys";i.push.apply(i,s),o.push(s)}return{value:[n,o]}};t:for(var o=0,a=n;o<a.length;o++){var s=i(a[o]);if("object"==typeof s)return s.value;switch(s){case"continue-keys":continue t}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(42),o=n(68);function a(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(t,e){return function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));var r,i=n(11),o=n(37),a=n(46);r||(r={});var s=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(a.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return i})),n.d(e,"mat2d",(function(){return o})),n.d(e,"mat3",(function(){return a})),n.d(e,"mat4",(function(){return s})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return h})),n.d(e,"vec2",(function(){return l})),n.d(e,"vec3",(function(){return u})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return d})),n.d(r,"ARRAY_TYPE",(function(){return p})),n.d(r,"RANDOM",(function(){return m})),n.d(r,"setMatrixArrayType",(function(){return y})),n.d(r,"toRadian",(function(){return v})),n.d(r,"equals",(function(){return x}));var i={};n.r(i),n.d(i,"create",(function(){return b})),n.d(i,"clone",(function(){return _})),n.d(i,"copy",(function(){return w})),n.d(i,"identity",(function(){return M})),n.d(i,"fromValues",(function(){return T})),n.d(i,"set",(function(){return A})),n.d(i,"transpose",(function(){return S})),n.d(i,"invert",(function(){return O})),n.d(i,"adjoint",(function(){return E})),n.d(i,"determinant",(function(){return k})),n.d(i,"multiply",(function(){return C})),n.d(i,"rotate",(function(){return P})),n.d(i,"scale",(function(){return I})),n.d(i,"fromRotation",(function(){return R})),n.d(i,"fromScaling",(function(){return D})),n.d(i,"str",(function(){return N})),n.d(i,"frob",(function(){return B})),n.d(i,"LDU",(function(){return L})),n.d(i,"add",(function(){return j})),n.d(i,"subtract",(function(){return F})),n.d(i,"exactEquals",(function(){return z})),n.d(i,"equals",(function(){return V})),n.d(i,"multiplyScalar",(function(){return U})),n.d(i,"multiplyScalarAndAdd",(function(){return G})),n.d(i,"mul",(function(){return q})),n.d(i,"sub",(function(){return H}));var o={};n.r(o),n.d(o,"create",(function(){return W})),n.d(o,"clone",(function(){return Y})),n.d(o,"copy",(function(){return K})),n.d(o,"identity",(function(){return X})),n.d(o,"fromValues",(function(){return $})),n.d(o,"set",(function(){return Z})),n.d(o,"invert",(function(){return J})),n.d(o,"determinant",(function(){return Q})),n.d(o,"multiply",(function(){return tt})),n.d(o,"rotate",(function(){return et})),n.d(o,"scale",(function(){return nt})),n.d(o,"translate",(function(){return rt})),n.d(o,"fromRotation",(function(){return it})),n.d(o,"fromScaling",(function(){return ot})),n.d(o,"fromTranslation",(function(){return at})),n.d(o,"str",(function(){return st})),n.d(o,"frob",(function(){return ut})),n.d(o,"add",(function(){return ct})),n.d(o,"subtract",(function(){return ft})),n.d(o,"multiplyScalar",(function(){return ht})),n.d(o,"multiplyScalarAndAdd",(function(){return lt})),n.d(o,"exactEquals",(function(){return dt})),n.d(o,"equals",(function(){return pt})),n.d(o,"mul",(function(){return mt})),n.d(o,"sub",(function(){return yt}));var a={};n.r(a),n.d(a,"create",(function(){return gt})),n.d(a,"fromMat4",(function(){return vt})),n.d(a,"clone",(function(){return xt})),n.d(a,"copy",(function(){return bt})),n.d(a,"fromValues",(function(){return _t})),n.d(a,"set",(function(){return wt})),n.d(a,"identity",(function(){return Mt})),n.d(a,"transpose",(function(){return Tt})),n.d(a,"invert",(function(){return At})),n.d(a,"adjoint",(function(){return St})),n.d(a,"determinant",(function(){return Ot})),n.d(a,"multiply",(function(){return Et})),n.d(a,"translate",(function(){return kt})),n.d(a,"rotate",(function(){return Ct})),n.d(a,"scale",(function(){return Pt})),n.d(a,"fromTranslation",(function(){return It})),n.d(a,"fromRotation",(function(){return Rt})),n.d(a,"fromScaling",(function(){return Dt})),n.d(a,"fromMat2d",(function(){return Nt})),n.d(a,"fromQuat",(function(){return Bt})),n.d(a,"normalFromMat4",(function(){return Lt})),n.d(a,"projection",(function(){return jt})),n.d(a,"str",(function(){return Ft})),n.d(a,"frob",(function(){return zt})),n.d(a,"add",(function(){return Vt})),n.d(a,"subtract",(function(){return Ut})),n.d(a,"multiplyScalar",(function(){return Gt})),n.d(a,"multiplyScalarAndAdd",(function(){return qt})),n.d(a,"exactEquals",(function(){return Ht})),n.d(a,"equals",(function(){return Wt})),n.d(a,"mul",(function(){return Yt})),n.d(a,"sub",(function(){return Kt}));var s={};n.r(s),n.d(s,"create",(function(){return Xt})),n.d(s,"clone",(function(){return $t})),n.d(s,"copy",(function(){return Zt})),n.d(s,"fromValues",(function(){return Jt})),n.d(s,"set",(function(){return Qt})),n.d(s,"identity",(function(){return te})),n.d(s,"transpose",(function(){return ee})),n.d(s,"invert",(function(){return ne})),n.d(s,"adjoint",(function(){return re})),n.d(s,"determinant",(function(){return ie})),n.d(s,"multiply",(function(){return oe})),n.d(s,"translate",(function(){return ae})),n.d(s,"scale",(function(){return se})),n.d(s,"rotate",(function(){return ue})),n.d(s,"rotateX",(function(){return ce})),n.d(s,"rotateY",(function(){return fe})),n.d(s,"rotateZ",(function(){return he})),n.d(s,"fromTranslation",(function(){return le})),n.d(s,"fromScaling",(function(){return de})),n.d(s,"fromRotation",(function(){return pe})),n.d(s,"fromXRotation",(function(){return me})),n.d(s,"fromYRotation",(function(){return ye})),n.d(s,"fromZRotation",(function(){return ge})),n.d(s,"fromRotationTranslation",(function(){return ve})),n.d(s,"fromQuat2",(function(){return xe})),n.d(s,"getTranslation",(function(){return be})),n.d(s,"getScaling",(function(){return _e})),n.d(s,"getRotation",(function(){return we})),n.d(s,"fromRotationTranslationScale",(function(){return Me})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return Te})),n.d(s,"fromQuat",(function(){return Ae})),n.d(s,"frustum",(function(){return Se})),n.d(s,"perspective",(function(){return Oe})),n.d(s,"perspectiveFromFieldOfView",(function(){return Ee})),n.d(s,"ortho",(function(){return ke})),n.d(s,"lookAt",(function(){return Ce})),n.d(s,"targetTo",(function(){return Pe})),n.d(s,"str",(function(){return Ie})),n.d(s,"frob",(function(){return Re})),n.d(s,"add",(function(){return De})),n.d(s,"subtract",(function(){return Ne})),n.d(s,"multiplyScalar",(function(){return Be})),n.d(s,"multiplyScalarAndAdd",(function(){return Le})),n.d(s,"exactEquals",(function(){return je})),n.d(s,"equals",(function(){return Fe})),n.d(s,"mul",(function(){return ze})),n.d(s,"sub",(function(){return Ve}));var u={};n.r(u),n.d(u,"create",(function(){return Ue})),n.d(u,"clone",(function(){return Ge})),n.d(u,"length",(function(){return qe})),n.d(u,"fromValues",(function(){return He})),n.d(u,"copy",(function(){return We})),n.d(u,"set",(function(){return Ye})),n.d(u,"add",(function(){return Ke})),n.d(u,"subtract",(function(){return Xe})),n.d(u,"multiply",(function(){return $e})),n.d(u,"divide",(function(){return Ze})),n.d(u,"ceil",(function(){return Je})),n.d(u,"floor",(function(){return Qe})),n.d(u,"min",(function(){return tn})),n.d(u,"max",(function(){return en})),n.d(u,"round",(function(){return nn})),n.d(u,"scale",(function(){return rn})),n.d(u,"scaleAndAdd",(function(){return on})),n.d(u,"distance",(function(){return an})),n.d(u,"squaredDistance",(function(){return sn})),n.d(u,"squaredLength",(function(){return un})),n.d(u,"negate",(function(){return cn})),n.d(u,"inverse",(function(){return fn})),n.d(u,"normalize",(function(){return hn})),n.d(u,"dot",(function(){return ln})),n.d(u,"cross",(function(){return dn})),n.d(u,"lerp",(function(){return pn})),n.d(u,"hermite",(function(){return mn})),n.d(u,"bezier",(function(){return yn})),n.d(u,"random",(function(){return gn})),n.d(u,"transformMat4",(function(){return vn})),n.d(u,"transformMat3",(function(){return xn})),n.d(u,"transformQuat",(function(){return bn})),n.d(u,"rotateX",(function(){return _n})),n.d(u,"rotateY",(function(){return wn})),n.d(u,"rotateZ",(function(){return Mn})),n.d(u,"angle",(function(){return Tn})),n.d(u,"zero",(function(){return An})),n.d(u,"str",(function(){return Sn})),n.d(u,"exactEquals",(function(){return On})),n.d(u,"equals",(function(){return En})),n.d(u,"sub",(function(){return Cn})),n.d(u,"mul",(function(){return Pn})),n.d(u,"div",(function(){return In})),n.d(u,"dist",(function(){return Rn})),n.d(u,"sqrDist",(function(){return Dn})),n.d(u,"len",(function(){return Nn})),n.d(u,"sqrLen",(function(){return Bn})),n.d(u,"forEach",(function(){return Ln}));var c={};n.r(c),n.d(c,"create",(function(){return jn})),n.d(c,"clone",(function(){return Fn})),n.d(c,"fromValues",(function(){return zn})),n.d(c,"copy",(function(){return Vn})),n.d(c,"set",(function(){return Un})),n.d(c,"add",(function(){return Gn})),n.d(c,"subtract",(function(){return qn})),n.d(c,"multiply",(function(){return Hn})),n.d(c,"divide",(function(){return Wn})),n.d(c,"ceil",(function(){return Yn})),n.d(c,"floor",(function(){return Kn})),n.d(c,"min",(function(){return Xn})),n.d(c,"max",(function(){return $n})),n.d(c,"round",(function(){return Zn})),n.d(c,"scale",(function(){return Jn})),n.d(c,"scaleAndAdd",(function(){return Qn})),n.d(c,"distance",(function(){return tr})),n.d(c,"squaredDistance",(function(){return er})),n.d(c,"length",(function(){return nr})),n.d(c,"squaredLength",(function(){return rr})),n.d(c,"negate",(function(){return ir})),n.d(c,"inverse",(function(){return or})),n.d(c,"normalize",(function(){return ar})),n.d(c,"dot",(function(){return sr})),n.d(c,"cross",(function(){return ur})),n.d(c,"lerp",(function(){return cr})),n.d(c,"random",(function(){return fr})),n.d(c,"transformMat4",(function(){return hr})),n.d(c,"transformQuat",(function(){return lr})),n.d(c,"zero",(function(){return dr})),n.d(c,"str",(function(){return pr})),n.d(c,"exactEquals",(function(){return mr})),n.d(c,"equals",(function(){return yr})),n.d(c,"sub",(function(){return gr})),n.d(c,"mul",(function(){return vr})),n.d(c,"div",(function(){return xr})),n.d(c,"dist",(function(){return br})),n.d(c,"sqrDist",(function(){return _r})),n.d(c,"len",(function(){return wr})),n.d(c,"sqrLen",(function(){return Mr})),n.d(c,"forEach",(function(){return Tr}));var f={};n.r(f),n.d(f,"create",(function(){return Ar})),n.d(f,"identity",(function(){return Sr})),n.d(f,"setAxisAngle",(function(){return Or})),n.d(f,"getAxisAngle",(function(){return Er})),n.d(f,"getAngle",(function(){return kr})),n.d(f,"multiply",(function(){return Cr})),n.d(f,"rotateX",(function(){return Pr})),n.d(f,"rotateY",(function(){return Ir})),n.d(f,"rotateZ",(function(){return Rr})),n.d(f,"calculateW",(function(){return Dr})),n.d(f,"exp",(function(){return Nr})),n.d(f,"ln",(function(){return Br})),n.d(f,"pow",(function(){return Lr})),n.d(f,"slerp",(function(){return jr})),n.d(f,"random",(function(){return Fr})),n.d(f,"invert",(function(){return zr})),n.d(f,"conjugate",(function(){return Vr})),n.d(f,"fromMat3",(function(){return Ur})),n.d(f,"fromEuler",(function(){return Gr})),n.d(f,"str",(function(){return qr})),n.d(f,"clone",(function(){return Zr})),n.d(f,"fromValues",(function(){return Jr})),n.d(f,"copy",(function(){return Qr})),n.d(f,"set",(function(){return ti})),n.d(f,"add",(function(){return ei})),n.d(f,"mul",(function(){return ni})),n.d(f,"scale",(function(){return ri})),n.d(f,"dot",(function(){return ii})),n.d(f,"lerp",(function(){return oi})),n.d(f,"length",(function(){return ai})),n.d(f,"len",(function(){return si})),n.d(f,"squaredLength",(function(){return ui})),n.d(f,"sqrLen",(function(){return ci})),n.d(f,"normalize",(function(){return fi})),n.d(f,"exactEquals",(function(){return hi})),n.d(f,"equals",(function(){return li})),n.d(f,"rotationTo",(function(){return di})),n.d(f,"sqlerp",(function(){return pi})),n.d(f,"setAxes",(function(){return mi}));var h={};n.r(h),n.d(h,"create",(function(){return yi})),n.d(h,"clone",(function(){return gi})),n.d(h,"fromValues",(function(){return vi})),n.d(h,"fromRotationTranslationValues",(function(){return xi})),n.d(h,"fromRotationTranslation",(function(){return bi})),n.d(h,"fromTranslation",(function(){return _i})),n.d(h,"fromRotation",(function(){return wi})),n.d(h,"fromMat4",(function(){return Mi})),n.d(h,"copy",(function(){return Ti})),n.d(h,"identity",(function(){return Ai})),n.d(h,"set",(function(){return Si})),n.d(h,"getReal",(function(){return Oi})),n.d(h,"getDual",(function(){return Ei})),n.d(h,"setReal",(function(){return ki})),n.d(h,"setDual",(function(){return Ci})),n.d(h,"getTranslation",(function(){return Pi})),n.d(h,"translate",(function(){return Ii})),n.d(h,"rotateX",(function(){return Ri})),n.d(h,"rotateY",(function(){return Di})),n.d(h,"rotateZ",(function(){return Ni})),n.d(h,"rotateByQuatAppend",(function(){return Bi})),n.d(h,"rotateByQuatPrepend",(function(){return Li})),n.d(h,"rotateAroundAxis",(function(){return ji})),n.d(h,"add",(function(){return Fi})),n.d(h,"multiply",(function(){return zi})),n.d(h,"mul",(function(){return Vi})),n.d(h,"scale",(function(){return Ui})),n.d(h,"dot",(function(){return Gi})),n.d(h,"lerp",(function(){return qi})),n.d(h,"invert",(function(){return Hi})),n.d(h,"conjugate",(function(){return Wi})),n.d(h,"length",(function(){return Yi})),n.d(h,"len",(function(){return Ki})),n.d(h,"squaredLength",(function(){return Xi})),n.d(h,"sqrLen",(function(){return $i})),n.d(h,"normalize",(function(){return Zi})),n.d(h,"str",(function(){return Ji})),n.d(h,"exactEquals",(function(){return Qi})),n.d(h,"equals",(function(){return to}));var l={};n.r(l),n.d(l,"create",(function(){return eo})),n.d(l,"clone",(function(){return no})),n.d(l,"fromValues",(function(){return ro})),n.d(l,"copy",(function(){return io})),n.d(l,"set",(function(){return oo})),n.d(l,"add",(function(){return ao})),n.d(l,"subtract",(function(){return so})),n.d(l,"multiply",(function(){return uo})),n.d(l,"divide",(function(){return co})),n.d(l,"ceil",(function(){return fo})),n.d(l,"floor",(function(){return ho})),n.d(l,"min",(function(){return lo})),n.d(l,"max",(function(){return po})),n.d(l,"round",(function(){return mo})),n.d(l,"scale",(function(){return yo})),n.d(l,"scaleAndAdd",(function(){return go})),n.d(l,"distance",(function(){return vo})),n.d(l,"squaredDistance",(function(){return xo})),n.d(l,"length",(function(){return bo})),n.d(l,"squaredLength",(function(){return _o})),n.d(l,"negate",(function(){return wo})),n.d(l,"inverse",(function(){return Mo})),n.d(l,"normalize",(function(){return To})),n.d(l,"dot",(function(){return Ao})),n.d(l,"cross",(function(){return So})),n.d(l,"lerp",(function(){return Oo})),n.d(l,"random",(function(){return Eo})),n.d(l,"transformMat2",(function(){return ko})),n.d(l,"transformMat2d",(function(){return Co})),n.d(l,"transformMat3",(function(){return Po})),n.d(l,"transformMat4",(function(){return Io})),n.d(l,"rotate",(function(){return Ro})),n.d(l,"angle",(function(){return Do})),n.d(l,"zero",(function(){return No})),n.d(l,"str",(function(){return Bo})),n.d(l,"exactEquals",(function(){return Lo})),n.d(l,"equals",(function(){return jo})),n.d(l,"len",(function(){return Fo})),n.d(l,"sub",(function(){return zo})),n.d(l,"mul",(function(){return Vo})),n.d(l,"div",(function(){return Uo})),n.d(l,"dist",(function(){return Go})),n.d(l,"sqrDist",(function(){return qo})),n.d(l,"sqrLen",(function(){return Ho})),n.d(l,"forEach",(function(){return Wo}));var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function y(t){p=t}var g=Math.PI/180;function v(t){return t*g}function x(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function b(){var t=new p(4);return p!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function _(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function T(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function A(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function S(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function E(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function k(t){return t[0]*t[3]-t[2]*t[1]}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function R(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function D(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function N(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function B(t){return Math.hypot(t[0],t[1],t[2],t[3])}function L(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function j(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function F(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function V(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=d*Math.max(1,Math.abs(o),Math.abs(c))}function U(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function G(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var q=C,H=F;function W(){var t=new p(6);return p!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function K(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function $(t,e,n,r,i,o){var a=new p(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function Z(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function J(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null}function Q(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],h=n[2],l=n[3],d=n[4],p=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*h+o*l,t[3]=i*h+a*l,t[4]=r*d+o*p+s,t[5]=i*d+a*p+u,t}function et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ht(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function lt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],c=e[1],f=e[2],h=e[3],l=e[4],p=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))}var mt=tt,yt=ft;function gt(){var t=new p(9);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function xt(t){var e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _t(t,e,n,r,i,o,a,s,u){var c=new p(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function wt(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function Mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Tt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function At(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=f*a-s*c,l=-f*o+s*u,d=c*o-a*u,p=n*h+r*l+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-f*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=l*p,t[4]=(f*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-c*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}function St(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t}function Ot(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)}function Et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=n[0],d=n[1],p=n[2],m=n[3],y=n[4],g=n[5],v=n[6],x=n[7],b=n[8];return t[0]=l*r+d*a+p*c,t[1]=l*i+d*s+p*f,t[2]=l*o+d*u+p*h,t[3]=m*r+y*a+g*c,t[4]=m*i+y*s+g*f,t[5]=m*o+y*u+g*h,t[6]=v*r+x*a+b*c,t[7]=v*i+x*s+b*f,t[8]=v*o+x*u+b*h,t}function kt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l*r+d*a+c,t[7]=l*i+d*s+f,t[8]=l*o+d*u+h,t}function Ct(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=Math.sin(n),d=Math.cos(n);return t[0]=d*r+l*a,t[1]=d*i+l*s,t[2]=d*o+l*u,t[3]=d*a-l*r,t[4]=d*s-l*i,t[5]=d*u-l*o,t[6]=c,t[7]=f,t[8]=h,t}function Pt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function It(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Rt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Nt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,h=r*s,l=i*a,d=i*s,p=i*u,m=o*a,y=o*s,g=o*u;return t[0]=1-h-p,t[3]=f-g,t[6]=l+y,t[1]=f+g,t[4]=1-c-p,t[7]=d-m,t[2]=l-y,t[5]=d+m,t[8]=1-c-h,t}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],p=e[12],m=e[13],y=e[14],g=e[15],v=n*s-r*a,x=n*u-i*a,b=n*c-o*a,_=r*u-i*s,w=r*c-o*s,M=i*c-o*u,T=f*m-h*p,A=f*y-l*p,S=f*g-d*p,O=h*y-l*m,E=h*g-d*m,k=l*g-d*y,C=v*k-x*E+b*O+_*S-w*A+M*T;return C?(C=1/C,t[0]=(s*k-u*E+c*O)*C,t[1]=(u*S-a*k-c*A)*C,t[2]=(a*E-s*S+c*T)*C,t[3]=(i*E-r*k-o*O)*C,t[4]=(n*k-i*S+o*A)*C,t[5]=(r*S-n*E-o*T)*C,t[6]=(m*M-y*w+g*_)*C,t[7]=(y*b-p*M-g*x)*C,t[8]=(p*w-m*b+g*v)*C,t):null}function jt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ft(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function zt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Gt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=e[0],l=e[1],p=e[2],m=e[3],y=e[4],g=e[5],v=e[6],x=e[7],b=e[8];return Math.abs(n-h)<=d*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-p)<=d*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=d*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-g)<=d*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-v)<=d*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-x)<=d*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-b)<=d*Math.max(1,Math.abs(f),Math.abs(b))}var Yt=Et,Kt=Ut;function Xt(){var t=new p(16);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function $t(t){var e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,i,o,a,s,u,c,f,h,l,d,m,y){var g=new p(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=u,g[9]=c,g[10]=f,g[11]=h,g[12]=l,g[13]=d,g[14]=m,g[15]=y,g}function Qt(t,e,n,r,i,o,a,s,u,c,f,h,l,d,p,m,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=p,t[14]=m,t[15]=y,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],p=e[12],m=e[13],y=e[14],g=e[15],v=n*s-r*a,x=n*u-i*a,b=n*c-o*a,_=r*u-i*s,w=r*c-o*s,M=i*c-o*u,T=f*m-h*p,A=f*y-l*p,S=f*g-d*p,O=h*y-l*m,E=h*g-d*m,k=l*g-d*y,C=v*k-x*E+b*O+_*S-w*A+M*T;return C?(C=1/C,t[0]=(s*k-u*E+c*O)*C,t[1]=(i*E-r*k-o*O)*C,t[2]=(m*M-y*w+g*_)*C,t[3]=(l*w-h*M-d*_)*C,t[4]=(u*S-a*k-c*A)*C,t[5]=(n*k-i*S+o*A)*C,t[6]=(y*b-p*M-g*x)*C,t[7]=(f*M-l*b+d*x)*C,t[8]=(a*E-s*S+c*T)*C,t[9]=(r*S-n*E-o*T)*C,t[10]=(p*w-m*b+g*v)*C,t[11]=(h*b-f*w-d*v)*C,t[12]=(s*A-a*O-u*T)*C,t[13]=(n*O-r*A+i*T)*C,t[14]=(m*x-p*_-y*v)*C,t[15]=(f*_-h*x+l*v)*C,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],p=e[12],m=e[13],y=e[14],g=e[15];return t[0]=s*(l*g-d*y)-h*(u*g-c*y)+m*(u*d-c*l),t[1]=-(r*(l*g-d*y)-h*(i*g-o*y)+m*(i*d-o*l)),t[2]=r*(u*g-c*y)-s*(i*g-o*y)+m*(i*c-o*u),t[3]=-(r*(u*d-c*l)-s*(i*d-o*l)+h*(i*c-o*u)),t[4]=-(a*(l*g-d*y)-f*(u*g-c*y)+p*(u*d-c*l)),t[5]=n*(l*g-d*y)-f*(i*g-o*y)+p*(i*d-o*l),t[6]=-(n*(u*g-c*y)-a*(i*g-o*y)+p*(i*c-o*u)),t[7]=n*(u*d-c*l)-a*(i*d-o*l)+f*(i*c-o*u),t[8]=a*(h*g-d*m)-f*(s*g-c*m)+p*(s*d-c*h),t[9]=-(n*(h*g-d*m)-f*(r*g-o*m)+p*(r*d-o*h)),t[10]=n*(s*g-c*m)-a*(r*g-o*m)+p*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+f*(r*c-o*s)),t[12]=-(a*(h*y-l*m)-f*(s*y-u*m)+p*(s*l-u*h)),t[13]=n*(h*y-l*m)-f*(r*y-i*m)+p*(r*l-i*h),t[14]=-(n*(s*y-u*m)-a*(r*y-i*m)+p*(r*u-i*s)),t[15]=n*(s*l-u*h)-a*(r*l-i*h)+f*(r*u-i*s),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],p=t[13],m=t[14],y=t[15];return(e*a-n*o)*(h*y-l*m)-(e*s-r*o)*(f*y-l*p)+(e*u-i*o)*(f*m-h*p)+(n*s-r*a)*(c*y-l*d)-(n*u-i*a)*(c*m-h*d)+(r*u-i*s)*(c*p-f*d)}function oe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],p=e[11],m=e[12],y=e[13],g=e[14],v=e[15],x=n[0],b=n[1],_=n[2],w=n[3];return t[0]=x*r+b*s+_*h+w*m,t[1]=x*i+b*u+_*l+w*y,t[2]=x*o+b*c+_*d+w*g,t[3]=x*a+b*f+_*p+w*v,x=n[4],b=n[5],_=n[6],w=n[7],t[4]=x*r+b*s+_*h+w*m,t[5]=x*i+b*u+_*l+w*y,t[6]=x*o+b*c+_*d+w*g,t[7]=x*a+b*f+_*p+w*v,x=n[8],b=n[9],_=n[10],w=n[11],t[8]=x*r+b*s+_*h+w*m,t[9]=x*i+b*u+_*l+w*y,t[10]=x*o+b*c+_*d+w*g,t[11]=x*a+b*f+_*p+w*v,x=n[12],b=n[13],_=n[14],w=n[15],t[12]=x*r+b*s+_*h+w*m,t[13]=x*i+b*u+_*l+w*y,t[14]=x*o+b*c+_*d+w*g,t[15]=x*a+b*f+_*p+w*v,t}function ae(t,e,n){var r,i,o,a,s,u,c,f,h,l,d,p,m=n[0],y=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=p,t[12]=r*m+s*y+h*g+e[12],t[13]=i*m+u*y+l*g+e[13],t[14]=o*m+c*y+d*g+e[14],t[15]=a*m+f*y+p*g+e[15]),t}function se(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var i,o,a,s,u,c,f,h,l,p,m,y,g,v,x,b,_,w,M,T,A,S,O,E,k=r[0],C=r[1],P=r[2],I=Math.hypot(k,C,P);return I<d?null:(k*=I=1/I,C*=I,P*=I,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],c=e[2],f=e[3],h=e[4],l=e[5],p=e[6],m=e[7],y=e[8],g=e[9],v=e[10],x=e[11],b=k*k*a+o,_=C*k*a+P*i,w=P*k*a-C*i,M=k*C*a-P*i,T=C*C*a+o,A=P*C*a+k*i,S=k*P*a+C*i,O=C*P*a-k*i,E=P*P*a+o,t[0]=s*b+h*_+y*w,t[1]=u*b+l*_+g*w,t[2]=c*b+p*_+v*w,t[3]=f*b+m*_+x*w,t[4]=s*M+h*T+y*A,t[5]=u*M+l*T+g*A,t[6]=c*M+p*T+v*A,t[7]=f*M+m*T+x*A,t[8]=s*S+h*O+y*E,t[9]=u*S+l*O+g*E,t[10]=c*S+p*O+v*E,t[11]=f*S+m*O+x*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+h*r,t[7]=u*i+l*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=h*i-s*r,t[11]=l*i-u*r,t}function fe(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-h*r,t[3]=u*i-l*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+h*i,t[11]=u*r+l*i,t}function he(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],h=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+h*r,t[3]=u*i+l*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=h*i-s*r,t[7]=l*i-u*r,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<d?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,h=r*u,l=r*c,d=i*u,p=i*c,m=o*c,y=a*s,g=a*u,v=a*c;return t[0]=1-(d+m),t[1]=h+v,t[2]=l-g,t[3]=0,t[4]=h-v,t[5]=1-(f+m),t[6]=p+y,t[7]=0,t[8]=l+g,t[9]=p-y,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function xe(t,e){var n=new p(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+f*r+u*o-c*i)/h,n[1]=2*(u*a+f*i+c*r-s*o)/h,n[2]=2*(c*a+f*o+s*i-u*r)/h):(n[0]=2*(s*a+f*r+u*o-c*i),n[1]=2*(u*a+f*i+c*r-s*o),n[2]=2*(c*a+f*o+s*i-u*r)),ve(t,e,n),t}function be(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _e(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,f),t}function we(t,e){var n=new p(3);_e(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,f=e[5]*i,h=e[6]*o,l=e[8]*r,d=e[9]*i,m=e[10]*o,y=a+f+m,g=0;return y>0?(g=2*Math.sqrt(y+1),t[3]=.25*g,t[0]=(h-d)/g,t[1]=(l-u)/g,t[2]=(s-c)/g):a>f&&a>m?(g=2*Math.sqrt(1+a-f-m),t[3]=(h-d)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(l+u)/g):f>m?(g=2*Math.sqrt(1+f-a-m),t[3]=(l-u)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(h+d)/g):(g=2*Math.sqrt(1+m-a-f),t[3]=(s-c)/g,t[0]=(l+u)/g,t[1]=(h+d)/g,t[2]=.25*g),t}function Me(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,h=i*u,l=i*c,d=i*f,p=o*c,m=o*f,y=a*f,g=s*u,v=s*c,x=s*f,b=r[0],_=r[1],w=r[2];return t[0]=(1-(p+y))*b,t[1]=(l+x)*b,t[2]=(d-v)*b,t[3]=0,t[4]=(l-x)*_,t[5]=(1-(h+y))*_,t[6]=(m+g)*_,t[7]=0,t[8]=(d+v)*w,t[9]=(m-g)*w,t[10]=(1-(h+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Te(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,h=s+s,l=o*c,d=o*f,p=o*h,m=a*f,y=a*h,g=s*h,v=u*c,x=u*f,b=u*h,_=r[0],w=r[1],M=r[2],T=i[0],A=i[1],S=i[2],O=(1-(m+g))*_,E=(d+b)*_,k=(p-x)*_,C=(d-b)*w,P=(1-(l+g))*w,I=(y+v)*w,R=(p+x)*M,D=(y-v)*M,N=(1-(l+m))*M;return t[0]=O,t[1]=E,t[2]=k,t[3]=0,t[4]=C,t[5]=P,t[6]=I,t[7]=0,t[8]=R,t[9]=D,t[10]=N,t[11]=0,t[12]=n[0]+T-(O*T+C*A+R*S),t[13]=n[1]+A-(E*T+P*A+D*S),t[14]=n[2]+S-(k*T+I*A+N*S),t[15]=1,t}function Ae(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,h=r*s,l=i*a,d=i*s,p=i*u,m=o*a,y=o*s,g=o*u;return t[0]=1-h-p,t[1]=f+g,t[2]=l-y,t[3]=0,t[4]=f-g,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=l+y,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Se(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function Oe(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function Ee(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function ke(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function Ce(t,e,n,r){var i,o,a,s,u,c,f,h,l,p,m=e[0],y=e[1],g=e[2],v=r[0],x=r[1],b=r[2],_=n[0],w=n[1],M=n[2];return Math.abs(m-_)<d&&Math.abs(y-w)<d&&Math.abs(g-M)<d?te(t):(f=m-_,h=y-w,l=g-M,i=x*(l*=p=1/Math.hypot(f,h,l))-b*(h*=p),o=b*(f*=p)-v*l,a=v*h-x*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=h*a-l*o,u=l*i-f*a,c=f*o-h*i,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=l,t[11]=0,t[12]=-(i*m+o*y+a*g),t[13]=-(s*m+u*y+c*g),t[14]=-(f*m+h*y+l*g),t[15]=1,t)}function Pe(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=i-n[0],h=o-n[1],l=a-n[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var p=u*l-c*h,m=c*f-s*l,y=s*h-u*f;return(d=p*p+m*m+y*y)>0&&(p*=d=1/Math.sqrt(d),m*=d,y*=d),t[0]=p,t[1]=m,t[2]=y,t[3]=0,t[4]=h*y-l*m,t[5]=l*p-f*y,t[6]=f*m-h*p,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Ie(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Re(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function De(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ne(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Be(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Le(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function je(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Fe(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],p=t[11],m=t[12],y=t[13],g=t[14],v=t[15],x=e[0],b=e[1],_=e[2],w=e[3],M=e[4],T=e[5],A=e[6],S=e[7],O=e[8],E=e[9],k=e[10],C=e[11],P=e[12],I=e[13],R=e[14],D=e[15];return Math.abs(n-x)<=d*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(r-b)<=d*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-w)<=d*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-M)<=d*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-T)<=d*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-A)<=d*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-S)<=d*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-O)<=d*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-E)<=d*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(l-k)<=d*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(p-C)<=d*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-P)<=d*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-I)<=d*Math.max(1,Math.abs(y),Math.abs(I))&&Math.abs(g-R)<=d*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(v-D)<=d*Math.max(1,Math.abs(v),Math.abs(D))}var ze=oe,Ve=Ne;function Ue(){var t=new p(3);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ge(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qe(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function He(t,e,n){var r=new p(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ke(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Xe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function $e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ze(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Qe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function un(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function hn(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function pn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function mn(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t}function yn(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,h=3*u*a,l=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*h+i[0]*l,t[1]=e[1]*c+n[1]*f+r[1]*h+i[1]*l,t[2]=e[2]*c+n[2]*f+r[2]*h+i[2]*l,t}function gn(t,e){e=e||1;var n=2*m()*Math.PI,r=2*m()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function vn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function xn(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function bn(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=i*c-o*u,h=o*s-r*c,l=r*u-i*s,d=i*l-o*h,p=o*f-r*l,m=r*h-i*f,y=2*a;return f*=y,h*=y,l*=y,d*=2,p*=2,m*=2,t[0]=s+f+d,t[1]=u+h+p,t[2]=c+l+m,t}function _n(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function wn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Mn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function Tn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&ln(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function An(t){return t[0]=0,t[1]=0,t[2]=0,t}function Sn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function On(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function En(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))}var kn,Cn=Xe,Pn=$e,In=Ze,Rn=an,Dn=sn,Nn=qe,Bn=un,Ln=(kn=Ue(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)kn[0]=t[a],kn[1]=t[a+1],kn[2]=t[a+2],i(kn,kn,o),t[a]=kn[0],t[a+1]=kn[1],t[a+2]=kn[2];return t});function jn(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Fn(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zn(t,e,n,r){var i=new p(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Vn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Un(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Gn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function qn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Hn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Yn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Kn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Xn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function $n(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Jn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Qn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function nr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function rr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ir(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function or(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ar(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function sr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ur(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],h=e[1],l=e[2],d=e[3];return t[0]=h*c-l*u+d*s,t[1]=-f*c+l*a-d*o,t[2]=f*u-h*a+d*i,t[3]=-f*s+h*o-l*i,t}function cr(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function fr(t,e){var n,r,i,o,a,s;e=e||1;do{a=(n=2*m()-1)*n+(r=2*m()-1)*r}while(a>=1);do{s=(i=2*m()-1)*i+(o=2*m()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function hr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function lr(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,h=c*i+u*r-a*o,l=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=f*c+d*-a+h*-u-l*-s,t[1]=h*c+d*-s+l*-a-f*-u,t[2]=l*c+d*-u+f*-s-h*-a,t[3]=e[3],t}function dr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function mr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function yr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=d*Math.max(1,Math.abs(o),Math.abs(c))}var gr=qn,vr=Hn,xr=Wn,br=tr,_r=er,wr=nr,Mr=rr,Tr=function(){var t=jn();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Ar(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Sr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Or(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Er(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function kr(t,e){var n=ii(t,e);return Math.acos(2*n*n-1)}function Cr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t}function Pr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function Ir(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function Rr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function Dr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Nr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function Br(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function Lr(t,e,n){return Br(t,e),ri(t,t,n),Nr(t,t),t}function jr(t,e,n,r){var i,o,a,s,u,c=e[0],f=e[1],h=e[2],l=e[3],p=n[0],m=n[1],y=n[2],g=n[3];return(o=c*p+f*m+h*y+l*g)<0&&(o=-o,p=-p,m=-m,y=-y,g=-g),1-o>d?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*f+u*m,t[2]=s*h+u*y,t[3]=s*l+u*g,t}function Fr(t){var e=m(),n=m(),r=m(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function zr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Vr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Ur(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function Gr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=o*u*f-a*s*c,t[1]=a*s*f+o*u*c,t[2]=a*u*c-o*s*f,t[3]=a*u*f+o*s*c,t}function qr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hr,Wr,Yr,Kr,Xr,$r,Zr=Fn,Jr=zn,Qr=Vn,ti=Un,ei=Gn,ni=Cr,ri=Jn,ii=sr,oi=cr,ai=nr,si=ai,ui=rr,ci=ui,fi=ar,hi=mr,li=yr,di=(Hr=Ue(),Wr=He(1,0,0),Yr=He(0,1,0),function(t,e,n){var r=ln(e,n);return r<-.999999?(dn(Hr,Wr,e),Nn(Hr)<1e-6&&dn(Hr,Yr,e),hn(Hr,Hr),Or(t,Hr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(dn(Hr,e,n),t[0]=Hr[0],t[1]=Hr[1],t[2]=Hr[2],t[3]=1+r,fi(t,t))}),pi=(Kr=Ar(),Xr=Ar(),function(t,e,n,r,i,o){return jr(Kr,e,i,o),jr(Xr,n,r,o),jr(t,Kr,Xr,2*o*(1-o)),t}),mi=($r=gt(),function(t,e,n,r){return $r[0]=n[0],$r[3]=n[1],$r[6]=n[2],$r[1]=r[0],$r[4]=r[1],$r[7]=r[2],$r[2]=-e[0],$r[5]=-e[1],$r[8]=-e[2],fi(t,Ur(t,$r))});function yi(){var t=new p(8);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function gi(t){var e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function vi(t,e,n,r,i,o,a,s){var u=new p(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u}function xi(t,e,n,r,i,o,a){var s=new p(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*i,c=.5*o,f=.5*a;return s[4]=u*r+c*n-f*e,s[5]=c*r+f*t-u*n,s[6]=f*r+u*e-c*t,s[7]=-u*t-c*e-f*n,s}function bi(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function _i(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function wi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Mi(t,e){var n=Ar();we(n,e);var r=new p(3);return be(r,e),bi(t,n,r),t}function Ti(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ai(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Si(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}var Oi=Qr;function Ei(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var ki=Qr;function Ci(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Pi(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t}function Ii(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],h=e[5],l=e[6],d=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+f,t[5]=a*u+o*s-r*c+h,t[6]=a*c+r*u-i*s+l,t[7]=-r*s-i*u-o*c+d,t}function Ri(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,d=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return Pr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+l*o-d*i,t[5]=l*a+p*i+d*r-h*o,t[6]=d*a+p*o+h*i-l*r,t[7]=p*a-h*r-l*i-d*o,t}function Di(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,d=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return Ir(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+l*o-d*i,t[5]=l*a+p*i+d*r-h*o,t[6]=d*a+p*o+h*i-l*r,t[7]=p*a-h*r-l*i-d*o,t}function Ni(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=s*a+f*r+u*o-c*i,l=u*a+f*i+c*r-s*o,d=c*a+f*o+s*i-u*r,p=f*a-s*r-u*i-c*o;return Rr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=h*a+p*r+l*o-d*i,t[5]=l*a+p*i+d*r-h*o,t[6]=d*a+p*o+h*i-l*r,t[7]=p*a-h*r-l*i-d*o,t}function Bi(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*o-c*i,t[1]=u*a+f*i+c*r-s*o,t[2]=c*a+f*o+s*i-u*r,t[3]=f*a-s*r-u*i-c*o,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*a+f*r+u*o-c*i,t[5]=u*a+f*i+c*r-s*o,t[6]=c*a+f*o+s*i-u*r,t[7]=f*a-s*r-u*i-c*o,t}function Li(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,s=n[4],u=n[5],c=n[6],f=n[7],t[4]=r*f+a*s+i*c-o*u,t[5]=i*f+a*u+o*s-r*c,t[6]=o*f+a*c+r*u-i*s,t[7]=a*f-r*s-i*u-o*c,t}function ji(t,e,n,r){if(Math.abs(r)<d)return Ti(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,u=o*n[2]/i,c=Math.cos(r),f=e[0],h=e[1],l=e[2],p=e[3];t[0]=f*c+p*a+h*u-l*s,t[1]=h*c+p*s+l*a-f*u,t[2]=l*c+p*u+f*s-h*a,t[3]=p*c-f*a-h*s-l*u;var m=e[4],y=e[5],g=e[6],v=e[7];return t[4]=m*c+v*a+y*u-g*s,t[5]=y*c+v*s+g*a-m*u,t[6]=g*c+v*u+m*s-y*a,t[7]=v*c-m*a-y*s-g*u,t}function Fi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function zi(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],h=e[4],l=e[5],d=e[6],p=e[7],m=n[0],y=n[1],g=n[2],v=n[3];return t[0]=r*v+a*m+i*g-o*y,t[1]=i*v+a*y+o*m-r*g,t[2]=o*v+a*g+r*y-i*m,t[3]=a*v-r*m-i*y-o*g,t[4]=r*f+a*s+i*c-o*u+h*v+p*m+l*g-d*y,t[5]=i*f+a*u+o*s-r*c+l*v+p*y+d*m-h*g,t[6]=o*f+a*c+r*u-i*s+d*v+p*g+h*y-l*m,t[7]=a*f-r*s-i*u-o*c+p*v-h*m-l*y-d*g,t}var Vi=zi;function Ui(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Gi=ii;function qi(t,e,n,r){var i=1-r;return Gi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Hi(t,e){var n=Xi(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Wi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Yi=ai,Ki=Yi,Xi=ui,$i=Xi;function Zi(t,e){var n=Xi(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],f=e[7],h=r*s+i*u+o*c+a*f;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*h)/n,t[5]=(u-i*h)/n,t[6]=(c-o*h)/n,t[7]=(f-a*h)/n}return t}function Ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Qi(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function to(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=e[0],h=e[1],l=e[2],p=e[3],m=e[4],y=e[5],g=e[6],v=e[7];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-y)<=d*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-g)<=d*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-v)<=d*Math.max(1,Math.abs(c),Math.abs(v))}function eo(){var t=new p(2);return p!=Float32Array&&(t[0]=0,t[1]=0),t}function no(t){var e=new p(2);return e[0]=t[0],e[1]=t[1],e}function ro(t,e){var n=new p(2);return n[0]=t,n[1]=e,n}function io(t,e){return t[0]=e[0],t[1]=e[1],t}function oo(t,e,n){return t[0]=e,t[1]=n,t}function ao(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function so(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function uo(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function co(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function fo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ho(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function lo(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function po(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function mo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function yo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function go(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function vo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function xo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function bo(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function _o(t){var e=t[0],n=t[1];return e*e+n*n}function wo(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Mo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function To(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Ao(t,e){return t[0]*e[0]+t[1]*e[1]}function So(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Oo(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function Eo(t,e){e=e||1;var n=2*m()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function ko(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Co(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Po(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Io(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function Ro(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function Do(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function No(t){return t[0]=0,t[1]=0,t}function Bo(t){return"vec2("+t[0]+", "+t[1]+")"}function Lo(t,e){return t[0]===e[0]&&t[1]===e[1]}function jo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))}var Fo=bo,zo=so,Vo=uo,Uo=co,Go=vo,qo=xo,Ho=_o,Wo=function(){var t=eo();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));var i=r()},function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"addExtensionsToContext",(function(){return ar})),n.d(e,"attributes",(function(){return $})),n.d(e,"bindFramebufferInfo",(function(){return Xn})),n.d(e,"bindTransformFeedbackInfo",(function(){return Tn})),n.d(e,"bindUniformBlock",(function(){return Cn})),n.d(e,"canFilter",(function(){return le})),n.d(e,"canGenerateMipmap",(function(){return he})),n.d(e,"createAttribsFromArrays",(function(){return q})),n.d(e,"createAttributeSetters",(function(){return Nn})),n.d(e,"createBufferFromArray",(function(){return K})),n.d(e,"createBufferFromTypedArray",(function(){return B})),n.d(e,"createBufferInfoFromArrays",(function(){return Y})),n.d(e,"createBuffersFromArrays",(function(){return X})),n.d(e,"createFramebufferInfo",(function(){return Yn})),n.d(e,"createProgram",(function(){return gn})),n.d(e,"createProgramFromScripts",(function(){return xn})),n.d(e,"createProgramFromSources",(function(){return bn})),n.d(e,"createProgramInfo",(function(){return Fn})),n.d(e,"createProgramInfoFromProgram",(function(){return jn})),n.d(e,"createSampler",(function(){return Se})),n.d(e,"createSamplers",(function(){return Oe})),n.d(e,"createTexture",(function(){return Ge})),n.d(e,"createTextures",(function(){return He})),n.d(e,"createTransformFeedback",(function(){return An})),n.d(e,"createTransformFeedbackInfo",(function(){return Mn})),n.d(e,"createUniformBlockInfo",(function(){return kn})),n.d(e,"createUniformBlockInfoFromProgram",(function(){return En})),n.d(e,"createUniformBlockSpecFromProgram",(function(){return Sn})),n.d(e,"createUniformSetters",(function(){return wn})),n.d(e,"createVAOAndSetAttributes",(function(){return Jn})),n.d(e,"createVAOFromBufferInfo",(function(){return Qn})),n.d(e,"createVertexArrayInfo",(function(){return Zn})),n.d(e,"draw",(function(){return Gn})),n.d(e,"drawBufferInfo",(function(){return Vn})),n.d(e,"drawObjectList",(function(){return Un})),n.d(e,"framebuffers",(function(){return $n})),n.d(e,"getArray_",(function(){return j})),n.d(e,"getBytesPerElementForInternalFormat",(function(){return ue})),n.d(e,"getContext",(function(){return ur})),n.d(e,"getFormatAndTypeForInternalFormat",(function(){return ce})),n.d(e,"getGLTypeForTypedArray",(function(){return w})),n.d(e,"getGLTypeForTypedArrayType",(function(){return M})),n.d(e,"getNumComponentsForFormat",(function(){return de})),n.d(e,"getNumComponents_",(function(){return U})),n.d(e,"getTypedArrayTypeForGLType",(function(){return T})),n.d(e,"getWebGLContext",(function(){return sr})),n.d(e,"glEnumToString",(function(){return Zt})),n.d(e,"isArrayBuffer",(function(){return A})),n.d(e,"isWebGL1",(function(){return $t})),n.d(e,"isWebGL2",(function(){return Xt})),n.d(e,"loadTextureFromUrl",(function(){return je})),n.d(e,"m4",(function(){return b})),n.d(e,"primitives",(function(){return Kt})),n.d(e,"programs",(function(){return zn})),n.d(e,"resizeCanvasToDisplaySize",(function(){return cr})),n.d(e,"resizeFramebufferInfo",(function(){return Kn})),n.d(e,"resizeTexture",(function(){return qe})),n.d(e,"setAttribInfoBufferFromArray",(function(){return H})),n.d(e,"setAttributeDefaults_",(function(){return D})),n.d(e,"setAttributePrefix",(function(){return R})),n.d(e,"setAttributes",(function(){return Bn})),n.d(e,"setBlockUniforms",(function(){return In})),n.d(e,"setBuffersAndAttributes",(function(){return Ln})),n.d(e,"setDefaultTextureColor",(function(){return ye})),n.d(e,"setDefaults",(function(){return nr})),n.d(e,"setEmptyTexture",(function(){return Ue})),n.d(e,"setSamplerParameters",(function(){return Ae})),n.d(e,"setTextureDefaults_",(function(){return ge})),n.d(e,"setTextureFilteringForSize",(function(){return Ee})),n.d(e,"setTextureFromArray",(function(){return Ve})),n.d(e,"setTextureFromElement",(function(){return Ie})),n.d(e,"setTextureParameters",(function(){return Te})),n.d(e,"setUniformBlock",(function(){return Pn})),n.d(e,"setUniforms",(function(){return Rn})),n.d(e,"setUniformsAndBindTextures",(function(){return Dn})),n.d(e,"textures",(function(){return We})),n.d(e,"typedarrays",(function(){return S})),n.d(e,"utils",(function(){return Jt})),n.d(e,"v3",(function(){return f})),n.d(e,"vertexArrays",(function(){return tr}));let r=Float32Array;function i(t,e,n){const i=new r(3);return t&&(i[0]=t),e&&(i[1]=e),n&&(i[2]=n),i}function o(t,e,n){return(n=n||new r(3))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function a(t,e,n){return(n=n||new r(3))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function s(t,e,n){n=n||new r(3);const i=t[2]*e[0]-t[0]*e[2],o=t[0]*e[1]-t[1]*e[0];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=i,n[2]=o,n}function u(t,e){e=e||new r(3);const n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.sqrt(n);return i>1e-5?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=0,e[1]=0,e[2]=0),e}function c(t,e,n){return(n=n||new r(3))[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}var f=Object.freeze({__proto__:null,add:o,copy:function(t,e){return(e=e||new r(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:i,cross:s,distance:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},distanceSq:function(t,e){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},divide:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n},divScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,n,i){return(i=i||new r(3))[0]=t[0]+n*(e[0]-t[0]),i[1]=t[1]+n*(e[1]-t[1]),i[2]=t[2]+n*(e[2]-t[2]),i},lerpV:function(t,e,n,i){return(i=i||new r(3))[0]=t[0]+n[0]*(e[0]-t[0]),i[1]=t[1]+n[1]*(e[1]-t[1]),i[2]=t[2]+n[2]*(e[2]-t[2]),i},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},max:function(t,e,n){return(n=n||new r(3))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n},min:function(t,e,n){return(n=n||new r(3))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n},mulScalar:function(t,e,n){return(n=n||new r(3))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n},multiply:c,negate:function(t,e){return(e=e||new r(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:u,setDefaultType:function(t){const e=r;return r=t,e},subtract:a});let h,l,d,p=Float32Array;function m(t,e){return(e=e||new p(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(t){return(t=t||new p(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e){e=e||new p(16);const n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],m=t[12],y=t[13],g=t[14],v=t[15],x=l*v,b=g*d,_=u*v,w=g*c,M=u*d,T=l*c,A=i*v,S=g*o,O=i*d,E=l*o,k=i*c,C=u*o,P=f*y,I=m*h,R=a*y,D=m*s,N=a*h,B=f*s,L=n*y,j=m*r,F=n*h,z=f*r,V=n*s,U=a*r,G=x*s+w*h+M*y-(b*s+_*h+T*y),q=b*r+A*h+E*y-(x*r+S*h+O*y),H=_*r+S*s+k*y-(w*r+A*s+C*y),W=T*r+O*s+C*h-(M*r+E*s+k*h),Y=1/(n*G+a*q+f*H+m*W);return e[0]=Y*G,e[1]=Y*q,e[2]=Y*H,e[3]=Y*W,e[4]=Y*(b*a+_*f+T*m-(x*a+w*f+M*m)),e[5]=Y*(x*n+S*f+O*m-(b*n+A*f+E*m)),e[6]=Y*(w*n+A*a+C*m-(_*n+S*a+k*m)),e[7]=Y*(M*n+E*a+k*f-(T*n+O*a+C*f)),e[8]=Y*(P*c+D*d+N*v-(I*c+R*d+B*v)),e[9]=Y*(I*o+L*d+z*v-(P*o+j*d+F*v)),e[10]=Y*(R*o+j*c+V*v-(D*o+L*c+U*v)),e[11]=Y*(B*o+F*c+U*d-(N*o+z*c+V*d)),e[12]=Y*(R*l+B*g+I*u-(N*g+P*u+D*l)),e[13]=Y*(F*g+P*i+j*l-(L*l+z*g+I*i)),e[14]=Y*(L*u+U*g+D*i-(V*g+R*i+j*u)),e[15]=Y*(V*l+N*i+z*u-(F*u+U*l+B*i)),e}function v(t,e,n){n=n||i();const r=e[0],o=e[1],a=e[2],s=r*t[3]+o*t[7]+a*t[11]+t[15];return n[0]=(r*t[0]+o*t[4]+a*t[8]+t[12])/s,n[1]=(r*t[1]+o*t[5]+a*t[9]+t[13])/s,n[2]=(r*t[2]+o*t[6]+a*t[10]+t[14])/s,n}function x(t,e,n){n=n||i();const r=e[0],o=e[1],a=e[2];return n[0]=r*t[0]+o*t[4]+a*t[8],n[1]=r*t[1]+o*t[5]+a*t[9],n[2]=r*t[2]+o*t[6]+a*t[10],n}var b=Object.freeze({__proto__:null,axisRotate:function(t,e,n,r){r=r||new p(16);let i=e[0],o=e[1],a=e[2];const s=Math.sqrt(i*i+o*o+a*a);i/=s,o/=s,a/=s;const u=i*i,c=o*o,f=a*a,h=Math.cos(n),l=Math.sin(n),d=1-h,m=u+(1-u)*h,y=i*o*d+a*l,g=i*a*d-o*l,v=i*o*d-a*l,x=c+(1-c)*h,b=o*a*d+i*l,_=i*a*d+o*l,w=o*a*d-i*l,M=f+(1-f)*h,T=t[0],A=t[1],S=t[2],O=t[3],E=t[4],k=t[5],C=t[6],P=t[7],I=t[8],R=t[9],D=t[10],N=t[11];return r[0]=m*T+y*E+g*I,r[1]=m*A+y*k+g*R,r[2]=m*S+y*C+g*D,r[3]=m*O+y*P+g*N,r[4]=v*T+x*E+b*I,r[5]=v*A+x*k+b*R,r[6]=v*S+x*C+b*D,r[7]=v*O+x*P+b*N,r[8]=_*T+w*E+M*I,r[9]=_*A+w*k+M*R,r[10]=_*S+w*C+M*D,r[11]=_*O+w*P+M*N,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,n){n=n||new p(16);let r=t[0],i=t[1],o=t[2];const a=Math.sqrt(r*r+i*i+o*o);r/=a,i/=a,o/=a;const s=r*r,u=i*i,c=o*o,f=Math.cos(e),h=Math.sin(e),l=1-f;return n[0]=s+(1-s)*f,n[1]=r*i*l+o*h,n[2]=r*o*l-i*h,n[3]=0,n[4]=r*i*l-o*h,n[5]=u+(1-u)*f,n[6]=i*o*l+r*h,n[7]=0,n[8]=r*o*l+i*h,n[9]=i*o*l-r*h,n[10]=c+(1-c)*f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:m,frustum:function(t,e,n,r,i,o,a){const s=e-t,u=r-n,c=i-o;return(a=a||new p(16))[0]=2*i/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*i/u,a[6]=0,a[7]=0,a[8]=(t+e)/s,a[9]=(r+n)/u,a[10]=o/c,a[11]=-1,a[12]=0,a[13]=0,a[14]=i*o/c,a[15]=0,a},getAxis:function(t,e,n){const r=4*e;return(n=n||i())[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},getTranslation:function(t,e){return(e=e||i())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:y,inverse:g,lookAt:function(t,e,n,r){return r=r||new p(16),h=h||i(),l=l||i(),d=d||i(),u(a(t,e,d),d),u(s(n,d,h),h),u(s(d,h,l),l),r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=0,r[4]=l[0],r[5]=l[1],r[6]=l[2],r[7]=0,r[8]=d[0],r[9]=d[1],r[10]=d[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},multiply:function(t,e,n){n=n||new p(16);const r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=t[8],l=t[9],d=t[10],m=t[11],y=t[12],g=t[13],v=t[14],x=t[15],b=e[0],_=e[1],w=e[2],M=e[3],T=e[4],A=e[5],S=e[6],O=e[7],E=e[8],k=e[9],C=e[10],P=e[11],I=e[12],R=e[13],D=e[14],N=e[15];return n[0]=r*b+s*_+h*w+y*M,n[1]=i*b+u*_+l*w+g*M,n[2]=o*b+c*_+d*w+v*M,n[3]=a*b+f*_+m*w+x*M,n[4]=r*T+s*A+h*S+y*O,n[5]=i*T+u*A+l*S+g*O,n[6]=o*T+c*A+d*S+v*O,n[7]=a*T+f*A+m*S+x*O,n[8]=r*E+s*k+h*C+y*P,n[9]=i*E+u*k+l*C+g*P,n[10]=o*E+c*k+d*C+v*P,n[11]=a*E+f*k+m*C+x*P,n[12]=r*I+s*R+h*D+y*N,n[13]=i*I+u*R+l*D+g*N,n[14]=o*I+c*R+d*D+v*N,n[15]=a*I+f*R+m*D+x*N,n},negate:function(t,e){return(e=e||new p(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,r,i,o,a){return(a=a||new p(16))[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(i-o),a[11]=0,a[12]=(e+t)/(t-e),a[13]=(r+n)/(n-r),a[14]=(o+i)/(i-o),a[15]=1,a},perspective:function(t,e,n,r,i){i=i||new p(16);const o=Math.tan(.5*Math.PI-.5*t),a=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*a*2,i[15]=0,i},rotateX:function(t,e,n){n=n||new p(16);const r=t[4],i=t[5],o=t[6],a=t[7],s=t[8],u=t[9],c=t[10],f=t[11],h=Math.cos(e),l=Math.sin(e);return n[4]=h*r+l*s,n[5]=h*i+l*u,n[6]=h*o+l*c,n[7]=h*a+l*f,n[8]=h*s-l*r,n[9]=h*u-l*i,n[10]=h*c-l*o,n[11]=h*f-l*a,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new p(16);const r=t[0],i=t[1],o=t[2],a=t[3],s=t[8],u=t[9],c=t[10],f=t[11],h=Math.cos(e),l=Math.sin(e);return n[0]=h*r-l*s,n[1]=h*i-l*u,n[2]=h*o-l*c,n[3]=h*a-l*f,n[8]=h*s+l*r,n[9]=h*u+l*i,n[10]=h*c+l*o,n[11]=h*f+l*a,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new p(16);const r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],h=Math.cos(e),l=Math.sin(e);return n[0]=h*r+l*s,n[1]=h*i+l*u,n[2]=h*o+l*c,n[3]=h*a+l*f,n[4]=h*s-l*r,n[5]=h*u-l*i,n[6]=h*c-l*o,n[7]=h*f-l*a,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new p(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new p(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new p(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new p(16);const r=e[0],i=e[1],o=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=i*t[4],n[5]=i*t[5],n[6]=i*t[6],n[7]=i*t[7],n[8]=o*t[8],n[9]=o*t[9],n[10]=o*t[10],n[11]=o*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new p(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,r){r!==t&&(r=m(t,r));const i=4*n;return r[i+0]=e[0],r[i+1]=e[1],r[i+2]=e[2],r},setDefaultType:function(t){const e=p;return p=t,e},setTranslation:function(t,e,n){return t!==(n=n||y())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:x,transformNormal:function(t,e,n){n=n||i();const r=g(t),o=e[0],a=e[1],s=e[2];return n[0]=o*r[0]+a*r[1]+s*r[2],n[1]=o*r[4]+a*r[5]+s*r[6],n[2]=o*r[8]+a*r[9]+s*r[10],n},transformPoint:v,translate:function(t,e,n){n=n||new p(16);const r=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2],c=t[3],f=t[4],h=t[5],l=t[6],d=t[7],m=t[8],y=t[9],g=t[10],v=t[11],x=t[12],b=t[13],_=t[14],w=t[15];return t!==n&&(n[0]=a,n[1]=s,n[2]=u,n[3]=c,n[4]=f,n[5]=h,n[6]=l,n[7]=d,n[8]=m,n[9]=y,n[10]=g,n[11]=v),n[12]=a*r+f*i+m*o+x,n[13]=s*r+h*i+y*o+b,n[14]=u*r+l*i+g*o+_,n[15]=c*r+d*i+v*o+w,n},translation:function(t,e){return(e=e||new p(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new p(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],m=t[12],y=t[13],g=t[14],v=t[15];return e[0]=n,e[1]=a,e[2]=f,e[3]=m,e[4]=r,e[5]=s,e[6]=h,e[7]=y,e[8]=i,e[9]=u,e[10]=l,e[11]=g,e[12]=o,e[13]=c,e[14]=d,e[15]=v,e}});const _={};{const t=_;t[5120]=Int8Array,t[5121]=Uint8Array,t[5122]=Int16Array,t[5123]=Uint16Array,t[5124]=Int32Array,t[5125]=Uint32Array,t[5126]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function w(t){if(t instanceof Int8Array)return 5120;if(t instanceof Uint8Array)return 5121;if(t instanceof Uint8ClampedArray)return 5121;if(t instanceof Int16Array)return 5122;if(t instanceof Uint16Array)return 5123;if(t instanceof Int32Array)return 5124;if(t instanceof Uint32Array)return 5125;if(t instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}function M(t){if(t===Int8Array)return 5120;if(t===Uint8Array)return 5121;if(t===Uint8ClampedArray)return 5121;if(t===Int16Array)return 5122;if(t===Uint16Array)return 5123;if(t===Int32Array)return 5124;if(t===Uint32Array)return 5125;if(t===Float32Array)return 5126;throw new Error("unsupported typed array type")}function T(t){const e=_[t];if(!e)throw new Error("unknown gl type");return e}const A="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};var S=Object.freeze({__proto__:null,getGLTypeForTypedArray:w,getGLTypeForTypedArrayType:M,getTypedArrayTypeForGLType:T,isArrayBuffer:A});function O(t,e){Object.keys(e).forEach((function(n){e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(e[n]=t[n])}))}function E(...t){console.error(...t)}function k(...t){console.warn(...t)}function C(t,e){return"undefined"!=typeof WebGLRenderbuffer&&e instanceof WebGLRenderbuffer}function P(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}const I={attribPrefix:""};function R(t){I.attribPrefix=t}function D(t){O(t,I)}function N(t,e,n,r,i){t.bindBuffer(e,n),t.bufferData(e,r,i||35044)}function B(t,e,n,r){if(i=e,"undefined"!=typeof WebGLBuffer&&i instanceof WebGLBuffer)return e;var i;n=n||34962;const o=t.createBuffer();return N(t,n,o,e,r),o}function L(t){return"indices"===t}function j(t){return t.length?t:t.data}const F=/coord|texture/i,z=/color|colour/i;function V(t,e){let n;if(n=F.test(t)?2:z.test(t)?4:3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function U(t,e){return t.numComponents||t.size||V(e,j(t).length)}function G(t,e){if(A(t))return t;if(A(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type;return n||(n=L(e)?Uint16Array:Float32Array),new n(t.data)}function q(t,e){const n={};return Object.keys(e).forEach((function(r){if(!L(r)){const o=e[r],a=o.attrib||o.name||o.attribName||I.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!A(o.value))throw new Error("array.value is not array or typedarray");n[a]={value:o.value}}else{let e,s,u,c;if(o.buffer&&o.buffer instanceof WebGLBuffer)e=o.buffer,c=o.numComponents||o.size,s=o.type,u=o.normalize;else if("number"==typeof o||"number"==typeof o.data){const n=o.data||o,a=o.type||Float32Array,f=n*a.BYTES_PER_ELEMENT;s=M(a),u=void 0!==o.normalize?o.normalize:(i=a)===Int8Array||i===Uint8Array,c=o.numComponents||o.size||V(r,n),e=t.createBuffer(),t.bindBuffer(34962,e),t.bufferData(34962,f,o.drawType||35044)}else{const n=G(o,r);e=B(t,n,void 0,o.drawType),s=w(n),u=void 0!==o.normalize?o.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(n),c=U(o,r)}n[a]={buffer:e,numComponents:c,type:s,normalize:u,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var i})),t.bindBuffer(34962,null),n}function H(t,e,n,r){n=G(n),void 0!==r?(t.bindBuffer(34962,e.buffer),t.bufferSubData(34962,r,n)):N(t,34962,e.buffer,n,e.drawType)}const W=["position","positions","a_position"];function Y(t,e,n){const r=q(t,e),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);const o=e.indices;if(o){const e=G(o,"indices");i.indices=B(t,e,34963),i.numElements=e.length,i.elementType=w(e)}else i.numElements||(i.numElements=function(t,e){let n,r;for(r=0;r<W.length&&(n=W[r],!(n in e))&&(n=I.attribPrefix+n,!(n in e));++r);r===W.length&&(n=Object.keys(e)[0]);const i=e[n];t.bindBuffer(34962,i.buffer);const o=t.getBufferParameter(34962,34660);var a;t.bindBuffer(34962,null);const s=o/(5120===(a=i.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),u=i.numComponents||i.size,c=s/u;if(c%1!=0)throw new Error(`numComponents ${u} not correct for length ${length}`);return c}(t,i.attribs));return i}function K(t,e,n){const r="indices"===n?34963:34962;return B(t,G(e,n),r)}function X(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=K(t,e[r],r)})),e.indices?(n.numElements=e.indices.length,n.elementType=w(G(e.indices))):n.numElements=function(t){let e,n;for(n=0;n<W.length&&(e=W[n],!(e in t));++n);n===W.length&&(e=Object.keys(t)[0]);const r=t[e],i=j(r).length,o=U(r,e),a=i/o;if(i%o>0)throw new Error(`numComponents ${o} not correct for length ${i}`);return a}(e),n}var $=Object.freeze({__proto__:null,createAttribsFromArrays:q,createBuffersFromArrays:X,createBufferFromArray:K,createBufferFromTypedArray:B,createBufferInfoFromArrays:Y,setAttribInfoBufferFromArray:H,setAttributePrefix:R,setAttributeDefaults_:D,getNumComponents_:U,getArray_:j});const Z=j,J=U;function Q(t,e){let n=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const r=arguments[e];if(r instanceof Array||A(r))for(let e=0;e<r.length;++e)t[n++]=r[e];else t[n++]=r}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function tt(t,e,n){return Q(new(n||Float32Array)(t*e),t)}function et(t){return"indices"!==t}function nt(t,e,n){const r=t.length,i=new Float32Array(3);for(let o=0;o<r;o+=3)n(e,[t[o],t[o+1],t[o+2]],i),t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2]}function rt(t,e,n){n=n||i();const r=e[0],o=e[1],a=e[2];return n[0]=r*t[0]+o*t[1]+a*t[2],n[1]=r*t[4]+o*t[5]+a*t[6],n[2]=r*t[8]+o*t[9]+a*t[10],n}function it(t,e){return nt(t,e,x),t}function ot(t,e){return nt(t,g(e),rt),t}function at(t,e){return nt(t,e,v),t}function st(t,e){return Object.keys(t).forEach((function(n){const r=t[n];n.indexOf("pos")>=0?at(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?it(r,e):n.indexOf("norm")>=0&&ot(r,e)})),t}function ut(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ct(t,e,n,r,i){t=t||1,e=e||1,n=n||1,r=r||1,i=i||y();const o=(n+1)*(r+1),a=tt(3,o),s=tt(3,o),u=tt(2,o);for(let i=0;i<=r;i++)for(let o=0;o<=n;o++){const c=o/n,f=i/r;a.push(t*c-.5*t,0,e*f-.5*e),s.push(0,1,0),u.push(c,f)}const c=n+1,f=tt(3,n*r*2,Uint16Array);for(let t=0;t<r;t++)for(let e=0;e<n;e++)f.push((t+0)*c+e,(t+1)*c+e,(t+0)*c+e+1),f.push((t+1)*c+e,(t+1)*c+e+1,(t+0)*c+e+1);return st({position:a,normal:s,texcoord:u,indices:f},i)}function ft(t,e,n,r,i,o,a){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||0;const s=(i=i||Math.PI)-r,u=(a=a||2*Math.PI)-o,c=(e+1)*(n+1),f=tt(3,c),h=tt(3,c),l=tt(2,c);for(let i=0;i<=n;i++)for(let a=0;a<=e;a++){const c=a/e,d=i/n,p=u*c+o,m=s*d+r,y=Math.sin(p),g=Math.cos(p),v=Math.sin(m),x=g*v,b=Math.cos(m),_=y*v;f.push(t*x,t*b,t*_),h.push(x,b,_),l.push(1-c,d)}const d=e+1,p=tt(3,e*n*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<n;e++)p.push((e+0)*d+t,(e+0)*d+t+1,(e+1)*d+t),p.push((e+1)*d+t,(e+0)*d+t+1,(e+1)*d+t+1);return{position:f,normal:h,texcoord:l,indices:p}}const ht=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function lt(t){const e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=tt(3,24),a=tt(3,24),s=tt(2,24),u=tt(3,12,Uint16Array);for(let t=0;t<6;++t){const e=ht[t];for(let u=0;u<4;++u){const c=n[e[u]],f=r[t],h=i[u];o.push(c),a.push(f),s.push(h)}const c=4*t;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:o,normal:a,texcoord:s,indices:u}}function dt(t,e,n,r,i,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===o||o,u=void 0===a||a,c=(s?2:0)+(u?2:0),f=(r+1)*(i+1+c),h=tt(3,f),l=tt(3,f),d=tt(2,f),p=tt(3,r*(i+c/2)*2,Uint16Array),m=r+1,y=Math.atan2(t-e,n),g=Math.cos(y),v=Math.sin(y),x=i+(u?2:0);for(let o=s?-2:0;o<=x;++o){let a,s=o/i,u=n*s;o<0?(u=0,s=1,a=t):o>i?(u=n,s=1,a=e):a=t+o/i*(e-t),-2!==o&&o!==i+2||(a=0,s=0),u-=n/2;for(let t=0;t<m;++t){const e=Math.sin(t*Math.PI*2/r),n=Math.cos(t*Math.PI*2/r);h.push(e*a,u,n*a),o<0?l.push(0,-1,0):o>i?l.push(0,1,0):0===a?l.push(0,0,0):l.push(e*g,v,n*g),d.push(t/r,1-s)}}for(let t=0;t<i+c;++t)if(!(1===t&&s||t===i+c-2&&u))for(let e=0;e<r;++e)p.push(m*(t+0)+0+e,m*(t+0)+1+e,m*(t+1)+1+e),p.push(m*(t+0)+0+e,m*(t+1)+1+e,m*(t+1)+0+e);return{position:h,normal:l,texcoord:d,indices:p}}function pt(t,e){e=e||[];const n=[];for(let r=0;r<t.length;r+=4){const i=t[r],o=t.slice(r+1,r+4);o.push.apply(o,e);for(let t=0;t<i;++t)n.push.apply(n,o)}return n}function mt(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=pt([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=pt([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=t.length/3,i={position:tt(3,r),texcoord:tt(2,r),normal:tt(3,r),color:tt(4,r,Uint8Array),indices:tt(3,r/3,Uint16Array)};i.position.push(t),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(e),i.color.push(n);for(let t=0;t<r;++t)i.indices.push(t);return i}function yt(t,e,n,r,i,a,s){if(i<=0)throw new Error("subdivisionDown must be > 0");const u=(s=s||1)-(a=a||0),f=2*(i+1)*4,h=tt(3,f),l=tt(3,f),d=tt(2,f);function p(t,e,n){return t+(e-t)*n}function m(e,n,s,f,m,y){for(let g=0;g<=i;g++){const v=n/1,x=g/i,b=2*(v-.5),_=(a+x*u)*Math.PI,w=Math.sin(_),M=Math.cos(_),T=p(t,e,w),A=b*r,S=M*t,O=w*T;h.push(A,S,O);const E=o(c([0,w,M],s),f);l.push(E),d.push(v*m+y,x)}}for(let t=0;t<2;t++){const r=2*(t/1-.5);m(e,t,[1,1,1],[0,0,0],1,0),m(e,t,[0,0,0],[r,0,0],0,0),m(n,t,[1,1,1],[0,0,0],1,0),m(n,t,[0,0,0],[r,0,0],0,1)}const y=tt(3,2*i*4,Uint16Array);function g(t,e){for(let n=0;n<i;++n)y.push(t+n+0,t+n+1,e+n+0),y.push(t+n+1,e+n+1,e+n+0)}const v=i+1;return g(0*v,4*v),g(5*v,7*v),g(6*v,2*v),g(3*v,1*v),{position:h,normal:l,texcoord:d,indices:y}}function gt(t,e,n,r,i,o){return dt(t,t,e,n,r,i,o)}function vt(t,e,n,r,i,o){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;const a=(o=o||2*Math.PI)-i,s=n+1,u=r+1,c=s*u,f=tt(3,c),h=tt(3,c),l=tt(2,c),d=tt(3,n*r*2,Uint16Array);for(let o=0;o<u;++o){const u=o/r,c=u*Math.PI*2,d=Math.sin(c),p=t+d*e,m=Math.cos(c),y=m*e;for(let t=0;t<s;++t){const e=t/n,r=i+e*a,o=Math.sin(r),s=Math.cos(r),c=o*p,g=s*p,v=o*d,x=s*d;f.push(c,y,g),h.push(v,m,x),l.push(e,1-u)}}for(let t=0;t<r;++t)for(let e=0;e<n;++e){const n=1+e,r=1+t;d.push(s*t+e,s*r+e,s*t+n),d.push(s*r+e,s*r+n,s*t+n)}return{position:f,normal:h,texcoord:l,indices:d}}function xt(t,e,n,r,i){if(e<3)throw new Error("divisions must be at least 3");i=i||1,r=r||0;const o=(e+1)*((n=n||1)+1),a=tt(3,o),s=tt(3,o),u=tt(2,o),c=tt(3,n*e*2,Uint16Array);let f=0;const h=t-r,l=e+1;for(let t=0;t<=n;++t){const o=r+h*Math.pow(t/n,i);for(let r=0;r<=e;++r){const i=2*Math.PI*r/e,h=o*Math.cos(i),d=o*Math.sin(i);if(a.push(h,0,d),s.push(0,1,0),u.push(1-r/e,t/n),t>0&&r!==e){const t=f+(r+1),e=f+r,n=f+r-l,i=f+(r+1)-l;c.push(t,e,n),c.push(t,n,i)}}f+=e+1}return{position:a,normal:s,texcoord:u,indices:c}}function bt(t){return function(e){const n=t.apply(this,Array.prototype.slice.call(arguments,1));return X(e,n)}}function _t(t){return function(e){const n=t.apply(null,Array.prototype.slice.call(arguments,1));return Y(e,n)}}const wt=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Mt(t,e,n,r){r=r||0;const i=t.length;for(let o=0;o<i;++o)e[n+o]=t[o]+r}function Tt(t,e){const n=Z(t),r=new n.constructor(e);let i=r;var o,a;return n.numComponents&&n.numElements&&Q(r,n.numComponents),t.data&&(i={data:r},o=t,a=i,wt.forEach((function(t){const e=o[t];void 0!==e&&(a[t]=e)}))),i}const At=_t(mt),St=bt(mt),Ot=_t(lt),Et=bt(lt),kt=_t(ct),Ct=bt(ct),Pt=_t(ft),It=bt(ft),Rt=_t(dt),Dt=bt(dt),Nt=_t(ut),Bt=bt(ut),Lt=_t(yt),jt=bt(yt),Ft=_t(gt),zt=bt(gt),Vt=_t(vt),Ut=bt(vt),Gt=_t(xt),qt=bt(xt),Ht=Lt,Wt=jt,Yt=yt;var Kt=Object.freeze({__proto__:null,create3DFBufferInfo:At,create3DFBuffers:St,create3DFVertices:mt,createAugmentedTypedArray:tt,createCubeBufferInfo:Ot,createCubeBuffers:Et,createCubeVertices:lt,createPlaneBufferInfo:kt,createPlaneBuffers:Ct,createPlaneVertices:ct,createSphereBufferInfo:Pt,createSphereBuffers:It,createSphereVertices:ft,createTruncatedConeBufferInfo:Rt,createTruncatedConeBuffers:Dt,createTruncatedConeVertices:dt,createXYQuadBufferInfo:Nt,createXYQuadBuffers:Bt,createXYQuadVertices:ut,createCresentBufferInfo:Ht,createCresentBuffers:Wt,createCresentVertices:Yt,createCrescentBufferInfo:Lt,createCrescentBuffers:jt,createCrescentVertices:yt,createCylinderBufferInfo:Ft,createCylinderBuffers:zt,createCylinderVertices:gt,createTorusBufferInfo:Vt,createTorusBuffers:Ut,createTorusVertices:vt,createDiscBufferInfo:Gt,createDiscBuffers:qt,createDiscVertices:xt,deindexVertices:function(t){const e=t.indices,n={},r=e.length;return Object.keys(t).filter(et).forEach((function(i){const o=t[i],a=o.numComponents,s=tt(a,r,o.constructor);for(let t=0;t<r;++t){const n=e[t]*a;for(let t=0;t<a;++t)s.push(o[n+t])}n[i]=s})),n},flattenNormals:function(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const e=t.normal,n=e.length;for(let t=0;t<n;t+=9){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3],a=e[t+4],s=e[t+5];let u=n+o+e[t+6],c=r+a+e[t+7],f=i+s+e[t+8];const h=Math.sqrt(u*u+c*c+f*f);u/=h,c/=h,f/=h,e[t+0]=u,e[t+1]=c,e[t+2]=f,e[t+3]=u,e[t+4]=c,e[t+5]=f,e[t+6]=u,e[t+7]=c,e[t+8]=f}return t},makeRandomVertexColors:function(t,e){e=e||{};const n=t.position.numElements,r=tt(4,n,Uint8Array),i=e.rand||function(t,e){return e<3?(n=256,Math.random()*n|0):255;var n};if(t.color=r,t.indices)for(let t=0;t<n;++t)r.push(i(t,0),i(t,1),i(t,2),i(t,3));else{const t=e.vertsPerColor||3,o=n/t;for(let e=0;e<o;++e){const n=[i(e,0),i(e,1),i(e,2),i(e,3)];for(let e=0;e<t;++e)r.push(n)}}return t},reorientDirections:it,reorientNormals:ot,reorientPositions:at,reorientVertices:st,concatVertices:function(t){const e={};let n;for(let r=0;r<t.length;++r){const i=t[r];Object.keys(i).forEach((function(t){e[t]||(e[t]=[]),n||"indices"===t||(n=t);const r=i[t],o=J(r,t),a=Z(r).length/o;e[t].push(a)}))}const r=e[n],i={};return Object.keys(e).forEach((function(e){const n=function(e){let n,r=0;for(let i=0;i<t.length;++i){const o=t[i][e];r+=Z(o).length,n&&!o.data||(n=o)}return{length:r,spec:n}}(e),o=Tt(n.spec,n.length);!function(e,n,r){let i=0,o=0;for(let a=0;a<t.length;++a){const s=t[a][e],u=Z(s);"indices"===e?(Mt(u,r,o,i),i+=n[a]):Mt(u,r,o),o+=u.length}}(e,r,Z(o)),i[e]=o})),i},duplicateVertices:function(t){const e={};return Object.keys(t).forEach((function(n){const r=t[n],i=Z(r),o=Tt(r,i.length);Mt(i,Z(o),0),e[n]=o})),e}});function Xt(t){return!!t.texStorage2D}function $t(t){return!t.texStorage2D}const Zt=function(){const t={},e={};return function(n,r){return function(n){const r=n.constructor.name;if(!t[r]){for(const t in n)if("number"==typeof n[t]){const r=e[n[t]];e[n[t]]=r?`${r} | ${t}`:t}t[r]=!0}}(n),e[r]||"0x"+r.toString(16)}}();var Jt=Object.freeze({__proto__:null,glEnumToString:Zt,isWebGL1:$t,isWebGL2:Xt});const Qt={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},te=A;let ee;function ne(){return ee=ee||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),ee}const re=6407,ie=33319,oe={};{const t=oe;t[6406]={numColorComponents:1},t[6409]={numColorComponents:1},t[6410]={numColorComponents:2},t[re]={numColorComponents:3},t[6408]={numColorComponents:4},t[6403]={numColorComponents:1},t[36244]={numColorComponents:1},t[ie]={numColorComponents:2},t[33320]={numColorComponents:2},t[re]={numColorComponents:3},t[36248]={numColorComponents:3},t[6408]={numColorComponents:4},t[36249]={numColorComponents:4},t[6402]={numColorComponents:1},t[34041]={numColorComponents:2}}let ae;function se(t){if(!ae){const t={6406:{textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6409:{textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6410:{textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]}};t[re]={textureFormat:re,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},t[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},t[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},t[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},t[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},t[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},t[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},t[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},t[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},t[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},t[33323]={textureFormat:ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},t[36757]={textureFormat:ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},t[33327]={textureFormat:ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},t[33328]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},t[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},t[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},t[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},t[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},t[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},t[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},t[32849]={textureFormat:re,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[35905]={textureFormat:re,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},t[36194]={textureFormat:re,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},t[36758]={textureFormat:re,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},t[35898]={textureFormat:re,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},t[35901]={textureFormat:re,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},t[34843]={textureFormat:re,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},t[34837]={textureFormat:re,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},t[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},t[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},t[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},t[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},t[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},t[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},t[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},t[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},t[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},t[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},t[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},t[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},t[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},t[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},t[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},t[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},t[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},t[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},t[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},t[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},t[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},t[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},t[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},t[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},t[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(t).forEach((function(e){const n=t[e];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(t,e){const r=n.type[e];n.bytesPerElementMap[r]=t}))})),ae=t}return ae[t]}function ue(t,e){const n=se(t);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[e];if(void 0===r)throw"unknown internal format";return r}function ce(t){const e=se(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function fe(t){return 0==(t&t-1)}function he(t,e,n,r){if(!Xt(t))return fe(e)&&fe(n);const i=se(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}function le(t){const e=se(t);if(!e)throw"unknown internal format";return e.textureFilterable}function de(t){const e=oe[t];if(!e)throw"unknown format: "+t;return e.numColorComponents}function pe(t,e,n){return te(e)?w(e):n||5121}function me(t,e,n,r,i){if(i%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=i/r)%1)throw"can't guess dimensions"}else if((r=i/n)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(i/(34067===e?6:1));t%1==0?(n=t,r=t):(n=i,r=1)}return{width:n,height:r}}function ye(t){Qt.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function ge(t){O(t,Qt),t.textureColor&&ye(t.textureColor)}const ve={};function xe(t,e){void 0!==e.colorspaceConversion&&(ve.colorspaceConversion=t.getParameter(37443),t.pixelStorei(37443,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(ve.premultiplyAlpha=t.getParameter(37441),t.pixelStorei(37441,e.premultiplyAlpha)),void 0!==e.flipY&&(ve.flipY=t.getParameter(37440),t.pixelStorei(37440,e.flipY))}function be(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(37443,ve.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(37441,ve.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(37440,ve.flipY)}function _e(t){ve.unpackAlignment=t.getParameter(3317),Xt(t)&&(ve.unpackRowLength=t.getParameter(3314),ve.unpackImageHeight=t.getParameter(32878),ve.unpackSkipPixels=t.getParameter(3316),ve.unpackSkipRows=t.getParameter(3315),ve.unpackSkipImages=t.getParameter(32877))}function we(t){t.pixelStorei(3317,ve.unpackAlignment),Xt(t)&&(t.pixelStorei(3314,ve.unpackRowLength),t.pixelStorei(32878,ve.unpackImageHeight),t.pixelStorei(3316,ve.unpackSkipPixels),t.pixelStorei(3315,ve.unpackSkipRows),t.pixelStorei(32877,ve.unpackSkipImages))}function Me(t,e,n,r){var i;r.minMag&&(n.call(t,e,10241,r.minMag),n.call(t,e,10240,r.minMag)),r.min&&n.call(t,e,10241,r.min),r.mag&&n.call(t,e,10240,r.mag),r.wrap&&(n.call(t,e,10242,r.wrap),n.call(t,e,10243,r.wrap),(32879===e||(i=e,"undefined"!=typeof WebGLSampler&&i instanceof WebGLSampler))&&n.call(t,e,32882,r.wrap)),r.wrapR&&n.call(t,e,32882,r.wrapR),r.wrapS&&n.call(t,e,10242,r.wrapS),r.wrapT&&n.call(t,e,10243,r.wrapT),r.minLod&&n.call(t,e,33082,r.minLod),r.maxLod&&n.call(t,e,33083,r.maxLod),r.baseLevel&&n.call(t,e,33084,r.baseLevel),r.maxLevel&&n.call(t,e,33085,r.maxLevel)}function Te(t,e,n){const r=n.target||3553;t.bindTexture(r,e),Me(t,r,t.texParameteri,n)}function Ae(t,e,n){Me(t,e,t.samplerParameteri,n)}function Se(t,e){const n=t.createSampler();return Ae(t,n,e),n}function Oe(t,e){const n={};return Object.keys(e).forEach((function(r){n[r]=Se(t,e[r])})),n}function Ee(t,e,n,r,i,o){o=o||6408;const a=(n=n||Qt.textureOptions).target||3553;if(r=r||n.width,i=i||n.height,t.bindTexture(a,e),he(t,r,i,o))t.generateMipmap(a);else{const e=le(o)?9729:9728;t.texParameteri(a,10241,e),t.texParameteri(a,10240,e),t.texParameteri(a,10242,33071),t.texParameteri(a,10243,33071)}}function ke(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function Ce(t,e){return(e=e||{}).cubeFaceOrder||[34069,34070,34071,34072,34073,34074]}function Pe(t,e){const n=Ce(0,e).map((function(t,e){return{face:t,ndx:e}}));return n.sort((function(t,e){return t.face-e.face})),n}function Ie(t,e,n,r){const i=(r=r||Qt.textureOptions).target||3553,o=r.level||0;let a=n.width,s=n.height;const u=r.internalFormat||r.format||6408,c=ce(u),f=r.format||c.format,h=r.type||c.type;if(xe(t,r),t.bindTexture(i,e),34067===i){const c=n.width,l=n.height;let d,p;if(c/6===l)d=l,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(l/6===c)d=c,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==l/2)d=c/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=l/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);d=c/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}const m=ne();m?(m.canvas.width=d,m.canvas.height=d,a=d,s=d,Pe(0,r).forEach((function(e){const r=p[2*e.ndx+0]*d,i=p[2*e.ndx+1]*d;m.drawImage(n,r,i,d,d,0,0,d,d),t.texImage2D(e.face,o,u,f,h,m.canvas)})),m.canvas.width=1,m.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=d,s=d,Pe(0,r).forEach((function(c){const l=p[2*c.ndx+0]*d,m=p[2*c.ndx+1]*d;t.texImage2D(c.face,o,u,d,d,0,f,h,null),createImageBitmap(n,l,m,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){xe(t,r),t.bindTexture(i,e),t.texImage2D(c.face,o,u,f,h,n),be(t,r),ke(r)&&Ee(t,e,r,a,s,u)}))})))}else if(32879===i||35866===i){const e=Math.min(n.width,n.height),r=Math.max(n.width,n.height),a=r/e;if(a%1!=0)throw"can not compute 3D dimensions of element";const s=n.width===r?1:0,c=n.height===r?1:0;_e(t),t.pixelStorei(3317,1),t.pixelStorei(3314,n.width),t.pixelStorei(32878,0),t.pixelStorei(32877,0),t.texImage3D(i,o,u,e,e,e,0,f,h,null);for(let r=0;r<a;++r){const a=r*e*s,u=r*e*c;t.pixelStorei(3316,a),t.pixelStorei(3315,u),t.texSubImage3D(i,o,0,0,r,e,e,1,f,h,n)}we(t)}else t.texImage2D(i,o,u,f,h,n);be(t,r),ke(r)&&Ee(t,e,r,a,s,u),Te(t,e,r)}function Re(){}function De(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}function Ne(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function Be(t,e,n){return Ne(t)?(setTimeout((function(){n(null,t)})),t):function(t,e,n){let r;if(n=n||Re,e=void 0!==e?e:Qt.crossOrigin,e=De(t,e),"undefined"!=typeof Image){r=new Image,void 0!==e&&(r.crossOrigin=e);const i=function(){r.removeEventListener("error",o),r.removeEventListener("load",a),r=null},o=function(){const e="couldn't load image: "+t;E(e),n(e,r),i()},a=function(){n(null,r),i()};return r.addEventListener("error",o),r.addEventListener("load",a),r.src=t,r}if("undefined"!=typeof ImageBitmap){let i,o;const a=function(){n(i,o)},s={};e&&(s.mode="cors"),fetch(t,s).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){o=t,setTimeout(a)})).catch((function(t){i=t,setTimeout(a)})),r=null}return r}(t,e,n)}function Le(t,e,n){const r=(n=n||Qt.textureOptions).target||3553;if(t.bindTexture(r,e),!1===n.color)return;const i=function(t){return t=t||Qt.textureColor,te(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(n.color);if(34067===r)for(let e=0;e<6;++e)t.texImage2D(34069+e,0,6408,1,1,0,6408,5121,i);else 32879===r||35866===r?t.texImage3D(r,0,6408,1,1,1,0,6408,5121,i):t.texImage2D(r,0,6408,1,1,0,6408,5121,i)}function je(t,e,n,r){r=r||Re,n=n||Qt.textureOptions,Le(t,e,n);return Be((n=Object.assign({},n)).src,n.crossOrigin,(function(i,o){i?r(i,e,o):(Ie(t,e,o,n),r(null,e,o))}))}function Fe(t,e,n,r){r=r||Re;const i=n.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";const o=n.level||0,a=n.internalFormat||n.format||6408,s=ce(a),u=n.format||s.format,c=n.type||5121,f=n.target||3553;if(34067!==f)throw"target must be TEXTURE_CUBE_MAP";Le(t,e,n),n=Object.assign({},n);let h=6;const l=[],d=Ce(0,n);let p;p=i.map((function(i,s){return Be(i,n.crossOrigin,(m=d[s],function(i,s){--h,i?l.push(i):s.width!==s.height?l.push("cubemap face img is not a square: "+s.src):(xe(t,n),t.bindTexture(f,e),5===h?Ce().forEach((function(e){t.texImage2D(e,o,a,u,c,s)})):t.texImage2D(m,o,a,u,c,s),be(t,n),ke(n)&&t.generateMipmap(f)),0===h&&r(l.length?l:void 0,e,p)}));var m}))}function ze(t,e,n,r){r=r||Re;const i=n.src,o=n.internalFormat||n.format||6408,a=ce(o),s=n.format||a.format,u=n.type||5121,c=n.target||35866;if(32879!==c&&35866!==c)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Le(t,e,n),n=Object.assign({},n);let f=i.length;const h=[];let l;const d=n.level||0;let p=n.width,m=n.height;const y=i.length;let g=!0;l=i.map((function(i,a){return Be(i,n.crossOrigin,(v=a,function(i,a){if(--f,i)h.push(i);else{if(xe(t,n),t.bindTexture(c,e),g){g=!1,p=n.width||a.width,m=n.height||a.height,t.texImage3D(c,d,o,p,m,y,0,s,u,null);for(let e=0;e<y;++e)t.texSubImage3D(c,d,0,0,e,p,m,1,s,u,a)}else{let e,n=a;a.width===p&&a.height===m||(e=ne(),n=e.canvas,e.canvas.width=p,e.canvas.height=m,e.drawImage(a,0,0,p,m)),t.texSubImage3D(c,d,0,0,v,p,m,1,s,u,n),e&&n===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}be(t,n),ke(n)&&t.generateMipmap(c)}0===f&&r(h.length?h:void 0,e,l)}));var v}))}function Ve(t,e,n,r){const i=(r=r||Qt.textureOptions).target||3553;t.bindTexture(i,e);let o=r.width,a=r.height,s=r.depth;const u=r.level||0,c=r.internalFormat||r.format||6408,f=ce(c),h=r.format||f.format,l=r.type||pe(0,n,f.type);if(te(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const t=T(l);n=new t(n)}const d=ue(c,l),p=n.byteLength/d;if(p%1)throw"length wrong size for format: "+Zt(t,h);let m;if(32879===i||35866===i)if(o||a||s)!o||a&&s?!a||o&&s?(m=me(0,i,o,a,p/s),o=m.width,a=m.height):(m=me(0,i,o,s,p/a),o=m.width,s=m.height):(m=me(0,i,a,s,p/o),a=m.width,s=m.height);else{const t=Math.cbrt(p);if(t%1!=0)throw"can't guess cube size of array of numElements: "+p;o=t,a=t,s=t}else m=me(0,i,o,a,p),o=m.width,a=m.height;if(_e(t),t.pixelStorei(3317,r.unpackAlignment||1),xe(t,r),34067===i){const e=p/6*(d/n.BYTES_PER_ELEMENT);Pe(0,r).forEach(r=>{const i=e*r.ndx,s=n.subarray(i,i+e);t.texImage2D(r.face,u,c,o,a,0,h,l,s)})}else 32879===i||35866===i?t.texImage3D(i,u,c,o,a,s,0,h,l,n):t.texImage2D(i,u,c,o,a,0,h,l,n);return be(t,r),we(t),{width:o,height:a,depth:s,type:l}}function Ue(t,e,n){const r=n.target||3553;t.bindTexture(r,e);const i=n.level||0,o=n.internalFormat||n.format||6408,a=ce(o),s=n.format||a.format,u=n.type||a.type;if(xe(t,n),34067===r)for(let e=0;e<6;++e)t.texImage2D(34069+e,i,o,n.width,n.height,0,s,u,null);else 32879===r||35866===r?t.texImage3D(r,i,o,n.width,n.height,n.depth,0,s,u,null):t.texImage2D(r,i,o,n.width,n.height,0,s,u,null);be(t,n)}function Ge(t,e,n){n=n||Re,e=e||Qt.textureOptions;const r=t.createTexture(),i=e.target||3553;let o=e.width||1,a=e.height||1;const s=e.internalFormat||6408;t.bindTexture(i,r),34067===i&&(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071));let u=e.src;if(u)if("function"==typeof u&&(u=u(t,e)),"string"==typeof u)je(t,r,e,n);else if(te(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||te(u[0]))){const n=Ve(t,r,u,e);o=n.width,a=n.height}else Array.isArray(u)&&("string"==typeof u[0]||Ne(u[0]))?34067===i?Fe(t,r,e,n):ze(t,r,e,n):(Ie(t,r,u,e),o=u.width,a=u.height);else Ue(t,r,e);return ke(e)&&Ee(t,r,e,o,a,s),Te(t,r,e),r}function qe(t,e,n,r,i,o){r=r||n.width,i=i||n.height,o=o||n.depth;const a=n.target||3553;t.bindTexture(a,e);const s=n.level||0,u=n.internalFormat||n.format||6408,c=ce(u),f=n.format||c.format;let h;const l=n.src;if(h=l&&(te(l)||Array.isArray(l)&&"number"==typeof l[0])?n.type||pe(0,l,c.type):n.type||c.type,34067===a)for(let e=0;e<6;++e)t.texImage2D(34069+e,s,u,r,i,0,f,h,null);else 32879===a||35866===a?t.texImage3D(a,s,u,r,i,o,0,f,h,null):t.texImage2D(a,s,u,r,i,0,f,h,null)}function He(t,e,n){n=n||Re;let r=0;const i=[],o={},a={};function s(){0===r&&setTimeout((function(){n(i.length?i:void 0,o,a)}),0)}return Object.keys(e).forEach((function(n){const u=e[n];let c;var f;("string"==typeof(f=u.src)||Array.isArray(f)&&"string"==typeof f[0])&&(c=function(t,e,o){a[n]=o,--r,t&&i.push(t),s()},++r),o[n]=Ge(t,u,c)})),s(),o}var We=Object.freeze({__proto__:null,setTextureDefaults_:ge,createSampler:Se,createSamplers:Oe,setSamplerParameters:Ae,createTexture:Ge,setEmptyTexture:Ue,setTextureFromArray:Ve,loadTextureFromUrl:je,setTextureFromElement:Ie,setTextureFilteringForSize:Ee,setTextureParameters:Te,setDefaultTextureColor:ye,createTextures:He,resizeTexture:qe,canGenerateMipmap:he,canFilter:le,getNumComponentsForFormat:de,getBytesPerElementForInternalFormat:ue,getFormatAndTypeForInternalFormat:ce});const Ye=E,Ke=k;function Xe(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const $e={};function Ze(t,e){return $e[e].bindPoint}function Je(t,e){return function(n){t.uniform1i(e,n)}}function Qe(t,e){return function(n){t.uniform1iv(e,n)}}function tn(t,e){return function(n){t.uniform2iv(e,n)}}function en(t,e){return function(n){t.uniform3iv(e,n)}}function nn(t,e){return function(n){t.uniform4iv(e,n)}}function rn(t,e,n,r){const i=Ze(0,e);return Xt(t)?function(e){let o,a;P(0,e)?(o=e,a=null):(o=e.texture,a=e.sampler),t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(i,o),t.bindSampler(n,a)}:function(e){t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(i,e)}}function on(t,e,n,r,i){const o=Ze(0,e),a=new Int32Array(i);for(let t=0;t<i;++t)a[t]=n+t;return Xt(t)?function(e){t.uniform1iv(r,a),e.forEach((function(e,r){let i,s;t.activeTexture(33984+a[r]),P(0,e)?(i=e,s=null):(i=e.texture,s=e.sampler),t.bindSampler(n,s),t.bindTexture(o,i)}))}:function(e){t.uniform1iv(r,a),e.forEach((function(e,n){t.activeTexture(33984+a[n]),t.bindTexture(o,e)}))}}function an(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function sn(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5124,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function un(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function cn(t,e,n){const r=n.size,i=n.count;return function(n){t.bindBuffer(34962,n.buffer);const o=n.size||n.numComponents||r,a=o/i,s=n.type||5126,u=$e[s].size*o,c=n.normalize||!1,f=n.offset||0,h=u/i;for(let r=0;r<i;++r)t.enableVertexAttribArray(e+r),t.vertexAttribPointer(e+r,a,s,c,u,f+h*r),void 0!==n.divisor&&t.vertexAttribDivisor(e+r,n.divisor)}}$e[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},$e[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}}},$e[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}}},$e[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}}},$e[5124]={Type:Int32Array,size:4,setter:Je,arraySetter:Qe},$e[35667]={Type:Int32Array,size:8,setter:tn},$e[35668]={Type:Int32Array,size:12,setter:en},$e[35669]={Type:Int32Array,size:16,setter:nn},$e[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},$e[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}}},$e[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}}},$e[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}}},$e[35670]={Type:Uint32Array,size:4,setter:Je,arraySetter:Qe},$e[35671]={Type:Uint32Array,size:8,setter:tn},$e[35672]={Type:Uint32Array,size:12,setter:en},$e[35673]={Type:Uint32Array,size:16,setter:nn},$e[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}}},$e[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}}},$e[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}}},$e[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}}},$e[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}}},$e[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}}},$e[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}}},$e[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}}},$e[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}}},$e[35678]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:3553},$e[35680]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:34067},$e[35679]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:32879},$e[35682]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:3553},$e[36289]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:35866},$e[36292]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:35866},$e[36293]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:34067},$e[36298]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:3553},$e[36299]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:32879},$e[36300]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:34067},$e[36303]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:35866},$e[36306]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:3553},$e[36307]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:32879},$e[36308]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:34067},$e[36311]={Type:null,size:0,setter:rn,arraySetter:on,bindPoint:35866};const fn={};fn[5126]={size:4,setter:an},fn[35664]={size:8,setter:an},fn[35665]={size:12,setter:an},fn[35666]={size:16,setter:an},fn[5124]={size:4,setter:sn},fn[35667]={size:8,setter:sn},fn[35668]={size:12,setter:sn},fn[35669]={size:16,setter:sn},fn[5125]={size:4,setter:un},fn[36294]={size:8,setter:un},fn[36295]={size:12,setter:un},fn[36296]={size:16,setter:un},fn[35670]={size:4,setter:sn},fn[35671]={size:8,setter:sn},fn[35672]={size:12,setter:sn},fn[35673]={size:16,setter:sn},fn[35674]={size:4,setter:cn,count:2},fn[35675]={size:9,setter:cn,count:3},fn[35676]={size:16,setter:cn,count:4};const hn=/^[ \t]*\n/;function ln(t,e,n,r){const i=r||Ye,o=t.createShader(n);let a=0;hn.test(e)&&(a=1,e=e.replace(hn,"")),t.shaderSource(o,e),t.compileShader(o);if(!t.getShaderParameter(o,35713)){const n=t.getShaderInfoLog(o);return i(function(t,e){return e=e||0,++e,t.split("\n").map((function(t,n){return n+e+": "+t})).join("\n")}(e,a)+"\n*** Error compiling shader: "+n),t.deleteShader(o),null}return o}function dn(t,e,n){let r,i;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;const e=t;n=e.errorCallback,t=e.attribLocations,r=e.transformFeedbackVaryings,i=e.transformFeedbackMode}const o={errorCallback:n||Ye,transformFeedbackVaryings:r,transformFeedbackMode:i};if(t){let n={};Array.isArray(t)?t.forEach((function(t,r){n[t]=e?e[r]:r})):n=t,o.attribLocations=n}return o}const pn=["VERTEX_SHADER","FRAGMENT_SHADER"];function mn(t,e){return e.indexOf("frag")>=0?35632:e.indexOf("vert")>=0?35633:void 0}function yn(t,e){e.forEach((function(e){t.deleteShader(e)}))}function gn(t,e,n,r,i){const o=dn(n,r,i),a=[],s=[];for(let n=0;n<e.length;++n){let r=e[n];if("string"==typeof r){const e=Xe(r),i=e?e.text:r;let a=t[pn[n]];e&&e.type&&(a=mn(0,e.type)||a),r=ln(t,i,a,o.errorCallback),s.push(r)}u=r,"undefined"!=typeof WebGLShader&&u instanceof WebGLShader&&a.push(r)}var u;if(a.length!==e.length)return o.errorCallback("not enough shaders for program"),yn(t,s),null;const c=t.createProgram();a.forEach((function(e){t.attachShader(c,e)})),o.attribLocations&&Object.keys(o.attribLocations).forEach((function(e){t.bindAttribLocation(c,o.attribLocations[e],e)}));let f=o.transformFeedbackVaryings;f&&(f.attribs&&(f=f.attribs),Array.isArray(f)||(f=Object.keys(f)),t.transformFeedbackVaryings(c,f,o.transformFeedbackMode||35981)),t.linkProgram(c);if(!t.getProgramParameter(c,35714)){const e=t.getProgramInfoLog(c);return o.errorCallback("Error in program linking:"+e),t.deleteProgram(c),yn(t,s),null}return c}function vn(t,e,n,r){let i="";const o=Xe(e);if(!o)throw new Error("unknown script element: "+e);i=o.text;const a=n||mn(0,o.type);if(!a)throw new Error("unknown shader type");return ln(t,i,a,r)}function xn(t,e,n,r,i){const o=dn(n,r,i),a=[];for(let n=0;n<e.length;++n){const r=vn(t,e[n],t[pn[n]],o.errorCallback);if(!r)return null;a.push(r)}return gn(t,a,o)}function bn(t,e,n,r,i){const o=dn(n,r,i),a=[];for(let n=0;n<e.length;++n){const r=ln(t,e[n],t[pn[n]],o.errorCallback);if(!r)return null;a.push(r)}return gn(t,a,o)}function _n(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function wn(t,e){let n=0;function r(e,r,i){const o=r.size>1&&"[0]"===r.name.substr(-3),a=r.type,s=$e[a];if(!s)throw new Error("unknown type: 0x"+a.toString(16));let u;if(s.bindPoint){const e=n;n+=r.size,u=o?s.arraySetter(t,a,e,i,r.size):s.setter(t,a,e,i,r.size)}else u=s.arraySetter&&o?s.arraySetter(t,i):s.setter(t,i);return u.location=i,u}const i={},o=t.getProgramParameter(e,35718);for(let n=0;n<o;++n){const o=t.getActiveUniform(e,n);if(_n(o))continue;let a=o.name;"[0]"===a.substr(-3)&&(a=a.substr(0,a.length-3));const s=t.getUniformLocation(e,o.name);s&&(i[a]=r(0,o,s))}return i}function Mn(t,e){const n={},r=t.getProgramParameter(e,35971);for(let i=0;i<r;++i){const r=t.getTransformFeedbackVarying(e,i);n[r.name]={index:i,type:r.type,size:r.size}}return n}function Tn(t,e,n){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const i=e[r];if(i){const e=n[r];e.offset?t.bindBufferRange(35982,i.index,e.buffer,e.offset,e.size):t.bindBufferBase(35982,i.index,e.buffer)}}}function An(t,e,n){const r=t.createTransformFeedback();return t.bindTransformFeedback(36386,r),t.useProgram(e.program),Tn(t,e,n),t.bindTransformFeedback(36386,null),r}function Sn(t,e){const n=t.getProgramParameter(e,35718),r=[],i=[];for(let o=0;o<n;++o){i.push(o),r.push({});const n=t.getActiveUniform(e,o);if(_n(n))break;r[o].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const o=n[0],a=n[1];t.getActiveUniforms(e,i,t[o]).forEach((function(t,e){r[e][a]=t}))}));const o={},a=t.getProgramParameter(e,35382);for(let n=0;n<a;++n){const r=t.getActiveUniformBlockName(e,n),i={index:t.getUniformBlockIndex(e,r),usedByVertexShader:t.getActiveUniformBlockParameter(e,n,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,n,35398),size:t.getActiveUniformBlockParameter(e,n,35392),uniformIndices:t.getActiveUniformBlockParameter(e,n,35395)};i.used=i.usedByVertexShader||i.usedByFragmentShader,o[r]=i}return{blockSpecs:o,uniformData:r}}const On=/\[\d+\]\.$/;function En(t,e,n,r){const i=n.blockSpecs,o=n.uniformData,a=i[r];if(!a)return Ke("no uniform block object named:",r),{name:r,uniforms:{}};const s=new ArrayBuffer(a.size),u=t.createBuffer(),c=a.index;t.bindBuffer(35345,u),t.uniformBlockBinding(e,a.index,c);let f=r+".";On.test(f)&&(f=f.replace(On,"."));const h={};return a.uniformIndices.forEach((function(t){const e=o[t],n=$e[e.type],r=n.Type,i=e.size*n.size;let a=e.name;a.substr(0,f.length)===f&&(a=a.substr(f.length)),h[a]=new r(s,e.offset,i/r.BYTES_PER_ELEMENT)})),{name:r,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:h}}function kn(t,e,n){return En(t,e.program,e.uniformBlockSpec,n)}function Cn(t,e,n){const r=(e.uniformBlockSpec||e).blockSpecs[n.name];if(r){const e=r.index;return t.bindBufferRange(35345,e,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Pn(t,e,n){Cn(t,e,n)&&t.bufferData(35345,n.array,35048)}function In(t,e){const n=t.uniforms;for(const t in e){const r=n[t];if(r){const n=e[t];n.length?r.set(n):r[0]=n}}}function Rn(t,e){const n=t.uniformSetters||t,r=arguments.length;for(let t=1;t<r;++t){const e=arguments[t];if(Array.isArray(e)){const t=e.length;for(let r=0;r<t;++r)Rn(n,e[r])}else for(const t in e){const r=n[t];r&&r(e[t])}}}const Dn=Rn;function Nn(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;++i){const r=t.getActiveAttrib(e,i);if(_n(r))continue;const o=t.getAttribLocation(e,r.name),a=fn[r.type],s=a.setter(t,o,a);s.location=o,n[r.name]=s}return n}function Bn(t,e){for(const n in e){const r=t[n];r&&r(e[n])}}function Ln(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(Bn(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(34963,n.indices))}function jn(t,e){const n={program:e,uniformSetters:wn(t,e),attribSetters:Nn(t,e)};return Xt(t)&&(n.uniformBlockSpec=Sn(t,e),n.transformFeedbackInfo=Mn(t,e)),n}function Fn(t,e,n,r,i){const o=dn(n,r,i);let a=!0;if(e=e.map((function(t){if(t.indexOf("\n")<0){const e=Xe(t);e?t=e.text:(o.errorCallback("no element with id: "+t),a=!1)}return t})),!a)return null;const s=bn(t,e,o);return s?jn(t,s):null}var zn=Object.freeze({__proto__:null,createAttributeSetters:Nn,createProgram:gn,createProgramFromScripts:xn,createProgramFromSources:bn,createProgramInfo:Fn,createProgramInfoFromProgram:jn,createUniformSetters:wn,createUniformBlockSpecFromProgram:Sn,createUniformBlockInfoFromProgram:En,createUniformBlockInfo:kn,createTransformFeedback:An,createTransformFeedbackInfo:Mn,bindTransformFeedbackInfo:Tn,setAttributes:Bn,setBuffersAndAttributes:Ln,setUniforms:Rn,setUniformsAndBindTextures:Dn,setUniformBlock:Pn,setBlockUniforms:In,bindUniformBlock:Cn});function Vn(t,e,n,r,i,o){n=void 0===n?4:n;const a=e.indices,s=e.elementType,u=void 0===r?e.numElements:r;i=void 0===i?0:i,s||a?void 0!==o?t.drawElementsInstanced(n,u,void 0===s?5123:e.elementType,i,o):t.drawElements(n,u,void 0===s?5123:e.elementType,i):void 0!==o?t.drawArraysInstanced(n,i,u,o):t.drawArrays(n,i,u)}function Un(t,e){let n=null,r=null;e.forEach((function(e){if(!1===e.active)return;const i=e.programInfo,o=e.vertexArrayInfo||e.bufferInfo;let a=!1;const s=void 0===e.type?4:e.type;i!==n&&(n=i,t.useProgram(i.program),a=!0),(a||o!==r)&&(r&&r.vertexArrayObject&&!o.vertexArrayObject&&t.bindVertexArray(null),r=o,Ln(t,i,o)),Rn(i,e.uniforms),Vn(t,o,s,e.count,e.offset,e.instanceCount)})),r&&r.vertexArrayObject&&t.bindVertexArray(null)}var Gn=Object.freeze({__proto__:null,drawBufferInfo:Vn,drawObjectList:Un});const qn=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],Hn={};Hn[34041]=33306,Hn[6401]=36128,Hn[36168]=36128,Hn[6402]=36096,Hn[33189]=36096;const Wn={};function Yn(t,e,n,r){const i=t.createFramebuffer();t.bindFramebuffer(36160,i),n=n||t.drawingBufferWidth,r=r||t.drawingBufferHeight;let o=0;const a={framebuffer:i,attachments:[],width:n,height:r};return(e=e||qn).forEach((function(e){let i=e.attachment;const s=e.format;let u=function(t){return Hn[t]}(s);if(u||(u=36064+o++),!i)if(function(t){return Wn[t]}(s))i=t.createRenderbuffer(),t.bindRenderbuffer(36161,i),t.renderbufferStorage(36161,s,n,r);else{const o=Object.assign({},e);o.width=n,o.height=r,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||9729,o.mag=o.mag||o.minMag||9729,o.wrapS=o.wrapS||o.wrap||33071,o.wrapT=o.wrapT||o.wrap||33071),i=Ge(t,o)}if(C(0,i))t.framebufferRenderbuffer(36160,u,36161,i);else{if(!P(0,i))throw new Error("unknown attachment type");void 0!==e.layer?t.framebufferTextureLayer(36160,u,i,e.level||0,e.layer):t.framebufferTexture2D(36160,u,e.target||3553,i,e.level||0)}a.attachments.push(i)})),a}function Kn(t,e,n,r,i){r=r||t.drawingBufferWidth,i=i||t.drawingBufferHeight,e.width=r,e.height=i,(n=n||qn).forEach((function(n,o){const a=e.attachments[o],s=n.format;if(C(0,a))t.bindRenderbuffer(36161,a),t.renderbufferStorage(36161,s,r,i);else{if(!P(0,a))throw new Error("unknown attachment type");qe(t,a,n,r,i)}}))}function Xn(t,e,n){n=n||36160,e?(t.bindFramebuffer(n,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(n,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}Wn[32854]=!0,Wn[32855]=!0,Wn[36194]=!0,Wn[34041]=!0,Wn[33189]=!0,Wn[6401]=!0,Wn[36168]=!0;var $n=Object.freeze({__proto__:null,bindFramebufferInfo:Xn,createFramebufferInfo:Yn,resizeFramebufferInfo:Kn});function Zn(t,e,n){const r=t.createVertexArray();return t.bindVertexArray(r),e.length||(e=[e]),e.forEach((function(e){Ln(t,e,n)})),t.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function Jn(t,e,n,r){const i=t.createVertexArray();return t.bindVertexArray(i),Bn(e,n),r&&t.bindBuffer(34963,r),t.bindVertexArray(null),i}function Qn(t,e,n){return Jn(t,e.attribSetters||e,n.attribs,n.indices)}var tr=Object.freeze({__proto__:null,createVertexArrayInfo:Zn,createVAOAndSetAttributes:Jn,createVAOFromBufferInfo:Qn});const er={addExtensionsToContext:!0};function nr(t){O(t,er),D(t),ge(t)}const rr=/^(.*?)_/;function ir(t,e){Zt(t,0);const n=t.getExtension(e);if(n){const r={},i=rr.exec(e)[1],o="_"+i;for(const e in n){const a=n[e],s="function"==typeof a,u=s?i:o;let c=e;e.endsWith(u)&&(c=e.substring(0,e.length-u.length)),void 0!==t[c]?s||t[c]===a||k(c,t[c],a,e):s?t[c]=function(t){return function(){return t.apply(n,arguments)}}(a):(t[c]=a,r[c]=a)}r.constructor={name:n.constructor.name},Zt(r,0)}return n}const or=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function ar(t){for(let e=0;e<or.length;++e)ir(t,or[e])}function sr(t,e){return function(t,e){const n=["webgl","experimental-webgl"];let r=null;for(let i=0;i<n.length;++i)if(r=t.getContext(n[i],e),r){er.addExtensionsToContext&&ar(r);break}return r}(t,e)}function ur(t,e){return function(t,e){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let i=0;i<n.length;++i)if(r=t.getContext(n[i],e),r){er.addExtensionsToContext&&ar(r);break}return r}(t,e)}function cr(t,e){e=e||1,e=Math.max(0,e);const n=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(0),i=n(3),o=n(4),a=n(14),s=n(9),u=n(13);function c(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(c((function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new f(t,n))})}var f=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project,this.concurrent))},t}(),h=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new a.a(this,e,n),o=this.destination;o.add(r);var s=Object(i.a)(this,t,void 0,void 0,r);s!==r&&o.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(71),o=n(53);function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(56),o=function(t){function e(n,r){void 0===r&&(r=i.a.now);var o=t.call(this,n,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.a(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i=n(6),o=n(5),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(5).a))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(7);function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(37),i=n(64);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.a)()(r.a.apply(void 0,t))}},function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.vec3type=e.vec2type=void 0;const a=o(n(12));e.vec2type=a.tuple([a.number,a.number]),e.vec3type=a.tuple([a.number,a.number,a.number])},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(10),i=n(29),o=n(53);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(o.a)(t,n)):Object(i.a)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataSource=void 0;const r=n(24),i=n(76),o=n(77);e.DataSource=class{constructor(t,e,n,r,i,o=!1){this.sourceId=t,this._subElementCount=e,this._shaderAnimatedDataSource=n,this._boudingBox=r,this.polygonOffset=i,this._transparent=o,this._visible=!0,this._bboxFromConstructor=!1,this._sceneLoaded=!1,this._internal=!1,this._bboxFromConstructor=void 0!==this._boudingBox&&null!==this._boudingBox,this._bboxFromConstructor||console.warn(`Bounding box for data source ${t} was not defined during inicialization, it will be calculated but that will prolong loading quite a bit`)}createGUIElements(){let t=void 0;return this._internal||(t=[new o.VisibilityGUIElement(this.sourceId,this._visible,t=>this._visible=t)]),t}loadData(t,e){return this.load(t,e).then(t=>{this._sceneLoaded=!0})}updateBoundingBox(t){t&&(this._boudingBox?this._boudingBox=this._boudingBox.combine(i.BoundingBox.fromVertexBuffer(t)):this._boudingBox=i.BoundingBox.fromVertexBuffer(t))}initGlobalUniformBlocks(t,e){void 0!==this._programInfo&&(this._cameraUniformBlockInfo=r.createUniformBlockInfo(t,this._programInfo,"Camera"),this._shaderAnimatedDataSource&&e.createAnimatorUniformBlock(t,this._programInfo))}get shaderProgram(){return this._programInfo}get cameraUniformBlockInfo(){return this._cameraUniformBlockInfo}get visible(){return this._visible}get loaded(){return this._sceneLoaded}get subElementCount(){return this._subElementCount}get boudingBox(){return this._boudingBox}get internal(){return this._internal}get transparent(){return this._transparent}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(16);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(71),i=n(35),o=n(20),a=n(22),s=n(72),u=n(73),c=n(51),f=function(t){if(t&&"function"==typeof t[a.a])return f=t,function(t){var e=f[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,f,h=Object(c.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+h+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.updatePageTitle=e.createVisualizationDescriptionHTML=e.createViewportHTML=e.createHTMLElement=e.HTMLElementConfigurationType=e.HTMLElementLeftTopPosition=e.VRModeParagraphID=e.DescriptionContainerID=e.BaseHTMLContainerID=void 0;const a=o(n(12));e.BaseHTMLContainerID="container",e.DescriptionContainerID="text",e.VRModeParagraphID="vrmode";const s=a.type({elementID:a.string}),u=a.type({width:a.number,height:a.number,left:a.number,bottom:a.number});function c(t,e){t.style.width=e.width+"vw",t.style.left=e.left+"vw",e.height&&(t.style.height=e.height+"vh"),e.top&&(t.style.top=e.top+"vh"),e.bottom&&(t.style.bottom=e.bottom+"vh"),t.style.position="absolute",t.style.zIndex="1"}e.HTMLElementLeftTopPosition=a.type({width:a.number,left:a.number,top:a.number}),e.HTMLElementConfigurationType=a.intersection([s,u]),e.createHTMLElement=function(t,e="div"){const n=document.createElement(e);return n.id=t.elementID,c(n,{width:t.width,height:t.height,left:t.left,bottom:t.bottom}),n},e.createViewportHTML=function(t,n,r){const i=document.createElement("div");i.classList.add("border"),c(i,{width:Math.fround(100*r[0]),height:Math.fround(100*r[1]),left:Math.fround(100*n[0]),bottom:Math.fround(100*n[1])});const o=document.createElement("p");o.classList.add("viewport-name"),o.innerHTML=t,i.appendChild(o);const a=document.getElementById(e.BaseHTMLContainerID);a&&a.appendChild(i)},e.createVisualizationDescriptionHTML=function(t){const n=document.getElementById(e.DescriptionContainerID);if(n){if(t.info){const e=t.info;c(n,{width:e.html.width,left:e.html.left,top:e.html.top});const r=document.createElement("h2");r.innerHTML=t.title,n.appendChild(r),e.descriptions.forEach(t=>{const e=document.createElement("p");e.classList.add("description"),e.innerHTML=t,n.appendChild(e)})}else c(n,{width:20,left:60,top:2});const r=document.createElement("p");r.id=e.VRModeParagraphID,n.appendChild(r)}},e.updatePageTitle=function(t){document.title=t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(){return function(t){return t.lift(new a(t))}}var a=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(0),i=n(6),o=n(69),a=n(5),s=n(62),u=n(23),c=n(70),f=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new h(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new u.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new s.a(t,i)),n)for(var f=0;f<o&&!t.closed;f++)t.next(r[f]);else for(f=0;f<o&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),h=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(2);function i(t,e){return e?new r.a((function(n){return e.schedule(o,0,{error:t,subscriber:n})})):new r.a((function(e){return e.error(t)}))}function o(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(10),o=n(7),a=n(4),s=n(3),u=n(29),c={};function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.resultSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(s.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=o[n],s=this.toRespond?a===c?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(25),i=n(16);function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(2),i=n(13),o=n(11);function a(t){return new r.a((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(29),o=n(7),a=n(1),s=n(4),u=n(3),c=n(20);function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.resultSelector))},t}(),l=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new p(t)):"function"==typeof t[c.a]?e.push(new d(t[c.a]())):e.push(new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a),d=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),p=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.a(e,t),e.prototype[c.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(u.a)(this,this.observable,this,e)},e}(s.a)},function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2),i=n(5);function o(t,e){return new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(0),i=1,o=function(){return Promise.resolve()}(),a={};function s(t){return t in a&&(delete a[t],!0)}var u=function(t){var e=i++;return a[e]=!0,o.then((function(){return s(e)&&t()})),e},c=function(t){s(t)},f=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=u(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(c(n),e.scheduled=void 0)},e}(n(32).a),h=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(30).a))(f)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(15),i=n(35),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.either=e.bifunctorEither=e.applicativeEither=e.filterOrElse=e.fromPredicate=e.fromOption=e.reduceRight=e.reduce=e.mapLeft=e.map=e.foldMap=e.bimap=e.flatten=e.extend=e.duplicate=e.chainW=e.chainFirst=e.chain=e.apSecond=e.apFirst=e.ap=e.alt=e.getValidationMonoid=e.getValidationSemigroup=e.getValidation=e.getWitherable=e.stringifyJSON=e.parseJSON=e.exists=e.elem=e.getOrElseW=e.getOrElse=e.orElse=e.swap=e.isRight=e.isLeft=e.getApplyMonoid=e.getApplySemigroup=e.getSemigroup=e.getEq=e.getShow=e.fold=e.tryCatch=e.toError=e.fromNullable=e.right=e.left=e.URI=void 0;var i=n(105),o=n(87);function a(t){return{_tag:"Left",left:t}}function s(t){return{_tag:"Right",right:t}}function u(t,e){try{return s(t())}catch(t){return a(e(t))}}function c(t){return{concat:function(e,n){return f(e)?e:f(n)?n:s(t.concat(e.right,n.right))}}}function f(t){switch(t._tag){case"Left":return!0;case"Right":return!1}}function h(t){return!f(t)}function l(t){return function(e){return f(e)?t(e.left):e.right}}function d(t,e){return{concat:function(n,r){return f(n)?f(r)?a(t.concat(n.left,r.left)):n:f(r)?r:s(e.concat(n.right,r.right))}}}e.URI="Either",e.left=a,e.right=s,e.fromNullable=function(t){return function(e){return null==e?a(t):s(e)}},e.toError=function(t){return t instanceof Error?t:new Error(String(t))},e.tryCatch=u,e.fold=function(t,e){return function(n){return f(n)?t(n.left):e(n.right)}},e.getShow=function(t,e){return{show:function(n){return f(n)?"left("+t.show(n.left)+")":"right("+e.show(n.right)+")"}}},e.getEq=function(t,e){return{equals:function(n,r){return n===r||(f(n)?f(r)&&t.equals(n.left,r.left):h(r)&&e.equals(n.right,r.right))}}},e.getSemigroup=function(t){return{concat:function(e,n){return f(n)?e:f(e)?n:s(t.concat(e.right,n.right))}}},e.getApplySemigroup=c,e.getApplyMonoid=function(t){return r(r({},c(t)),{empty:s(t.empty)})},e.isLeft=f,e.isRight=h,e.swap=function(t){return f(t)?s(t.left):a(t.right)},e.orElse=function(t){return function(e){return f(e)?t(e.left):e}},e.getOrElse=l,e.getOrElseW=l,e.elem=function(t){return function(e,n){return!f(n)&&t.equals(e,n.right)}},e.exists=function(t){return function(e){return!f(e)&&t(e.right)}},e.parseJSON=function(t,e){return u((function(){return JSON.parse(t)}),e)},e.stringifyJSON=function(t,e){return u((function(){return JSON.stringify(t)}),e)},e.getWitherable=function(t){var n=a(t.empty),r=function(e){return f(e)?e:"None"===e.right._tag?a(t.empty):s(e.right.value)},i=function(t){return f(t)?{left:t,right:t}:f(t.right)?{left:s(t.right.left),right:n}:{left:n,right:s(t.right.right)}};return{URI:e.URI,_E:void 0,map:p,compact:r,separate:i,filter:function(e,n){return f(e)||n(e.right)?e:a(t.empty)},filterMap:function(e,n){if(f(e))return e;var r=n(e.right);return"None"===r._tag?a(t.empty):s(r.value)},partition:function(t,e){return f(t)?{left:t,right:t}:e(t.right)?{left:n,right:s(t.right)}:{left:s(t.right),right:n}},partitionMap:function(t,e){if(f(t))return{left:t,right:t};var r=e(t.right);return f(r)?{left:s(r.left),right:n}:{left:n,right:s(r.right)}},traverse:b,sequence:_,reduce:g,foldMap:v,reduceRight:x,wither:function(t){var e=b(t);return function(n,i){return t.map(e(n,i),r)}},wilt:function(t){var e=b(t);return function(n,r){return t.map(e(n,r),i)}}}},e.getValidation=function(t){return r(r({},e.either),{_E:void 0,ap:function(e,n){return f(e)?f(n)?a(t.concat(e.left,n.left)):e:f(n)?n:s(e.right(n.right))},alt:function(e,n){if(h(e))return e;var r=n();return f(r)?a(t.concat(e.left,r.left)):r}})},e.getValidationSemigroup=d,e.getValidationMonoid=function(t,e){return{concat:d(t,e).concat,empty:s(e.empty)}};var p=function(t,e){return f(t)?t:s(e(t.right))},m=function(t,e){return f(t)?t:f(e)?e:s(t.right(e.right))},y=function(t,e){return f(t)?t:e(t.right)},g=function(t,e,n){return f(t)?e:n(e,t.right)},v=function(t){return function(e,n){return f(e)?t.empty:n(e.right)}},x=function(t,e,n){return f(t)?e:n(t.right,e)},b=function(t){return function(e,n){return f(e)?t.of(a(e.left)):t.map(n(e.right),s)}},_=function(t){return function(e){return f(e)?t.of(a(e.left)):t.map(e.right,s)}},w=function(t,e,n){return f(t)?a(e(t.left)):s(n(t.right))},M=function(t,e){return f(t)?a(e(t.left)):t},T=function(t,e){return f(t)?e():t},A=function(t,e){return f(t)?t:s(e(t))};e.alt=function(t){return function(e){return T(e,t)}},e.ap=function(t){return function(e){return m(e,t)}},e.apFirst=function(t){return function(e){return m(p(e,(function(t){return function(){return t}})),t)}},e.apSecond=function(t){return function(e){return m(p(e,(function(){return function(t){return t}})),t)}},e.chain=function(t){return function(e){return y(e,t)}},e.chainFirst=function(t){return function(e){return y(e,(function(e){return p(t(e),(function(){return e}))}))}},e.chainW=e.chain,e.duplicate=function(t){return A(t,o.identity)},e.extend=function(t){return function(e){return A(e,t)}},e.flatten=function(t){return y(t,o.identity)},e.bimap=function(t,e){return function(n){return w(n,t,e)}},e.foldMap=function(t){var e=v(t);return function(t){return function(n){return e(n,t)}}},e.map=function(t){return function(e){return p(e,t)}},e.mapLeft=function(t){return function(e){return M(e,t)}},e.reduce=function(t,e){return function(n){return g(n,t,e)}},e.reduceRight=function(t,e){return function(n){return x(n,t,e)}},e.fromOption=function(t){return function(e){return"None"===e._tag?a(t()):s(e.value)}},e.fromPredicate=function(t,e){return function(n){return t(n)?s(n):a(e(n))}},e.filterOrElse=function(t,e){return function(n){return y(n,(function(n){return t(n)?s(n):a(e(n))}))}},e.applicativeEither={URI:e.URI,map:p,of:s,ap:m},e.bifunctorEither={URI:e.URI,bimap:w,mapLeft:M},e.either={URI:e.URI,map:p,of:s,ap:m,chain:y,reduce:g,foldMap:v,reduceRight:x,traverse:b,sequence:_,bimap:w,mapLeft:M,alt:T,extend:A,chainRec:function(t,e){return i.tailRec(e(t),(function(t){return f(t)?s(a(t.left)):f(t.right)?a(e(t.right.left)):s(s(t.right.right))}))},throwError:a}},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(0),i=n(1),o=n(5),a=n(2),s=n(6);function u(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}var c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),f=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=i,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);var o=new l(e,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new l(e,i))}catch(t){return void this.error(t)}this.add(a.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,n){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),l=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.a(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new d(n)),e.add(r.subscribe(t)),e},e}(a.a),d=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return r})),n.d(e,"bisect",(function(){return c})),n.d(e,"bisectRight",(function(){return s})),n.d(e,"bisectLeft",(function(){return u})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return o})),n.d(e,"cross",(function(){return l})),n.d(e,"descending",(function(){return d})),n.d(e,"deviation",(function(){return y})),n.d(e,"extent",(function(){return g})),n.d(e,"histogram",(function(){return P})),n.d(e,"thresholdFreedmanDiaconis",(function(){return R})),n.d(e,"thresholdScott",(function(){return D})),n.d(e,"thresholdSturges",(function(){return C})),n.d(e,"max",(function(){return N})),n.d(e,"mean",(function(){return B})),n.d(e,"median",(function(){return L})),n.d(e,"merge",(function(){return j})),n.d(e,"min",(function(){return F})),n.d(e,"pairs",(function(){return f})),n.d(e,"permute",(function(){return z})),n.d(e,"quantile",(function(){return I})),n.d(e,"range",(function(){return M})),n.d(e,"scan",(function(){return V})),n.d(e,"shuffle",(function(){return U})),n.d(e,"sum",(function(){return G})),n.d(e,"ticks",(function(){return O})),n.d(e,"tickIncrement",(function(){return E})),n.d(e,"tickStep",(function(){return k})),n.d(e,"transpose",(function(){return q})),n.d(e,"variance",(function(){return m})),n.d(e,"zip",(function(){return W})),n.d(e,"axisTop",(function(){return et})),n.d(e,"axisRight",(function(){return nt})),n.d(e,"axisBottom",(function(){return rt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return Si})),n.d(e,"brushX",(function(){return Ti})),n.d(e,"brushY",(function(){return Ai})),n.d(e,"brushSelection",(function(){return Mi})),n.d(e,"chord",(function(){return Ni})),n.d(e,"ribbon",(function(){return Xi})),n.d(e,"nest",(function(){return Qi})),n.d(e,"set",(function(){return so})),n.d(e,"map",(function(){return Ji})),n.d(e,"keys",(function(){return uo})),n.d(e,"values",(function(){return co})),n.d(e,"entries",(function(){return fo})),n.d(e,"color",(function(){return qe})),n.d(e,"rgb",(function(){return Ke})),n.d(e,"hsl",(function(){return en})),n.d(e,"lab",(function(){return yo})),n.d(e,"hcl",(function(){return To})),n.d(e,"lch",(function(){return Mo})),n.d(e,"gray",(function(){return mo})),n.d(e,"cubehelix",(function(){return Io})),n.d(e,"contours",(function(){return Uo})),n.d(e,"contourDensity",(function(){return Ko})),n.d(e,"dispatch",(function(){return ht})),n.d(e,"drag",(function(){return ea})),n.d(e,"dragDisable",(function(){return Se})),n.d(e,"dragEnable",(function(){return Oe})),n.d(e,"dsvFormat",(function(){return ua})),n.d(e,"csvParse",(function(){return fa})),n.d(e,"csvParseRows",(function(){return ha})),n.d(e,"csvFormat",(function(){return la})),n.d(e,"csvFormatBody",(function(){return da})),n.d(e,"csvFormatRows",(function(){return pa})),n.d(e,"csvFormatRow",(function(){return ma})),n.d(e,"csvFormatValue",(function(){return ya})),n.d(e,"tsvParse",(function(){return va})),n.d(e,"tsvParseRows",(function(){return xa})),n.d(e,"tsvFormat",(function(){return ba})),n.d(e,"tsvFormatBody",(function(){return _a})),n.d(e,"tsvFormatRows",(function(){return wa})),n.d(e,"tsvFormatRow",(function(){return Ma})),n.d(e,"tsvFormatValue",(function(){return Ta})),n.d(e,"autoType",(function(){return Aa})),n.d(e,"easeLinear",(function(){return Oa})),n.d(e,"easeQuad",(function(){return Ca})),n.d(e,"easeQuadIn",(function(){return Ea})),n.d(e,"easeQuadOut",(function(){return ka})),n.d(e,"easeQuadInOut",(function(){return Ca})),n.d(e,"easeCubic",(function(){return Yr})),n.d(e,"easeCubicIn",(function(){return Hr})),n.d(e,"easeCubicOut",(function(){return Wr})),n.d(e,"easeCubicInOut",(function(){return Yr})),n.d(e,"easePoly",(function(){return Ra})),n.d(e,"easePolyIn",(function(){return Pa})),n.d(e,"easePolyOut",(function(){return Ia})),n.d(e,"easePolyInOut",(function(){return Ra})),n.d(e,"easeSin",(function(){return ja})),n.d(e,"easeSinIn",(function(){return Ba})),n.d(e,"easeSinOut",(function(){return La})),n.d(e,"easeSinInOut",(function(){return ja})),n.d(e,"easeExp",(function(){return Va})),n.d(e,"easeExpIn",(function(){return Fa})),n.d(e,"easeExpOut",(function(){return za})),n.d(e,"easeExpInOut",(function(){return Va})),n.d(e,"easeCircle",(function(){return qa})),n.d(e,"easeCircleIn",(function(){return Ua})),n.d(e,"easeCircleOut",(function(){return Ga})),n.d(e,"easeCircleInOut",(function(){return qa})),n.d(e,"easeBounce",(function(){return Wa})),n.d(e,"easeBounceIn",(function(){return Ha})),n.d(e,"easeBounceOut",(function(){return Wa})),n.d(e,"easeBounceInOut",(function(){return Ya})),n.d(e,"easeBack",(function(){return $a})),n.d(e,"easeBackIn",(function(){return Ka})),n.d(e,"easeBackOut",(function(){return Xa})),n.d(e,"easeBackInOut",(function(){return $a})),n.d(e,"easeElastic",(function(){return Qa})),n.d(e,"easeElasticIn",(function(){return Ja})),n.d(e,"easeElasticOut",(function(){return Qa})),n.d(e,"easeElasticInOut",(function(){return ts})),n.d(e,"blob",(function(){return ns})),n.d(e,"buffer",(function(){return is})),n.d(e,"dsv",(function(){return us})),n.d(e,"csv",(function(){return cs})),n.d(e,"tsv",(function(){return fs})),n.d(e,"image",(function(){return hs})),n.d(e,"json",(function(){return ds})),n.d(e,"text",(function(){return as})),n.d(e,"xml",(function(){return ms})),n.d(e,"html",(function(){return ys})),n.d(e,"svg",(function(){return gs})),n.d(e,"forceCenter",(function(){return vs})),n.d(e,"forceCollide",(function(){return Ps})),n.d(e,"forceLink",(function(){return Ds})),n.d(e,"forceManyBody",(function(){return Fs})),n.d(e,"forceRadial",(function(){return zs})),n.d(e,"forceSimulation",(function(){return js})),n.d(e,"forceX",(function(){return Vs})),n.d(e,"forceY",(function(){return Us})),n.d(e,"formatDefaultLocale",(function(){return iu})),n.d(e,"format",(function(){return $s})),n.d(e,"formatPrefix",(function(){return Zs})),n.d(e,"formatLocale",(function(){return ru})),n.d(e,"formatSpecifier",(function(){return Ws})),n.d(e,"FormatSpecifier",(function(){return Ys})),n.d(e,"precisionFixed",(function(){return ou})),n.d(e,"precisionPrefix",(function(){return au})),n.d(e,"precisionRound",(function(){return su})),n.d(e,"geoArea",(function(){return Ju})),n.d(e,"geoBounds",(function(){return qc})),n.d(e,"geoCentroid",(function(){return nf})),n.d(e,"geoCircle",(function(){return pf})),n.d(e,"geoClipAntimeridian",(function(){return Sf})),n.d(e,"geoClipCircle",(function(){return Of})),n.d(e,"geoClipExtent",(function(){return If})),n.d(e,"geoClipRectangle",(function(){return Ef})),n.d(e,"geoContains",(function(){return $f})),n.d(e,"geoDistance",(function(){return Vf})),n.d(e,"geoGraticule",(function(){return Qf})),n.d(e,"geoGraticule10",(function(){return th})),n.d(e,"geoInterpolate",(function(){return oh})),n.d(e,"geoLength",(function(){return jf})),n.d(e,"geoPath",(function(){return rl})),n.d(e,"geoAlbers",(function(){return wl})),n.d(e,"geoAlbersUsa",(function(){return Ml})),n.d(e,"geoAzimuthalEqualArea",(function(){return Ol})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return Sl})),n.d(e,"geoAzimuthalEquidistant",(function(){return kl})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return El})),n.d(e,"geoConicConformal",(function(){return Nl})),n.d(e,"geoConicConformalRaw",(function(){return Dl})),n.d(e,"geoConicEqualArea",(function(){return _l})),n.d(e,"geoConicEqualAreaRaw",(function(){return bl})),n.d(e,"geoConicEquidistant",(function(){return Fl})),n.d(e,"geoConicEquidistantRaw",(function(){return jl})),n.d(e,"geoEqualEarth",(function(){return Wl})),n.d(e,"geoEqualEarthRaw",(function(){return Hl})),n.d(e,"geoEquirectangular",(function(){return Ll})),n.d(e,"geoEquirectangularRaw",(function(){return Bl})),n.d(e,"geoGnomonic",(function(){return Kl})),n.d(e,"geoGnomonicRaw",(function(){return Yl})),n.d(e,"geoIdentity",(function(){return Xl})),n.d(e,"geoProjection",(function(){return gl})),n.d(e,"geoProjectionMutator",(function(){return vl})),n.d(e,"geoMercator",(function(){return Pl})),n.d(e,"geoMercatorRaw",(function(){return Cl})),n.d(e,"geoNaturalEarth1",(function(){return Zl})),n.d(e,"geoNaturalEarth1Raw",(function(){return $l})),n.d(e,"geoOrthographic",(function(){return Ql})),n.d(e,"geoOrthographicRaw",(function(){return Jl})),n.d(e,"geoStereographic",(function(){return ed})),n.d(e,"geoStereographicRaw",(function(){return td})),n.d(e,"geoTransverseMercator",(function(){return rd})),n.d(e,"geoTransverseMercatorRaw",(function(){return nd})),n.d(e,"geoRotation",(function(){return hf})),n.d(e,"geoStream",(function(){return qu})),n.d(e,"geoTransform",(function(){return il})),n.d(e,"cluster",(function(){return sd})),n.d(e,"hierarchy",(function(){return cd})),n.d(e,"pack",(function(){return Dd})),n.d(e,"packSiblings",(function(){return Ed})),n.d(e,"packEnclose",(function(){return md})),n.d(e,"partition",(function(){return zd})),n.d(e,"stratify",(function(){return Hd})),n.d(e,"tree",(function(){return Jd})),n.d(e,"treemap",(function(){return rp})),n.d(e,"treemapBinary",(function(){return ip})),n.d(e,"treemapDice",(function(){return Fd})),n.d(e,"treemapSlice",(function(){return Qd})),n.d(e,"treemapSliceDice",(function(){return op})),n.d(e,"treemapSquarify",(function(){return np})),n.d(e,"treemapResquarify",(function(){return ap})),n.d(e,"interpolate",(function(){return kn})),n.d(e,"interpolateArray",(function(){return xn})),n.d(e,"interpolateBasis",(function(){return an})),n.d(e,"interpolateBasisClosed",(function(){return sn})),n.d(e,"interpolateDate",(function(){return _n})),n.d(e,"interpolateDiscrete",(function(){return sp})),n.d(e,"interpolateHue",(function(){return up})),n.d(e,"interpolateNumber",(function(){return wn})),n.d(e,"interpolateNumberArray",(function(){return gn})),n.d(e,"interpolateObject",(function(){return Mn})),n.d(e,"interpolateRound",(function(){return cp})),n.d(e,"interpolateString",(function(){return En})),n.d(e,"interpolateTransformCss",(function(){return lr})),n.d(e,"interpolateTransformSvg",(function(){return dr})),n.d(e,"interpolateZoom",(function(){return lp})),n.d(e,"interpolateRgb",(function(){return dn})),n.d(e,"interpolateRgbBasis",(function(){return mn})),n.d(e,"interpolateRgbBasisClosed",(function(){return yn})),n.d(e,"interpolateHsl",(function(){return pp})),n.d(e,"interpolateHslLong",(function(){return mp})),n.d(e,"interpolateLab",(function(){return yp})),n.d(e,"interpolateHcl",(function(){return vp})),n.d(e,"interpolateHclLong",(function(){return xp})),n.d(e,"interpolateCubehelix",(function(){return _p})),n.d(e,"interpolateCubehelixLong",(function(){return wp})),n.d(e,"piecewise",(function(){return Mp})),n.d(e,"quantize",(function(){return Tp})),n.d(e,"path",(function(){return Gi})),n.d(e,"polygonArea",(function(){return Ap})),n.d(e,"polygonCentroid",(function(){return Sp})),n.d(e,"polygonHull",(function(){return kp})),n.d(e,"polygonContains",(function(){return Cp})),n.d(e,"polygonLength",(function(){return Pp})),n.d(e,"quadtree",(function(){return As})),n.d(e,"randomUniform",(function(){return Rp})),n.d(e,"randomNormal",(function(){return Dp})),n.d(e,"randomLogNormal",(function(){return Np})),n.d(e,"randomBates",(function(){return Lp})),n.d(e,"randomIrwinHall",(function(){return Bp})),n.d(e,"randomExponential",(function(){return jp})),n.d(e,"scaleBand",(function(){return Wp})),n.d(e,"scalePoint",(function(){return Kp})),n.d(e,"scaleIdentity",(function(){return um})),n.d(e,"scaleLinear",(function(){return sm})),n.d(e,"scaleLog",(function(){return gm})),n.d(e,"scaleSymlog",(function(){return _m})),n.d(e,"scaleOrdinal",(function(){return Hp})),n.d(e,"scaleImplicit",(function(){return qp})),n.d(e,"scalePow",(function(){return Sm})),n.d(e,"scaleSqrt",(function(){return Om})),n.d(e,"scaleQuantile",(function(){return Em})),n.d(e,"scaleQuantize",(function(){return km})),n.d(e,"scaleThreshold",(function(){return Cm})),n.d(e,"scaleTime",(function(){return sv})),n.d(e,"scaleUtc",(function(){return gv})),n.d(e,"scaleSequential",(function(){return bv})),n.d(e,"scaleSequentialLog",(function(){return _v})),n.d(e,"scaleSequentialPow",(function(){return Mv})),n.d(e,"scaleSequentialSqrt",(function(){return Tv})),n.d(e,"scaleSequentialSymlog",(function(){return wv})),n.d(e,"scaleSequentialQuantile",(function(){return Av})),n.d(e,"scaleDiverging",(function(){return Ov})),n.d(e,"scaleDivergingLog",(function(){return Ev})),n.d(e,"scaleDivergingPow",(function(){return Cv})),n.d(e,"scaleDivergingSqrt",(function(){return Pv})),n.d(e,"scaleDivergingSymlog",(function(){return kv})),n.d(e,"tickFormat",(function(){return om})),n.d(e,"schemeCategory10",(function(){return Rv})),n.d(e,"schemeAccent",(function(){return Dv})),n.d(e,"schemeDark2",(function(){return Nv})),n.d(e,"schemePaired",(function(){return Bv})),n.d(e,"schemePastel1",(function(){return Lv})),n.d(e,"schemePastel2",(function(){return jv})),n.d(e,"schemeSet1",(function(){return Fv})),n.d(e,"schemeSet2",(function(){return zv})),n.d(e,"schemeSet3",(function(){return Vv})),n.d(e,"schemeTableau10",(function(){return Uv})),n.d(e,"interpolateBrBG",(function(){return Hv})),n.d(e,"schemeBrBG",(function(){return qv})),n.d(e,"interpolatePRGn",(function(){return Yv})),n.d(e,"schemePRGn",(function(){return Wv})),n.d(e,"interpolatePiYG",(function(){return Xv})),n.d(e,"schemePiYG",(function(){return Kv})),n.d(e,"interpolatePuOr",(function(){return Zv})),n.d(e,"schemePuOr",(function(){return $v})),n.d(e,"interpolateRdBu",(function(){return Qv})),n.d(e,"schemeRdBu",(function(){return Jv})),n.d(e,"interpolateRdGy",(function(){return ex})),n.d(e,"schemeRdGy",(function(){return tx})),n.d(e,"interpolateRdYlBu",(function(){return rx})),n.d(e,"schemeRdYlBu",(function(){return nx})),n.d(e,"interpolateRdYlGn",(function(){return ox})),n.d(e,"schemeRdYlGn",(function(){return ix})),n.d(e,"interpolateSpectral",(function(){return sx})),n.d(e,"schemeSpectral",(function(){return ax})),n.d(e,"interpolateBuGn",(function(){return cx})),n.d(e,"schemeBuGn",(function(){return ux})),n.d(e,"interpolateBuPu",(function(){return hx})),n.d(e,"schemeBuPu",(function(){return fx})),n.d(e,"interpolateGnBu",(function(){return dx})),n.d(e,"schemeGnBu",(function(){return lx})),n.d(e,"interpolateOrRd",(function(){return mx})),n.d(e,"schemeOrRd",(function(){return px})),n.d(e,"interpolatePuBuGn",(function(){return gx})),n.d(e,"schemePuBuGn",(function(){return yx})),n.d(e,"interpolatePuBu",(function(){return xx})),n.d(e,"schemePuBu",(function(){return vx})),n.d(e,"interpolatePuRd",(function(){return _x})),n.d(e,"schemePuRd",(function(){return bx})),n.d(e,"interpolateRdPu",(function(){return Mx})),n.d(e,"schemeRdPu",(function(){return wx})),n.d(e,"interpolateYlGnBu",(function(){return Ax})),n.d(e,"schemeYlGnBu",(function(){return Tx})),n.d(e,"interpolateYlGn",(function(){return Ox})),n.d(e,"schemeYlGn",(function(){return Sx})),n.d(e,"interpolateYlOrBr",(function(){return kx})),n.d(e,"schemeYlOrBr",(function(){return Ex})),n.d(e,"interpolateYlOrRd",(function(){return Px})),n.d(e,"schemeYlOrRd",(function(){return Cx})),n.d(e,"interpolateBlues",(function(){return Rx})),n.d(e,"schemeBlues",(function(){return Ix})),n.d(e,"interpolateGreens",(function(){return Nx})),n.d(e,"schemeGreens",(function(){return Dx})),n.d(e,"interpolateGreys",(function(){return Lx})),n.d(e,"schemeGreys",(function(){return Bx})),n.d(e,"interpolatePurples",(function(){return Fx})),n.d(e,"schemePurples",(function(){return jx})),n.d(e,"interpolateReds",(function(){return Vx})),n.d(e,"schemeReds",(function(){return zx})),n.d(e,"interpolateOranges",(function(){return Gx})),n.d(e,"schemeOranges",(function(){return Ux})),n.d(e,"interpolateCividis",(function(){return qx})),n.d(e,"interpolateCubehelixDefault",(function(){return Hx})),n.d(e,"interpolateRainbow",(function(){return Xx})),n.d(e,"interpolateWarm",(function(){return Wx})),n.d(e,"interpolateCool",(function(){return Yx})),n.d(e,"interpolateSinebow",(function(){return Qx})),n.d(e,"interpolateTurbo",(function(){return tb})),n.d(e,"interpolateViridis",(function(){return nb})),n.d(e,"interpolateMagma",(function(){return rb})),n.d(e,"interpolateInferno",(function(){return ib})),n.d(e,"interpolatePlasma",(function(){return ob})),n.d(e,"create",(function(){return ab})),n.d(e,"creator",(function(){return re})),n.d(e,"local",(function(){return ub})),n.d(e,"matcher",(function(){return yt})),n.d(e,"mouse",(function(){return Rn})),n.d(e,"namespace",(function(){return Tt})),n.d(e,"namespaces",(function(){return Mt})),n.d(e,"clientPoint",(function(){return Pn})),n.d(e,"select",(function(){return Me})),n.d(e,"selectAll",(function(){return fb})),n.d(e,"selection",(function(){return we})),n.d(e,"selector",(function(){return dt})),n.d(e,"selectorAll",(function(){return mt})),n.d(e,"style",(function(){return Nt})),n.d(e,"touch",(function(){return In})),n.d(e,"touches",(function(){return hb})),n.d(e,"window",(function(){return Pt})),n.d(e,"event",(function(){return ce})),n.d(e,"customEvent",(function(){return me})),n.d(e,"arc",(function(){return Ib})),n.d(e,"area",(function(){return jb})),n.d(e,"line",(function(){return Lb})),n.d(e,"pie",(function(){return Vb})),n.d(e,"areaRadial",(function(){return Yb})),n.d(e,"radialArea",(function(){return Yb})),n.d(e,"lineRadial",(function(){return Wb})),n.d(e,"radialLine",(function(){return Wb})),n.d(e,"pointRadial",(function(){return Kb})),n.d(e,"linkHorizontal",(function(){return n_})),n.d(e,"linkVertical",(function(){return r_})),n.d(e,"linkRadial",(function(){return i_})),n.d(e,"symbol",(function(){return w_})),n.d(e,"symbols",(function(){return __})),n.d(e,"symbolCircle",(function(){return o_})),n.d(e,"symbolCross",(function(){return a_})),n.d(e,"symbolDiamond",(function(){return c_})),n.d(e,"symbolSquare",(function(){return p_})),n.d(e,"symbolStar",(function(){return d_})),n.d(e,"symbolTriangle",(function(){return y_})),n.d(e,"symbolWye",(function(){return b_})),n.d(e,"curveBasisClosed",(function(){return E_})),n.d(e,"curveBasisOpen",(function(){return C_})),n.d(e,"curveBasis",(function(){return S_})),n.d(e,"curveBundle",(function(){return I_})),n.d(e,"curveCardinalClosed",(function(){return L_})),n.d(e,"curveCardinalOpen",(function(){return F_})),n.d(e,"curveCardinal",(function(){return N_})),n.d(e,"curveCatmullRomClosed",(function(){return q_})),n.d(e,"curveCatmullRomOpen",(function(){return W_})),n.d(e,"curveCatmullRom",(function(){return U_})),n.d(e,"curveLinearClosed",(function(){return K_})),n.d(e,"curveLinear",(function(){return Db})),n.d(e,"curveMonotoneX",(function(){return nw})),n.d(e,"curveMonotoneY",(function(){return rw})),n.d(e,"curveNatural",(function(){return aw})),n.d(e,"curveStep",(function(){return uw})),n.d(e,"curveStepAfter",(function(){return fw})),n.d(e,"curveStepBefore",(function(){return cw})),n.d(e,"stack",(function(){return pw})),n.d(e,"stackOffsetExpand",(function(){return mw})),n.d(e,"stackOffsetDiverging",(function(){return yw})),n.d(e,"stackOffsetNone",(function(){return hw})),n.d(e,"stackOffsetSilhouette",(function(){return gw})),n.d(e,"stackOffsetWiggle",(function(){return vw})),n.d(e,"stackOrderAppearance",(function(){return xw})),n.d(e,"stackOrderAscending",(function(){return _w})),n.d(e,"stackOrderDescending",(function(){return Mw})),n.d(e,"stackOrderInsideOut",(function(){return Tw})),n.d(e,"stackOrderNone",(function(){return lw})),n.d(e,"stackOrderReverse",(function(){return Aw})),n.d(e,"timeInterval",(function(){return Rm})),n.d(e,"timeMillisecond",(function(){return py})),n.d(e,"timeMilliseconds",(function(){return my})),n.d(e,"utcMillisecond",(function(){return py})),n.d(e,"utcMilliseconds",(function(){return my})),n.d(e,"timeSecond",(function(){return hy})),n.d(e,"timeSeconds",(function(){return ly})),n.d(e,"utcSecond",(function(){return hy})),n.d(e,"utcSeconds",(function(){return ly})),n.d(e,"timeMinute",(function(){return uy})),n.d(e,"timeMinutes",(function(){return cy})),n.d(e,"timeHour",(function(){return oy})),n.d(e,"timeHours",(function(){return ay})),n.d(e,"timeDay",(function(){return ny})),n.d(e,"timeDays",(function(){return ry})),n.d(e,"timeWeek",(function(){return Vm})),n.d(e,"timeWeeks",(function(){return Km})),n.d(e,"timeSunday",(function(){return Vm})),n.d(e,"timeSundays",(function(){return Km})),n.d(e,"timeMonday",(function(){return Um})),n.d(e,"timeMondays",(function(){return Xm})),n.d(e,"timeTuesday",(function(){return Gm})),n.d(e,"timeTuesdays",(function(){return $m})),n.d(e,"timeWednesday",(function(){return qm})),n.d(e,"timeWednesdays",(function(){return Zm})),n.d(e,"timeThursday",(function(){return Hm})),n.d(e,"timeThursdays",(function(){return Jm})),n.d(e,"timeFriday",(function(){return Wm})),n.d(e,"timeFridays",(function(){return Qm})),n.d(e,"timeSaturday",(function(){return Ym})),n.d(e,"timeSaturdays",(function(){return ty})),n.d(e,"timeMonth",(function(){return jm})),n.d(e,"timeMonths",(function(){return Fm})),n.d(e,"timeYear",(function(){return Nm})),n.d(e,"timeYears",(function(){return Bm})),n.d(e,"utcMinute",(function(){return mv})),n.d(e,"utcMinutes",(function(){return yv})),n.d(e,"utcHour",(function(){return lv})),n.d(e,"utcHours",(function(){return dv})),n.d(e,"utcDay",(function(){return Iy})),n.d(e,"utcDays",(function(){return Ry})),n.d(e,"utcWeek",(function(){return gy})),n.d(e,"utcWeeks",(function(){return Ty})),n.d(e,"utcSunday",(function(){return gy})),n.d(e,"utcSundays",(function(){return Ty})),n.d(e,"utcMonday",(function(){return vy})),n.d(e,"utcMondays",(function(){return Ay})),n.d(e,"utcTuesday",(function(){return xy})),n.d(e,"utcTuesdays",(function(){return Sy})),n.d(e,"utcWednesday",(function(){return by})),n.d(e,"utcWednesdays",(function(){return Oy})),n.d(e,"utcThursday",(function(){return _y})),n.d(e,"utcThursdays",(function(){return Ey})),n.d(e,"utcFriday",(function(){return wy})),n.d(e,"utcFridays",(function(){return ky})),n.d(e,"utcSaturday",(function(){return My})),n.d(e,"utcSaturdays",(function(){return Cy})),n.d(e,"utcMonth",(function(){return cv})),n.d(e,"utcMonths",(function(){return fv})),n.d(e,"utcYear",(function(){return Ny})),n.d(e,"utcYears",(function(){return By})),n.d(e,"timeFormatDefaultLocale",(function(){return rv})),n.d(e,"timeFormat",(function(){return Uy})),n.d(e,"timeParse",(function(){return Gy})),n.d(e,"utcFormat",(function(){return qy})),n.d(e,"utcParse",(function(){return Hy})),n.d(e,"timeFormatLocale",(function(){return zy})),n.d(e,"isoFormat",(function(){return Sw})),n.d(e,"isoParse",(function(){return Ow})),n.d(e,"now",(function(){return Un})),n.d(e,"timer",(function(){return Hn})),n.d(e,"timerFlush",(function(){return Wn})),n.d(e,"timeout",(function(){return $n})),n.d(e,"interval",(function(){return Ew})),n.d(e,"transition",(function(){return Ur})),n.d(e,"active",(function(){return Zr})),n.d(e,"interrupt",(function(){return sr})),n.d(e,"voronoi",(function(){return dM})),n.d(e,"zoom",(function(){return OM})),n.d(e,"zoomTransform",(function(){return vM})),n.d(e,"zoomIdentity",(function(){return gM}));var r="5.16.0",i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var a=o(i),s=a.right,u=a.left,c=s,f=function(t,e){null==e&&(e=h);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o};function h(t,e){return[t,e]}var l=function(t,e,n){var r,i,o,a,s=t.length,u=e.length,c=new Array(s*u);for(null==n&&(n=h),r=o=0;r<s;++r)for(a=t[r],i=0;i<u;++i,++o)c[o]=n(a,e[i]);return c},d=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},m=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==e)for(;++a<i;)isNaN(n=p(t[a]))||(u+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=p(e(t[a],a,t)))||(u+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return u/(o-1)},y=function(t,e){var n=m(t,e);return n?Math.sqrt(n):n},g=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},v=Array.prototype,x=v.slice,b=v.map,_=function(t){return function(){return t}},w=function(t){return t},M=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},T=Math.sqrt(50),A=Math.sqrt(10),S=Math.sqrt(2),O=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=E(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function E(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=T?10:o>=A?5:o>=S?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=T?10:o>=A?5:o>=S?2:1)}function k(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=T?i*=10:o>=A?i*=5:o>=S&&(i*=2),e<t?-i:i}var C=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},P=function(){var t=w,e=g,n=C;function r(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=t(r[i],i,r);var u=e(s),f=u[0],h=u[1],l=n(s,f,h);Array.isArray(l)||(l=k(f,h,l),l=M(Math.ceil(f/l)*l,h,l));for(var d=l.length;l[0]<=f;)l.shift(),--d;for(;l[d-1]>h;)l.pop(),--d;var p,m=new Array(d+1);for(i=0;i<=d;++i)(p=m[i]=[]).x0=i>0?l[i-1]:f,p.x1=i<d?l[i]:h;for(i=0;i<a;++i)f<=(o=s[i])&&o<=h&&m[c(l,o,0,d)].push(r[i]);return m}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:_(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:_([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?_(x.call(t)):_(t),r):n},r},I=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},R=function(t,e,n){return t=b.call(t,p).sort(i),Math.ceil((n-e)/(2*(I(t,.75)-I(t,.25))*Math.pow(t.length,-1/3)))},D=function(t,e,n){return Math.ceil((n-e)/(3.5*y(t)*Math.pow(t.length,-1/3)))},N=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},B=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=p(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},L=function(t,e){var n,r=t.length,o=-1,a=[];if(null==e)for(;++o<r;)isNaN(n=p(t[o]))||a.push(n);else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))||a.push(n);return I(a.sort(i),.5)},j=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},F=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},z=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},V=function(t,e){if(n=t.length){var n,r,o=0,a=0,s=t[a];for(null==e&&(e=i);++o<n;)(e(r=t[o],s)<0||0!==e(s,s))&&(s=r,a=o);return 0===e(s,s)?a:void 0}},U=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},G=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},q=function(t){if(!(i=t.length))return[];for(var e=-1,n=F(t,H),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function H(t){return t.length}var W=function(){return q(arguments)},Y=Array.prototype.slice,K=function(t){return t};function X(t){return"translate("+(t+.5)+",0)"}function $(t){return"translate(0,"+(t+.5)+")"}function Z(t){return function(e){return+t(e)}}function J(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Q(){return!this.__axis}function tt(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",f=1===t||3===t?X:$;function h(h){var l=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):K:i,p=Math.max(o,0)+s,m=e.range(),y=+m[0]+.5,g=+m[m.length-1]+.5,v=(e.bandwidth?J:Z)(e.copy()),x=h.selection?h.selection():h,b=x.selectAll(".domain").data([null]),_=x.selectAll(".tick").data(l,e).order(),w=_.exit(),M=_.enter().append("g").attr("class","tick"),T=_.select("line"),A=_.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),T=T.merge(M.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),A=A.merge(M.append("text").attr("fill","currentColor").attr(c,u*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==x&&(b=b.transition(h),_=_.transition(h),T=T.transition(h),A=A.transition(h),w=w.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=v(t))?f(t):this.getAttribute("transform")})),M.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:v(t))}))),w.remove(),b.attr("d",4===t||2==t?a?"M"+u*a+","+y+"H0.5V"+g+"H"+u*a:"M0.5,"+y+"V"+g:a?"M"+y+","+u*a+"V0.5H"+g+"V"+u*a:"M"+y+",0.5H"+g),_.attr("opacity",1).attr("transform",(function(t){return f(v(t))})),T.attr(c+"2",u*o),A.attr(c,u*p).text(d),x.filter(Q).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=v}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Y.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Y.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Y.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function et(t){return tt(1,t)}function nt(t){return tt(2,t)}function rt(t){return tt(3,t)}function it(t){return tt(4,t)}var ot={value:function(){}};function at(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ut(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ct(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ft(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ot,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=at.prototype={constructor:st,on:function(t,e){var n,r=this._,i=ut(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=ft(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ft(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=ct(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var ht=at;function lt(){}var dt=function(t){return null==t?lt:function(){return this.querySelector(t)}};function pt(){return[]}var mt=function(t){return null==t?pt:function(){return this.querySelectorAll(t)}},yt=function(t){return function(){return this.matches(t)}},gt=function(t){return new Array(t.length)};function vt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vt.prototype={constructor:vt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xt(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new vt(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function bt(t,e,n,r,i,o,a){var s,u,c,f={},h=e.length,l=o.length,d=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in f?i[s]=u:f[c]=u);for(s=0;s<l;++s)(u=f[c="$"+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],f[c]=null):n[s]=new vt(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&f[d[s]]===u&&(i[s]=u)}function _t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var wt="http://www.w3.org/1999/xhtml",Mt={svg:"http://www.w3.org/2000/svg",xhtml:wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Mt.hasOwnProperty(e)?{space:Mt[e],local:t}:t};function At(t){return function(){this.removeAttribute(t)}}function St(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ot(t,e){return function(){this.setAttribute(t,e)}}function Et(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ct(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Pt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function It(t){return function(){this.style.removeProperty(t)}}function Rt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Dt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Nt(t,e){return t.style.getPropertyValue(e)||Pt(t).getComputedStyle(t,null).getPropertyValue(e)}function Bt(t){return function(){delete this[t]}}function Lt(t,e){return function(){this[t]=e}}function jt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ft(t){return t.trim().split(/^|\s+/)}function zt(t){return t.classList||new Vt(t)}function Vt(t){this._node=t,this._names=Ft(t.getAttribute("class")||"")}function Ut(t,e){for(var n=zt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gt(t,e){for(var n=zt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function qt(t){return function(){Ut(this,t)}}function Ht(t){return function(){Gt(this,t)}}function Wt(t,e){return function(){(e.apply(this,arguments)?Ut:Gt)(this,t)}}Vt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yt(){this.textContent=""}function Kt(t){return function(){this.textContent=t}}function Xt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function $t(){this.innerHTML=""}function Zt(t){return function(){this.innerHTML=t}}function Jt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Qt(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wt&&e.documentElement.namespaceURI===wt?e.createElement(t):e.createElementNS(n,t)}}function ne(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var re=function(t){var e=Tt(t);return(e.local?ne:ee)(e)};function ie(){return null}function oe(){var t=this.parentNode;t&&t.removeChild(this)}function ae(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function se(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var ue={},ce=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ue={mouseenter:"mouseover",mouseleave:"mouseout"}));function fe(t,e,n){return t=he(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function he(t,e,n){return function(r){var i=ce;ce=r;try{t.call(this,this.__data__,e,n)}finally{ce=i}}}function le(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function de(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function pe(t,e,n){var r=ue.hasOwnProperty(t.type)?fe:he;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var f=0,h=u.length;f<h;++f)if((s=u[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function me(t,e,n,r){var i=ce;t.sourceEvent=ce,ce=t;try{return e.apply(n,r)}finally{ce=i}}function ye(t,e,n){var r=Pt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ge(t,e){return function(){return ye(this,t,e)}}function ve(t,e){return function(){return ye(this,t,e.apply(this,arguments))}}var xe=[null];function be(t,e){this._groups=t,this._parents=e}function _e(){return new be([[document.documentElement]],xe)}be.prototype=_e.prototype={constructor:be,select:function(t){"function"!=typeof t&&(t=dt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),f=0;f<u;++f)(o=s[f])&&(a=t.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),c[f]=a);return new be(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=mt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new be(r,i)},filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new be(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each((function(t){p[++f]=t})),p;var n,r=e?bt:xt,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),f=0;f<a;++f){var h=i[f],l=o[f],d=l.length,p=t.call(h,h&&h.__data__,f,i),m=p.length,y=u[f]=new Array(m),g=s[f]=new Array(m);r(h,l,y,g,c[f]=new Array(d),p,e);for(var v,x,b=0,_=0;b<m;++b)if(v=y[b]){for(b>=_&&(_=b+1);!(x=g[_])&&++_<m;);v._next=x||null}}return(s=new be(s,i))._enter=u,s._exit=c,s},enter:function(){return new be(this._enter||this._groups.map(gt),this._parents)},exit:function(){return new be(this._exit||this._groups.map(gt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],f=n[s],h=c.length,l=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||f[d])&&(l[d]=u);for(;s<r;++s)a[s]=e[s];return new be(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=_t);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),f=0;f<u;++f)(a=s[f])&&(c[f]=a);c.sort(e)}return new be(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?St:At:"function"==typeof e?n.local?Ct:kt:n.local?Et:Ot)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?It:"function"==typeof e?Dt:Rt)(t,e,null==n?"":n)):Nt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Bt:"function"==typeof e?jt:Lt)(t,e)):this.node()[t]},classed:function(t,e){var n=Ft(t+"");if(arguments.length<2){for(var r=zt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Wt:e?qt:Ht)(n,e))},text:function(t){return arguments.length?this.each(null==t?Yt:("function"==typeof t?Xt:Kt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?Jt:Zt)(t)):this.node().innerHTML},raise:function(){return this.each(Qt)},lower:function(){return this.each(te)},append:function(t){var e="function"==typeof t?t:re(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:re(t),r=null==e?ie:"function"==typeof e?e:dt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(oe)},clone:function(t){return this.select(t?se:ae)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=le(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?pe:de,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,f=s.length;c<f;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ve:ge)(t,e))}};var we=_e,Me=function(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],xe)};function Te(){ce.stopImmediatePropagation()}var Ae=function(){ce.preventDefault(),ce.stopImmediatePropagation()},Se=function(t){var e=t.document.documentElement,n=Me(t).on("dragstart.drag",Ae,!0);"onselectstart"in e?n.on("selectstart.drag",Ae,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Oe(t,e){var n=t.document.documentElement,r=Me(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ae,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ee=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ke(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ce(){}var Pe="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",De=/^#([0-9a-f]{3,8})$/,Ne=new RegExp("^rgb\\("+[Pe,Pe,Pe]+"\\)$"),Be=new RegExp("^rgb\\("+[Re,Re,Re]+"\\)$"),Le=new RegExp("^rgba\\("+[Pe,Pe,Pe,Ie]+"\\)$"),je=new RegExp("^rgba\\("+[Re,Re,Re,Ie]+"\\)$"),Fe=new RegExp("^hsl\\("+[Ie,Re,Re]+"\\)$"),ze=new RegExp("^hsla\\("+[Ie,Re,Re,Ie]+"\\)$"),Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ue(){return this.rgb().formatHex()}function Ge(){return this.rgb().formatRgb()}function qe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=De.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?He(e):3===n?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?We(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?We(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ne.exec(t))?new Xe(e[1],e[2],e[3],1):(e=Be.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Le.exec(t))?We(e[1],e[2],e[3],e[4]):(e=je.exec(t))?We(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Fe.exec(t))?Qe(e[1],e[2]/100,e[3]/100,1):(e=ze.exec(t))?Qe(e[1],e[2]/100,e[3]/100,e[4]):Ve.hasOwnProperty(t)?He(Ve[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function He(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function We(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xe(t,e,n,r)}function Ye(t){return t instanceof Ce||(t=qe(t)),t?new Xe((t=t.rgb()).r,t.g,t.b,t.opacity):new Xe}function Ke(t,e,n,r){return 1===arguments.length?Ye(t):new Xe(t,e,n,null==r?1:r)}function Xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $e(){return"#"+Je(this.r)+Je(this.g)+Je(this.b)}function Ze(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Je(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nn(t,e,n,r)}function tn(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Ce||(t=qe(t)),!t)return new nn;if(t instanceof nn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new nn(a,s,u,t.opacity)}function en(t,e,n,r){return 1===arguments.length?tn(t):new nn(t,e,n,null==r?1:r)}function nn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function rn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function on(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Ee(Ce,qe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ue,formatHex:Ue,formatHsl:function(){return tn(this).formatHsl()},formatRgb:Ge,toString:Ge}),Ee(Xe,Ke,ke(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$e,formatHex:$e,formatRgb:Ze,toString:Ze})),Ee(nn,en,ke(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xe(rn(t>=240?t-240:t+120,i,r),rn(t,i,r),rn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var an=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return on((n-r/e)*e,a,i,o,s)}},sn=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return on((n-r/e)*e,i,o,a,s)}},un=function(t){return function(){return t}};function cn(t,e){return function(n){return t+n*e}}function fn(t,e){var n=e-t;return n?cn(t,n>180||n<-180?n-360*Math.round(n/360):n):un(isNaN(t)?e:t)}function hn(t){return 1==(t=+t)?ln:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):un(isNaN(e)?n:e)}}function ln(t,e){var n=e-t;return n?cn(t,n):un(isNaN(t)?e:t)}var dn=function t(e){var n=hn(e);function r(t,e){var r=n((t=Ke(t)).r,(e=Ke(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ln(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function pn(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ke(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var mn=pn(an),yn=pn(sn),gn=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function vn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var xn=function(t,e){return(vn(e)?gn:bn)(t,e)};function bn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=kn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var _n=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},wn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Mn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=kn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(Tn.source,"g");var Sn,On,En=function(t,e){var n,r,i,o=Tn.lastIndex=An.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Tn.exec(t))&&(r=An.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:wn(n,r)})),o=An.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},kn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?un(e):("number"===r?wn:"string"===r?(n=qe(e))?(e=n,dn):En:e instanceof qe?dn:e instanceof Date?_n:vn(e)?gn:Array.isArray(e)?bn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Mn:wn)(t,e)},Cn=function(){for(var t,e=ce;t=e.sourceEvent;)e=t;return e},Pn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},In=function(t,e,n){arguments.length<3&&(n=e,e=Cn().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Pn(t,r);return null},Rn=function(t){var e=Cn();return e.changedTouches&&(e=e.changedTouches[0]),Pn(t,e)},Dn=0,Nn=0,Bn=0,Ln=0,jn=0,Fn=0,zn="object"==typeof performance&&performance.now?performance:Date,Vn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Un(){return jn||(Vn(Gn),jn=zn.now()+Fn)}function Gn(){jn=0}function qn(){this._call=this._time=this._next=null}function Hn(t,e,n){var r=new qn;return r.restart(t,e,n),r}function Wn(){Un(),++Dn;for(var t,e=Sn;e;)(t=jn-e._time)>=0&&e._call.call(null,t),e=e._next;--Dn}function Yn(){jn=(Ln=zn.now())+Fn,Dn=Nn=0;try{Wn()}finally{Dn=0,function(){var t,e,n=Sn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Sn=e);On=t,Xn(r)}(),jn=0}}function Kn(){var t=zn.now(),e=t-Ln;e>1e3&&(Fn-=e,Ln=t)}function Xn(t){Dn||(Nn&&(Nn=clearTimeout(Nn)),t-jn>24?(t<1/0&&(Nn=setTimeout(Yn,t-zn.now()-Fn)),Bn&&(Bn=clearInterval(Bn))):(Bn||(Ln=zn.now(),Bn=setInterval(Kn,1e3)),Dn=1,Vn(Yn)))}qn.prototype=Hn.prototype={constructor:qn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Un():+n)+(null==e?0:+e),this._next||On===this||(On?On._next=this:Sn=this,On=this),this._call=t,this._time=n,Xn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xn())}};var $n=function(t,e,n){var r=new qn;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Zn=ht("start","end","cancel","interrupt"),Jn=[],Qn=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,f,h,l;if(1!==n.state)return s();for(c in i)if((l=i[c]).name===n.name){if(3===l.state)return $n(o);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",t,t.__data__,l.index,l.group),delete i[c]):+c<e&&(l.state=6,l.timer.stop(),l.on.call("cancel",t,t.__data__,l.index,l.group),delete i[c])}if($n((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(l=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=l);r.length=f+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Hn((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Zn,tween:Jn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function tr(t,e){var n=nr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function er(t,e){var n=nr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function nr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var rr,ir,or,ar,sr=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},ur=180/Math.PI,cr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},fr=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ur,skewX:Math.atan(u)*ur,scaleX:a,scaleY:s}};function hr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:wn(t,i)},{i:u-2,x:wn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:wn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:wn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:wn(t,n)},{i:s-2,x:wn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var lr=hr((function(t){return"none"===t?cr:(rr||(rr=document.createElement("DIV"),ir=document.documentElement,or=document.defaultView),rr.style.transform=t,t=or.getComputedStyle(ir.appendChild(rr),null).getPropertyValue("transform"),ir.removeChild(rr),t=t.slice(7,-1).split(","),fr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),dr=hr((function(t){return null==t?cr:(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),(t=ar.transform.baseVal.consolidate())?(t=t.matrix,fr(t.a,t.b,t.c,t.d,t.e,t.f)):cr)}),", ",")",")");function pr(t,e){var n,r;return function(){var i=er(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function mr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=er(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function yr(t,e,n){var r=t._id;return t.each((function(){var t=er(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return nr(t,r).value[e]}}var gr=function(t,e){var n;return("number"==typeof e?wn:e instanceof qe?dn:(n=qe(e))?(e=n,dn):En)(t,e)};function vr(t){return function(){this.removeAttribute(t)}}function xr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function br(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function _r(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function wr(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Mr(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Tr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ar(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Sr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Ar(t,i)),n}return i._value=e,i}function Or(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Tr(t,i)),n}return i._value=e,i}function Er(t,e){return function(){tr(this,t).delay=+e.apply(this,arguments)}}function kr(t,e){return e=+e,function(){tr(this,t).delay=e}}function Cr(t,e){return function(){er(this,t).duration=+e.apply(this,arguments)}}function Pr(t,e){return e=+e,function(){er(this,t).duration=e}}function Ir(t,e){if("function"!=typeof e)throw new Error;return function(){er(this,t).ease=e}}function Rr(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?tr:er;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var Dr=we.prototype.constructor;function Nr(t){return function(){this.style.removeProperty(t)}}function Br(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Lr(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Br(t,o,n)),r}return o._value=e,o}function jr(t){return function(e){this.textContent=t.call(this,e)}}function Fr(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&jr(r)),e}return r._value=t,r}var zr=0;function Vr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ur(t){return we().transition(t)}function Gr(){return++zr}var qr=we.prototype;function Hr(t){return t*t*t}function Wr(t){return--t*t*t+1}function Yr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Vr.prototype=Ur.prototype={constructor:Vr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=dt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],f=c.length,h=o[a]=new Array(f),l=0;l<f;++l)(s=c[l])&&(u=t.call(s,s.__data__,l,c))&&("__data__"in s&&(u.__data__=s.__data__),h[l]=u,Qn(h[l],e,n,l,h,nr(s,n)));return new Vr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=mt(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],f=c.length,h=0;h<f;++h)if(u=c[h]){for(var l,d=t.call(u,u.__data__,h,c),p=nr(u,n),m=0,y=d.length;m<y;++m)(l=d[m])&&Qn(l,e,n,m,d,p);o.push(d),a.push(u)}return new Vr(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Vr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],f=n[s],h=c.length,l=a[s]=new Array(h),d=0;d<h;++d)(u=c[d]||f[d])&&(l[d]=u);for(;s<r;++s)a[s]=e[s];return new Vr(a,this._parents,this._name,this._id)},selection:function(){return new Dr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Gr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var f=nr(a,e);Qn(a,t,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Vr(r,this._parents,t,n)},call:qr.call,nodes:qr.nodes,node:qr.node,size:qr.size,empty:qr.empty,each:qr.each,on:function(t,e){var n=this._id;return arguments.length<2?nr(this.node(),n).on.on(t):this.each(Rr(n,t,e))},attr:function(t,e){var n=Tt(t),r="transform"===n?dr:gr;return this.attrTween(t,"function"==typeof e?(n.local?Mr:wr)(n,r,yr(this,"attr."+t,e)):null==e?(n.local?xr:vr)(n):(n.local?_r:br)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Tt(t);return this.tween(n,(r.local?Sr:Or)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?lr:gr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Nt(this,t),a=(this.style.removeProperty(t),Nt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Nr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Nt(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Nt(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,yr(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=er(this,t),c=u.on,f=null==u.value[a]?o||(o=Nr(e)):void 0;c===n&&i===f||(r=(n=c).copy()).on(s,i=f),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Nt(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Lr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(yr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Fr(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=nr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?pr:mr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Er:kr)(e,t)):nr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cr:Pr)(e,t)):nr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ir(e,t)):nr(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=er(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Kr={time:null,delay:0,duration:250,ease:Yr};function Xr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Kr.time=Un(),Kr;return n}we.prototype.interrupt=function(t){return this.each((function(){sr(this,t)}))},we.prototype.transition=function(t){var e,n;t instanceof Vr?(e=t._id,t=t._name):(e=Gr(),(n=Kr).time=Un(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Qn(a,t,e,c,s,n||Xr(a,e));return new Vr(r,this._parents,t,e)};var $r=[null],Zr=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new Vr([[t]],$r,e,+r);return null},Jr=function(t){return function(){return t}},Qr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function ti(){ce.stopImmediatePropagation()}var ei=function(){ce.preventDefault(),ce.stopImmediatePropagation()},ni={name:"drag"},ri={name:"space"},ii={name:"handle"},oi={name:"center"};function ai(t){return[+t[0],+t[1]]}function si(t){return[ai(t[0]),ai(t[1])]}function ui(t){return function(e){return In(e,ce.touches,t)}}var ci={name:"x",handles:["w","e"].map(gi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},fi={name:"y",handles:["n","s"].map(gi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},hi={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gi),input:function(t){return null==t?null:si(t)},output:function(t){return t}},li={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},di={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},pi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gi(t){return{type:t}}function vi(){return!ce.ctrlKey&&!ce.button}function xi(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function bi(){return navigator.maxTouchPoints||"ontouchstart"in this}function _i(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function wi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Mi(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Ti(){return Oi(ci)}function Ai(){return Oi(fi)}var Si=function(){return Oi(hi)};function Oi(t){var e,n=xi,r=vi,i=bi,o=!0,a=ht("start","brush","end"),s=6;function u(e){var n=e.property("__brush",m).selectAll(".overlay").data([gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",li.overlay).merge(n).each((function(){var t=_i(this).extent;Me(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",li.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return li[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",l).filter(i).on("touchstart.brush",l).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Me(this),e=_i(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function l(){if((!e||ce.touches)&&r.apply(this,arguments)){var n,i,a,s,u,h,l,d,p,m,y,g=this,v=ce.target.__data__.type,x="selection"===(o&&ce.metaKey?v="overlay":v)?ni:o&&ce.altKey?oi:ii,b=t===fi?null:mi[v],_=t===ci?null:yi[v],w=_i(g),M=w.extent,T=w.selection,A=M[0][0],S=M[0][1],O=M[1][0],E=M[1][1],k=0,C=0,P=b&&_&&o&&ce.shiftKey,I=ce.touches?ui(ce.changedTouches[0].identifier):Rn,R=I(g),D=R,N=f(g,arguments,!0).beforestart();"overlay"===v?(T&&(p=!0),w.selection=T=[[n=t===fi?A:R[0],a=t===ci?S:R[1]],[u=t===fi?O:n,l=t===ci?E:a]]):(n=T[0][0],a=T[0][1],u=T[1][0],l=T[1][1]),i=n,s=a,h=u,d=l;var B=Me(g).attr("pointer-events","none"),L=B.selectAll(".overlay").attr("cursor",li[v]);if(ce.touches)N.moved=F,N.ended=V;else{var j=Me(ce.view).on("mousemove.brush",F,!0).on("mouseup.brush",V,!0);o&&j.on("keydown.brush",U,!0).on("keyup.brush",G,!0),Se(ce.view)}ti(),sr(g),c.call(g),N.start()}function F(){var t=I(g);!P||m||y||(Math.abs(t[0]-D[0])>Math.abs(t[1]-D[1])?y=!0:m=!0),D=t,p=!0,ei(),z()}function z(){var t;switch(k=D[0]-R[0],C=D[1]-R[1],x){case ri:case ni:b&&(k=Math.max(A-n,Math.min(O-u,k)),i=n+k,h=u+k),_&&(C=Math.max(S-a,Math.min(E-l,C)),s=a+C,d=l+C);break;case ii:b<0?(k=Math.max(A-n,Math.min(O-n,k)),i=n+k,h=u):b>0&&(k=Math.max(A-u,Math.min(O-u,k)),i=n,h=u+k),_<0?(C=Math.max(S-a,Math.min(E-a,C)),s=a+C,d=l):_>0&&(C=Math.max(S-l,Math.min(E-l,C)),s=a,d=l+C);break;case oi:b&&(i=Math.max(A,Math.min(O,n-k*b)),h=Math.max(A,Math.min(O,u+k*b))),_&&(s=Math.max(S,Math.min(E,a-C*_)),d=Math.max(S,Math.min(E,l+C*_)))}h<i&&(b*=-1,t=n,n=u,u=t,t=i,i=h,h=t,v in di&&L.attr("cursor",li[v=di[v]])),d<s&&(_*=-1,t=a,a=l,l=t,t=s,s=d,d=t,v in pi&&L.attr("cursor",li[v=pi[v]])),w.selection&&(T=w.selection),m&&(i=T[0][0],h=T[1][0]),y&&(s=T[0][1],d=T[1][1]),T[0][0]===i&&T[0][1]===s&&T[1][0]===h&&T[1][1]===d||(w.selection=[[i,s],[h,d]],c.call(g),N.brush())}function V(){if(ti(),ce.touches){if(ce.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Oe(ce.view,p),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),L.attr("cursor",li.overlay),w.selection&&(T=w.selection),wi(T)&&(w.selection=null,c.call(g)),N.end()}function U(){switch(ce.keyCode){case 16:P=b&&_;break;case 18:x===ii&&(b&&(u=h-k*b,n=i+k*b),_&&(l=d-C*_,a=s+C*_),x=oi,z());break;case 32:x!==ii&&x!==oi||(b<0?u=h-k:b>0&&(n=i-k),_<0?l=d-C:_>0&&(a=s-C),x=ri,L.attr("cursor",li.selection),z());break;default:return}ei()}function G(){switch(ce.keyCode){case 16:P&&(m=y=P=!1,z());break;case 18:x===oi&&(b<0?u=h:b>0&&(n=i),_<0?l=d:_>0&&(a=s),x=ii,z());break;case 32:x===ri&&(ce.altKey?(b&&(u=h-k*b,n=i+k*b),_&&(l=d-C*_,a=s+C*_),x=oi):(b<0?u=h:b>0&&(n=i),_<0?l=d:_>0&&(a=s),x=ii),L.attr("cursor",li[v]),z());break;default:return}ei()}}function d(){f(this,arguments).moved()}function p(){f(this,arguments).ended()}function m(){var e=this.__brush||{selection:null};return e.extent=si(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on("start.brush",(function(){f(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){f(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=f(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=kn(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),c.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,i.extent),a=f(e,r).beforestart();sr(e),i.selection=null===o?null:o,c.call(e),a.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){me(new Qr(u,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Jr(si(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Jr(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Jr(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var Ei=Math.cos,ki=Math.sin,Ci=Math.PI,Pi=Ci/2,Ii=2*Ci,Ri=Math.max;function Di(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Ni=function(){var t=0,e=null,n=null,r=null;function i(i){var o,a,s,u,c,f,h=i.length,l=[],d=M(h),p=[],m=[],y=m.groups=new Array(h),g=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,f=-1;++f<h;)a+=i[c][f];l.push(a),p.push(M(h)),o+=a}for(e&&d.sort((function(t,n){return e(l[t],l[n])})),n&&p.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(o=Ri(0,Ii-t*h)/o)?t:Ii/h,a=0,c=-1;++c<h;){for(s=a,f=-1;++f<h;){var v=d[c],x=p[v][f],b=i[v][x],_=a,w=a+=b*o;g[x*h+v]={index:v,subindex:x,startAngle:_,endAngle:w,value:b}}y[v]={index:v,startAngle:s,endAngle:a,value:l[v]},a+=u}for(c=-1;++c<h;)for(f=c-1;++f<h;){var T=g[f*h+c],A=g[c*h+f];(T.value||A.value)&&m.push(T.value<A.value?{source:A,target:T}:{source:T,target:A})}return r?m.sort(r):m}return i.padAngle=function(e){return arguments.length?(t=Ri(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Di(t))._=t,i):r&&r._},i},Bi=Array.prototype.slice,Li=function(t){return function(){return t}},ji=Math.PI,Fi=2*ji,zi=Fi-1e-6;function Vi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ui(){return new Vi}Vi.prototype=Ui.prototype={constructor:Vi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,f=a-e,h=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(f*s-u*c)>1e-6&&i){var l=n-o,d=r-a,p=s*s+u*u,m=l*l+d*d,y=Math.sqrt(p),g=Math.sqrt(h),v=i*Math.tan((ji-Math.acos((p+h-m)/(2*y*g)))/2),x=v/g,b=v/y;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*c)+","+(e+x*f)),this._+="A"+i+","+i+",0,0,"+ +(f*l>c*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,f=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Fi+Fi),h>zi?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=ji)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Gi=Ui;function qi(t){return t.source}function Hi(t){return t.target}function Wi(t){return t.radius}function Yi(t){return t.startAngle}function Ki(t){return t.endAngle}var Xi=function(){var t=qi,e=Hi,n=Wi,r=Yi,i=Ki,o=null;function a(){var a,s=Bi.call(arguments),u=t.apply(this,s),c=e.apply(this,s),f=+n.apply(this,(s[0]=u,s)),h=r.apply(this,s)-Pi,l=i.apply(this,s)-Pi,d=f*Ei(h),p=f*ki(h),m=+n.apply(this,(s[0]=c,s)),y=r.apply(this,s)-Pi,g=i.apply(this,s)-Pi;if(o||(o=a=Gi()),o.moveTo(d,p),o.arc(0,0,f,h,l),h===y&&l===g||(o.quadraticCurveTo(0,0,m*Ei(y),m*ki(y)),o.arc(0,0,m,y,g)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Li(+t),a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Li(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Li(+t),a):i},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a};function $i(){}function Zi(t,e){var n=new $i;if(t instanceof $i)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}$i.prototype=Zi.prototype={constructor:$i,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ji=Zi,Qi=function(){var t,e,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,c,f,h=-1,l=n.length,d=r[i++],p=Ji(),m=a();++h<l;)(f=p.get(u=d(c=n[h])+""))?f.push(c):p.set(u,[c]);return p.each((function(t,e){s(m,e,o(t,i,a,s))})),m}return n={object:function(t){return o(t,0,to,eo)},map:function(t){return o(t,0,no,ro)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each((function(e,n){a.push({key:n,values:t(e,o)})}))),null!=s?a.sort((function(t,e){return s(t.key,e.key)})):a}(o(t,0,no,ro),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function to(){return{}}function eo(t,e,n){t[e]=n}function no(){return Ji()}function ro(t,e,n){t.set(e,n)}function io(){}var oo=Ji.prototype;function ao(t,e){var n=new io;if(t instanceof io)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}io.prototype=ao.prototype={constructor:io,has:oo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:oo.remove,clear:oo.clear,values:oo.keys,size:oo.size,empty:oo.empty,each:oo.each};var so=ao,uo=function(t){var e=[];for(var n in t)e.push(n);return e},co=function(t){var e=[];for(var n in t)e.push(t[n]);return e},fo=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ho=Math.PI/180,lo=180/Math.PI;function po(t){if(t instanceof go)return new go(t.l,t.a,t.b,t.opacity);if(t instanceof Ao)return So(t);t instanceof Xe||(t=Ye(t));var e,n,r=_o(t.r),i=_o(t.g),o=_o(t.b),a=vo((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=vo((.4360747*r+.3850649*i+.1430804*o)/.96422),n=vo((.0139322*r+.0971045*i+.7141733*o)/.82521)),new go(116*a-16,500*(e-a),200*(a-n),t.opacity)}function mo(t,e){return new go(t,0,0,null==e?1:e)}function yo(t,e,n,r){return 1===arguments.length?po(t):new go(t,e,n,null==r?1:r)}function go(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function vo(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function xo(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function bo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function _o(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wo(t){if(t instanceof Ao)return new Ao(t.h,t.c,t.l,t.opacity);if(t instanceof go||(t=po(t)),0===t.a&&0===t.b)return new Ao(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*lo;return new Ao(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Mo(t,e,n,r){return 1===arguments.length?wo(t):new Ao(n,e,t,null==r?1:r)}function To(t,e,n,r){return 1===arguments.length?wo(t):new Ao(t,e,n,null==r?1:r)}function Ao(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function So(t){if(isNaN(t.h))return new go(t.l,0,0,t.opacity);var e=t.h*ho;return new go(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ee(go,yo,ke(Ce,{brighter:function(t){return new go(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new go(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Xe(bo(3.1338561*(e=.96422*xo(e))-1.6168667*(t=1*xo(t))-.4906146*(n=.82521*xo(n))),bo(-.9787684*e+1.9161415*t+.033454*n),bo(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ee(Ao,To,ke(Ce,{brighter:function(t){return new Ao(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ao(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return So(this).rgb()}}));var Oo=-.29227,Eo=-1.7884503806,ko=3.5172982438,Co=-.6557636667999999;function Po(t){if(t instanceof Ro)return new Ro(t.h,t.s,t.l,t.opacity);t instanceof Xe||(t=Ye(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Co*r+Eo*e-ko*n)/(Co+Eo-ko),o=r-i,a=(1.97294*(n-i)-Oo*o)/-.90649,s=Math.sqrt(a*a+o*o)/(1.97294*i*(1-i)),u=s?Math.atan2(a,o)*lo-120:NaN;return new Ro(u<0?u+360:u,s,i,t.opacity)}function Io(t,e,n,r){return 1===arguments.length?Po(t):new Ro(t,e,n,null==r?1:r)}function Ro(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ee(Ro,Io,ke(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ro(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ro(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ho,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Xe(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Oo*r+-.90649*i)),255*(e+n*(1.97294*r)),this.opacity)}}));var Do=Array.prototype.slice,No=function(t,e){return t-e},Bo=function(t){return function(){return t}},Lo=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=jo(t,e[r]))return n;return 0};function jo(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],f=u[1],h=t[s],l=h[0],d=h[1];if(Fo(u,h,e))return 0;f>r!=d>r&&n<(l-c)*(r-f)/(d-f)+c&&(i=-i)}return i}function Fo(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}var zo=function(){},Vo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Uo=function(){var t=1,e=1,n=C,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(No);else{var r=g(t),i=r[0],a=r[1];e=k(i,a,e),e=M(Math.floor(i/e)*e,Math.floor(a/e)*e,e)}return e.map((function(e){return o(t,e)}))}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,c,f,h,l=new Array,d=new Array;o=s=-1,c=n[0]>=r,Vo[c<<1].forEach(p);for(;++o<t-1;)u=c,c=n[o+1]>=r,Vo[u|c<<1].forEach(p);Vo[c<<0].forEach(p);for(;++s<e-1;){for(o=-1,c=n[s*t+t]>=r,f=n[s*t]>=r,Vo[c<<1|f<<2].forEach(p);++o<t-1;)u=c,c=n[s*t+t+o+1]>=r,h=f,f=n[s*t+o+1]>=r,Vo[u|c<<1|f<<2|h<<3].forEach(p);Vo[c|f<<3].forEach(p)}o=-1,f=n[s*t]>=r,Vo[f<<2].forEach(p);for(;++o<t-1;)h=f,f=n[s*t+o+1]>=r,Vo[f<<2|h<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),f=a(u);(e=d[c])?(n=l[f])?(delete d[e.end],delete l[n.start],e===n?(e.ring.push(u),i(e.ring)):l[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=f]=e):(e=l[f])?(n=d[c])?(delete l[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):l[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete l[e.start],e.ring.unshift(r),l[e.start=c]=e):l[c]=d[f]={start:c,end:f,ring:[r,u]}}Vo[f<<3].forEach(p)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==Lo((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,f=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(f-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(f-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Bo(Do.call(t)):Bo(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:zo,i):r===s},i};function Go(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),s>=n&&(s>=o&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function qo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),s>=n&&(s>=o&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function Ho(t){return t[0]}function Wo(t){return t[1]}function Yo(){return 1}var Ko=function(){var t=Ho,e=Wo,n=Yo,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,c=i+2*s>>a,f=Bo(20);function h(r){var i=new Float32Array(u*c),h=new Float32Array(u*c);r.forEach((function(r,o,f){var h=+t(r,o,f)+s>>a,l=+e(r,o,f)+s>>a,d=+n(r,o,f);h>=0&&h<u&&l>=0&&l<c&&(i[h+l*u]+=d)})),Go({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),qo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),Go({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),qo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),Go({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),qo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a);var d=f(i);if(!Array.isArray(d)){var p=N(i);d=k(0,p,d),(d=M(0,Math.floor(p/d)*d,d)).shift()}return Uo().thresholds(d).size([u,c])(i).map(l)}function l(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function y(){return u=r+2*(s=3*o)>>a,c=i+2*s>>a,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:Bo(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:Bo(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:Bo(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,y()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},h.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?Bo(Do.call(t)):Bo(t),h):f},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},h},Xo=function(t){return function(){return t}};function $o(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function Zo(){return!ce.ctrlKey&&!ce.button}function Jo(){return this.parentNode}function Qo(t){return null==t?{x:ce.x,y:ce.y}:t}function ta(){return navigator.maxTouchPoints||"ontouchstart"in this}$o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ea=function(){var t,e,n,r,i=Zo,o=Jo,a=Qo,s=ta,u={},c=ht("start","drag","end"),f=0,h=0;function l(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",y).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var a=x("mouse",o.apply(this,arguments),Rn,this,arguments);a&&(Me(ce.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Se(ce.view),Te(),n=!1,t=ce.clientX,e=ce.clientY,a("start"))}}function p(){if(Ae(),!n){var r=ce.clientX-t,i=ce.clientY-e;n=r*r+i*i>h}u.mouse("drag")}function m(){Me(ce.view).on("mousemove.drag mouseup.drag",null),Oe(ce.view,n),Ae(),u.mouse("end")}function y(){if(i.apply(this,arguments)){var t,e,n=ce.changedTouches,r=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=x(n[t].identifier,r,In,this,arguments))&&(Te(),e("start"))}}function g(){var t,e,n=ce.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(Ae(),e("drag"))}function v(){var t,e,n=ce.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(Te(),e("end"))}function x(t,e,n,r,i){var o,s,h,d=n(e,t),p=c.copy();if(me(new $o(l,"beforestart",o,t,f,d[0],d[1],0,0,p),(function(){return null!=(ce.subject=o=a.apply(r,i))&&(s=o.x-d[0]||0,h=o.y-d[1]||0,!0)})))return function a(c){var m,y=d;switch(c){case"start":u[t]=a,m=f++;break;case"end":delete u[t],--f;case"drag":d=n(e,t),m=f}me(new $o(l,c,o,t,m,d[0]+s,d[1]+h,d[0]-y[0],d[1]-y[1],p),p.apply,p,[c,r,i])}}return l.filter=function(t){return arguments.length?(i="function"==typeof t?t:Xo(!!t),l):i},l.container=function(t){return arguments.length?(o="function"==typeof t?t:Xo(t),l):o},l.subject=function(t){return arguments.length?(a="function"==typeof t?t:Xo(t),l):a},l.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Xo(!!t),l):s},l.on=function(){var t=c.on.apply(c,arguments);return t===c?l:t},l.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,l):Math.sqrt(h)},l},na={},ra={};function ia(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function oa(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function aa(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function sa(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+aa(-e,6):e>9999?"+"+aa(e,6):aa(e,4))+"-"+aa(t.getUTCMonth()+1,2)+"-"+aa(t.getUTCDate(),2)+(o?"T"+aa(n,2)+":"+aa(r,2)+":"+aa(i,2)+"."+aa(o,3)+"Z":i?"T"+aa(n,2)+":"+aa(r,2)+":"+aa(i,2)+"Z":r||n?"T"+aa(n,2)+":"+aa(r,2)+"Z":"")}var ua=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function f(){if(u)return ra;if(c)return c=!1,na;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=f())!==ra;){for(var h=[];r!==na&&r!==ra;)h.push(r),r=f();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?sa(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ia(t);return function(r,i){return e(n(r),i,t)}}(t,e):ia(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=oa(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=oa(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}},ca=ua(","),fa=ca.parse,ha=ca.parseRows,la=ca.format,da=ca.formatBody,pa=ca.formatRows,ma=ca.formatRow,ya=ca.formatValue,ga=ua("\t"),va=ga.parse,xa=ga.parseRows,ba=ga.format,_a=ga.formatBody,wa=ga.formatRows,Ma=ga.formatRow,Ta=ga.formatValue;function Aa(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Sa&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var Sa=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Oa(t){return+t}function Ea(t){return t*t}function ka(t){return t*(2-t)}function Ca(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Pa=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Ia=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Ra=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Da=Math.PI,Na=Da/2;function Ba(t){return 1-Math.cos(t*Na)}function La(t){return Math.sin(t*Na)}function ja(t){return(1-Math.cos(Da*t))/2}function Fa(t){return Math.pow(2,10*t-10)}function za(t){return 1-Math.pow(2,-10*t)}function Va(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ua(t){return 1-Math.sqrt(1-t*t)}function Ga(t){return Math.sqrt(1- --t*t)}function qa(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Ha(t){return 1-Wa(1-t)}function Wa(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+3/4:t<10/11?7.5625*(t-=9/11)*t+15/16:7.5625*(t-=21/22)*t+63/64}function Ya(t){return((t*=2)<=1?1-Wa(1-t):Wa(t-1)+1)/2}var Ka=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Xa=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),$a=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Za=2*Math.PI,Ja=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Za);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Za)},i.period=function(n){return t(e,n)},i}(1,.3),Qa=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Za);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Za)},i.period=function(n){return t(e,n)},i}(1,.3),ts=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Za);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Za)},i.period=function(n){return t(e,n)},i}(1,.3);function es(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var ns=function(t,e){return fetch(t,e).then(es)};function rs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var is=function(t,e){return fetch(t,e).then(rs)};function os(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var as=function(t,e){return fetch(t,e).then(os)};function ss(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),as(e,n).then((function(e){return t(e,r)}))}}function us(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=ua(t);return as(e,n).then((function(t){return i.parse(t,r)}))}var cs=ss(fa),fs=ss(va),hs=function(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function ls(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}var ds=function(t,e){return fetch(t,e).then(ls)};function ps(t){return function(e,n){return as(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var ms=ps("application/xml"),ys=ps("text/html"),gs=ps("image/svg+xml"),vs=function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},xs=function(t){return function(){return t}},bs=function(){return 1e-6*(Math.random()-.5)};function _s(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,f,h,l,d=t._root,p={data:r},m=t._x0,y=t._y0,g=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(m+g)/2))?m=o:g=o,(f=n>=(a=(y+v)/2))?y=a:v=a,i=d,!(d=d[h=f<<1|c]))return i[h]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+g)/2))?m=o:g=o,(f=n>=(a=(y+v)/2))?y=a:v=a}while((h=f<<1|c)==(l=(u>=a)<<1|s>=o));return i[l]=d,i[h]=p,t}var ws=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Ms(t){return t[0]}function Ts(t){return t[1]}function As(t,e,n){var r=new Ss(null==e?Ms:e,null==n?Ts:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ss(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Os(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Es=As.prototype=Ss.prototype;function ks(t){return t.x+t.vx}function Cs(t){return t.y+t.vy}Es.copy=function(){var t,e,n=new Ss(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Os(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Os(e));return n},Es.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return _s(this.cover(e,n),e,n,t)},Es.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>f&&(f=r),i<c&&(c=i),i>h&&(h=i));if(u>f||c>h)return this;for(this.cover(u,c).cover(f,h),n=0;n<o;++n)_s(this,a[n],s[n],t[n]);return this},Es.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Es.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Es.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Es.find=function(t,e,n){var r,i,o,a,s,u,c,f=this._x0,h=this._y0,l=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new ws(m,f,h,l,d)),null==n?n=1/0:(f=t-n,h=e-n,l=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>l||(o=u.y0)>d||(a=u.x1)<f||(s=u.y1)<h))if(m.length){var y=(i+a)/2,g=(o+s)/2;p.push(new ws(m[3],y,g,a,s),new ws(m[2],i,g,y,s),new ws(m[1],y,o,a,g),new ws(m[0],i,o,y,g)),(c=(e>=g)<<1|t>=y)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var v=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),b=v*v+x*x;if(b<n){var _=Math.sqrt(n=b);f=t-_,h=e-_,l=t+_,d=e+_,r=m.data}}return r},Es.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,f,h,l,d=this._root,p=this._x0,m=this._y0,y=this._x1,g=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+y)/2))?p=s:y=s,(f=a>=(u=(m+g)/2))?m=u:g=u,e=d,!(d=d[h=f<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,l=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[l]=d:this._root=d),this):(this._root=i,this)},Es.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Es.root=function(){return this._root},Es.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Es.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new ws(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,f=(i+a)/2;(n=u[3])&&s.push(new ws(n,c,f,o,a)),(n=u[2])&&s.push(new ws(n,r,f,c,a)),(n=u[1])&&s.push(new ws(n,c,i,o,f)),(n=u[0])&&s.push(new ws(n,r,i,c,f))}return this},Es.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new ws(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,f=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new ws(o,a,s,f,h)),(o=i[1])&&n.push(new ws(o,f,s,u,h)),(o=i[2])&&n.push(new ws(o,a,h,f,c)),(o=i[3])&&n.push(new ws(o,f,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Es.x=function(t){return arguments.length?(this._x=t,this):this._x},Es.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ps=function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,f,h,l=e.length,d=0;d<i;++d)for(o=As(e,ks,Cs).visitAfter(a),t=0;t<l;++t)s=e[t],f=n[s.index],h=f*f,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,l=t.r,d=f+l;if(!a)return e>u+d||i<u-d||n>c+d||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,m=c-a.y-a.vy,y=p*p+m*m;y<d*d&&(0===p&&(y+=(p=bs())*p),0===m&&(y+=(m=bs())*m),y=(d-(y=Math.sqrt(y)))/y*r,s.vx+=(p*=y)*(d=(l*=l)/(h+l)),s.vy+=(m*=y)*d,a.vx-=p*(d=1-d),a.vy-=m*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=xs(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:xs(+e),s(),o):t},o};function Is(t){return t.index}function Rs(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Ds=function(t){var e,n,r,i,o,a=Is,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=xs(30),c=1;function f(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,f,h,l,d,p,m=0;m<a;++m)u=(s=t[m]).source,h=(f=s.target).x+f.vx-u.x-u.vx||bs(),l=f.y+f.vy-u.y-u.vy||bs(),h*=d=((d=Math.sqrt(h*h+l*l))-n[m])/d*r*e[m],l*=d,f.vx-=h*(p=o[m]),f.vy-=l*p,u.vx+=h*(p=1-p),u.vy+=l*p}function h(){if(r){var s,u,c=r.length,f=t.length,h=Ji(r,a);for(s=0,i=new Array(c);s<f;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Rs(h,u.source)),"object"!=typeof u.target&&(u.target=Rs(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(f);s<f;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(f),l(),n=new Array(f),d()}}function l(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t){r=t,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(a=t,f):a},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:xs(+t),l(),f):s},f.distance=function(t){return arguments.length?(u="function"==typeof t?t:xs(+t),d(),f):u},f};function Ns(t){return t.x}function Bs(t){return t.y}var Ls=Math.PI*(3-Math.sqrt(5)),js=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Ji(),u=Hn(f),c=ht("tick","end");function f(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(r){var u,c,f=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.each((function(t){t(n)})),u=0;u<f;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function l(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*Ls;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),l(),e={tick:h,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,l(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},Fs=function(){var t,e,n,r,i=xs(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=As(t,Ns,Bs).visitAfter(f);for(n=r,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function f(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function h(t,i,u,c){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,l=c-i,d=f*f+h*h;if(l*l/s<d)return d<a&&(0===f&&(d+=(f=bs())*f),0===h&&(d+=(h=bs())*h),d<o&&(d=Math.sqrt(o*d)),e.vx+=f*t.value*n/d,e.vy+=h*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===f&&(d+=(f=bs())*f),0===h&&(d+=(h=bs())*h),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(l=r[t.data.index]*n/d,e.vx+=f*l,e.vy+=h*l)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},zs=function(t,e,n){var r,i,o,a=xs(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,f=u.y-n||1e-6,h=Math.sqrt(c*c+f*f),l=(o[a]-h)*i[a]*t/h;u.vx+=c*l,u.vy+=f*l}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=xs(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:xs(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:xs(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},Vs=function(t){var e,n,r,i=xs(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=xs(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:xs(+e),a(),o):t},o},Us=function(t){var e,n,r,i=xs(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=xs(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:xs(+e),a(),o):t},o},Gs=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},qs=function(t){return(t=Gs(Math.abs(t)))?t[1]:NaN},Hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ws(t){if(!(e=Hs.exec(t)))throw new Error("invalid format: "+t);var e;return new Ys({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ys(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ws.prototype=Ys.prototype,Ys.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ks,Xs,$s,Zs,Js=function(t,e){var n=Gs(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Qs={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Js(100*t,e)},r:Js,s:function(t,e){var n=Gs(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ks=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Gs(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},tu=function(t){return t},eu=Array.prototype.map,nu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],ru=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?tu:(e=eu.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?tu:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(eu.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ws(t)).fill,n=t.align,h=t.sign,l=t.symbol,d=t.zero,p=t.width,m=t.comma,y=t.precision,g=t.trim,v=t.type;"n"===v?(m=!0,v="g"):Qs[v]||(void 0===y&&(y=12),g=!0,v="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===l?i:"#"===l&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===l?o:/[%p]/.test(v)?u:"",_=Qs[v],w=/[defgprs%]/.test(v);function M(t){var i,o,u,l=x,M=b;if("c"===v)M=_(t)+M,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?f:_(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==h&&(T=!1),l=(T?"("===h?h:c:"-"===h||"("===h?"":h)+l,M=("s"===v?nu[8+Ks/3]:"")+M+(T&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){M=(46===u?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var A=l.length+t.length+M.length,S=A<p?new Array(p-A+1).join(e):"";switch(m&&d&&(t=r(S+t,S.length?p-M.length:1/0),S=""),n){case"<":t=l+t+M+S;break;case"=":t=l+S+t+M;break;case"^":t=S.slice(0,A=S.length>>1)+l+t+M+S.slice(A);break;default:t=S+l+t+M}return s(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ws(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(qs(e)/3))),i=Math.pow(10,-r),o=nu[8+r/3];return function(t){return n(i*t)+o}}}};function iu(t){return Xs=ru(t),$s=Xs.format,Zs=Xs.formatPrefix,Xs}iu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var ou=function(t){return Math.max(0,-qs(Math.abs(t)))},au=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(qs(e)/3)))-qs(Math.abs(t)))},su=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qs(e)-qs(t))+1},uu=function(){return new cu};function cu(){this.reset()}cu.prototype={constructor:cu,reset:function(){this.s=this.t=0},add:function(t){hu(fu,t,this.t),hu(this,fu.s,this.s),this.s?this.t+=fu.t:this.s=fu.t},valueOf:function(){return this.s}};var fu=new cu;function hu(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var lu=Math.PI,du=lu/2,pu=lu/4,mu=2*lu,yu=180/lu,gu=lu/180,vu=Math.abs,xu=Math.atan,bu=Math.atan2,_u=Math.cos,wu=Math.ceil,Mu=Math.exp,Tu=(Math.floor,Math.log),Au=Math.pow,Su=Math.sin,Ou=Math.sign||function(t){return t>0?1:t<0?-1:0},Eu=Math.sqrt,ku=Math.tan;function Cu(t){return t>1?0:t<-1?lu:Math.acos(t)}function Pu(t){return t>1?du:t<-1?-du:Math.asin(t)}function Iu(t){return(t=Su(t/2))*t}function Ru(){}function Du(t,e){t&&Bu.hasOwnProperty(t.type)&&Bu[t.type](t,e)}var Nu={Feature:function(t,e){Du(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Du(n[r].geometry,e)}},Bu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Lu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Lu(n[r],e,0)},Polygon:function(t,e){ju(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ju(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Du(n[r],e)}};function Lu(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ju(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Lu(t[n],e,1);e.polygonEnd()}var Fu,zu,Vu,Uu,Gu,qu=function(t,e){t&&Nu.hasOwnProperty(t.type)?Nu[t.type](t,e):Du(t,e)},Hu=uu(),Wu=uu(),Yu={point:Ru,lineStart:Ru,lineEnd:Ru,polygonStart:function(){Hu.reset(),Yu.lineStart=Ku,Yu.lineEnd=Xu},polygonEnd:function(){var t=+Hu;Wu.add(t<0?mu+t:t),this.lineStart=this.lineEnd=this.point=Ru},sphere:function(){Wu.add(mu)}};function Ku(){Yu.point=$u}function Xu(){Zu(Fu,zu)}function $u(t,e){Yu.point=Zu,Fu=t,zu=e,Vu=t*=gu,Uu=_u(e=(e*=gu)/2+pu),Gu=Su(e)}function Zu(t,e){var n=(t*=gu)-Vu,r=n>=0?1:-1,i=r*n,o=_u(e=(e*=gu)/2+pu),a=Su(e),s=Gu*a,u=Uu*o+s*_u(i),c=s*r*Su(i);Hu.add(bu(c,u)),Vu=t,Uu=o,Gu=a}var Ju=function(t){return Wu.reset(),qu(t,Yu),2*Wu};function Qu(t){return[bu(t[1],t[0]),Pu(t[2])]}function tc(t){var e=t[0],n=t[1],r=_u(n);return[r*_u(e),r*Su(e),Su(n)]}function ec(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ic(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function oc(t){var e=Eu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ac,sc,uc,cc,fc,hc,lc,dc,pc,mc,yc=uu(),gc={point:vc,lineStart:bc,lineEnd:_c,polygonStart:function(){gc.point=wc,gc.lineStart=Mc,gc.lineEnd=Tc,yc.reset(),Yu.polygonStart()},polygonEnd:function(){Yu.polygonEnd(),gc.point=vc,gc.lineStart=bc,gc.lineEnd=_c,Hu<0?(ac=-(uc=180),sc=-(cc=90)):yc>1e-6?cc=90:yc<-1e-6&&(sc=-90),mc[0]=ac,mc[1]=uc},sphere:function(){ac=-(uc=180),sc=-(cc=90)}};function vc(t,e){pc.push(mc=[ac=t,uc=t]),e<sc&&(sc=e),e>cc&&(cc=e)}function xc(t,e){var n=tc([t*gu,e*gu]);if(dc){var r=nc(dc,n),i=nc([r[1],-r[0],0],r);oc(i),i=Qu(i);var o,a=t-fc,s=a>0?1:-1,u=i[0]*yu*s,c=vu(a)>180;c^(s*fc<u&&u<s*t)?(o=i[1]*yu)>cc&&(cc=o):c^(s*fc<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*yu)<sc&&(sc=o):(e<sc&&(sc=e),e>cc&&(cc=e)),c?t<fc?Ac(ac,t)>Ac(ac,uc)&&(uc=t):Ac(t,uc)>Ac(ac,uc)&&(ac=t):uc>=ac?(t<ac&&(ac=t),t>uc&&(uc=t)):t>fc?Ac(ac,t)>Ac(ac,uc)&&(uc=t):Ac(t,uc)>Ac(ac,uc)&&(ac=t)}else pc.push(mc=[ac=t,uc=t]);e<sc&&(sc=e),e>cc&&(cc=e),dc=n,fc=t}function bc(){gc.point=xc}function _c(){mc[0]=ac,mc[1]=uc,gc.point=vc,dc=null}function wc(t,e){if(dc){var n=t-fc;yc.add(vu(n)>180?n+(n>0?360:-360):n)}else hc=t,lc=e;Yu.point(t,e),xc(t,e)}function Mc(){Yu.lineStart()}function Tc(){wc(hc,lc),Yu.lineEnd(),vu(yc)>1e-6&&(ac=-(uc=180)),mc[0]=ac,mc[1]=uc,dc=null}function Ac(t,e){return(e-=t)<0?e+360:e}function Sc(t,e){return t[0]-e[0]}function Oc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Ec,kc,Cc,Pc,Ic,Rc,Dc,Nc,Bc,Lc,jc,Fc,zc,Vc,Uc,Gc,qc=function(t){var e,n,r,i,o,a,s;if(cc=uc=-(ac=sc=1/0),pc=[],qu(t,gc),n=pc.length){for(pc.sort(Sc),e=1,o=[r=pc[0]];e<n;++e)Oc(r,(i=pc[e])[0])||Oc(r,i[1])?(Ac(r[0],i[1])>Ac(r[0],r[1])&&(r[1]=i[1]),Ac(i[0],r[1])>Ac(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=Ac(r[1],i[0]))>a&&(a=s,ac=i[0],uc=r[1])}return pc=mc=null,ac===1/0||sc===1/0?[[NaN,NaN],[NaN,NaN]]:[[ac,sc],[uc,cc]]},Hc={sphere:Ru,point:Wc,lineStart:Kc,lineEnd:Zc,polygonStart:function(){Hc.lineStart=Jc,Hc.lineEnd=Qc},polygonEnd:function(){Hc.lineStart=Kc,Hc.lineEnd=Zc}};function Wc(t,e){t*=gu;var n=_u(e*=gu);Yc(n*_u(t),n*Su(t),Su(e))}function Yc(t,e,n){++Ec,Cc+=(t-Cc)/Ec,Pc+=(e-Pc)/Ec,Ic+=(n-Ic)/Ec}function Kc(){Hc.point=Xc}function Xc(t,e){t*=gu;var n=_u(e*=gu);Vc=n*_u(t),Uc=n*Su(t),Gc=Su(e),Hc.point=$c,Yc(Vc,Uc,Gc)}function $c(t,e){t*=gu;var n=_u(e*=gu),r=n*_u(t),i=n*Su(t),o=Su(e),a=bu(Eu((a=Uc*o-Gc*i)*a+(a=Gc*r-Vc*o)*a+(a=Vc*i-Uc*r)*a),Vc*r+Uc*i+Gc*o);kc+=a,Rc+=a*(Vc+(Vc=r)),Dc+=a*(Uc+(Uc=i)),Nc+=a*(Gc+(Gc=o)),Yc(Vc,Uc,Gc)}function Zc(){Hc.point=Wc}function Jc(){Hc.point=tf}function Qc(){ef(Fc,zc),Hc.point=Wc}function tf(t,e){Fc=t,zc=e,t*=gu,e*=gu,Hc.point=ef;var n=_u(e);Vc=n*_u(t),Uc=n*Su(t),Gc=Su(e),Yc(Vc,Uc,Gc)}function ef(t,e){t*=gu;var n=_u(e*=gu),r=n*_u(t),i=n*Su(t),o=Su(e),a=Uc*o-Gc*i,s=Gc*r-Vc*o,u=Vc*i-Uc*r,c=Eu(a*a+s*s+u*u),f=Pu(c),h=c&&-f/c;Bc+=h*a,Lc+=h*s,jc+=h*u,kc+=f,Rc+=f*(Vc+(Vc=r)),Dc+=f*(Uc+(Uc=i)),Nc+=f*(Gc+(Gc=o)),Yc(Vc,Uc,Gc)}var nf=function(t){Ec=kc=Cc=Pc=Ic=Rc=Dc=Nc=Bc=Lc=jc=0,qu(t,Hc);var e=Bc,n=Lc,r=jc,i=e*e+n*n+r*r;return i<1e-12&&(e=Rc,n=Dc,r=Nc,kc<1e-6&&(e=Cc,n=Pc,r=Ic),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[bu(n,e)*yu,Pu(r/Eu(i))*yu]},rf=function(t){return function(){return t}},of=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function af(t,e){return[vu(t)>lu?t+Math.round(-t/mu)*mu:t,e]}function sf(t,e,n){return(t%=mu)?e||n?of(cf(t),ff(e,n)):cf(t):e||n?ff(e,n):af}function uf(t){return function(e,n){return[(e+=t)>lu?e-mu:e<-lu?e+mu:e,n]}}function cf(t){var e=uf(t);return e.invert=uf(-t),e}function ff(t,e){var n=_u(t),r=Su(t),i=_u(e),o=Su(e);function a(t,e){var a=_u(e),s=_u(t)*a,u=Su(t)*a,c=Su(e),f=c*n+s*r;return[bu(u*i-f*o,s*n-c*r),Pu(f*i+u*o)]}return a.invert=function(t,e){var a=_u(e),s=_u(t)*a,u=Su(t)*a,c=Su(e),f=c*i-u*o;return[bu(u*i+c*o,s*n+f*r),Pu(f*n-s*r)]},a}af.invert=af;var hf=function(t){function e(e){return(e=t(e[0]*gu,e[1]*gu))[0]*=yu,e[1]*=yu,e}return t=sf(t[0]*gu,t[1]*gu,t.length>2?t[2]*gu:0),e.invert=function(e){return(e=t.invert(e[0]*gu,e[1]*gu))[0]*=yu,e[1]*=yu,e},e};function lf(t,e,n,r,i,o){if(n){var a=_u(e),s=Su(e),u=r*n;null==i?(i=e+r*mu,o=e-u/2):(i=df(a,i),o=df(a,o),(r>0?i<o:i>o)&&(i+=r*mu));for(var c,f=i;r>0?f>o:f<o;f-=u)c=Qu([a,-s*_u(f),-s*Su(f)]),t.point(c[0],c[1])}}function df(t,e){(e=tc(e))[0]-=t,oc(e);var n=Cu(-e[1]);return((-e[2]<0?-n:n)+mu-1e-6)%mu}var pf=function(){var t,e,n=rf([0,0]),r=rf(90),i=rf(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=yu,n[1]*=yu}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*gu,u=i.apply(this,arguments)*gu;return t=[],e=sf(-a[0]*gu,-a[1]*gu,0).invert,lf(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:rf([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:rf(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:rf(+t),a):i},a},mf=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ru,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},yf=function(t,e){return vu(t[0]-e[0])<1e-6&&vu(t[1]-e[1])<1e-6};function gf(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var vf=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(yf(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new gf(r,t,null,!0)),u.push(n.o=new gf(r,null,n,!1)),s.push(n=new gf(a,t,null,!1)),u.push(n.o=new gf(a,null,n,!0))}})),s.length){for(u.sort(e),xf(s),xf(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,f,h=s[0];;){for(var l=h,d=!0;l.v;)if((l=l.n)===h)return;c=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((f=c[o])[0],f[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(d)for(c=l.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(l.x,l.p.x,-1,i);l=l.p}c=(l=l.o).z,d=!d}while(!l.v);i.lineEnd()}}};function xf(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var bf=uu();function _f(t){return vu(t[0])<=lu?t[0]:Ou(t[0])*((vu(t[0])+lu)%mu-lu)}var wf=function(t,e){var n=_f(e),r=e[1],i=Su(r),o=[Su(n),-_u(n),0],a=0,s=0;bf.reset(),1===i?r=du+1e-6:-1===i&&(r=-du-1e-6);for(var u=0,c=t.length;u<c;++u)if(h=(f=t[u]).length)for(var f,h,l=f[h-1],d=_f(l),p=l[1]/2+pu,m=Su(p),y=_u(p),g=0;g<h;++g,d=x,m=_,y=w,l=v){var v=f[g],x=_f(v),b=v[1]/2+pu,_=Su(b),w=_u(b),M=x-d,T=M>=0?1:-1,A=T*M,S=A>lu,O=m*_;if(bf.add(bu(O*T*Su(A),y*w+O*_u(A))),a+=S?M+T*mu:M,S^d>=n^x>=n){var E=nc(tc(l),tc(v));oc(E);var k=nc(o,E);oc(k);var C=(S^M>=0?-1:1)*Pu(k[2]);(r>C||r===C&&(E[0]||E[1]))&&(s+=S^M>=0?1:-1)}}return(a<-1e-6||a<1e-6&&bf<-1e-6)^1&s},Mf=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=mf(),f=e(c),h=!1,l={point:d,lineStart:m,lineEnd:y,polygonStart:function(){l.point=g,l.lineStart=v,l.lineEnd=x,a=[],o=[]},polygonEnd:function(){l.point=d,l.lineStart=m,l.lineEnd=y,a=j(a);var t=wf(o,r);a.length?(h||(i.polygonStart(),h=!0),vf(a,Af,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){l.point=p,u.lineStart()}function y(){l.point=d,u.lineEnd()}function g(t,e){s.push([t,e]),f.point(t,e)}function v(){f.lineStart(),s=[]}function x(){g(s[0][0],s[0][1]),f.lineEnd();var t,e,n,r,u=f.clean(),l=c.result(),d=l.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=l[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Tf))}return l}};function Tf(t){return t.length>1}function Af(t,e){return((t=t.x)[0]<0?t[1]-du-1e-6:du-t[1])-((e=e.x)[0]<0?e[1]-du-1e-6:du-e[1])}var Sf=Mf((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?lu:-lu,u=vu(o-n);vu(u-lu)<1e-6?(t.point(n,r=(r+a)/2>0?du:-du),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=lu&&(vu(n-i)<1e-6&&(n-=1e-6*i),vu(o-s)<1e-6&&(o-=1e-6*s),r=function(t,e,n,r){var i,o,a=Su(t-n);return vu(a)>1e-6?xu((Su(e)*(o=_u(r))*Su(n)-Su(r)*(i=_u(e))*Su(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*du,r.point(-lu,i),r.point(0,i),r.point(lu,i),r.point(lu,0),r.point(lu,-i),r.point(0,-i),r.point(-lu,-i),r.point(-lu,0),r.point(-lu,i);else if(vu(t[0]-e[0])>1e-6){var o=t[0]<e[0]?lu:-lu;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-lu,-du]);var Of=function(t){var e=_u(t),n=6*gu,r=e>0,i=vu(e)>1e-6;function o(t,n){return _u(t)*_u(n)>e}function a(t,n,r){var i=[1,0,0],o=nc(tc(t),tc(n)),a=ec(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,f=-e*s/u,h=nc(i,o),l=ic(i,c);rc(l,ic(o,f));var d=h,p=ec(l,d),m=ec(d,d),y=p*p-m*(ec(l,l)-1);if(!(y<0)){var g=Eu(y),v=ic(d,(-p-g)/m);if(rc(v,l),v=Qu(v),!r)return v;var x,b=t[0],_=n[0],w=t[1],M=n[1];_<b&&(x=b,b=_,_=x);var T=_-b,A=vu(T-lu)<1e-6;if(!A&&M<w&&(x=w,w=M,M=x),A||T<1e-6?A?w+M>0^v[1]<(vu(v[0]-b)<1e-6?w:M):w<=v[1]&&v[1]<=M:T>lu^(b<=v[0]&&v[0]<=_)){var S=ic(d,(-p+g)/m);return rc(S,l),[v,Qu(S)]}}}function s(e,n){var i=r?t:lu-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Mf(o,(function(t){var e,n,u,c,f;return{lineStart:function(){c=u=!1,f=1},point:function(h,l){var d,p=[h,l],m=o(h,l),y=r?m?0:s(h,l):m?s(h+(h<0?lu:-lu),l):0;if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(!(d=a(e,p))||yf(e,d)||yf(p,d))&&(p[2]=1),m!==u)f=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^m){var g;y&n||!(g=a(p,e,!0))||(f=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!m||e&&yf(e,p)||t.point(p[0],p[1]),e=p,u=m,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return f|(c&&u)<<1}}}),(function(e,r,i,o){lf(o,t,n,i,e,r)}),r?[0,-t]:[-lu,t-lu])};function Ef(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var f=0,h=0;if(null==i||(f=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===f||3===f?t:n,f>1?r:e)}while((f=(f+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return vu(r[0]-t)<1e-6?i>0?0:3:vu(r[0]-n)<1e-6?i>0?2:1:vu(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,f,h,l,d,p,m,y,g,v,x=a,b=mf(),_={point:w,lineStart:function(){_.point=M,c&&c.push(f=[]);g=!0,y=!1,p=m=NaN},lineEnd:function(){u&&(M(h,l),d&&y&&b.rejoin(),u.push(b.result()));_.point=w,y&&x.lineEnd()},polygonStart:function(){x=b,u=[],c=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,f=s.length,h=s[0],l=h[0],d=h[1];u<f;++u)o=l,a=d,h=s[u],l=h[0],d=h[1],a<=r?d>r&&(l-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(l-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=j(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&vf(u,s,e,o,a),a.polygonEnd());x=a,u=c=f=null}};function w(t,e){i(t,e)&&x.point(t,e)}function M(o,a){var s=i(o,a);if(c&&f.push([o,a]),g)h=o,l=a,d=s,g=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&y)x.point(o,a);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),m=Math.max(-1e9,Math.min(1e9,m))],b=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,f=1,h=e[0]-s,l=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}if(a=r-u,l||!(a>0)){if(a/=l,l<0){if(a<c)return;a<f&&(f=a)}else if(l>0){if(a>f)return;a>c&&(c=a)}if(a=o-u,l||!(a<0)){if(a/=l,l<0){if(a>f)return;a>c&&(c=a)}else if(l>0){if(a<c)return;a<f&&(f=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*l),f<1&&(e[0]=s+f*h,e[1]=u+f*l),!0}}}}}(u,b,t,e,n,r)?s&&(x.lineStart(),x.point(o,a),v=!1):(y||(x.lineStart(),x.point(u[0],u[1])),x.point(b[0],b[1]),s||x.lineEnd(),v=!1)}p=o,m=a,y=s}return _}}var kf,Cf,Pf,If=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Ef(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Rf=uu(),Df={sphere:Ru,point:Ru,lineStart:function(){Df.point=Bf,Df.lineEnd=Nf},lineEnd:Ru,polygonStart:Ru,polygonEnd:Ru};function Nf(){Df.point=Df.lineEnd=Ru}function Bf(t,e){kf=t*=gu,Cf=Su(e*=gu),Pf=_u(e),Df.point=Lf}function Lf(t,e){t*=gu;var n=Su(e*=gu),r=_u(e),i=vu(t-kf),o=_u(i),a=r*Su(i),s=Pf*n-Cf*r*o,u=Cf*n+Pf*r*o;Rf.add(bu(Eu(a*a+s*s),u)),kf=t,Cf=n,Pf=r}var jf=function(t){return Rf.reset(),qu(t,Df),+Rf},Ff=[null,null],zf={type:"LineString",coordinates:Ff},Vf=function(t,e){return Ff[0]=t,Ff[1]=e,jf(zf)},Uf={Feature:function(t,e){return qf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(qf(n[r].geometry,e))return!0;return!1}},Gf={Sphere:function(){return!0},Point:function(t,e){return Hf(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hf(n[r],e))return!0;return!1},LineString:function(t,e){return Wf(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Wf(n[r],e))return!0;return!1},Polygon:function(t,e){return Yf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Yf(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(qf(n[r],e))return!0;return!1}};function qf(t,e){return!(!t||!Gf.hasOwnProperty(t.type))&&Gf[t.type](t,e)}function Hf(t,e){return 0===Vf(t,e)}function Wf(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Vf(t[o],e)))return!0;if(o>0&&(i=Vf(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function Yf(t,e){return!!wf(t.map(Kf),Xf(e))}function Kf(t){return(t=t.map(Xf)).pop(),t}function Xf(t){return[t[0]*gu,t[1]*gu]}var $f=function(t,e){return(t&&Uf.hasOwnProperty(t.type)?Uf[t.type]:qf)(t,e)};function Zf(t,e,n){var r=M(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Jf(t,e,n){var r=M(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Qf(){var t,e,n,r,i,o,a,s,u,c,f,h,l=10,d=l,p=90,m=360,y=2.5;function g(){return{type:"MultiLineString",coordinates:v()}}function v(){return M(wu(r/p)*p,n,p).map(f).concat(M(wu(s/m)*m,a,m).map(h)).concat(M(wu(e/l)*l,t,l).filter((function(t){return vu(t%p)>1e-6})).map(u)).concat(M(wu(o/d)*d,i,d).filter((function(t){return vu(t%m)>1e-6})).map(c))}return g.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(a).slice(1),f(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(y)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(y)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],g):[p,m]},g.stepMinor=function(t){return arguments.length?(l=+t[0],d=+t[1],g):[l,d]},g.precision=function(l){return arguments.length?(y=+l,u=Zf(o,i,90),c=Jf(e,t,y),f=Zf(s,a,90),h=Jf(r,n,y),g):y},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function th(){return Qf()()}var eh,nh,rh,ih,oh=function(t,e){var n=t[0]*gu,r=t[1]*gu,i=e[0]*gu,o=e[1]*gu,a=_u(r),s=Su(r),u=_u(o),c=Su(o),f=a*_u(n),h=a*Su(n),l=u*_u(i),d=u*Su(i),p=2*Pu(Eu(Iu(o-r)+a*u*Iu(i-n))),m=Su(p),y=p?function(t){var e=Su(t*=p)/m,n=Su(p-t)/m,r=n*f+e*l,i=n*h+e*d,o=n*s+e*c;return[bu(i,r)*yu,bu(o,Eu(r*r+i*i))*yu]}:function(){return[n*yu,r*yu]};return y.distance=p,y},ah=function(t){return t},sh=uu(),uh=uu(),ch={point:Ru,lineStart:Ru,lineEnd:Ru,polygonStart:function(){ch.lineStart=fh,ch.lineEnd=dh},polygonEnd:function(){ch.lineStart=ch.lineEnd=ch.point=Ru,sh.add(vu(uh)),uh.reset()},result:function(){var t=sh/2;return sh.reset(),t}};function fh(){ch.point=hh}function hh(t,e){ch.point=lh,eh=rh=t,nh=ih=e}function lh(t,e){uh.add(ih*t-rh*e),rh=t,ih=e}function dh(){lh(eh,nh)}var ph=ch,mh=1/0,yh=mh,gh=-mh,vh=gh;var xh,bh,_h,wh,Mh={point:function(t,e){t<mh&&(mh=t);t>gh&&(gh=t);e<yh&&(yh=e);e>vh&&(vh=e)},lineStart:Ru,lineEnd:Ru,polygonStart:Ru,polygonEnd:Ru,result:function(){var t=[[mh,yh],[gh,vh]];return gh=vh=-(yh=mh=1/0),t}},Th=0,Ah=0,Sh=0,Oh=0,Eh=0,kh=0,Ch=0,Ph=0,Ih=0,Rh={point:Dh,lineStart:Nh,lineEnd:jh,polygonStart:function(){Rh.lineStart=Fh,Rh.lineEnd=zh},polygonEnd:function(){Rh.point=Dh,Rh.lineStart=Nh,Rh.lineEnd=jh},result:function(){var t=Ih?[Ch/Ih,Ph/Ih]:kh?[Oh/kh,Eh/kh]:Sh?[Th/Sh,Ah/Sh]:[NaN,NaN];return Th=Ah=Sh=Oh=Eh=kh=Ch=Ph=Ih=0,t}};function Dh(t,e){Th+=t,Ah+=e,++Sh}function Nh(){Rh.point=Bh}function Bh(t,e){Rh.point=Lh,Dh(_h=t,wh=e)}function Lh(t,e){var n=t-_h,r=e-wh,i=Eu(n*n+r*r);Oh+=i*(_h+t)/2,Eh+=i*(wh+e)/2,kh+=i,Dh(_h=t,wh=e)}function jh(){Rh.point=Dh}function Fh(){Rh.point=Vh}function zh(){Uh(xh,bh)}function Vh(t,e){Rh.point=Uh,Dh(xh=_h=t,bh=wh=e)}function Uh(t,e){var n=t-_h,r=e-wh,i=Eu(n*n+r*r);Oh+=i*(_h+t)/2,Eh+=i*(wh+e)/2,kh+=i,Ch+=(i=wh*t-_h*e)*(_h+t),Ph+=i*(wh+e),Ih+=3*i,Dh(_h=t,wh=e)}var Gh=Rh;function qh(t){this._context=t}qh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,mu)}},result:Ru};var Hh,Wh,Yh,Kh,Xh,$h=uu(),Zh={point:Ru,lineStart:function(){Zh.point=Jh},lineEnd:function(){Hh&&Qh(Wh,Yh),Zh.point=Ru},polygonStart:function(){Hh=!0},polygonEnd:function(){Hh=null},result:function(){var t=+$h;return $h.reset(),t}};function Jh(t,e){Zh.point=Qh,Wh=Kh=t,Yh=Xh=e}function Qh(t,e){Kh-=t,Xh-=e,$h.add(Eu(Kh*Kh+Xh*Xh)),Kh=t,Xh=e}var tl=Zh;function el(){this._string=[]}function nl(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}el.prototype={_radius:4.5,_circle:nl(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=nl(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var rl=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),qu(t,n(r))),r.result()}return o.area=function(t){return qu(t,n(ph)),ph.result()},o.measure=function(t){return qu(t,n(tl)),tl.result()},o.bounds=function(t){return qu(t,n(Mh)),Mh.result()},o.centroid=function(t){return qu(t,n(Gh)),Gh.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,ah):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new el):new qh(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},il=function(t){return{stream:ol(t)}};function ol(t){return function(e){var n=new al;for(var r in t)n[r]=t[r];return n.stream=e,n}}function al(){}function sl(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),qu(n,t.stream(Mh)),e(Mh.result()),null!=r&&t.clipExtent(r),t}function ul(t,e,n){return sl(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function cl(t,e,n){return ul(t,[[0,0],e],n)}function fl(t,e,n){return sl(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function hl(t,e,n){return sl(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}al.prototype={constructor:al,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ll=_u(30*gu),dl=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,f,h,l,d,p,m,y){var g=c-r,v=f-i,x=g*g+v*v;if(x>4*e&&m--){var b=a+l,_=s+d,w=u+p,M=Eu(b*b+_*_+w*w),T=Pu(w/=M),A=vu(vu(w)-1)<1e-6||vu(o-h)<1e-6?(o+h)/2:bu(_,b),S=t(A,T),O=S[0],E=S[1],k=O-r,C=E-i,P=v*k-g*C;(P*P/x>e||vu((g*k+v*C)/x-.5)>.3||a*l+s*d+u*p<ll)&&(n(r,i,o,a,s,u,O,E,A,b/=M,_/=M,w,m,y),y.point(O,E),n(O,E,A,b,_,w,c,f,h,l,d,p,m,y))}}return function(e){var r,i,o,a,s,u,c,f,h,l,d,p,m={point:y,lineStart:g,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){f=NaN,m.point=v,e.lineStart()}function v(r,i){var o=tc([r,i]),a=t(r,i);n(f,h,c,l,d,p,f=a[0],h=a[1],c=r,l=o[0],d=o[1],p=o[2],16,e),e.point(f,h)}function x(){m.point=y,e.lineEnd()}function b(){g(),m.point=_,m.lineEnd=w}function _(t,e){v(r=t,e),i=f,o=h,a=l,s=d,u=p,m.point=v}function w(){n(f,h,c,l,d,p,i,o,r,a,s,u,16,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return ol({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var pl=ol({point:function(t,e){this.stream.point(t*gu,e*gu)}});function ml(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function yl(t,e,n,r,i,o){var a=_u(o),s=Su(o),u=a*t,c=s*t,f=a/t,h=s/t,l=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(f*t-h*e+l),i*(d-h*t-f*e)]},p}function gl(t){return vl((function(){return t}))()}function vl(t){var e,n,r,i,o,a,s,u,c,f,h=150,l=480,d=250,p=0,m=0,y=0,g=0,v=0,x=0,b=1,_=1,w=null,M=Sf,T=null,A=ah,S=.5;function O(t){return u(t[0]*gu,t[1]*gu)}function E(t){return(t=u.invert(t[0],t[1]))&&[t[0]*yu,t[1]*yu]}function k(){var t=yl(h,0,0,b,_,x).apply(null,e(p,m)),r=(x?yl:ml)(h,l-t[0],d-t[1],b,_,x);return n=sf(y,g,v),s=of(e,r),u=of(n,s),a=dl(s,S),C()}function C(){return c=f=null,O}return O.stream=function(t){return c&&f===t?c:c=pl(function(t){return ol({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(a(A(f=t)))))},O.preclip=function(t){return arguments.length?(M=t,w=void 0,C()):M},O.postclip=function(t){return arguments.length?(A=t,T=r=i=o=null,C()):A},O.clipAngle=function(t){return arguments.length?(M=+t?Of(w=t*gu):(w=null,Sf),C()):w*yu},O.clipExtent=function(t){return arguments.length?(A=null==t?(T=r=i=o=null,ah):Ef(T=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==T?null:[[T,r],[i,o]]},O.scale=function(t){return arguments.length?(h=+t,k()):h},O.translate=function(t){return arguments.length?(l=+t[0],d=+t[1],k()):[l,d]},O.center=function(t){return arguments.length?(p=t[0]%360*gu,m=t[1]%360*gu,k()):[p*yu,m*yu]},O.rotate=function(t){return arguments.length?(y=t[0]%360*gu,g=t[1]%360*gu,v=t.length>2?t[2]%360*gu:0,k()):[y*yu,g*yu,v*yu]},O.angle=function(t){return arguments.length?(x=t%360*gu,k()):x*yu},O.reflectX=function(t){return arguments.length?(b=t?-1:1,k()):b<0},O.reflectY=function(t){return arguments.length?(_=t?-1:1,k()):_<0},O.precision=function(t){return arguments.length?(a=dl(s,S=t*t),C()):Eu(S)},O.fitExtent=function(t,e){return ul(O,t,e)},O.fitSize=function(t,e){return cl(O,t,e)},O.fitWidth=function(t,e){return fl(O,t,e)},O.fitHeight=function(t,e){return hl(O,t,e)},function(){return e=t.apply(this,arguments),O.invert=e.invert&&E,k()}}function xl(t){var e=0,n=lu/3,r=vl(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*gu,n=t[1]*gu):[e*yu,n*yu]},i}function bl(t,e){var n=Su(t),r=(n+Su(e))/2;if(vu(r)<1e-6)return function(t){var e=_u(t);function n(t,n){return[t*e,Su(n)/e]}return n.invert=function(t,n){return[t/e,Pu(n*e)]},n}(t);var i=1+n*(2*r-n),o=Eu(i)/r;function a(t,e){var n=Eu(i-2*r*Su(e))/r;return[n*Su(t*=r),o-n*_u(t)]}return a.invert=function(t,e){var n=o-e,a=bu(t,vu(n))*Ou(n);return n*r<0&&(a-=lu*Ou(t)*Ou(n)),[a/r,Pu((i-(t*t+n*n)*r*r)/(2*r))]},a}var _l=function(){return xl(bl).scale(155.424).center([0,33.6442])},wl=function(){return _l().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Ml=function(){var t,e,n,r,i,o,a=wl(),s=_l().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=_l().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function f(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,f}return f.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},f.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},f.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,f-.238*e],[o+.455*e,f+.238*e]]).stream(c),r=s.translate([o-.307*e,f+.201*e]).clipExtent([[o-.425*e+1e-6,f+.12*e+1e-6],[o-.214*e-1e-6,f+.234*e-1e-6]]).stream(c),i=u.translate([o-.205*e,f+.212*e]).clipExtent([[o-.214*e+1e-6,f+.166*e+1e-6],[o-.115*e-1e-6,f+.234*e-1e-6]]).stream(c),h()},f.fitExtent=function(t,e){return ul(f,t,e)},f.fitSize=function(t,e){return cl(f,t,e)},f.fitWidth=function(t,e){return fl(f,t,e)},f.fitHeight=function(t,e){return hl(f,t,e)},f.scale(1070)};function Tl(t){return function(e,n){var r=_u(e),i=_u(n),o=t(r*i);return[o*i*Su(e),o*Su(n)]}}function Al(t){return function(e,n){var r=Eu(e*e+n*n),i=t(r),o=Su(i),a=_u(i);return[bu(e*o,r*a),Pu(r&&n*o/r)]}}var Sl=Tl((function(t){return Eu(2/(1+t))}));Sl.invert=Al((function(t){return 2*Pu(t/2)}));var Ol=function(){return gl(Sl).scale(124.75).clipAngle(179.999)},El=Tl((function(t){return(t=Cu(t))&&t/Su(t)}));El.invert=Al((function(t){return t}));var kl=function(){return gl(El).scale(79.4188).clipAngle(179.999)};function Cl(t,e){return[t,Tu(ku((du+e)/2))]}Cl.invert=function(t,e){return[t,2*xu(Mu(e))-du]};var Pl=function(){return Il(Cl).scale(961/mu)};function Il(t){var e,n,r,i=gl(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function f(){var o=lu*a(),s=i(hf(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Cl?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(s(t),f()):s()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==c?null:[[c,e],[n,r]]},f()}function Rl(t){return ku((du+t)/2)}function Dl(t,e){var n=_u(t),r=t===e?Su(t):Tu(n/_u(e))/Tu(Rl(e)/Rl(t)),i=n*Au(Rl(t),r)/r;if(!r)return Cl;function o(t,e){i>0?e<1e-6-du&&(e=1e-6-du):e>du-1e-6&&(e=du-1e-6);var n=i/Au(Rl(e),r);return[n*Su(r*t),i-n*_u(r*t)]}return o.invert=function(t,e){var n=i-e,o=Ou(r)*Eu(t*t+n*n),a=bu(t,vu(n))*Ou(n);return n*r<0&&(a-=lu*Ou(t)*Ou(n)),[a/r,2*xu(Au(i/o,1/r))-du]},o}var Nl=function(){return xl(Dl).scale(109.5).parallels([30,30])};function Bl(t,e){return[t,e]}Bl.invert=Bl;var Ll=function(){return gl(Bl).scale(152.63)};function jl(t,e){var n=_u(t),r=t===e?Su(t):(n-_u(e))/(e-t),i=n/r+t;if(vu(r)<1e-6)return Bl;function o(t,e){var n=i-e,o=r*t;return[n*Su(o),i-n*_u(o)]}return o.invert=function(t,e){var n=i-e,o=bu(t,vu(n))*Ou(n);return n*r<0&&(o-=lu*Ou(t)*Ou(n)),[o/r,i-Ou(r)*Eu(t*t+n*n)]},o}var Fl=function(){return xl(jl).scale(131.154).center([0,13.9389])},zl=1.340264,Vl=-.081106,Ul=893e-6,Gl=.003796,ql=Eu(3)/2;function Hl(t,e){var n=Pu(ql*Su(e)),r=n*n,i=r*r*r;return[t*_u(n)/(ql*(zl+3*Vl*r+i*(7*Ul+9*Gl*r))),n*(zl+Vl*r+i*(Ul+Gl*r))]}Hl.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(zl+Vl*i+o*(Ul+Gl*i))-e)/(zl+3*Vl*i+o*(7*Ul+9*Gl*i)))*r)*i*i,!(vu(n)<1e-12));++a);return[ql*t*(zl+3*Vl*i+o*(7*Ul+9*Gl*i))/_u(r),Pu(Su(r)/ql)]};var Wl=function(){return gl(Hl).scale(177.158)};function Yl(t,e){var n=_u(e),r=_u(t)*n;return[n*Su(t)/r,Su(e)/r]}Yl.invert=Al(xu);var Kl=function(){return gl(Yl).scale(144.049).clipAngle(60)},Xl=function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,f=1,h=1,l=0,d=null,p=1,m=1,y=ol({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),g=ah;function v(){return p=s*f,m=s*h,o=a=null,x}function x(n){var r=n[0]*p,i=n[1]*m;if(l){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return x.invert=function(n){var r=n[0]-u,i=n[1]-c;if(l){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/m]},x.stream=function(t){return o&&a===t?o:o=y(g(a=t))},x.postclip=function(t){return arguments.length?(g=t,d=n=r=i=null,v()):g},x.clipExtent=function(t){return arguments.length?(g=null==t?(d=n=r=i=null,ah):Ef(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==d?null:[[d,n],[r,i]]},x.scale=function(t){return arguments.length?(s=+t,v()):s},x.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],v()):[u,c]},x.angle=function(n){return arguments.length?(e=Su(l=n%360*gu),t=_u(l),v()):l*yu},x.reflectX=function(t){return arguments.length?(f=t?-1:1,v()):f<0},x.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},x.fitExtent=function(t,e){return ul(x,t,e)},x.fitSize=function(t,e){return cl(x,t,e)},x.fitWidth=function(t,e){return fl(x,t,e)},x.fitHeight=function(t,e){return hl(x,t,e)},x};function $l(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}$l.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(vu(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var Zl=function(){return gl($l).scale(175.295)};function Jl(t,e){return[_u(e)*Su(t),Su(e)]}Jl.invert=Al(Pu);var Ql=function(){return gl(Jl).scale(249.5).clipAngle(90.000001)};function td(t,e){var n=_u(e),r=1+_u(t)*n;return[n*Su(t)/r,Su(e)/r]}td.invert=Al((function(t){return 2*xu(t)}));var ed=function(){return gl(td).scale(250).clipAngle(142)};function nd(t,e){return[Tu(ku((du+e)/2)),-t]}nd.invert=function(t,e){return[-e,2*xu(Mu(t))-du]};var rd=function(){var t=Il(nd),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function id(t,e){return t.parent===e.parent?1:2}function od(t,e){return t+e.x}function ad(t,e){return Math.max(t,e.y)}var sd=function(){var t=id,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(od,0)/t.length}(n),e.y=function(t){return 1+t.reduce(ad,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,f=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(f-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function ud(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function cd(t,e){var n,r,i,o,a,s=new dd(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=fd);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new dd(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(ld)}function fd(t){return t.children}function hd(t){t.data=t.data.data}function ld(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function dd(t){this.data=t,this.depth=this.height=0,this.parent=null}dd.prototype=cd.prototype={constructor:dd,count:function(){return this.eachAfter(ud)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return cd(this).eachBefore(hd)}};var pd=Array.prototype.slice;var md=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(pd.call(t))).length,o=[];r<i;)e=t[r],n&&vd(n,e)?++r:(n=bd(o=yd(o,e)),r=0);return n};function yd(t,e){var n,r;if(xd(e,t))return[e];for(n=0;n<t.length;++n)if(gd(e,t[n])&&xd(_d(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(gd(_d(t[n],t[r]),e)&&gd(_d(t[n],e),t[r])&&gd(_d(t[r],e),t[n])&&xd(wd(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function gd(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function vd(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function xd(t,e){for(var n=0;n<e.length;++n)if(!vd(t,e[n]))return!1;return!0}function bd(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return _d(t[0],t[1]);case 3:return wd(t[0],t[1],t[2])}var e}function _d(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,f=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*f)/2,y:(r+a+c/h*f)/2,r:(h+i+s)/2}}function wd(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,f=n.y,h=n.r,l=r-a,d=r-c,p=i-s,m=i-f,y=u-o,g=h-o,v=r*r+i*i-o*o,x=v-a*a-s*s+u*u,b=v-c*c-f*f+h*h,_=d*p-l*m,w=(p*b-m*x)/(2*_)-r,M=(m*y-p*g)/_,T=(d*x-l*b)/(2*_)-i,A=(l*g-d*y)/_,S=M*M+A*A-1,O=2*(o+w*M+T*A),E=w*w+T*T-o*o,k=-(S?(O+Math.sqrt(O*O-4*S*E))/(2*S):E/O);return{x:r+w+M*k,y:i+T+A*k,r:k}}function Md(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function Td(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ad(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Sd(t){this._=t,this.next=null,this.previous=null}function Od(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,f,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Md(n,e,r=t[2]),e=new Sd(e),n=new Sd(n),r=new Sd(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Md(e._,n._,r=t[s]),r=new Sd(r),u=n.next,c=e.previous,f=n._.r,h=e._.r;do{if(f<=h){if(Td(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}f+=u._.r,u=u.next}else{if(Td(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=Ad(e);(r=r.next)!==n;)(a=Ad(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=md(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}var Ed=function(t){return Od(t),t};function kd(t){return null==t?null:Cd(t)}function Cd(t){if("function"!=typeof t)throw new Error;return t}function Pd(){return 0}var Id=function(t){return function(){return t}};function Rd(t){return Math.sqrt(t.value)}var Dd=function(){var t=null,e=1,n=1,r=Pd;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Nd(t)).eachAfter(Bd(r,.5)).eachBefore(Ld(1)):i.eachBefore(Nd(Rd)).eachAfter(Bd(Pd,1)).eachAfter(Bd(r,i.r/Math.min(e,n))).eachBefore(Ld(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=kd(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Id(+t),i):r},i};function Nd(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Bd(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Od(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Ld(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var jd=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Fd=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},zd=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&Fd(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(jd),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},Vd={depth:-1},Ud={};function Gd(t){return t.id}function qd(t){return t.parentId}var Hd=function(){var t=Gd,e=qd;function n(n){var r,i,o,a,s,u,c,f=n.length,h=new Array(f),l={};for(i=0;i<f;++i)r=n[i],s=h[i]=new dd(r),null!=(u=t(r,i,n))&&(u+="")&&(l[c="$"+(s.id=u)]=c in l?Ud:s);for(i=0;i<f;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=l["$"+u]))throw new Error("missing: "+u);if(a===Ud)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Vd,o.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore(ld),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Cd(e),n):t},n.parentId=function(t){return arguments.length?(e=Cd(t),n):e},n};function Wd(t,e){return t.parent===e.parent?1:2}function Yd(t){var e=t.children;return e?e[0]:t.t}function Kd(t){var e=t.children;return e?e[e.length-1]:t.t}function Xd(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function $d(t,e,n){return t.a.parent===e.parent?t.a:n}function Zd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Zd.prototype=Object.create(dd.prototype);var Jd=function(){var t=Wd,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new Zd(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Zd(r[i],i)),n.parent=e;return(a.parent=new Zd(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,f=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>f.x&&(f=t),t.depth>h.depth&&(h=t)}));var l=c===f?1:t(c,f)/2,d=l-c.x,p=e/(f.x+l+d),m=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,f=a.m,h=s.m,l=u.m;s=Kd(s),o=Yd(o),s&&o;)u=Yd(u),(a=Kd(a)).a=e,(i=s.z+h-o.z-c+t(s._,o._))>0&&(Xd($d(s,e,r),e,i),c+=i,f+=i),h+=s.m,c+=o.m,l+=u.m,f+=a.m;s&&!Kd(a)&&(a.t=s,a.m+=h-f),o&&!Yd(u)&&(u.t=o,u.m+=c-l,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},Qd=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},tp=(1+Math.sqrt(5))/2;function ep(t,e,n,r,i,o){for(var a,s,u,c,f,h,l,d,p,m,y,g=[],v=e.children,x=0,b=0,_=v.length,w=e.value;x<_;){u=i-n,c=o-r;do{f=v[b++].value}while(!f&&b<_);for(h=l=f,y=f*f*(m=Math.max(c/u,u/c)/(w*t)),p=Math.max(l/y,y/h);b<_;++b){if(f+=s=v[b].value,s<h&&(h=s),s>l&&(l=s),y=f*f*m,(d=Math.max(l/y,y/h))>p){f-=s;break}p=d}g.push(a={value:f,dice:u<c,children:v.slice(x,b)}),a.dice?Fd(a,n,r,i,w?r+=c*f/w:o):Qd(a,n,r,w?n+=u*f/w:i,o),w-=f,x=b}return g}var np=function t(e){function n(t,n,r,i,o){ep(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tp),rp=function(){var t=np,e=!1,n=1,r=1,i=[0],o=Pd,a=Pd,s=Pd,u=Pd,c=Pd;function f(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(jd),t}function h(e){var n=i[e.depth],r=e.x0+n,f=e.y0+n,h=e.x1-n,l=e.y1-n;h<r&&(r=h=(r+h)/2),l<f&&(f=l=(f+l)/2),e.x0=r,e.y0=f,e.x1=h,e.y1=l,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,f+=a(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(l-=u(e)-n)<f&&(f=l=(f+l)/2),t(e,r,f,h,l))}return f.round=function(t){return arguments.length?(e=!!t,f):e},f.size=function(t){return arguments.length?(n=+t[0],r=+t[1],f):[n,r]},f.tile=function(e){return arguments.length?(t=Cd(e),f):t},f.padding=function(t){return arguments.length?f.paddingInner(t).paddingOuter(t):f.paddingInner()},f.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Id(+t),f):o},f.paddingOuter=function(t){return arguments.length?f.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):f.paddingTop()},f.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Id(+t),f):a},f.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Id(+t),f):s},f.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Id(+t),f):u},f.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Id(+t),f):c},f},ip=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var f=s[e];return f.x0=i,f.y0=o,f.x1=a,void(f.y1=u)}var h=c[e],l=r/2+h,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;c[m]<l?d=m+1:p=m}l-c[d-1]<c[d]-l&&e+1<d&&--d;var y=c[d]-h,g=r-y;if(a-i>u-o){var v=(i*g+a*y)/r;t(e,d,y,i,o,v,u),t(d,n,g,v,o,a,u)}else{var x=(o*g+u*y)/r;t(e,d,y,i,o,a,x),t(d,n,g,i,x,a,u)}}(0,u,t.value,e,n,r,i)},op=function(t,e,n,r,i){(1&t.depth?Qd:Fd)(t,e,n,r,i)},ap=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,f,h=-1,l=a.length,d=t.value;++h<l;){for(u=(s=a[h]).children,c=s.value=0,f=u.length;c<f;++c)s.value+=u[c].value;s.dice?Fd(s,n,r,i,r+=(o-r)*s.value/d):Qd(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=ep(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(tp),sp=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},up=function(t,e){var n=fn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},cp=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},fp=Math.SQRT2;function hp(t){return((t=Math.exp(t))+1/t)/2}var lp=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],f=s-i,h=u-o,l=f*f+h*h;if(l<1e-12)r=Math.log(c/a)/fp,n=function(t){return[i+t*f,o+t*h,a*Math.exp(fp*t*r)]};else{var d=Math.sqrt(l),p=(c*c-a*a+4*l)/(2*a*2*d),m=(c*c-a*a-4*l)/(2*c*2*d),y=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-y)/fp,n=function(t){var e,n=t*r,s=hp(y),u=a/(2*d)*(s*(e=fp*n+y,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[i+u*f,o+u*h,a*s/hp(fp*n+y)]}}return n.duration=1e3*r,n};function dp(t){return function(e,n){var r=t((e=en(e)).h,(n=en(n)).h),i=ln(e.s,n.s),o=ln(e.l,n.l),a=ln(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var pp=dp(fn),mp=dp(ln);function yp(t,e){var n=ln((t=yo(t)).l,(e=yo(e)).l),r=ln(t.a,e.a),i=ln(t.b,e.b),o=ln(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function gp(t){return function(e,n){var r=t((e=To(e)).h,(n=To(n)).h),i=ln(e.c,n.c),o=ln(e.l,n.l),a=ln(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var vp=gp(fn),xp=gp(ln);function bp(t){return function e(n){function r(e,r){var i=t((e=Io(e)).h,(r=Io(r)).h),o=ln(e.s,r.s),a=ln(e.l,r.l),s=ln(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var _p=bp(fn),wp=bp(ln);function Mp(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var Tp=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Ap=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},Sp=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]};function Op(t,e){return t[0]-e[0]||t[1]-e[1]}function Ep(t){for(var e,n,r,i=t.length,o=[0,1],a=2,s=2;s<i;++s){for(;a>1&&(e=t[o[a-2]],n=t[o[a-1]],r=t[s],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}var kp=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Op),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=Ep(r),a=Ep(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},Cp=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],f=!1,h=0;h<i;++h)n=(o=t[h])[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(f=!f),u=n,c=r;return f},Pp=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.sqrt(e*e+n*n);return u},Ip=function(){return Math.random()},Rp=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Ip),Dp=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Ip),Np=function t(e){function n(){var t=Dp.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Ip),Bp=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Ip),Lp=function t(e){function n(t){var n=Bp.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Ip),jp=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Ip);function Fp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function zp(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Vp=Array.prototype,Up=Vp.map,Gp=Vp.slice,qp={name:"implicit"};function Hp(){var t=Ji(),e=[],n=[],r=qp;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==qp)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Ji();for(var r,o,a=-1,s=n.length;++a<s;)t.has(o=(r=n[a])+"")||t.set(o,e.push(r));return i},i.range=function(t){return arguments.length?(n=Gp.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Hp(e,n).unknown(r)},Fp.apply(i,arguments),i}function Wp(){var t,e,n=Hp().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function f(){var n=r().length,f=o[1]<o[0],h=o[f-0],l=o[1-f];t=(l-h)/Math.max(1,n-s+2*u),a&&(t=Math.floor(t)),h+=(l-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var d=M(n).map((function(e){return h+t*e}));return i(f?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],f()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,f()):a},n.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),f()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),f()):s},n.paddingOuter=function(t){return arguments.length?(u=+t,f()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return Wp(r(),o).round(a).paddingInner(s).paddingOuter(u).align(c)},Fp.apply(f(),arguments)}function Yp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Yp(e())},t}function Kp(){return Yp(Wp.apply(null,arguments).paddingInner(1))}var Xp=function(t){return+t},$p=[0,1];function Zp(t){return t}function Jp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Qp(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function tm(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Jp(i,r),o=n(a,o)):(r=Jp(r,i),o=n(o,a)),function(t){return o(r(t))}}function em(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Jp(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=c(t,e,1,r)-1;return o[n](i[n](e))}}function nm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rm(){var t,e,n,r,i,o,a=$p,s=$p,u=kn,c=Zp;function f(){return r=Math.min(a.length,s.length)>2?em:tm,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),wn)))(n)))},h.domain=function(t){return arguments.length?(a=Up.call(t,Xp),c===Zp||(c=Qp(a)),f()):a.slice()},h.range=function(t){return arguments.length?(s=Gp.call(t),f()):s.slice()},h.rangeRound=function(t){return s=Gp.call(t),u=cp,f()},h.clamp=function(t){return arguments.length?(c=t?Qp(a):Zp,h):c!==Zp},h.interpolate=function(t){return arguments.length?(u=t,f()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,f()}}function im(t,e){return rm()(t,e)}var om=function(t,e,n,r){var i,o=k(t,e,n);switch((r=Ws(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=au(o,a))||(r.precision=i),Zs(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=su(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=ou(o))||(r.precision=i-2*("%"===r.type))}return $s(r)};function am(t){var e=t.domain;return t.ticks=function(t){var n=e();return O(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return om(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=E(s,u,n))>0?r=E(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=E(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function sm(){var t=im(Zp,Zp);return t.copy=function(){return nm(t,sm())},Fp.apply(t,arguments),am(t)}function um(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Up.call(e,Xp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return um(t).unknown(e)},t=arguments.length?Up.call(t,Xp):[0,1],am(n)}var cm=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function fm(t){return Math.log(t)}function hm(t){return Math.exp(t)}function lm(t){return-Math.log(-t)}function dm(t){return-Math.exp(-t)}function pm(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mm(t){return function(e){return-t(-e)}}function ym(t){var e,n,r=t(fm,hm),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?pm:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=mm(e),n=mm(n),t(lm,dm)):t(fm,hm),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(l=s,s=u,u=l);var c,f,h,l=e(s),d=e(u),p=null==t?10:+t,m=[];if(!(o%1)&&d-l<p){if(l=Math.round(l)-1,d=Math.round(d)+1,s>0){for(;l<d;++l)for(f=1,c=n(l);f<o;++f)if(!((h=c*f)<s)){if(h>u)break;m.push(h)}}else for(;l<d;++l)for(f=o-1,c=n(l);f>=1;--f)if(!((h=c*f)<s)){if(h>u)break;m.push(h)}}else m=O(l,d,Math.min(d-l,p)).map(n);return r?m.reverse():m},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=$s(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(cm(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function gm(){var t=ym(rm()).domain([1,10]);return t.copy=function(){return nm(t,gm()).base(t.base())},Fp.apply(t,arguments),t}function vm(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function xm(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bm(t){var e=1,n=t(vm(e),xm(e));return n.constant=function(n){return arguments.length?t(vm(e=+n),xm(e)):e},am(n)}function _m(){var t=bm(rm());return t.copy=function(){return nm(t,_m()).constant(t.constant())},Fp.apply(t,arguments)}function wm(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Mm(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Tm(t){return t<0?-t*t:t*t}function Am(t){var e=t(Zp,Zp),n=1;function r(){return 1===n?t(Zp,Zp):.5===n?t(Mm,Tm):t(wm(n),wm(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},am(e)}function Sm(){var t=Am(rm());return t.copy=function(){return nm(t,Sm()).exponent(t.exponent())},Fp.apply(t,arguments),t}function Om(){return Sm.apply(null,arguments).exponent(.5)}function Em(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=I(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[c(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),o()},a.range=function(t){return arguments.length?(n=Gp.call(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Em().domain(e).range(n).unknown(t)},Fp.apply(a,arguments)}function km(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[c(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Gp.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return km().domain([e,n]).range(o).unknown(t)},Fp.apply(am(a),arguments)}function Cm(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[c(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Gp.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Gp.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Cm().domain(e).range(n).unknown(t)},Fp.apply(i,arguments)}var Pm=new Date,Im=new Date;function Rm(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Rm((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Pm.setTime(+e),Im.setTime(+r),t(Pm),t(Im),Math.floor(n(Pm,Im))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Dm=Rm((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dm.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rm((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Nm=Dm,Bm=Dm.range,Lm=Rm((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jm=Lm,Fm=Lm.range;function zm(t){return Rm((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Vm=zm(0),Um=zm(1),Gm=zm(2),qm=zm(3),Hm=zm(4),Wm=zm(5),Ym=zm(6),Km=Vm.range,Xm=Um.range,$m=Gm.range,Zm=qm.range,Jm=Hm.range,Qm=Wm.range,ty=Ym.range,ey=Rm((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),ny=ey,ry=ey.range,iy=Rm((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),oy=iy,ay=iy.range,sy=Rm((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),uy=sy,cy=sy.range,fy=Rm((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),hy=fy,ly=fy.range,dy=Rm((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));dy.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Rm((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):dy:null};var py=dy,my=dy.range;function yy(t){return Rm((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var gy=yy(0),vy=yy(1),xy=yy(2),by=yy(3),_y=yy(4),wy=yy(5),My=yy(6),Ty=gy.range,Ay=vy.range,Sy=xy.range,Oy=by.range,Ey=_y.range,ky=wy.range,Cy=My.range,Py=Rm((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Iy=Py,Ry=Py.range,Dy=Rm((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Dy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rm((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Ny=Dy,By=Dy.range;function Ly(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jy(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function zy(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Jy(i),f=Qy(i),h=Jy(o),l=Qy(o),d=Jy(a),p=Qy(a),m=Jy(s),y=Qy(s),g=Jy(u),v=Qy(u),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:bg,e:bg,f:Ag,H:_g,I:wg,j:Mg,L:Tg,m:Sg,M:Og,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ev,s:nv,S:Eg,u:kg,U:Cg,V:Pg,w:Ig,W:Rg,x:null,X:null,y:Dg,Y:Ng,Z:Bg,"%":tv},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Lg,e:Lg,f:Ug,H:jg,I:Fg,j:zg,L:Vg,m:Gg,M:qg,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ev,s:nv,S:Hg,u:Wg,U:Yg,V:Kg,w:Xg,W:$g,x:null,X:null,y:Zg,Y:Jg,Z:Qg,"%":tv},_={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=l[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return T(t,e,n,r)},d:fg,e:fg,f:yg,H:lg,I:lg,j:hg,L:mg,m:cg,M:dg,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=f[r[0].toLowerCase()],n+r[0].length):-1},q:ug,Q:vg,s:xg,S:pg,u:eg,U:ng,V:rg,w:tg,W:ig,x:function(t,e,r){return T(t,n,e,r)},X:function(t,e,n){return T(t,r,e,n)},y:ag,Y:og,Z:sg,"%":gg};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Wy[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r,i,o=Fy(1900,void 0,1);if(T(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=jy(Fy(o.y,0,1))).getUTCDay(),r=i>4||0===i?vy.ceil(r):vy(r),r=Iy.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Ly(Fy(o.y,0,1))).getDay(),r=i>4||0===i?Um.ceil(r):Um(r),r=ny.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jy(Fy(o.y,0,1)).getUTCDay():Ly(Fy(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jy(o)):Ly(o)}}function T(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=_[i in Wy?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var Vy,Uy,Gy,qy,Hy,Wy={"-":"",_:" ",0:"0"},Yy=/^\s*\d+/,Ky=/^%/,Xy=/[\\^$*+?|[\]().{}]/g;function $y(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Zy(t){return t.replace(Xy,"\\$&")}function Jy(t){return new RegExp("^(?:"+t.map(Zy).join("|")+")","i")}function Qy(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function tg(t,e,n){var r=Yy.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eg(t,e,n){var r=Yy.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ng(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function rg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ig(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function og(t,e,n){var r=Yy.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ag(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sg(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ug(t,e,n){var r=Yy.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function cg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function fg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function hg(t,e,n){var r=Yy.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function lg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function dg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function pg(t,e,n){var r=Yy.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function mg(t,e,n){var r=Yy.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yg(t,e,n){var r=Yy.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gg(t,e,n){var r=Ky.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function vg(t,e,n){var r=Yy.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xg(t,e,n){var r=Yy.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bg(t,e){return $y(t.getDate(),e,2)}function _g(t,e){return $y(t.getHours(),e,2)}function wg(t,e){return $y(t.getHours()%12||12,e,2)}function Mg(t,e){return $y(1+ny.count(Nm(t),t),e,3)}function Tg(t,e){return $y(t.getMilliseconds(),e,3)}function Ag(t,e){return Tg(t,e)+"000"}function Sg(t,e){return $y(t.getMonth()+1,e,2)}function Og(t,e){return $y(t.getMinutes(),e,2)}function Eg(t,e){return $y(t.getSeconds(),e,2)}function kg(t){var e=t.getDay();return 0===e?7:e}function Cg(t,e){return $y(Vm.count(Nm(t)-1,t),e,2)}function Pg(t,e){var n=t.getDay();return t=n>=4||0===n?Hm(t):Hm.ceil(t),$y(Hm.count(Nm(t),t)+(4===Nm(t).getDay()),e,2)}function Ig(t){return t.getDay()}function Rg(t,e){return $y(Um.count(Nm(t)-1,t),e,2)}function Dg(t,e){return $y(t.getFullYear()%100,e,2)}function Ng(t,e){return $y(t.getFullYear()%1e4,e,4)}function Bg(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$y(e/60|0,"0",2)+$y(e%60,"0",2)}function Lg(t,e){return $y(t.getUTCDate(),e,2)}function jg(t,e){return $y(t.getUTCHours(),e,2)}function Fg(t,e){return $y(t.getUTCHours()%12||12,e,2)}function zg(t,e){return $y(1+Iy.count(Ny(t),t),e,3)}function Vg(t,e){return $y(t.getUTCMilliseconds(),e,3)}function Ug(t,e){return Vg(t,e)+"000"}function Gg(t,e){return $y(t.getUTCMonth()+1,e,2)}function qg(t,e){return $y(t.getUTCMinutes(),e,2)}function Hg(t,e){return $y(t.getUTCSeconds(),e,2)}function Wg(t){var e=t.getUTCDay();return 0===e?7:e}function Yg(t,e){return $y(gy.count(Ny(t)-1,t),e,2)}function Kg(t,e){var n=t.getUTCDay();return t=n>=4||0===n?_y(t):_y.ceil(t),$y(_y.count(Ny(t),t)+(4===Ny(t).getUTCDay()),e,2)}function Xg(t){return t.getUTCDay()}function $g(t,e){return $y(vy.count(Ny(t)-1,t),e,2)}function Zg(t,e){return $y(t.getUTCFullYear()%100,e,2)}function Jg(t,e){return $y(t.getUTCFullYear()%1e4,e,4)}function Qg(){return"+0000"}function tv(){return"%"}function ev(t){return+t}function nv(t){return Math.floor(+t/1e3)}function rv(t){return Vy=zy(t),Uy=Vy.format,Gy=Vy.parse,qy=Vy.utcFormat,Hy=Vy.utcParse,Vy}rv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iv(t){return new Date(t)}function ov(t){return t instanceof Date?+t:+new Date(+t)}function av(t,e,n,r,i,a,s,u,c){var f=im(Zp,Zp),h=f.invert,l=f.domain,d=c(".%L"),p=c(":%S"),m=c("%I:%M"),y=c("%I %p"),g=c("%a %d"),v=c("%b %d"),x=c("%B"),b=c("%Y"),_=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function w(o){return(s(o)<o?d:a(o)<o?p:i(o)<o?m:r(o)<o?y:e(o)<o?n(o)<o?g:v:t(o)<o?x:b)(o)}function M(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,s=o((function(t){return t[2]})).right(_,a);s===_.length?(i=k(n/31536e6,r/31536e6,e),e=t):s?(i=(s=_[a/_[s-1][2]<_[s][2]/a?s-1:s])[1],e=s[0]):(i=Math.max(k(n,r,e),1),e=u)}return null==i?e:e.every(i)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?l(Up.call(t,ov)):l().map(iv)},f.ticks=function(t,e){var n,r=l(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=M(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?w:c(e)},f.nice=function(t,e){var n=l();return(t=M(t,n[0],n[n.length-1],e))?l(cm(n,t)):f},f.copy=function(){return nm(f,av(t,e,n,r,i,a,s,u,c))},f}var sv=function(){return Fp.apply(av(Nm,jm,Vm,ny,oy,uy,hy,py,Uy).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},uv=Rm((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),cv=uv,fv=uv.range,hv=Rm((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),lv=hv,dv=hv.range,pv=Rm((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),mv=pv,yv=pv.range,gv=function(){return Fp.apply(av(Ny,cv,gy,Iy,lv,mv,hy,py,qy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function vv(){var t,e,n,r,i,o=0,a=1,s=Zp,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(i){return arguments.length?(t=r(o=+i[0]),e=r(a=+i[1]),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function xv(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function bv(){var t=am(vv()(Zp));return t.copy=function(){return xv(t,bv())},zp.apply(t,arguments)}function _v(){var t=ym(vv()).domain([1,10]);return t.copy=function(){return xv(t,_v()).base(t.base())},zp.apply(t,arguments)}function wv(){var t=bm(vv());return t.copy=function(){return xv(t,wv()).constant(t.constant())},zp.apply(t,arguments)}function Mv(){var t=Am(vv());return t.copy=function(){return xv(t,Mv()).exponent(t.exponent())},zp.apply(t,arguments)}function Tv(){return Mv.apply(null,arguments).exponent(.5)}function Av(){var t=[],e=Zp;function n(n){if(!isNaN(n=+n))return e((c(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,o=0,a=e.length;o<a;++o)null==(r=e[o])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Av(e).domain(t)},zp.apply(n,arguments)}function Sv(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,f=Zp,h=!1;function l(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}return l.domain=function(a){return arguments.length?(t=o(s=+a[0]),e=o(u=+a[1]),n=o(c=+a[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l):[s,u,c]},l.clamp=function(t){return arguments.length?(h=!!t,l):h},l.interpolator=function(t){return arguments.length?(f=t,l):f},l.unknown=function(t){return arguments.length?(a=t,l):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l}}function Ov(){var t=am(Sv()(Zp));return t.copy=function(){return xv(t,Ov())},zp.apply(t,arguments)}function Ev(){var t=ym(Sv()).domain([.1,1,10]);return t.copy=function(){return xv(t,Ev()).base(t.base())},zp.apply(t,arguments)}function kv(){var t=bm(Sv());return t.copy=function(){return xv(t,kv()).constant(t.constant())},zp.apply(t,arguments)}function Cv(){var t=Am(Sv());return t.copy=function(){return xv(t,Cv()).exponent(t.exponent())},zp.apply(t,arguments)}function Pv(){return Cv.apply(null,arguments).exponent(.5)}var Iv=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},Rv=Iv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dv=Iv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Nv=Iv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Bv=Iv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Lv=Iv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),jv=Iv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Fv=Iv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),zv=Iv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Vv=Iv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Uv=Iv("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Gv=function(t){return mn(t[t.length-1])},qv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Iv),Hv=Gv(qv),Wv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Iv),Yv=Gv(Wv),Kv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Iv),Xv=Gv(Kv),$v=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Iv),Zv=Gv($v),Jv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Iv),Qv=Gv(Jv),tx=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Iv),ex=Gv(tx),nx=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Iv),rx=Gv(nx),ix=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Iv),ox=Gv(ix),ax=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Iv),sx=Gv(ax),ux=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Iv),cx=Gv(ux),fx=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Iv),hx=Gv(fx),lx=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Iv),dx=Gv(lx),px=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Iv),mx=Gv(px),yx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Iv),gx=Gv(yx),vx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Iv),xx=Gv(vx),bx=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Iv),_x=Gv(bx),wx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Iv),Mx=Gv(wx),Tx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Iv),Ax=Gv(Tx),Sx=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Iv),Ox=Gv(Sx),Ex=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Iv),kx=Gv(Ex),Cx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Iv),Px=Gv(Cx),Ix=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Iv),Rx=Gv(Ix),Dx=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Iv),Nx=Gv(Dx),Bx=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Iv),Lx=Gv(Bx),jx=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Iv),Fx=Gv(jx),zx=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Iv),Vx=Gv(zx),Ux=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Iv),Gx=Gv(Ux),qx=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},Hx=wp(Io(300,.5,0),Io(-240,.5,1)),Wx=wp(Io(-100,.75,.35),Io(80,1.5,.8)),Yx=wp(Io(260,.75,.35),Io(80,1.5,.8)),Kx=Io(),Xx=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Kx.h=360*t-100,Kx.s=1.5-1.5*e,Kx.l=.8-.9*e,Kx+""},$x=Ke(),Zx=Math.PI/3,Jx=2*Math.PI/3,Qx=function(t){var e;return t=(.5-t)*Math.PI,$x.r=255*(e=Math.sin(t))*e,$x.g=255*(e=Math.sin(t+Zx))*e,$x.b=255*(e=Math.sin(t+Jx))*e,$x+""},tb=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function eb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var nb=eb(Iv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),rb=eb(Iv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ib=eb(Iv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ob=eb(Iv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ab=function(t){return Me(re(t).call(document.documentElement))},sb=0;function ub(){return new cb}function cb(){this._="@"+(++sb).toString(36)}cb.prototype=ub.prototype={constructor:cb,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var fb=function(t){return"string"==typeof t?new be([document.querySelectorAll(t)],[document.documentElement]):new be([null==t?[]:t],xe)},hb=function(t,e){null==e&&(e=Cn().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Pn(t,e[n]);return i},lb=function(t){return function(){return t}},db=Math.abs,pb=Math.atan2,mb=Math.cos,yb=Math.max,gb=Math.min,vb=Math.sin,xb=Math.sqrt,bb=Math.PI,_b=bb/2,wb=2*bb;function Mb(t){return t>1?0:t<-1?bb:Math.acos(t)}function Tb(t){return t>=1?_b:t<=-1?-_b:Math.asin(t)}function Ab(t){return t.innerRadius}function Sb(t){return t.outerRadius}function Ob(t){return t.startAngle}function Eb(t){return t.endAngle}function kb(t){return t&&t.padAngle}function Cb(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,f=a-i,h=s-o,l=h*u-f*c;if(!(l*l<1e-12))return[t+(l=(f*(e-o)-h*(t-i))/l)*u,e+l*c]}function Pb(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/xb(s*s+u*u),f=c*u,h=-c*s,l=t+f,d=e+h,p=n+f,m=r+h,y=(l+p)/2,g=(d+m)/2,v=p-l,x=m-d,b=v*v+x*x,_=i-o,w=l*m-p*d,M=(x<0?-1:1)*xb(yb(0,_*_*b-w*w)),T=(w*x-v*M)/b,A=(-w*v-x*M)/b,S=(w*x+v*M)/b,O=(-w*v+x*M)/b,E=T-y,k=A-g,C=S-y,P=O-g;return E*E+k*k>C*C+P*P&&(T=S,A=O),{cx:T,cy:A,x01:-f,y01:-h,x11:T*(i/_-1),y11:A*(i/_-1)}}var Ib=function(){var t=Ab,e=Sb,n=lb(0),r=null,i=Ob,o=Eb,a=kb,s=null;function u(){var u,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),l=i.apply(this,arguments)-_b,d=o.apply(this,arguments)-_b,p=db(d-l),m=d>l;if(s||(s=u=Gi()),h<f&&(c=h,h=f,f=c),h>1e-12)if(p>wb-1e-12)s.moveTo(h*mb(l),h*vb(l)),s.arc(0,0,h,l,d,!m),f>1e-12&&(s.moveTo(f*mb(d),f*vb(d)),s.arc(0,0,f,d,l,m));else{var y,g,v=l,x=d,b=l,_=d,w=p,M=p,T=a.apply(this,arguments)/2,A=T>1e-12&&(r?+r.apply(this,arguments):xb(f*f+h*h)),S=gb(db(h-f)/2,+n.apply(this,arguments)),O=S,E=S;if(A>1e-12){var k=Tb(A/f*vb(T)),C=Tb(A/h*vb(T));(w-=2*k)>1e-12?(b+=k*=m?1:-1,_-=k):(w=0,b=_=(l+d)/2),(M-=2*C)>1e-12?(v+=C*=m?1:-1,x-=C):(M=0,v=x=(l+d)/2)}var P=h*mb(v),I=h*vb(v),R=f*mb(_),D=f*vb(_);if(S>1e-12){var N,B=h*mb(x),L=h*vb(x),j=f*mb(b),F=f*vb(b);if(p<bb&&(N=Cb(P,I,j,F,B,L,R,D))){var z=P-N[0],V=I-N[1],U=B-N[0],G=L-N[1],q=1/vb(Mb((z*U+V*G)/(xb(z*z+V*V)*xb(U*U+G*G)))/2),H=xb(N[0]*N[0]+N[1]*N[1]);O=gb(S,(f-H)/(q-1)),E=gb(S,(h-H)/(q+1))}}M>1e-12?E>1e-12?(y=Pb(j,F,P,I,h,E,m),g=Pb(B,L,R,D,h,E,m),s.moveTo(y.cx+y.x01,y.cy+y.y01),E<S?s.arc(y.cx,y.cy,E,pb(y.y01,y.x01),pb(g.y01,g.x01),!m):(s.arc(y.cx,y.cy,E,pb(y.y01,y.x01),pb(y.y11,y.x11),!m),s.arc(0,0,h,pb(y.cy+y.y11,y.cx+y.x11),pb(g.cy+g.y11,g.cx+g.x11),!m),s.arc(g.cx,g.cy,E,pb(g.y11,g.x11),pb(g.y01,g.x01),!m))):(s.moveTo(P,I),s.arc(0,0,h,v,x,!m)):s.moveTo(P,I),f>1e-12&&w>1e-12?O>1e-12?(y=Pb(R,D,B,L,f,-O,m),g=Pb(P,I,j,F,f,-O,m),s.lineTo(y.cx+y.x01,y.cy+y.y01),O<S?s.arc(y.cx,y.cy,O,pb(y.y01,y.x01),pb(g.y01,g.x01),!m):(s.arc(y.cx,y.cy,O,pb(y.y01,y.x01),pb(y.y11,y.x11),!m),s.arc(0,0,f,pb(y.cy+y.y11,y.cx+y.x11),pb(g.cy+g.y11,g.cx+g.x11),m),s.arc(g.cx,g.cy,O,pb(g.y11,g.x11),pb(g.y01,g.x01),!m))):s.arc(0,0,f,_,b,m):s.lineTo(R,D)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-bb/2;return[mb(r)*n,vb(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:lb(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:lb(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:lb(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:lb(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:lb(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:lb(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:lb(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Rb(t){this._context=t}Rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Db=function(t){return new Rb(t)};function Nb(t){return t[0]}function Bb(t){return t[1]}var Lb=function(){var t=Nb,e=Bb,n=lb(!0),r=null,i=Db,o=null;function a(a){var s,u,c,f=a.length,h=!1;for(null==r&&(o=i(c=Gi())),s=0;s<=f;++s)!(s<f&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:lb(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:lb(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:lb(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},jb=function(){var t=Nb,e=null,n=lb(0),r=Bb,i=lb(!0),o=null,a=Db,s=null;function u(u){var c,f,h,l,d,p=u.length,m=!1,y=new Array(p),g=new Array(p);for(null==o&&(s=a(d=Gi())),c=0;c<=p;++c){if(!(c<p&&i(l=u[c],c,u))===m)if(m=!m)f=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=f;--h)s.point(y[h],g[h]);s.lineEnd(),s.areaEnd()}m&&(y[c]=+t(l,c,u),g[c]=+n(l,c,u),s.point(e?+e(l,c,u):y[c],r?+r(l,c,u):g[c]))}if(d)return s=null,d+""||null}function c(){return Lb().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:lb(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:lb(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:lb(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:lb(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:lb(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:lb(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:lb(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Fb=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},zb=function(t){return t},Vb=function(){var t=zb,e=Fb,n=null,r=lb(0),i=lb(wb),o=lb(0);function a(a){var s,u,c,f,h,l=a.length,d=0,p=new Array(l),m=new Array(l),y=+r.apply(this,arguments),g=Math.min(wb,Math.max(-wb,i.apply(this,arguments)-y)),v=Math.min(Math.abs(g)/l,o.apply(this,arguments)),x=v*(g<0?-1:1);for(s=0;s<l;++s)(h=m[p[s]=s]=+t(a[s],s,a))>0&&(d+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,c=d?(g-l*x)/d:0;s<l;++s,y=f)u=p[s],f=y+((h=m[u])>0?h*c:0)+x,m[u]={data:a[u],index:s,value:h,startAngle:y,endAngle:f,padAngle:v};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:lb(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:lb(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:lb(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:lb(+t),a):o},a},Ub=qb(Db);function Gb(t){this._curve=t}function qb(t){function e(e){return new Gb(t(e))}return e._curve=t,e}function Hb(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(qb(t)):e()._curve},t}Gb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Wb=function(){return Hb(Lb().curve(Ub))},Yb=function(){var t=jb().curve(Ub),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Hb(n())},delete t.lineX0,t.lineEndAngle=function(){return Hb(r())},delete t.lineX1,t.lineInnerRadius=function(){return Hb(i())},delete t.lineY0,t.lineOuterRadius=function(){return Hb(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(qb(t)):e()._curve},t},Kb=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Xb=Array.prototype.slice;function $b(t){return t.source}function Zb(t){return t.target}function Jb(t){var e=$b,n=Zb,r=Nb,i=Bb,o=null;function a(){var a,s=Xb.call(arguments),u=e.apply(this,s),c=n.apply(this,s);if(o||(o=a=Gi()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=c,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:lb(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:lb(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function Qb(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function t_(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function e_(t,e,n,r,i){var o=Kb(e,n),a=Kb(e,n=(n+i)/2),s=Kb(r,n),u=Kb(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function n_(){return Jb(Qb)}function r_(){return Jb(t_)}function i_(){var t=Jb(e_);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var o_={draw:function(t,e){var n=Math.sqrt(e/bb);t.moveTo(n,0),t.arc(0,0,n,0,wb)}},a_={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},s_=Math.sqrt(1/3),u_=2*s_,c_={draw:function(t,e){var n=Math.sqrt(e/u_),r=n*s_;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},f_=Math.sin(bb/10)/Math.sin(7*bb/10),h_=Math.sin(wb/10)*f_,l_=-Math.cos(wb/10)*f_,d_={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=h_*n,i=l_*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=wb*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},p_={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},m_=Math.sqrt(3),y_={draw:function(t,e){var n=-Math.sqrt(e/(3*m_));t.moveTo(0,2*n),t.lineTo(-m_*n,-n),t.lineTo(m_*n,-n),t.closePath()}},g_=Math.sqrt(3)/2,v_=1/Math.sqrt(12),x_=3*(v_/2+1),b_={draw:function(t,e){var n=Math.sqrt(e/x_),r=n/2,i=n*v_,o=r,a=n*v_+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(-.5*r-g_*i,g_*r+-.5*i),t.lineTo(-.5*o-g_*a,g_*o+-.5*a),t.lineTo(-.5*s-g_*u,g_*s+-.5*u),t.lineTo(-.5*r+g_*i,-.5*i-g_*r),t.lineTo(-.5*o+g_*a,-.5*a-g_*o),t.lineTo(-.5*s+g_*u,-.5*u-g_*s),t.closePath()}},__=[o_,a_,c_,p_,d_,y_,b_],w_=function(){var t=lb(o_),e=lb(64),n=null;function r(){var r;if(n||(n=r=Gi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:lb(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:lb(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},M_=function(){};function T_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function A_(t){this._context=t}A_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:T_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:T_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var S_=function(t){return new A_(t)};function O_(t){this._context=t}O_.prototype={areaStart:M_,areaEnd:M_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:T_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var E_=function(t){return new O_(t)};function k_(t){this._context=t}k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:T_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var C_=function(t){return new k_(t)};function P_(t,e){this._basis=new A_(t),this._beta=e}P_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var I_=function t(e){function n(t){return 1===e?new A_(t):new P_(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function R_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function D_(t,e){this._context=t,this._k=(1-e)/6}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:R_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:R_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var N_=function t(e){function n(t){return new D_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function B_(t,e){this._context=t,this._k=(1-e)/6}B_.prototype={areaStart:M_,areaEnd:M_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:R_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var L_=function t(e){function n(t){return new B_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function j_(t,e){this._context=t,this._k=(1-e)/6}j_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var F_=function t(e){function n(t){return new j_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function z_(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function V_(t,e){this._context=t,this._alpha=e}V_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:z_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var U_=function t(e){function n(t){return e?new V_(t,e):new D_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function G_(t,e){this._context=t,this._alpha=e}G_.prototype={areaStart:M_,areaEnd:M_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:z_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var q_=function t(e){function n(t){return e?new G_(t,e):new B_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function H_(t,e){this._context=t,this._alpha=e}H_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:z_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var W_=function t(e){function n(t){return e?new H_(t,e):new j_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Y_(t){this._context=t}Y_.prototype={areaStart:M_,areaEnd:M_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var K_=function(t){return new Y_(t)};function X_(t){return t<0?-1:1}function $_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(X_(o)+X_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Z_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function J_(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Q_(t){this._context=t}function tw(t){this._context=new ew(t)}function ew(t){this._context=t}function nw(t){return new Q_(t)}function rw(t){return new tw(t)}function iw(t){this._context=t}function ow(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}Q_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:J_(this,this._t0,Z_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,J_(this,Z_(this,n=$_(this,t,e)),n);break;default:J_(this,this._t0,n=$_(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(tw.prototype=Object.create(Q_.prototype)).point=function(t,e){Q_.prototype.point.call(this,e,t)},ew.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ow(t),i=ow(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var aw=function(t){return new iw(t)};function sw(t,e){this._context=t,this._t=e}sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var uw=function(t){return new sw(t,.5)};function cw(t){return new sw(t,0)}function fw(t){return new sw(t,1)}var hw=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},lw=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function dw(t,e){return t[e]}var pw=function(){var t=lb([]),e=lw,n=hw,r=dw;function i(i){var o,a,s=t.apply(this,arguments),u=i.length,c=s.length,f=new Array(c);for(o=0;o<c;++o){for(var h,l=s[o],d=f[o]=new Array(u),p=0;p<u;++p)d[p]=h=[0,+r(i[p],l,p,i)],h.data=i[p];d.key=l}for(o=0,a=e(f);o<c;++o)f[a[o]].index=o;return n(f,a),f}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:lb(Xb.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:lb(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?lw:"function"==typeof t?t:lb(Xb.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?hw:t,i):n},i},mw=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}hw(t,e)}},yw=function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},gw=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}hw(t,e)}},vw=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var f=t[e[s]],h=f[a][1]||0,l=(h-(f[a-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];l+=(p[a][1]||0)-(p[a-1][1]||0)}u+=h,c+=l*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,hw(t,e)}},xw=function(t){var e=t.map(bw);return lw(t).sort((function(t,n){return e[t]-e[n]}))};function bw(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}var _w=function(t){var e=t.map(ww);return lw(t).sort((function(t,n){return e[t]-e[n]}))};function ww(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var Mw=function(t){return _w(t).reverse()},Tw=function(t){var e,n,r=t.length,i=t.map(ww),o=xw(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},Aw=function(t){return lw(t).reverse()};var Sw=Date.prototype.toISOString?function(t){return t.toISOString()}:qy("%Y-%m-%dT%H:%M:%S.%LZ");var Ow=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Hy("%Y-%m-%dT%H:%M:%S.%LZ"),Ew=function(t,e,n){var r=new qn,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Un():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)},kw=function(t){return function(){return t}};function Cw(t){return t[0]}function Pw(t){return t[1]}function Iw(){this._=null}function Rw(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Dw(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Nw(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Bw(t){for(;t.L;)t=t.L;return t}Iw.prototype={constructor:Iw,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Bw(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Dw(this,n),n=(t=n).U),n.C=!1,r.C=!0,Nw(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Nw(this,n),n=(t=n).U),n.C=!1,r.C=!0,Dw(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Bw(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Dw(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Nw(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Dw(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Nw(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Dw(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Nw(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Lw=Iw;function jw(t,e,n,r){var i=[null,null],o=uM.push(i)-1;return i.left=t,i.right=e,n&&zw(i,t,e,n),r&&zw(i,e,t,r),aM[t.index].halfedges.push(o),aM[e.index].halfedges.push(o),i}function Fw(t,e,n){var r=[e,n];return r.left=t,r}function zw(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Vw(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],f=0,h=1,l=s[0]-u,d=s[1]-c;if(o=e-u,l||!(o>0)){if(o/=l,l<0){if(o<f)return;o<h&&(h=o)}else if(l>0){if(o>h)return;o>f&&(f=o)}if(o=r-u,l||!(o<0)){if(o/=l,l<0){if(o>h)return;o>f&&(f=o)}else if(l>0){if(o<f)return;o<h&&(h=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>f&&(f=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<h&&(h=o)}return!(f>0||h<1)||(f>0&&(t[0]=[u+f*l,c+f*d]),h<1&&(t[1]=[u+h*l,c+h*d]),!0)}}}}}function Uw(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,f=t.right,h=c[0],l=c[1],d=f[0],p=f[1],m=(h+d)/2,y=(l+p)/2;if(p===l){if(m<e||m>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(s=y-(a=(h-d)/(p-l))*m,a<-1||a>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(l<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Gw(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function qw(t,e){return e[+(e.left!==t.site)]}function Hw(t,e){return e[+(e.left===t.site)]}var Ww,Yw=[];function Kw(){Rw(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xw(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,f=o[0]-a,h=o[1]-s,l=2*(u*h-c*f);if(!(l>=-fM)){var d=u*u+c*c,p=f*f+h*h,m=(h*d-c*p)/l,y=(u*p-f*d)/l,g=Yw.pop()||new Kw;g.arc=t,g.site=i,g.x=m+a,g.y=(g.cy=y+s)+Math.sqrt(m*m+y*y),t.circle=g;for(var v=null,x=sM._;x;)if(g.y<x.y||g.y===x.y&&g.x<=x.x){if(!x.L){v=x.P;break}x=x.L}else{if(!x.R){v=x;break}x=x.R}sM.insert(v,g),v||(Ww=g)}}}}function $w(t){var e=t.circle;e&&(e.P||(Ww=e.N),sM.remove(e),Yw.push(e),Rw(e),t.circle=null)}var Zw=[];function Jw(){Rw(this),this.edge=this.site=this.circle=null}function Qw(t){var e=Zw.pop()||new Jw;return e.site=t,e}function tM(t){$w(t),oM.remove(t),Zw.push(t),Rw(t)}function eM(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];tM(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<cM&&Math.abs(r-u.circle.cy)<cM;)o=u.P,s.unshift(u),tM(u),u=o;s.unshift(u),$w(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<cM&&Math.abs(r-c.circle.cy)<cM;)a=c.N,s.push(c),tM(c),c=a;s.push(c),$w(c);var f,h=s.length;for(f=1;f<h;++f)c=s[f],u=s[f-1],zw(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=jw(u.site,c.site,null,i),Xw(u),Xw(c)}function nM(t){for(var e,n,r,i,o=t[0],a=t[1],s=oM._;s;)if((r=rM(s,a)-o)>cM)s=s.L;else{if(!((i=o-iM(s,a))>cM)){r>-cM?(e=s.P,n=s):i>-cM?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){aM[t.index]={site:t,halfedges:[]}}(t);var u=Qw(t);if(oM.insert(e,u),e||n){if(e===n)return $w(e),n=Qw(e.site),oM.insert(u,n),u.edge=n.edge=jw(e.site,u.site),Xw(e),void Xw(n);if(n){$w(e),$w(n);var c=e.site,f=c[0],h=c[1],l=t[0]-f,d=t[1]-h,p=n.site,m=p[0]-f,y=p[1]-h,g=2*(l*y-d*m),v=l*l+d*d,x=m*m+y*y,b=[(y*v-d*x)/g+f,(l*x-m*v)/g+h];zw(n.edge,c,p,b),u.edge=jw(c,t,null,b),n.edge=jw(t,p,null,b),Xw(e),Xw(n)}else u.edge=jw(e.site,u.site)}}function rM(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var f=s-r,h=1/o-1/c,l=f/c;return h?(-l+Math.sqrt(l*l-2*h*(f*f/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function iM(t,e){var n=t.N;if(n)return rM(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var oM,aM,sM,uM,cM=1e-6,fM=1e-12;function hM(t,e){return e[1]-t[1]||e[0]-t[0]}function lM(t,e){var n,r,i,o=t.sort(hM).pop();for(uM=[],aM=new Array(t.length),oM=new Lw,sM=new Lw;;)if(i=Ww,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(nM(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;eM(i.arc)}if(function(){for(var t,e,n,r,i=0,o=aM.length;i<o;++i)if((t=aM[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Gw(t,uM[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uM.length;o--;)Uw(i=uM[o],t,e,n,r)&&Vw(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>cM||Math.abs(i[0][1]-i[1][1])>cM)||delete uM[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,f,h,l,d,p,m,y=aM.length,g=!0;for(i=0;i<y;++i)if(o=aM[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)uM[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)p=(d=Hw(o,uM[u[s]]))[0],m=d[1],h=(f=qw(o,uM[u[++s%c]]))[0],l=f[1],(Math.abs(p-h)>cM||Math.abs(m-l)>cM)&&(u.splice(s,0,uM.push(Fw(a,d,Math.abs(p-t)<cM&&r-m>cM?[t,Math.abs(h-t)<cM?l:r]:Math.abs(m-r)<cM&&n-p>cM?[Math.abs(l-r)<cM?h:n,r]:Math.abs(p-n)<cM&&m-e>cM?[n,Math.abs(h-n)<cM?l:e]:Math.abs(m-e)<cM&&p-t>cM?[Math.abs(l-e)<cM?h:t,e]:null))-1),++c);c&&(g=!1)}if(g){var v,x,b,_=1/0;for(i=0,g=null;i<y;++i)(o=aM[i])&&(b=(v=(a=o.site)[0]-t)*v+(x=a[1]-e)*x)<_&&(_=b,g=o);if(g){var w=[t,e],M=[t,r],T=[n,r],A=[n,e];g.halfedges.push(uM.push(Fw(a=g.site,w,M))-1,uM.push(Fw(a,M,T))-1,uM.push(Fw(a,T,A))-1,uM.push(Fw(a,A,w))-1)}}for(i=0;i<y;++i)(o=aM[i])&&(o.halfedges.length||delete aM[i])}(a,s,u,c)}this.edges=uM,this.cells=aM,oM=sM=uM=aM=null}lM.prototype={constructor:lM,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return qw(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,c,f=n.site,h=-1,l=e[i[o-1]],d=l.left===f?l.right:l.left;++h<o;)a=d,d=(l=e[i[h]]).left===f?l.right:l.left,a&&d&&r<a.index&&r<d.index&&(u=a,c=d,((s=f)[0]-c[0])*(u[1]-s[1])-(s[0]-u[0])*(c[1]-s[1])<0)&&t.push([f.data,a.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],f=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<f&&(f=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||f<=n*n?i.site:null}};var dM=function(){var t=Cw,e=Pw,n=null;function r(r){return new lM(r.map((function(n,i){var o=[Math.round(t(n,i,r)/cM)*cM,Math.round(e(n,i,r)/cM)*cM];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:kw(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:kw(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},pM=function(t){return function(){return t}};function mM(t,e,n){this.target=t,this.type=e,this.transform=n}function yM(t,e,n){this.k=t,this.x=e,this.y=n}yM.prototype={constructor:yM,scale:function(t){return 1===t?this:new yM(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new yM(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gM=new yM(1,0,0);function vM(t){for(;!t.__zoom;)if(!(t=t.parentNode))return gM;return t.__zoom}function xM(){ce.stopImmediatePropagation()}vM.prototype=yM.prototype;var bM=function(){ce.preventDefault(),ce.stopImmediatePropagation()};function _M(){return!ce.ctrlKey&&!ce.button}function wM(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function MM(){return this.__zoom||gM}function TM(){return-ce.deltaY*(1===ce.deltaMode?.05:ce.deltaMode?1:.002)}function AM(){return navigator.maxTouchPoints||"ontouchstart"in this}function SM(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var OM=function(){var t,e,n=_M,r=wM,i=SM,o=TM,a=AM,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,f=lp,h=ht("start","zoom","end"),l=0;function d(t){t.property("__zoom",MM).on("wheel.zoom",b).on("mousedown.zoom",_).on("dblclick.zoom",w).filter(a).on("touchstart.zoom",M).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new yM(e,t.x,t.y)}function m(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new yM(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function g(t,e,n){t.on("start.zoom",(function(){v(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){v(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=v(t,i),a=r.apply(t,i),s=null==n?y(a):"function"==typeof n?n.apply(t,i):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,i):e,l=f(c.invert(s).concat(u/c.k),h.invert(s).concat(u/h.k));return function(t){if(1===t)t=h;else{var e=l(t),n=u/e[2];t=new yM(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function v(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function b(){if(n.apply(this,arguments)){var t=v(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),a=Rn(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[a,e.invert(a)],sr(this),t.start()}bM(),t.wheel=setTimeout(c,150),t.zoom("mouse",i(m(p(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}function c(){t.wheel=null,t.end()}}function _(){if(!e&&n.apply(this,arguments)){var t=v(this,arguments,!0),r=Me(ce.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",f,!0),o=Rn(this),a=ce.clientX,s=ce.clientY;Se(ce.view),xM(),t.mouse=[o,this.__zoom.invert(o)],sr(this),t.start()}function c(){if(bM(),!t.moved){var e=ce.clientX-a,n=ce.clientY-s;t.moved=e*e+n*n>l}t.zoom("mouse",i(m(t.that.__zoom,t.mouse[0]=Rn(t.that),t.mouse[1]),t.extent,u))}function f(){r.on("mousemove.zoom mouseup.zoom",null),Oe(ce.view,t.moved),bM(),t.end()}}function w(){if(n.apply(this,arguments)){var t=this.__zoom,e=Rn(this),o=t.invert(e),a=t.k*(ce.shiftKey?.5:2),s=i(m(p(t,a),e,o),r.apply(this,arguments),u);bM(),c>0?Me(this).transition().duration(c).call(g,s,e):Me(this).call(d.transform,s)}}function M(){if(n.apply(this,arguments)){var e,r,i,o,a=ce.touches,s=a.length,u=v(this,arguments,ce.changedTouches.length===s);for(xM(),r=0;r<s;++r)i=a[r],o=[o=In(this,a,i.identifier),this.__zoom.invert(o),i.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),500)),sr(this),u.start())}}function T(){if(this.__zooming){var e,n,r,o,a=v(this,arguments),s=ce.changedTouches,c=s.length;for(bM(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<c;++e)n=s[e],r=In(this,s,n.identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var f=a.touch0[0],h=a.touch0[1],l=a.touch1[0],d=a.touch1[1],y=(y=l[0]-f[0])*y+(y=l[1]-f[1])*y,g=(g=d[0]-h[0])*g+(g=d[1]-h[1])*g;n=p(n,Math.sqrt(y/g)),r=[(f[0]+l[0])/2,(f[1]+l[1])/2],o=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(m(n,r,o),a.extent,u))}}function A(){if(this.__zooming){var t,n,r=v(this,arguments),i=ce.changedTouches,o=i.length;for(xM(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<o;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var a=Me(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return d.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",MM),t!==r?g(t,e,n):r.interrupt().each((function(){v(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},d.scaleBy=function(t,e,n){d.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},d.scaleTo=function(t,e,n){d.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),c="function"==typeof e?e.apply(this,arguments):e;return i(m(p(o,c),a,s),t,u)}),n)},d.translateBy=function(t,e,n){d.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},d.translateTo=function(t,e,n,o){d.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==o?y(t):"function"==typeof o?o.apply(this,arguments):o;return i(gM.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),o)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){me(new mM(d,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},d.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:pM(+t),d):o},d.filter=function(t){return arguments.length?(n="function"==typeof t?t:pM(!!t),d):n},d.touchable=function(t){return arguments.length?(a="function"==typeof t?t:pM(!!t),d):a},d.extent=function(t){return arguments.length?(r="function"==typeof t?t:pM([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),d):r},d.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],d):[s[0],s[1]]},d.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],d):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},d.constrain=function(t){return arguments.length?(i=t,d):i},d.duration=function(t){return arguments.length?(c=+t,d):c},d.interpolate=function(t){return arguments.length?(f=t,d):f},d.on=function(){var t=h.on.apply(h,arguments);return t===h?d:t},d.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,d):Math.sqrt(l)},d}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return f}));var r=n(0),i=n(6),o=n(2),a=n(1),s=n(5),u=n(44),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new h(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t},e.prototype.refCount=function(){return Object(u.a)()(this)},e}(o.a),f=function(){var t=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);a.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i=n(6),o=n(23),a=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n(0),i=n(1),o=n(18);function a(t,e){return void 0===e&&(e=0),function(n){return n.lift(new s(t,e))}}var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}(),u=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.a.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(o.a.createComplete()),this.unsubscribe()},e}(i.a),c=function(){return function(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(48);function i(){return Object(r.a)(1)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(10),o=n(48),a=n(29);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(i.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(a.a)(t,s))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(0),i=n(7),o=n(29),a=n(4),s=n(3);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new c)}var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new f(t))},t}(),f=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),i=n(8),o=n(33),a=n(10);function s(t,e,n){void 0===t&&(t=0);var s=-1;return Object(o.a)(e)?s=Number(e)<1?1:Number(e):Object(a.a)(e)&&(n=e),Object(a.a)(n)||(n=i.a),new r.a((function(e){var r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:s,subscriber:e})}))}function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(2),i=n(5),o=n(22);var a=n(53),s=n(20);var u=n(73),c=n(72);function f(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a((function(n){var r=new i.a;return r.add(e.schedule((function(){var i=t[o.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a((function(n){var r=new i.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(Object(c.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,o=new i.a;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[s.a](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(32).a),o=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e}(n(30).a))(i)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(5).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(76);Object.defineProperty(e,"BoundingBox",{enumerable:!0,get:function(){return r.BoundingBox}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBox=void 0;const r=n(19),i=n(82);let o=(()=>{class t{constructor(t){this._bboxAA=t,this._bboxPoints=[],this._tmp=r.vec3.create(),this.toString=()=>JSON.stringify(this._bboxAA),this._extent=r.vec3.subtract(r.vec3.create(),this._bboxAA[1],this._bboxAA[0]),this._centerAA=(()=>{let t=r.vec3.create();return r.vec3.scale(t,this._extent,.5),r.vec3.add(t,t,this._bboxAA[0])})(),this._diagonalAA=(()=>{let t=r.vec3.create();return r.vec3.subtract(t,this._bboxAA[1],this._bboxAA[0]),r.vec3.length(t)})(),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[0][0],this._bboxAA[0][1],this._bboxAA[0][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[0][0],this._bboxAA[0][1],this._bboxAA[1][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[0][0],this._bboxAA[1][1],this._bboxAA[0][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[0][0],this._bboxAA[1][1],this._bboxAA[1][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[1][0],this._bboxAA[0][1],this._bboxAA[0][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[1][0],this._bboxAA[0][1],this._bboxAA[1][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[1][0],this._bboxAA[1][1],this._bboxAA[0][2])),this._bboxPoints.push(r.vec3.fromValues(this._bboxAA[1][0],this._bboxAA[1][1],this._bboxAA[1][2]));let e=r.vec3.subtract(r.vec3.create(),this.maxAA,this.minAA);this._maxExtent=Math.max(...e)}static create(e){if(null!=e&&void 0!==e[0]&&null!==e[0]&&void 0!==e[1]&&null!==e[1])return new t(e)}static fromVertexBuffer(e){let n=r.vec3.fromValues(e[0],e[1],e[2]),i=r.vec3.clone(n);for(let t=3;t<e.length;t+=3)r.vec3.min(n,n,e.subarray(t)),r.vec3.max(i,i,e.subarray(t));return new t([n,i])}combine(...e){let n=r.vec3.clone(this.minAA),i=r.vec3.clone(this.maxAA);for(var o=0;o<e.length;o++)n=r.vec3.min(n,n,e[o].minAA),i=r.vec3.max(i,i,e[o].maxAA);return new t([n,i])}transformed(e){let n=this._bboxPoints.map(t=>e.transformPoint(t)),i=n.reduce((t,e)=>r.vec3.max(r.vec3.create(),t,e)),o=n.reduce((t,e)=>r.vec3.min(r.vec3.create(),t,e));return new t([o,i])}translateAA(t){t&&(this._bboxAA[0]&&(this._bboxAA[0]=r.vec3.add(this._bboxAA[0],this._bboxAA[0],t)),this._bboxAA[1]&&(this._bboxAA[1]=r.vec3.add(this._bboxAA[1],this._bboxAA[1],t)))}get extent(){return this._extent}computeRectangularSizeOnScreen(t){const e=t.toMatrix();let n=r.vec2.fromValues(1/0,1/0),i=r.vec2.fromValues(-1/0,-1/0),o=r.vec3.create();for(var a=0;a<this._bboxPoints.length;a++){let t=this._bboxPoints[a];o=r.vec3.transformMat4(o,t,e),o[0]=o[0],o[1]=o[1],n[0]=Math.min(o[0],n[0]),n[1]=Math.min(o[1],n[1]),i[0]=Math.max(o[0],i[0]),i[1]=Math.max(o[1],i[1])}return n[0]*=t.projection.screenWidth,n[1]*=t.projection.screenHeight,i[0]*=t.projection.screenWidth,i[1]*=t.projection.screenHeight,n=r.vec2.scale(n,n,.5),i=r.vec2.scale(i,i,.5),r.vec2.subtract(i,i,n)}static computeSphereSizeOnScreen(t,e,n){let i=n/2;const o=i*i;let a=r.vec3.squaredDistance(e,t.view.eyeLocation);if(a<=o||a<t.projection.near*t.projection.near)return;let s=i*(1/t.projection.height)/Math.sqrt(a-o);return t.projection.screenHeight*s}computeSphericalSizeOnScreen(e,n){let r=this.centerAA,o=this._maxExtent;return n&&n!==i.Transform.IDENTITY&&(r=n.transformPoint(r,this._tmp),o=Math.max(this._extent[0]*n.scale[0],this._extent[1]*n.scale[1],this._extent[2]*n.scale[2])),t.computeSphereSizeOnScreen(e,r,o)}worldUnitsPerPixel(e,n){let r=this.centerAA,o=this._maxExtent;n&&n!==i.Transform.IDENTITY&&(r=n.transformPoint(r,this._tmp),o=Math.max(this._extent[0]*n.scale[0],this._extent[1]*n.scale[1],this._extent[2]*n.scale[2]));let a=t.computeSphereSizeOnScreen(e,r,o);if(!(void 0===a||a<1e-8))return o/a}get centerAA(){return this._centerAA}get diagonalSizeAA(){return this._diagonalAA}get minAA(){return this._bboxAA[0]}get maxAA(){return this._bboxAA[1]}get geometryData(){return[this._bboxPoints,t._indexes]}}return t._indexes=[[0,4],[4,5],[5,1],[1,0],[2,6],[6,7],[7,3],[3,2],[0,2],[4,6],[5,7],[1,3]],t})();e.BoundingBox=o},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.createGUI=e.SelectionGUIElement=e.VisibilityGUIElement=void 0;const a=o(n(102));class s{}e.VisibilityGUIElement=class extends s{constructor(t,e,n){super(),this.name=t,this.visible=e,this.onChange=n}registerElement(t){return t.add({visible:this.visible},"visible").name(this.name).listen().onChange(t=>this.onChange(t)),t}};e.SelectionGUIElement=class extends s{constructor(t,e,n,r){super(),this.name=t,this.options=e,this.selection=n,this.onChange=r}registerElement(t){return t.add({selection:this.selection},"selection",this.options).name(this.name).setValue(this.selection).listen().onChange(t=>this.onChange(t)),t}},e.createGUI=function(t,e,n){let r=document.createElement("div");r.id="dat.gui.parent",r.style.cssText="position: absolute; top: 2px; left: 2px",document.body.appendChild(r);let i=new a.GUI({autoPlace:!1});r.appendChild(i.domElement);let o={start:()=>{t.animationRewindTarget=void 0},stop:()=>{t.animationRewindTarget=t.currentAnimationTime}},s=i.addFolder("Animation");s.open(),s.add(n,"currentFrame",n.minTime,n.maxTime,1).listen().onChange(e=>{t.animationRewindTarget=e,t.animationRewindShouldJump=!0}),s.add(o,"start"),s.add(o,"stop");let u=i.addFolder("Data sources");u.open(),[...e.dataSourcesMap.keys()].map(t=>e.dataSourcesMap.get(t)).forEach(t=>{var e;null===(e=t.createGUIElements())||void 0===e||e.forEach(t=>t.registerElement(u))}),i.addFolder("Visualization").add(t,"showSafetyBoundary").listen().onChange(e=>{t.showSafetyBoundary=e})}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MeshDataSource=e.MeshRenderingOptions=e.TexturedMeshType=e.ColoredMeshType=void 0;const s=n(19),u=n(24),c=n(110),f=o(n(12)),h=n(38),l=n(36);e.ColoredMeshType=f.type({wireframe:f.boolean,color:l.vec3type}),e.TexturedMeshType=f.type({url:f.string,width:f.number,flipY:f.boolean}),e.MeshRenderingOptions=f.union([e.ColoredMeshType,e.TexturedMeshType]);const d=a(n(111)),p=a(n(112)),m=a(n(113)),y=a(n(114));class g extends h.DataSource{constructor(t,e,n,r=!1){super(t,1,!1,void 0,void 0),this._geometryURL=e,this._options=n,this._isInVRWorldSpace=r,this._uniforms={}}init(t,e){this._uniforms={u_transformMatrix:s.mat4.identity(s.mat4.create())},this.isTextured(this._options)?this._programInfo=u.createProgramInfo(t,[d.default,p.default]):(this._programInfo=u.createProgramInfo(t,[m.default,y.default]),this._uniforms.u_color=this._options.color),this._uniforms.u_useVRTransform=!this._isInVRWorldSpace}load(t,e){let n=new Array;if(n.push(new Promise(e=>{fetch(this._geometryURL).then(t=>t.blob()).then(t=>new Promise(e=>{const n=new FileReader;n.addEventListener("loadend",t=>{e(n.result)}),n.readAsText(t)})).then(n=>{const r=new c.Mesh(n);if(this._programInfo){let e={position:r.vertices,indices:this.isWireframed(this._options)?this.recalculateToWireframeIndeces(r.indices):r.indices};this.isTextured(this._options)&&(e.texcoord=r.textures),this._vertexArrayInfo=u.createVertexArrayInfo(t,this._programInfo,u.createBufferInfoFromArrays(t,e))}this._bboxFromConstructor||this.updateBoundingBox(Float32Array.from(r.vertices)),e()})})),this.isTextured(this._options)){let e=this._options;n.push(new Promise(n=>{this._uniforms.u_texture=u.createTexture(t,{src:e.url,width:e.width,flipY:e.flipY?1:0},()=>n())}))}return Promise.all(n).then(t=>{e()})}recalculateToWireframeIndeces(t){const e=new Array(2*t.length);for(let n=0;n<t.length;n+=3)e.push(t[n],t[n+1],t[n+1],t[n+2],t[n+2],t[n]);return e}renderFrame(t){void 0!==this._vertexArrayInfo&&void 0!==this._programInfo&&(t.useProgram(this._programInfo.program),u.setBuffersAndAttributes(t,this._programInfo,this._vertexArrayInfo),u.setUniforms(this._programInfo,this._uniforms),this.isWireframed(this._options)?u.drawBufferInfo(t,this._vertexArrayInfo,t.LINES):u.drawBufferInfo(t,this._vertexArrayInfo),t.bindVertexArray(null))}renderVRFrame(t,e,n){this.renderFrame(t)}get uniforms(){return this._uniforms}set uniforms(t){this._uniforms=t}isTextured(t){return void 0!==t.flipY}isWireframed(t){return void 0!==t.wireframe&&t.wireframe}}e.MeshDataSource=g},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.FontOptionsType=e.FontLayoutAlignment=void 0;const s=n(24),u=n(19),c=a(n(115)),f=o(n(12)),h=n(36),l=a(n(119)),d=a(n(120)),p=a(n(121)),m=a(n(122)),y=a(n(123)),g=a(n(124)),v=a(n(125)),x=a(n(126)),b=a(n(127)),_=a(n(128)),w=a(n(129)),M=a(n(130));e.FontLayoutAlignment=f.type({x:f.keyof({left:null,right:null,center:null}),y:f.keyof({top:null,bottom:null,center:null})}),e.FontOptionsType=f.partial({align:f.keyof({left:null,right:null,center:null}),family:f.keyof({calibri:null,opensans:null}),weight:f.keyof({none:null,bold:null,italic:null}),size:f.number,position:h.vec3type,letterSpacing:f.number,color:h.vec3type,layoutAlign:e.FontLayoutAlignment});const T={align:"left",family:"opensans",weight:"none",size:60,position:[0,200,0],letterSpacing:1,color:[.5,.5,.5],layoutAlign:{x:"center",y:"center"}};class A{constructor(t){this.opts=t,this.fileName=this.opts.family+("none"!=this.opts.weight?this.opts.weight:"")}}const S=new A(T),O={position:[],texcoord:[]},E=a(n(131)),k=a(n(132));e.Text=class{constructor(t){this.gl=t,this.textUniforms={},this.fontDefinition=S,this.dataArrays=O,this.text="",this.fontLibrary=this.createFontLibrary(),this.programInfo=s.createProgramInfo(t,[E.default,k.default])}getBuffer(t,e){return new Promise(n=>{this.text=t,e=Object.assign(Object.assign({},T),e),this.fontDefinition=new A(e),this.fontLayout=this.createFontLayout(),this.textUniforms={u_fontColor:this.fontDefinition.opts.color,u_distanceRange:this.fontLibrary[""+this.fontDefinition.fileName].json.distanceField.distanceRange,u_diffuse:s.createTexture(this.gl,{src:this.fontLibrary[""+this.fontDefinition.fileName].texture,width:512,minMag:this.gl.LINEAR}),u_layoutCenter:u.vec3.fromValues((this.fontLayout.glyphs[0].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].data.width+this.fontLayout.glyphs[0].position[0])/2,this.fontDefinition.opts.position[1],(this.fontLayout.glyphs[0].position[1]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].position[1]-this.fontLayout.ascender-this.fontLayout.glyphs[0].position[1])/2)},this.fillArrays(),this.textBuffer=s.createBufferInfoFromArrays(this.gl,this.dataArrays),n(this.textBuffer)})}renderText(){void 0!==this.textBuffer&&(this.gl.useProgram(this.programInfo.program),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.depthMask(!1),s.setBuffersAndAttributes(this.gl,this.programInfo,this.textBuffer),s.setUniforms(this.programInfo,this.textUniforms),s.drawBufferInfo(this.gl,this.textBuffer),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0))}fillArrays(){const t=this.fontDefinition.opts.size/this.fontLayout._opt.font.info.size,e=this.fontLayout._opt.font.common.scaleW,n=this.fontLayout._opt.font.common.scaleH;this.fontLayout.glyphs.forEach(r=>{let i={x:(this.fontLayout.glyphs[0].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].data.width+this.fontLayout.glyphs[0].position[0])/2,y:(this.fontLayout.glyphs[0].position[1]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].position[1]-this.fontLayout.ascender-this.fontLayout.glyphs[0].position[1])/2};"left"===this.fontDefinition.opts.layoutAlign.x?i.x=this.fontLayout.glyphs[0].position[0]:"right"===this.fontDefinition.opts.layoutAlign.x&&(i.x=this.fontLayout.glyphs[0].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].position[0]-this.fontLayout.glyphs[this.fontLayout.glyphs.length-1].data.width),"bottom"===this.fontDefinition.opts.layoutAlign.y?i.y=this.fontLayout.glyphs[0].position[1]+this.fontLayout.descender:"top"===this.fontDefinition.opts.layoutAlign.y&&(i.y=-this.fontLayout.glyphs[0].position[1]-this.fontLayout.ascender);const o={x:(i.x+r.position[0]+r.data.xoffset)*t+this.fontDefinition.opts.position[0],y:this.fontDefinition.opts.position[1],z:(i.y+r.position[1]+r.data.yoffset)*t+this.fontDefinition.opts.position[2]};this.dataArrays.position.push(o.x,o.y,o.z,o.x,o.y,o.z+r.data.height*t,o.x+r.data.width*t,o.y,o.z,o.x+r.data.width*t,o.y,o.z,o.x,o.y,o.z+r.data.height*t,o.x+r.data.width*t,o.y,o.z+r.data.height*t),this.dataArrays.texcoord.push(r.data.x/e,r.data.y/n,r.data.x/e,(r.data.y+r.data.height)/n,(r.data.x+r.data.width)/e,r.data.y/n,(r.data.x+r.data.width)/e,r.data.y/n,r.data.x/e,(r.data.y+r.data.height)/n,(r.data.x+r.data.width)/e,(r.data.y+r.data.height)/n)})}createFontLibrary(){return{calibri:{json:l.default,texture:m.default},calibrib:{json:d.default,texture:y.default},calibrii:{json:p.default,texture:g.default},opensans:{json:v.default,texture:_.default},opensansb:{json:x.default,texture:w.default},opensansi:{json:b.default,texture:M.default}}}createFontLayout(){return c.default({font:this.fontLibrary[""+this.fontDefinition.fileName].json,text:this.text,width:1e3,letterSpacing:this.fontDefinition.opts.letterSpacing,align:this.fontDefinition.opts.align})}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.VRViewport=e.Viewport=e.ViewportSettingsType=void 0;const s=n(24),u=n(97),c=n(19),f=n(135),h=o(n(12)),l=n(137),d=n(138),p=n(36);e.ViewportSettingsType=h.type({id:h.string,name:h.string,leftBottom:p.vec2type,dimension:p.vec2type,cameraPosition:p.vec3type,cameraTarget:p.vec3type,cameraUpVector:p.vec3type,cameraType:h.keyof({static:null,controllable:null}),main:h.boolean});e.Viewport=class{constructor(t){this.settings=t,this.cameraUniformBlockObject={}}init(t,e,n){this.camera=new u.ReplaySubject(1),"controllable"===this.settings.cameraType&&(new d.PointerController(e,this.camera),new d.WheelController(e,this.camera,t=>t.projection.far/400),new d.KeyboardController(e,this.camera,t=>t.projection.far/100)),new d.ResizeController(e,this.camera);const r=c.vec3.fromValues(this.settings.cameraPosition[0],this.settings.cameraPosition[1],this.settings.cameraPosition[2]),i=c.vec3.fromValues(this.settings.cameraTarget[0],this.settings.cameraTarget[1],this.settings.cameraTarget[2]),o=c.vec3.fromValues(this.settings.cameraUpVector[0],this.settings.cameraUpVector[1],this.settings.cameraUpVector[2]);this.camera.next(new l.Camera(l.ThirdPersonCamera.lookAt(r,i,o),new l.PerspectiveProjection(n.zNear,n.zFar,Math.PI/5,Math.floor(e.clientWidth*this.settings.dimension[0]),Math.floor(e.clientHeight*this.settings.dimension[1])))),this.camera.subscribe(t=>{this.cameraUniformBlockObject={u_view:t.view.toMatrix(),u_projection:t.projection.toMatrix(),u_globalVRTransform:c.mat4.identity(c.mat4.create())}})}setupFrame(t,e){let n=Math.floor(e.clientWidth*this.settings.leftBottom[0]),r=Math.floor(e.clientHeight*this.settings.leftBottom[1]),i=Math.floor(e.clientWidth*this.settings.dimension[0]),o=Math.ceil(e.clientHeight*this.settings.dimension[1]);t.viewport(n,r,i,o),t.scissor(n,r,i,o),t.enable(t.SCISSOR_TEST),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.disable(t.SCISSOR_TEST)}updateCameraUniformBlock(t,e,n){this.cameraUniformBlockObject&&(s.setBlockUniforms(n,this.cameraUniformBlockObject),s.setUniformBlock(t,e,n))}};const m=a(n(139)),y=a(n(140));e.VRViewport=class{constructor(){this.cameraUniformBlockObject={},this.vrScaleToFitRatio=.013,this.vrCenterTranslation=c.vec3.create(),this.vrPlayerHeight=1.7,this.vrControllerScale=1,this.vrControllerGrabBaseTranslation=c.vec3.create(),this.vrControllerGrabTranslation=c.vec3.create(),this.useSittingToStandingTransform=!0;const t=f.detect();t&&"chrome"==t.name&&(this.useSittingToStandingTransform=!1)}updateVRSceneSettings(t,e,n,r){if(e&&e.stageParameters&&e.stageParameters.sizeX>0&&e.stageParameters.sizeZ>0){this.vrAreaSize=[e.stageParameters.sizeX,e.stageParameters.sizeZ];const i=r.VRScaleConstant*this.vrAreaSize[0]/n.extent[0],o=r.VRScaleConstant*this.vrAreaSize[1]/n.extent[2];this.vrScaleToFitRatio=Math.max(i,o),this.vrCenterTranslation=c.vec3.add(c.vec3.create(),n.centerAA.map(t=>-1*t),r.VRBaseTranslation),this.boundsProgramInfo=s.createProgramInfo(t,[m.default,y.default]);const a=this.vrAreaSize[0]/2,u=this.vrAreaSize[0]/2;this.boundsArrayInfo=s.createVertexArrayInfo(t,this.boundsProgramInfo,s.createBufferInfoFromArrays(t,{position:{numComponents:3,data:[-a,0,-u,-a,0,u,a,0,u,a,0,-u]}})),this.boundsCameraUniformBlockInfo=s.createUniformBlockInfo(t,this.boundsProgramInfo,"Camera")}}updateVRCameraUniformObject(t,e,n,r){let i=c.mat4.create();this.getStandingViewMatrix(e,i,n);const o=c.mat4.identity(c.mat4.create());c.mat4.translate(o,o,c.vec3.add(c.vec3.create(),this.vrControllerGrabBaseTranslation,this.vrControllerGrabTranslation)),c.mat4.translate(o,o,[0,.8*this.vrPlayerHeight,0]),c.mat4.scale(o,o,[this.vrScaleToFitRatio,this.vrScaleToFitRatio,this.vrScaleToFitRatio]),c.mat4.scale(o,o,[this.vrControllerScale,this.vrControllerScale,this.vrControllerScale]),c.mat4.translate(o,o,this.vrCenterTranslation),this.cameraUniformBlockObject={u_view:i,u_projection:r,u_globalVRTransform:o},this.boundsProgramInfo&&this.boundsCameraUniformBlockInfo&&this.updateCameraUniformBlock(t,this.boundsProgramInfo,this.boundsCameraUniformBlockInfo)}getSittingToStandingMatrix(t){if(this.useSittingToStandingTransform&&t.stageParameters&&t.stageParameters.sittingToStandingTransform)return t.stageParameters.sittingToStandingTransform;{let t=c.mat4.identity(c.mat4.create());return c.mat4.translate(t,t,[0,this.vrPlayerHeight,0]),t}}getStandingViewMatrix(t,e,n){this.useSittingToStandingTransform&&t.stageParameters&&t.stageParameters.sittingToStandingTransform?(c.mat4.invert(e,t.stageParameters.sittingToStandingTransform),c.mat4.multiply(e,n,e)):(c.mat4.identity(e),c.mat4.translate(e,e,[0,this.vrPlayerHeight,0]),c.mat4.invert(e,e),c.mat4.multiply(e,n,e))}setupLeftFrame(t,e){t.viewport(0,0,.5*e.clientWidth,e.clientHeight)}setupRightFrame(t,e){t.viewport(.5*e.clientWidth,0,.5*e.clientWidth,e.clientHeight)}setupFullFrame(t,e){t.viewport(0,0,e.clientWidth,e.clientHeight)}updateCameraUniformBlock(t,e,n){this.cameraUniformBlockObject&&(s.setBlockUniforms(n,this.cameraUniformBlockObject),s.setUniformBlock(t,e,n))}drawVRSceneSafeBounds(t){this.vrAreaSize&&this.boundsProgramInfo&&this.boundsArrayInfo&&this.boundsCameraUniformBlockInfo&&(t.useProgram(this.boundsProgramInfo.program),s.setBuffersAndAttributes(t,this.boundsProgramInfo,this.boundsArrayInfo),s.setUniforms(this.boundsProgramInfo,{color:[1,1,1,0]}),s.setUniformBlock(t,this.boundsProgramInfo,this.boundsCameraUniformBlockInfo),s.drawBufferInfo(t,this.boundsArrayInfo,t.LINE_LOOP),t.bindVertexArray(null))}vrSceneScale(t){this.vrControllerScale+=t,this.vrControllerScale=Math.max(Math.min(this.vrControllerScale,5),.1)}vrSceneContollerTransformsReset(){this.vrControllerScale=1,this.vrControllerGrabBaseTranslation=c.vec3.create(),this.vrControllerGrabTranslation=c.vec3.create()}vrSceneGrabTranslate(t){this.vrControllerGrabTranslation=t}vrSceneGrabReleaseTranslate(t){c.vec3.add(this.vrControllerGrabBaseTranslation,this.vrControllerGrabBaseTranslation,t),this.vrControllerGrabTranslation=c.vec3.create()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNil=function(t){return null==t},e.truncateDecimal=function(t,e){var n=t.toString().split("."),r=n[0],i=n[1];return null==i?parseFloat(r):parseFloat(r+"."+i.slice(0,e))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=e.MutableTransform=e.BaseTransform=void 0;const r=n(19),i=n(100);var o;!function(t){function e(t,e){r.mat4.fromRotationTranslationScale(e,t.rotation,t.translation,t.scale)}t.combine=function(t,e,n){return r.vec3.mul(n.scale,t.scale,e.scale),r.quat.mul(n.rotation,e.rotation,t.rotation),r.vec3.mul(n.translation,t.translation,e.scale),r.vec3.transformQuat(n.translation,n.translation,e.rotation),r.vec3.add(n.translation,n.translation,e.translation),n},t.interpolate=function(t,e,n,i){return r.vec3.lerp(i.scale,t.scale,e.scale,n),r.vec3.lerp(i.translation,t.translation,e.translation,n),r.quat.slerp(i.rotation,t.rotation,e.rotation,n),i},t.rotateBy=function(t,e,n){return r.quat.mul(n.rotation,t.rotation,e),r.vec3.copy(n.translation,t.translation),r.vec3.copy(n.scale,t.scale),n},t.rotateByAngles=function(t,e,n){const i=n.rotation;return r.quat.copy(i,t.rotation),r.quat.rotateX(i,i,e[0]),r.quat.rotateY(i,i,e[1]),r.quat.rotateZ(i,i,e[2]),r.vec3.copy(n.translation,t.translation),r.vec3.copy(n.scale,t.scale),n},t.translateBy=function(t,e,n){const i=r.vec3.mul(n.translation,e,t.scale);return r.vec3.transformQuat(i,i,t.rotation),r.vec3.add(i,i,t.translation),r.quat.copy(n.rotation,t.rotation),r.vec3.copy(n.scale,t.scale),n},t.transformPoint=function(t,e,n){var i=n||r.vec3.create();return r.vec3.transformQuat(i,e,t.rotation),r.vec3.mul(i,i,t.scale),r.vec3.add(i,i,t.translation),i},t.toExistingMatrix=e,t.toExistingInverseMatrix=function(t,n){e(t,n),r.mat4.invert(n,n)||r.mat4.identity(n)},t.computeHash=function(t){const e=new Float32Array(t.rotation.length+t.translation.length+t.scale.length);return e[0]=t.rotation[0],e[1]=t.rotation[1],e[2]=t.rotation[2],e[3]=t.rotation[3],e[4]=t.translation[0],e[5]=t.translation[1],e[6]=t.translation[2],e[7]=t.scale[0],e[8]=t.scale[1],e[9]=t.scale[2],i.Hash.floatArrayHash(e)},t.equals=function(t,e){return r.quat.exactEquals(t.rotation,e.rotation)&&r.vec3.exactEquals(t.translation,e.translation)&&r.vec3.exactEquals(t.scale,e.scale)}}(o||(o={}));let a=(()=>{class t{constructor(e,n,i){this._matrixCache=void 0,this._inverseMatrixCache=void 0,this.rotation=e||r.quat.clone(t.IDENTITY_ROTATION),this.translation=n||r.vec3.clone(t.IDENTITY_TRANSLATION),this.scale=i||r.vec3.clone(t.IDENTITY_SCALE),this._hash=this.computeHash()}static create(e,n,i){return void 0!==e&&!r.quat.equals(e,t.IDENTITY_ROTATION)||void 0!==n&&!r.vec3.equals(n,t.IDENTITY_TRANSLATION)||void 0!==i&&!r.vec3.equals(i,t.IDENTITY_SCALE)?new t(e||t.IDENTITY_ROTATION,n||t.IDENTITY_TRANSLATION,i||t.IDENTITY_SCALE):u.IDENTITY}static fromMatrix(e){const n=r.mat4.getScaling(r.vec3.create(),e),i=r.mat4.getRotation(r.quat.create(),[e[0]/n[0],e[1]/n[1],e[2]/n[2],e[3],e[4]/n[0],e[5]/n[1],e[6]/n[2],e[7],e[8]/n[0],e[9]/n[1],e[10]/n[2],e[11]]);r.quat.normalize(i,i);const o=r.mat4.getTranslation(r.vec3.create(),e);return t.create(i,o,n)}combine(e){return e===u.IDENTITY?this:this===u.IDENTITY?e:o.combine(this,e,new t)}combineInto(t,e){return o.combine(this,t,e)}interpolate(e,n){return o.interpolate(this,e,n,new t)}rotateBy(e){return o.rotateBy(this,e,new t)}rotateByAngles(e){return o.rotateByAngles(this,e,new t)}translateBy(e){return o.translateBy(this,e,new t)}transformPoint(t,e){return o.transformPoint(this,t,e)}toMatrix(){return void 0!==this._matrixCache||(this._matrixCache=r.mat4.create(),this.toExistingMatrix(this._matrixCache)),this._matrixCache}inverseMatrix(){return void 0!==this._inverseMatrixCache||(this._inverseMatrixCache=r.mat4.create(),this.toExistingInverseMatrix(this._inverseMatrixCache)),this._inverseMatrixCache}toExistingMatrix(t){o.toExistingMatrix(this,t)}toExistingInverseMatrix(t){o.toExistingInverseMatrix(this,t)}computeHash(){return o.computeHash(this)}hash(){return this._hash}equals(t){return o.equals(this,t)}}return t.IDENTITY_ROTATION=r.quat.create(),t.IDENTITY_TRANSLATION=r.vec3.create(),t.IDENTITY_SCALE=r.vec3.fromValues(1,1,1),t})();e.BaseTransform=a;class s{constructor(t,e,n){this._matrixCache=void 0,this._inverseMatrixCache=void 0,this.rotation=t||r.quat.clone(a.IDENTITY_ROTATION),this.translation=e||r.vec3.clone(a.IDENTITY_TRANSLATION),this.scale=n||r.vec3.clone(a.IDENTITY_SCALE)}combine(t){return o.combine(this,t,new s)}combineInto(t,e){return o.combine(this,t,e)}interpolate(t,e){return o.interpolate(this,t,e,new s)}rotateBy(t){return o.rotateBy(this,t,new s)}rotateByAngles(t){return o.rotateByAngles(this,t,new s)}translateBy(t){return o.translateBy(this,t,new s)}transformPoint(t,e){return o.transformPoint(this,t,e)}toMatrix(){return void 0!==this._matrixCache||(this._matrixCache=r.mat4.create(),this.toExistingMatrix(this._matrixCache)),this._matrixCache}inverseMatrix(){return void 0!==this._inverseMatrixCache||(this._inverseMatrixCache=r.mat4.create(),this.toExistingInverseMatrix(this._inverseMatrixCache)),this._inverseMatrixCache}toExistingMatrix(t){return o.toExistingMatrix(this,t)}toExistingInverseMatrix(t){return o.toExistingInverseMatrix(this,t)}computeHash(){return o.computeHash(this)}hash(){return this._hash?this._hash:this._hash=this.computeHash()}equals(t){return o.equals(this,t)}rotateByInplace(t){o.rotateBy(this,t,this)}rotateByAnglesInplace(t){o.rotateByAngles(this,t,this)}translateByInplace(t){o.translateBy(this,t,this)}}var u;e.MutableTransform=s,function(t){t.IDENTITY=new a,t.create=a.create,t.fromMatrix=a.fromMatrix}(u=e.Transform||(e.Transform={}))},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DataSourceAnimator=e.Animator=e.AnimationOptionsType=void 0;const a=o(n(12));e.AnimationOptionsType=a.type({minTime:a.number,maxTime:a.number,animationEcho:a.number,animationCrossfade:a.boolean});e.Animator=class{constructor(t){this.idToAnimatorMap=new Map;const e=t;this.minTime=e.minTime,this.maxTime=e.maxTime,this._animationEcho=e.animationEcho,this._animationCrossfade=e.animationCrossfade,this._animationLength=this._animationCrossfade?this.maxTime-this.minTime+this._animationEcho:this.maxTime-this.minTime,this._animationTime=0,this._lastFrameTime=0,this._lastTime=0,this._currentFrame=0,this.currentFrame=this._currentFrame}update(t,e,n){const r=e-this._lastFrameTime;t&&(this._animationTime=this._animationTime+r/n),this._lastTime=this._animationTime-this._animationEcho,this._lastFrameTime=e,this._currentFrame=this._animationTime%this._animationLength,this.currentFrame=this._currentFrame,this.idToAnimatorMap.forEach(t=>t.updateAnimator(this._animationTime,this._lastTime))}sliderUpdate(t,e){this._animationTime=t,this._lastFrameTime=e,this._lastTime=Math.floor(t)-this._animationEcho,this._currentFrame=this._animationTime%this._animationLength,this.currentFrame=this._currentFrame,this.idToAnimatorMap.forEach(t=>t.updateAnimator(this._animationTime,this._lastTime))}createLocalAnimator(t){return this.idToAnimatorMap.has(t)||this.idToAnimatorMap.set(t,new u(this.minTime,this.maxTime,this._animationEcho,this._animationCrossfade)),this.idToAnimatorMap.get(t)}get animationTime(){return this._animationTime}get animationLength(){return this._animationLength}get lastTime(){return this._lastTime}};const s=n(24);class u{constructor(t,e,n,r){this.minTime=t,this.maxTime=e,this.animationEcho=n,this.animationCrossfade=r,this.animationLength=r?e-t+n:e-t,this.firstAnimationFrame=t,this.lastAnimationFrame=t,this.animationUniformObject={}}updateAnimator(t,e){this.firstAnimationFrame=t%this.animationLength,this.lastAnimationFrame=e%this.animationLength,this.animationUniformObject={u_timespan:this.animationEcho,u_length:this.animationLength,u_time:t,u_last_time:t-this.animationEcho}}createAnimatorUniformBlock(t,e){this.uniformBlockInfo=s.createUniformBlockInfo(t,e,"Animation")}updateAnimatorUniformBlock(t,e){this.uniformBlockInfo&&(s.setBlockUniforms(this.uniformBlockInfo,this.animationUniformObject),s.setUniformBlock(t,e,this.uniformBlockInfo))}get firstFrame(){return this.firstAnimationFrame}get lastFrame(){return this.lastAnimationFrame}}e.DataSourceAnimator=u},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PointsFrameData=e.PointsDataSource=e.defaultPointsPathOptions=e.PointsPathOptionsType=e.OptionalPointsPathOptionsType=e.RequiredPointsPathOptionsType=void 0;const s=n(24),u=o(n(12)),c=n(38);e.RequiredPointsPathOptionsType=u.type({url:u.string}),e.OptionalPointsPathOptionsType=u.partial({colorUrl:u.string,positionUrl:u.string,digitCount:u.number}),e.PointsPathOptionsType=u.intersection([e.RequiredPointsPathOptionsType,e.OptionalPointsPathOptionsType]),e.defaultPointsPathOptions={colorUrl:"-color.dat",positionUrl:"-position.dat",digitCount:3};const f=a(n(103)),h=a(n(85)),l=a(n(104)),d=a(n(85));class p extends c.DataSource{constructor(t,n,r,i,o,a,s,u){super(t,i,r,a,s),this.pointSize=o,this.alphaBlending=u,this.particlesData=new Array,this.pathOptions=Object.assign(Object.assign({},e.defaultPointsPathOptions),n)}init(t,e){this.animator=e,this.alphaBlending?this._programInfo=s.createProgramInfo(t,[f.default,h.default]):this._programInfo=s.createProgramInfo(t,[l.default,d.default])}load(t,e){const n=new Array;if(void 0!==this.animator)for(let t=this.animator.minTime;t<this.animator.maxTime;t++){const e=t.toString().padStart(this.pathOptions.digitCount,"0");n.push(new m(`${this.pathOptions.url}${e}`,this.pathOptions.positionUrl,this.pathOptions.colorUrl,this.pointSize,t-this.animator.minTime))}return new Promise(r=>{Promise.all(n.map(n=>n.parseData().then(n=>(this._bboxFromConstructor||this.updateBoundingBox(n.positionArray),void 0!==this._programInfo&&n.initShaderData(t,this._programInfo),e(),n)))).then(t=>{this.particlesData=t,r()})})}renderFrame(t){if(this.particlesData&&void 0!==this._programInfo){if(t.useProgram(this._programInfo.program),this.alphaBlending&&(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),void 0!==this.animator&&void 0!==this._programInfo)){let t={u_lastFrame:this.animator.lastFrame,u_firstFrame:this.animator.firstFrame,u_echo:this.animator.animationEcho};s.setUniforms(this._programInfo,t)}let e=!1;this.particlesData.forEach(n=>{void 0!==this.animator&&void 0!==this._programInfo&&void 0!==n.vertexArrayInfo&&void 0!==n.particleUboInfo&&(e=!1,this.animator.firstFrame>this.animator.lastFrame?n.frameTime<=this.animator.firstFrame&&n.frameTime>=this.animator.lastFrame&&(e=!0):(n.frameTime<this.animator.firstFrame||n.frameTime>this.animator.lastFrame)&&(e=!0),e&&(s.setBuffersAndAttributes(t,this._programInfo,n.vertexArrayInfo),s.bindUniformBlock(t,this._programInfo,n.particleUboInfo),this.polygonOffset&&t.polygonOffset(this.polygonOffset[0],this.polygonOffset[1]),s.drawBufferInfo(t,n.vertexArrayInfo,t.TRIANGLES,n.vertexArrayInfo.numElements,0,n.instanceCount)))}),t.bindVertexArray(null)}}renderVRFrame(t,e,n){this.renderFrame(t)}}e.PointsDataSource=p;class m{constructor(t,e,n,r,i){this._url=t,this._positionUrl=e,this._colorUrl=n,this._size=r,this._frameTime=i}parseData(){return new Promise(t=>{let e=new Array;const n=this._url+this._positionUrl,r=this._url+this._colorUrl;e.push(this.fetchData(n),this.fetchData(r)),Promise.all(e).then(e=>{t(this.prepareData(e[0],e[1],this._frameTime))})})}fetchData(t){return new Promise(e=>{fetch(t).then(t=>t.arrayBuffer()).then(t=>{e(new Float32Array(t))})})}prepareData(t,e,n){const r=new Float32Array(t),i=new Float32Array(e);return new y(r.length/3,r,i,this._size,n)}}e.PointsFrameData=m;class y{constructor(t,e,n,r,i){this.instanceCount=t,this.positionArray=e,this.colorArray=n,this._size=r,this._frameTime=i,this._pointRenderingData={},this._pointRenderingData=s.primitives.createXYQuadVertices(),Object.assign(this._pointRenderingData,{particlePosition:{numComponents:3,data:this.positionArray,divisor:1},particleColor:{numComponents:4,data:this.colorArray,divisor:1}})}initShaderData(t,e){const n=s.createBufferInfoFromArrays(t,this._pointRenderingData);this._vertexArrayInfo=s.createVertexArrayInfo(t,e,n),this._uniformBufferInfo=s.createUniformBlockInfo(t,e,"Particle"),s.setBlockUniforms(this._uniformBufferInfo,{u_size:this._size,u_frameTime:this._frameTime}),s.setUniformBlock(t,e,this._uniformBufferInfo)}get vertexArrayInfo(){return this._vertexArrayInfo}get particleUboInfo(){return this._uniformBufferInfo}get frameTime(){return this._frameTime}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\n\nin vec4 v_color;\nin vec2 v_textureCoor;\n\nout vec4 color;\n\nvoid main() {\n    //      [-0.5,0.5]            [0.5,0.5]\n    //         [0,1]                [1,1]\n    //           +--------------------+\n    //           |    /          \\    |\n    //           |   /            \\   |\n    //           |  /              \\  |\n    //           | /                \\ |\n    //           |/           dUV=0.5\\|       circle\n    //           +|         +---------\x3e\n    //           |\\      [x,y,z]     /|   tex^2 <= dUV^2\n    //           | \\                / |\n    //           |  \\              /  |\n    //           |   \\            /   |\n    //           +--------------------+\n    //   [u,v]=[0,0]                [1,0]\n    // tex =[-0.5,-0.5]           [0.5,-0.5]\n    vec2 tex = v_textureCoor - vec2(0.5);\n    tex = tex * tex;\n    float dUV2 = tex.x + tex.y;\n    if (dUV2 > 0.25)\n        discard;\n    else\n        // alpha blending from texture (WebGL version)\n        // color = vec4(vec3(0.0, 0.0, 0.0) * (1.0 - v_color.w) + v_color.xyz * v_color.w, 1.0);\n        color = vec4(v_color.xyz, 1.0);\n}"},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&__createBinding(e,t,n);return __setModuleDefault(e,t),e},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TexturesDataSource=exports.TexturePathOptionsType=exports.OptionalTexturePathOptions=exports.RequiredTexturePathOptions=exports.defaultTextureDataOptions=exports.TextureDataOptionsType=exports.OptionalTextureDataOptionsType=exports.RequiredTextureDataOptionsType=exports.TextureFormatType=void 0;const twgl_js_1=__webpack_require__(24),gl_matrix_1=__webpack_require__(19),t=__importStar(__webpack_require__(12)),Either_1=__webpack_require__(57),dataSource_1=__webpack_require__(38),boundingBox_1=__webpack_require__(76),transform_1=__webpack_require__(82),typeTools_1=__webpack_require__(36),Float32ArrayType=new t.Type("Float32Array-from-NumberArray",t=>t instanceof Float32Array,(e,n)=>Either_1.either.chain(t.array(t.number).validate(e,n),e=>t.success(new Float32Array(e))),t=>Array.from(t));exports.TextureFormatType=t.keyof({RGBA:null,RGB:null}),exports.RequiredTextureDataOptionsType=t.type({texturePixelWidth:t.number}),exports.OptionalTextureDataOptionsType=t.partial({textureWorldWidth:t.number,textureWorldHeight:t.number,subdivision:t.number,baseRotation:Float32ArrayType,baseTranslation:typeTools_1.vec3type,displacement:typeTools_1.vec2type,verticalShift:t.number,discardValue:t.number,format:exports.TextureFormatType}),exports.TextureDataOptionsType=t.intersection([exports.RequiredTextureDataOptionsType,exports.OptionalTextureDataOptionsType]),exports.defaultTextureDataOptions={textureWorldWidth:0,textureWorldHeight:0,subdivision:1,baseRotation:twgl_js_1.m4.rotationX(0),baseTranslation:[0,0,0],displacement:[0,0],verticalShift:0,discardValue:-1,format:"RGBA"},exports.RequiredTexturePathOptions=t.type({url:t.string}),exports.OptionalTexturePathOptions=t.partial({colorUrl:t.string,digitCount:t.number,fillDataGapsWithLastFrame:t.boolean}),exports.TexturePathOptionsType=t.intersection([exports.RequiredTexturePathOptions,exports.OptionalTexturePathOptions]);const defaultTexturePathOptions={colorUrl:"-color.dat",digitCount:3,fillDataGapsWithLastFrame:!1},vertTexturePlane_glsl_1=__importDefault(__webpack_require__(106)),fragTexturePlane_glsl_1=__importDefault(__webpack_require__(107));class TexturesDataSource extends dataSource_1.DataSource{constructor(t,e,n,r,i,o){super(t,r,n,void 0,o),this.textures=new Array,this.textureUniforms={},this.pathOptions=Object.assign(Object.assign({},defaultTexturePathOptions),e),this.dataOptions=Object.assign(Object.assign({},exports.defaultTextureDataOptions),i),i.textureWorldWidth||(this.dataOptions.textureWorldWidth=i.texturePixelWidth),i.textureWorldHeight||(this.dataOptions.textureWorldHeight=i.texturePixelWidth)}init(t,e){if(this.animator=e,this._programInfo=twgl_js_1.createProgramInfo(t,[vertTexturePlane_glsl_1.default,fragTexturePlane_glsl_1.default]),this.textureUniforms={u_diffuse:void 0,u_rotateMatrix:this.dataOptions.baseRotation,u_translation:this.dataOptions.baseTranslation,u_displacementMin:Math.min(...this.dataOptions.displacement),u_displacementMax:Math.max(...this.dataOptions.displacement),u_verticalShift:this.dataOptions.verticalShift,u_discardValue:this.dataOptions.discardValue},!this._bboxFromConstructor){const t=this.dataOptions.textureWorldWidth/2,e=this.dataOptions.textureWorldHeight/2,n=gl_matrix_1.vec3.fromValues(this.dataOptions.baseTranslation[0]-t,this.dataOptions.baseTranslation[1]+this.dataOptions.verticalShift+this.dataOptions.displacement[0],this.dataOptions.baseTranslation[2]-e),r=gl_matrix_1.vec3.fromValues(this.dataOptions.baseTranslation[0]+t,this.dataOptions.baseTranslation[1]+this.dataOptions.verticalShift+(this.dataOptions.displacement[1]-this.dataOptions.displacement[0]),this.dataOptions.baseTranslation[2]+e);this._boudingBox=new boundingBox_1.BoundingBox([n,r]).transformed(transform_1.Transform.fromMatrix(this.dataOptions.baseRotation))}}load(t,e){void 0!==this._programInfo&&(this.vertexArrayInfo=twgl_js_1.createVertexArrayInfo(t,this._programInfo,twgl_js_1.primitives.createPlaneBufferInfo(t,this.dataOptions.textureWorldWidth,this.dataOptions.textureWorldHeight,this.dataOptions.subdivision,this.dataOptions.subdivision)));const n=new Array;if(void 0!==this.animator)for(let t=this.animator.minTime;t<this.subElementCount+this.animator.minTime;t++){const e=t.toString().padStart(this.pathOptions.digitCount,"0");n.push(new TexturesFrameData(`${this.pathOptions.url}${e}${this.pathOptions.colorUrl}`,this.dataOptions.texturePixelWidth,this.dataOptions.format,this.pathOptions.fillDataGapsWithLastFrame))}return new Promise(r=>{Promise.all(n.map(n=>n.parseData(t).then(t=>(e(),t)))).then(t=>{if(this.pathOptions.fillDataGapsWithLastFrame){let e=new Array,n=t[0];if(void 0===n)console.error("First texture data element is undefined, impossible to fill gaps, skipping all textures");else for(let r=0;r<t.length;r++)void 0===t[r]?e[r]=n:(n=t[r],e[r]=t[r]);this.textures=e}else this.textures=t;r()})})}renderFrame(t){if(void 0!==this.animator&&void 0!==this._programInfo&&void 0!==this.vertexArrayInfo){const e=Math.floor(this.animator.firstFrame);e<this.subElementCount&&(this.textureUniforms.u_diffuse=this.textures[e],t.useProgram(this._programInfo.program),twgl_js_1.setBuffersAndAttributes(t,this._programInfo,this.vertexArrayInfo),twgl_js_1.setUniforms(this._programInfo,this.textureUniforms),this.polygonOffset&&t.polygonOffset(this.polygonOffset[0],this.polygonOffset[1]),twgl_js_1.drawBufferInfo(t,this.vertexArrayInfo),t.bindVertexArray(null))}}renderVRFrame(t,e,n){this.renderFrame(t)}}exports.TexturesDataSource=TexturesDataSource;class TexturesFrameData{constructor(t,e,n,r){this._url=t,this._width=e,this._format=n,this.fillDataGapsWithLastFrame=r}parseData(gl){return new Promise(resolve=>{const dataTexture=this.fetchData(this._url);dataTexture.then(data=>resolve(twgl_js_1.createTexture(gl,{format:eval("gl."+this._format),mag:gl.LINEAR,min:gl.LINEAR,src:data,width:this._width}))).catch(t=>resolve(void 0))})}fetchData(t){return new Promise((e,n)=>{fetch(t).then(e=>(this.fillDataGapsWithLastFrame&&!e.ok&&(console.warn(`Texture data from ${t} not found, data gap fill is enabled: ${this.fillDataGapsWithLastFrame}`),n(e.statusText)),e)).then(t=>t.arrayBuffer()).then(t=>{e(new Uint8Array(t))})})}}},function(t,e,n){"use strict";function r(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.not=e.unsafeCoerce=e.identity=void 0,e.identity=r,e.unsafeCoerce=r,e.not=function(t){return function(e){return!t(e)}},e.constant=function(t){return function(){return t}},e.constTrue=function(){return!0},e.constFalse=function(){return!1},e.constNull=function(){return null},e.constUndefined=function(){},e.constVoid=function(){},e.flip=function(t){return function(e,n){return t(n,e)}},e.flow=function(t,e,n,r,i,o,a,s,u){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return i(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return a(o(i(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return s(a(o(i(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return u(s(a(o(i(r(n(e(t.apply(this,arguments)))))))))}}},e.tuple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.increment=function(t){return t+1},e.decrement=function(t){return t-1},e.absurd=function(t){throw new Error("Called `absurd` function which should be uncallable")},e.tupled=function(t){return function(e){return t.apply(void 0,e)}},e.untupled=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(e)}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LineFrameData=e.LinesDataSource=e.LinesPathOptionsType=e.OptionalLinesPathOptions=e.RequiredLinesPathOptions=void 0;const s=n(24),u=o(n(12)),c=n(38);e.RequiredLinesPathOptions=u.type({url:u.string}),e.OptionalLinesPathOptions=u.partial({colorUrl:u.string,positionUrl:u.string,digitCount:u.number}),e.LinesPathOptionsType=u.intersection([e.RequiredLinesPathOptions,e.OptionalLinesPathOptions]);const f={colorUrl:"-color.dat",positionUrl:"-position.dat",digitCount:3},h=a(n(108)),l=a(n(89)),d=a(n(109)),p=a(n(89));class m extends c.DataSource{constructor(t,e,n,r,i,o,a,s){super(t,r,n,i,o),this.alphaBlending=a,this.predefinedAlpha=s,this.linesData=new Array,this.pathOptions=Object.assign(Object.assign({},f),e)}init(t,e){this.animator=e,this.alphaBlending&&!this.predefinedAlpha?this._programInfo=s.createProgramInfo(t,[h.default,l.default]):this._programInfo=s.createProgramInfo(t,[d.default,p.default])}load(t,e){const n=new Array;if(void 0!==this.animator)for(let t=this.animator.minTime;t<this.animator.maxTime;t++){const e=t.toString().padStart(this.pathOptions.digitCount,"0");n.push(new y(`${this.pathOptions.url}${e}`,this.pathOptions.positionUrl,this.pathOptions.colorUrl,t-this.animator.minTime))}return new Promise(r=>{Promise.all(n.map(n=>n.parseData().then(n=>(this._bboxFromConstructor||this.updateBoundingBox(n.positionArray),void 0!==this._programInfo&&n.initShaderData(t,this._programInfo),e(),n)))).then(t=>{this.linesData=t,r()})})}renderFrame(t){if(this.linesData&&void 0!==this._programInfo){if(t.useProgram(this._programInfo.program),this.alphaBlending&&(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),!this.predefinedAlpha&&void 0!==this.animator&&void 0!==this._programInfo)){let t={u_lastFrame:this.animator.lastFrame,u_firstFrame:this.animator.firstFrame,u_echo:this.animator.animationEcho};s.setUniforms(this._programInfo,t)}let e=!1;this.linesData.forEach(n=>{void 0!==this.animator&&void 0!==this._programInfo&&void 0!==n.bufferInfo&&(e=!1,this.alphaBlending&&!this.predefinedAlpha&&s.setUniforms(this._programInfo,{u_frameTime:n.frameTime}),this.animator.firstFrame>this.animator.lastFrame?n.frameTime<=this.animator.firstFrame&&n.frameTime>=this.animator.lastFrame&&(e=!0):(n.frameTime<this.animator.firstFrame||n.frameTime>this.animator.lastFrame)&&(e=!0),e&&(s.setBuffersAndAttributes(t,this._programInfo,n.bufferInfo),this.polygonOffset&&t.polygonOffset(this.polygonOffset[0],this.polygonOffset[1]),s.drawBufferInfo(t,n.bufferInfo,t.LINE_STRIP)))})}}renderVRFrame(t,e,n){this.renderFrame(t)}}e.LinesDataSource=m;class y{constructor(t,e,n,r){this._url=t,this._positionUrl=e,this._colorUrl=n,this._frameTime=r}parseData(){return new Promise(t=>{let e=new Array;const n=this._url+this._positionUrl,r=this._url+this._colorUrl;e.push(this.fetchData(n),this.fetchData(r)),Promise.all(e).then(e=>{t(this.prepareData(e[0],e[1],this._frameTime))})})}fetchData(t){return new Promise(e=>{fetch(t).then(t=>t.arrayBuffer()).then(t=>{e(new Float32Array(t))})})}prepareData(t,e,n){const r=new Float32Array(t),i=new Float32Array(e);return new g(r,i,n)}}e.LineFrameData=y;class g{constructor(t,e,n){this.positionArray=t,this.colorArray=e,this._frameTime=n,this._lineRenderingData={};let r=new Array,i=new Array,o=t[3];for(let n=0;n<t.length;n+=4)t[n+3]!==o&&(o=t[n+3],r.push(NaN,NaN,NaN),i.push(NaN,NaN,NaN,NaN)),r.push(t[n],t[n+1],t[n+2]),i.push(e[n],e[n+1],e[n+2],e[n+3]);let a=s.primitives.createAugmentedTypedArray(3,r.length/3),u=s.primitives.createAugmentedTypedArray(4,i.length/4);r.forEach(t=>a.push(t)),i.forEach(t=>u.push(t)),Object.assign(this._lineRenderingData,{linePosition:a,lineColor:u})}initShaderData(t,e){this._bufferInfo=s.createBufferInfoFromArrays(t,this._lineRenderingData)}get bufferInfo(){return this._bufferInfo}get lineUboInfo(){return this._uniformBufferInfo}get frameTime(){return this._frameTime}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nin vec4 v_color;\n\nout vec4 color;\n\nvoid main() {\n    color = v_color;\n}"},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GridHelper=e.defaultGridOptions=e.GridOptionsType=e.OptionalGridOptionsType=e.RequiredGridOptionsType=void 0;const s=n(24),u=n(19),c=o(n(12)),f=n(38),h=n(79),l=n(36),d=c.keyof({xz_top:null,xz_bottom:null,xy_front:null,xy_back:null,yz_left:null,yz_right:null});e.RequiredGridOptionsType=c.type({bbox:c.tuple([l.vec3type,l.vec3type])}),e.OptionalGridOptionsType=c.partial({primaryColor:l.vec3type,secondaryColor:l.vec3type,labels:c.partial({xName:c.string,yName:c.string,zName:c.string,subdivision:c.boolean,range:c.boolean,multiplyConst:c.number}),faces:c.array(d),subdivision:c.partial({x:c.number,y:c.number,z:c.number,dashLength:c.number})}),e.GridOptionsType=c.intersection([e.RequiredGridOptionsType,e.OptionalGridOptionsType]),e.defaultGridOptions={primaryColor:[0,132/255,134/255],secondaryColor:[0,52/255,54/255],labels:{},faces:new Array,subdivision:{}};const p={align:"left",family:"calibri",weight:"none",size:60,position:[0,0,0],letterSpacing:1,color:[.5,.5,.5],layoutAlign:{x:"center",y:"center"}},m=a(n(133)),y=a(n(134));class g extends f.DataSource{constructor(t,n,r){super(t,1,!1,void 0,void 0),this.fontOptions=p,this.gridData=[],this.fontOptions=Object.assign(Object.assign({},p),r),this.gridOptions=Object.assign(Object.assign({},e.defaultGridOptions),n),this.gridOptions.subdivision.dashLength||(this.gridOptions.subdivision.dashLength=10),this.fontOptions.color=this.gridOptions.primaryColor}init(t,e){this._programInfo=s.createProgramInfo(t,[m.default,y.default])}load(t,e){return new Promise(e=>{let n=new v(t,this.labels,this.gridOptions,this.fontOptions);n.getGridPositionArray().then(()=>{void 0!==this._programInfo&&(n.initShaderData(t,this._programInfo,!0),this.gridData.push(n.getShaderData(!0)),n.initShaderData(t,this._programInfo,!1),this.gridData.push(n.getShaderData(!1)))}),e()}).then(t=>{e()})}renderFrame(t){this.gridData.forEach(e=>{this._programInfo&&(t.useProgram(this._programInfo.program),e.bufferInfo&&e.uniformBlockInfo&&(s.setBuffersAndAttributes(t,this._programInfo,e.bufferInfo),s.setUniformBlock(t,this._programInfo,e.uniformBlockInfo),s.drawBufferInfo(t,e.bufferInfo,t.LINE_STRIP)),t.bindVertexArray(null),e.labels&&e.labels.renderText())})}renderVRFrame(t,e,n){this.renderFrame(t)}}e.GridHelper=g;class v{constructor(t,e,n,r){this.labels=e,this.gOpt=n,this.fOpt=r,this._gridPositionArray=new Array,this._labelsConst={xDispl:1.86*this.fOpt.size,yDispl:1.66*this.fOpt.size,zDispl:1.76*this.fOpt.size,multiply:this.gOpt.labels.multiplyConst?this.gOpt.labels.multiplyConst:1},this.labels=new h.Text(t)}getShaderData(t){return{bufferInfo:this._bufferInfo,uniformBlockInfo:this._uniformBlockInfo,labels:t?this.labels:void 0}}initShaderData(t,e,n){let r=s.primitives.createAugmentedTypedArray(3,this._gridPositionArray.length);this._gridPositionArray.forEach(t=>r.push(t));let i={};Object.assign(i,{linePosition:r}),this._bufferInfo=s.createBufferInfoFromArrays(t,i),e&&(this._uniformBlockInfo=s.createUniformBlockInfo(t,e,"Gridline"),s.setBlockUniforms(this._uniformBlockInfo,{u_bboxCorner:this.gOpt.bbox[0],u_subdivision:this.getDashesSubdivision(n),u_halfDashSize:this.getHalfDashSize(n),u_color:n?this.gOpt.primaryColor:this.gOpt.secondaryColor}))}getGridPositionArray(){return new Promise(t=>{const e=[{x:this.gOpt.bbox[0][0],y:this.gOpt.bbox[0][1],z:this.gOpt.bbox[0][2]},{x:this.gOpt.bbox[1][0],y:this.gOpt.bbox[1][1],z:this.gOpt.bbox[1][2]}];e[0].x===e[1].x?this._gridPositionArray.push(...this.createYZGrid(e[0].x,e)):e[0].y===e[1].y?this._gridPositionArray.push(...this.createXZGrid(e[0].y,e)):e[0].z===e[1].z?this._gridPositionArray.push(...this.createXYGrid(e[0].z,e)):0==this.gOpt.faces.length?(this._gridPositionArray.push(...this.createXYGrid(e[1].z,e)),this._gridPositionArray.push(...this.createXYGrid(e[0].z,e)),this._gridPositionArray.push(...this.createXZGrid(e[0].z,e)),this._gridPositionArray.push(...this.createXZGrid(e[1].z,e)),this._gridPositionArray.push(...this.createYZGrid(e[0].x,e)),this._gridPositionArray.push(...this.createYZGrid(e[1].x,e))):this.gOpt.faces.forEach(t=>{switch(t){case"xz_top":this._gridPositionArray.push(...this.createXZGrid(e[1].z,e));break;case"xz_bottom":this._gridPositionArray.push(...this.createXZGrid(e[0].z,e));break;case"xy_front":this._gridPositionArray.push(...this.createXYGrid(e[1].z,e));break;case"xy_back":this._gridPositionArray.push(...this.createXYGrid(e[0].z,e));break;case"yz_left":this._gridPositionArray.push(...this.createYZGrid(e[0].x,e));break;case"yz_right":this._gridPositionArray.push(...this.createYZGrid(e[1].x,e))}}),t()})}createYZGrid(t,e){let n=new Array;return n.push([t,e[0].y,e[1].z],[t,e[0].y,e[0].z],[t,e[1].y,e[0].z],[t,e[1].y,e[1].z],[t,e[0].y,e[1].z],[NaN,NaN,NaN]),this.labels&&this.gOpt.labels&&(this.gOpt.labels.range,this.gOpt.labels.zName,this.gOpt.labels.yName),this.gOpt.subdivision&&(this.gOpt.subdivision.y&&n.push(...this.createSubdivisonY(e,this.gOpt.subdivision.y,[t,t],[e[0].z,e[1].z])),this.gOpt.subdivision.z&&n.push(...this.createSubdivisonZ(e,this.gOpt.subdivision.z,[t,t],[e[0].y,e[1].y]))),n}createXYGrid(t,e){let n=new Array;return n.push([e[0].x,e[0].y,t],[e[1].x,e[0].y,t],[e[1].x,e[1].y,t],[e[0].x,e[1].y,t],[e[0].x,e[0].y,t],[NaN,NaN,NaN]),this.labels&&this.gOpt.labels&&(this.gOpt.labels.range,this.gOpt.labels.xName,this.gOpt.labels.yName),this.gOpt.subdivision&&(this.gOpt.subdivision.x&&n.push(...this.createSubdivisonX(e,this.gOpt.subdivision.x,[e[0].y,e[1].y],[t,t])),this.gOpt.subdivision.y&&n.push(...this.createSubdivisonY(e,this.gOpt.subdivision.y,[e[0].x,e[1].x],[t,t]))),n}createXZGrid(t,e){let n=new Array;return n.push([e[0].x,t,e[0].z],[e[1].x,t,e[0].z],[e[1].x,t,e[1].z],[e[0].x,t,e[1].z],[e[0].x,t,e[0].z],[NaN,NaN,NaN]),this.labels&&this.gOpt.labels&&(this.gOpt.labels.range&&(this.createLabel((e[1].z+e[0].z-e[0].z)/this._labelsConst.multiply,e[0].x-this._labelsConst.xDispl,t,e[0].z),this.createLabel((e[1].z+e[0].z-e[1].z)/this._labelsConst.multiply,e[0].x-this._labelsConst.xDispl,t,e[1].z),this.createLabel(e[0].x/this._labelsConst.multiply,e[0].x,t,e[1].z+this._labelsConst.zDispl),this.createLabel(e[1].x/this._labelsConst.multiply,e[1].x,t,e[1].z+this._labelsConst.zDispl)),this.gOpt.labels.zName&&(this.fOpt.position=[e[0].x-4*this._labelsConst.xDispl,t,(e[0].z+e[1].z)/2],this.labels.getBuffer(""+this.gOpt.labels.zName,this.fOpt)),this.gOpt.labels.xName&&this.createLabel(this.gOpt.labels.xName,(e[0].x+e[1].x)/2,t,e[1].z+3*this._labelsConst.zDispl)),this.gOpt.subdivision&&(this.gOpt.subdivision.x&&n.push(...this.createSubdivisonX(e,this.gOpt.subdivision.x,[t,t],[e[0].z,e[1].z])),this.gOpt.subdivision.z&&n.push(...this.createSubdivisonZ(e,this.gOpt.subdivision.z,[e[0].x,e[1].x],[t,t]))),n}createLabel(t,e,n,r){this.labels&&(this.fOpt.position=[e,n,r],this.labels.getBuffer(""+t,this.fOpt))}createSubdivisonY(t,e,n,r){let i=new Array,o=t[0].y+e;for(;o<t[1].y;)i.push([n[0],o,r[0]],[n[1],o,r[1]],[NaN,NaN,NaN]),this.gOpt.labels&&this.gOpt.labels.subdivision&&this.createLabel(o/this._labelsConst.multiply,n[0],o,r[1]+this._labelsConst.zDispl),o+=e;return i}createSubdivisonX(t,e,n,r){let i=new Array,o=t[0].x+e;for(;o<t[1].x;)i.push([o,n[0],r[0]],[o,n[1],r[1]],[NaN,NaN,NaN]),this.gOpt.labels.subdivision&&this.createLabel(o/this._labelsConst.multiply,o,n[0],r[1]+this._labelsConst.zDispl),o+=e;return i}createSubdivisonZ(t,e,n,r){let i=new Array,o=t[1].z-e;for(;o>t[0].z;)i.push([n[0],r[0],o],[n[1],r[1],o],[NaN,NaN,NaN]),this.gOpt.labels.subdivision&&this.createLabel((t[1].z+t[0].z-o)/this._labelsConst.multiply,n[0]-this._labelsConst.xDispl,r[0],o),o-=e;return i}getHalfDashSize(t){let e=0;return this.gOpt.subdivision&&this.gOpt.subdivision.dashLength&&t&&(e=this.gOpt.subdivision.dashLength/2),e}getDashesSubdivision(t){let e=[0,0,0];return this.gOpt.subdivision&&t&&(this.gOpt.subdivision.x&&(e[0]=this.gOpt.subdivision.x),this.gOpt.subdivision.y&&(e[1]=this.gOpt.subdivision.y),this.gOpt.subdivision.z&&(e[2]=this.gOpt.subdivision.z)),u.vec3.fromValues(e[0],e[1],e[2])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;const r=n(80);e.Scene=class{constructor(t=new Map,e=new Map,n=new Array){this.dataSourcesMap=t,this.vrViewport=new r.VRViewport,this.layers=new Map;const i=e=>({opaqueIDs:e.filter(e=>{var n;return!(null===(n=t.get(e))||void 0===n?void 0:n.transparent)}),transparentIDs:e.filter(e=>{var n;return null===(n=t.get(e))||void 0===n?void 0:n.transparent})});e.forEach((t,e)=>this.layers.set(e,i(t))),this.vrLayers=i(n)}initScene(t,e,n,r){this.dataSourcesMap.forEach((e,r)=>{const i=n.createLocalAnimator(r+"-animator");e.init(t,i),e.initGlobalUniformBlocks(t,i)}),this.layers.forEach((n,i)=>{i.init(t,e,r)})}loadScene(t,e){this.dataSourcesMap.forEach(n=>{n.loadData(t,e)})}calculateVRSceneBoundingBox(){let t=void 0;return t=this.vrLayers.opaqueIDs.concat(this.vrLayers.transparentIDs).map(t=>this.dataSourcesMap.get(t)).filter(t=>void 0!==t).map(t=>t.boudingBox).filter(t=>void 0!==t).reduce((t,e)=>t.combine(e)),t}get loadStepsCount(){return Array.from(this.dataSourcesMap.values()).reduce((t,e)=>t+e.subElementCount,0)}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Visualization=e.VisualizationOptionsType=e.VisualizationDescriptionOptionsType=e.VisualizationDescriptionInfoOptionsType=void 0;const a=o(n(12)),s=n(141),u=n(83),c=n(142),f=n(143),h=n(43),l=n(77);e.VisualizationDescriptionInfoOptionsType=a.type({descriptions:a.array(a.string),html:h.HTMLElementLeftTopPosition}),e.VisualizationDescriptionOptionsType=a.intersection([a.type({title:a.string}),a.partial({info:e.VisualizationDescriptionInfoOptionsType})]),e.VisualizationOptionsType=a.intersection([a.type({animationOptions:u.AnimationOptionsType,description:e.VisualizationDescriptionOptionsType}),a.partial({progressLoaderOptions:s.ProgressLoaderOptionsType,renderingOptions:c.RenderingOptionsType,vrOptions:c.VROptionsType})]);e.Visualization=class{constructor(t,e,n){this.scene=t;let r=document.getElementById("c");if(!r)throw new Error("Canvas element not found, visualization could not start");this.canvas=r,this.animator=new u.Animator(e.animationOptions),this.progressLoader=new s.ProgressLoader(e.progressLoaderOptions,this.scene.loadStepsCount),this.gamepads=new f.Gamepads;for(let t of this.gamepads.getControllerDataSources().entries())this.scene.dataSourcesMap.set(t[0],t[1]),this.scene.vrLayers.opaqueIDs.push(t[0]);this.renderer=new c.Renderer(this.canvas,this.scene,this.animator,e.renderingOptions,e.vrOptions,(t,e)=>this.printVRModeStatus(t,e),t=>n(Math.floor(t.currentFrame))),this.renderer.init().then(t=>{this.scene.loadScene(t,()=>{this.progressLoader.updateLoader()})}),this.gamepads.renderer=this.renderer,l.createGUI(this.renderer,this.scene,this.animator)}printVRModeStatus(t,e){const n=document.getElementById(e.VRModeInfoElementId);n&&(t?t.isPresenting?(n.innerHTML=e.VRModeOnTitle,n.classList.add("on"),n.classList.remove("off")):(n.innerHTML=e.VRModeOffTitle,n.classList.add("off"),n.classList.remove("on")):(n.innerHTML=e.VRModeUnavailableTitle,n.classList.add("unsupported")))}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Legend=e.LegendConfigurationType=void 0;const a=n(59),s=o(n(12)),u=n(43);e.LegendConfigurationType=s.intersection([s.type({html:u.HTMLElementConfigurationType,legendTitle:s.string,colorScheme:s.array(s.string),domainMin:s.number,domainMax:s.number,scaleType:s.keyof({log:null,linear:null}),orientation:s.keyof({horizontal:null,vertical:null})}),s.partial({labelType:s.string})]);e.Legend=class{constructor(t,e){this.margin={top:10,right:15,bottom:10,left:15};const n=u.createHTMLElement(t.html);e.appendChild(n);const r=n.clientWidth,i=n.clientHeight,o=r-this.margin.left-this.margin.right,s=i-this.margin.top-this.margin.bottom,c=a.select("#"+t.html.elementID).append("svg").attr("width",r).attr("height",i).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);this.createColorBar(t,c,o,s),this.addText(t,c,o,s)}createColorBar(t,e,n,r){this.createColorGradient(t,e),e.append("rect").attr("fill","url(#linear-gradient-"+t.html.elementID).attr("width","horizontal"==t.orientation?n:n/10).attr("height","horizontal"==t.orientation?r/6:r-23).attr("transform","horizontal"==t.orientation?`translate(0, ${r/5*2})`:"translate(0, 23)")}createColorGradient(t,e){const n=e.append("defs").append("linearGradient").attr("id","linear-gradient-"+t.html.elementID).attr("spreadMethod","pad");"vertical"==t.orientation&&n.attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");let r=a.scaleLinear().range(t.colorScheme);n.selectAll("stop").data(r.range()).enter().append("stop").attr("offset",(t,e)=>e/(r.range().length-1)).attr("stop-color",t=>t)}addText(t,e,n,r){let i,o;"horizontal"==t.orientation?"log"==t.scaleType?(o=a.scaleLog().range([0,n]).domain([t.domainMin,t.domainMax]),i=a.axisBottom(o).ticks(Math.floor(n/80),t.labelType)):(o=a.scaleLinear().range([0,n]).domain([t.domainMin,t.domainMax]),i=a.axisBottom(o).ticks(Math.floor(n/80),t.labelType)):"log"==t.scaleType?(o=a.scaleLog().range([r-23,0]).domain([t.domainMin,t.domainMax]),i=a.axisRight(o).ticks(Math.floor(r/40),t.labelType)):(o=a.scaleLinear().range([r-23,0]).domain([t.domainMin,t.domainMax]),i=a.axisRight(o).ticks(Math.floor(r/40),t.labelType)),e.append("g").attr("class","axis axis--x").attr("transform","horizontal"==t.orientation?`translate(0, ${r/5*3})`:`translate(${n/8}, 23)`).call(i),e.append("text").attr("dy","1em").attr("y",0-this.margin.top).attr("x","horizontal"==t.orientation?n/2:0).style("text-anchor","horizontal"==t.orientation?"middle":"left").attr("class","legend-title").text(t.legendTitle),e.selectAll(".tick").select("line").remove(),e.select("path").remove()}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.GraphSpectrum=e.GraphSpectrumConfigurationType=e.GraphSpectrumSourceOptionsType=void 0;const a=n(59),s=o(n(12)),u=n(95),c=n(43);e.GraphSpectrumSourceOptionsType=s.type({name:s.string,urlStart:s.string,urlEnd:s.string,digitCount:s.number,colorScheme:s.array(s.string)}),e.GraphSpectrumConfigurationType=s.type({html:c.HTMLElementConfigurationType,graphBase:u.GraphBaseConfigurationType,dataSources:s.array(e.GraphSpectrumSourceOptionsType),timeDomain:s.array(s.number)});const f=20,h=10,l=40,d=50;e.GraphSpectrum=class{constructor(t,e){this.animationFunc=t=>{};const n=c.createHTMLElement(t.html);e.appendChild(n);const r=n.clientWidth,i=n.clientHeight,o=r-d-h,s=i-f-l,u=a.select("#"+t.html.elementID).append("svg").attr("width",r).attr("height",i).append("g").attr("transform",`translate(${d}, ${f})`);this.createGraph(t,u,o,s)}createGraph(t,e,n,r){const[i,o]=this.createScales(n,r);let s=this.loadData(t);Promise.all(s).then(s=>{let u=[1e6,4e-12],c=[.1,4e-12];s.forEach(e=>{Object.values(e).forEach(e=>this.getDomainsMinMax(t,e,u,c))}),o.domain(c),i.domain(u),t.dataSources.forEach(t=>{this.createColorGradient(e,t.name,t.colorScheme)});const f=a.line().curve(a.curveBasis).x(e=>i(e[t.graphBase.xValueName])).y(e=>o(e[t.graphBase.yValueName])),h=new Map;s.forEach((e,n)=>{this.createLines(e,t.dataSources[n].name,f,h)}),this.addLine(h,e,0,n,r),this.addGridlines(e,n,r,i,o),this.addAxis(t,e,n,r,i,o),this.addTitle(t,e,n),this.animationFunc=t=>this.animateLines(t,e,h)})}getDomainsMinMax(t,e,n,r){e.forEach(e=>{e[t.graphBase.xValueName]<n[0]?n[0]=e[t.graphBase.xValueName]:e[t.graphBase.xValueName]>n[1]&&(n[1]=e[t.graphBase.xValueName]),e[t.graphBase.yValueName]<r[0]?e[t.graphBase.yValueName]=r[0]:e[t.graphBase.yValueName]>r[1]&&(r[1]=e[t.graphBase.yValueName])})}createLines(t,e,n,r){let i=new Array;t.forEach(t=>i.push(n(t))),r.set(""+e,i)}loadData(t){let e=new Array;return t.dataSources.forEach(n=>{let r=new Promise(e=>{let r=new Array;for(let e=t.timeDomain[0];e<t.timeDomain[1];e++)r.push(this.fetchData(`${n.urlStart}${e.toString().padStart(n.digitCount,"0")}${n.urlEnd}`));Promise.all(r).then(t=>e(t))});e.push(r)}),e}addGridlines(t,e,n,r,i){a.axisLeft(i).tickValues(i.domain().filter((t,e)=>!(e%10))).tickSize(-e),a.axisLeft(i).tickSize(-e),t.append("g").attr("class","grid grid--x").call(a.axisBottom(r).ticks(5).tickSize(n)).selectAll("text").remove(),t.append("g").attr("class","grid grid--y").call(a.axisLeft(i).ticks(5).tickSize(-e)).selectAll("text").remove(),t.selectAll(".grid").selectAll("path").remove()}addTitle(t,e,n){e.append("text").attr("y",0-f).attr("x",n/2).attr("text-anchor","middle").attr("dy","1em").attr("class","graph-title").text(t.graphBase.title)}addLine(t,e,n,r,i){e.append("clipPath").attr("id","clip-line").append("rect").attr("width",r).attr("height",i),t.forEach((t,r)=>{t[n]&&e.append("path").attr("class","line-"+r).attr("fill","none").attr("clip-path","url(#clip-line)").attr("stroke","url(#linear-gradient-"+r).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",2).attr("d",t[n])})}animateLines(t,e,n){n.forEach((n,r)=>{n[t]&&e.select(".line-"+r).attr("d",n[t])})}fetchData(t){return new Promise(e=>{fetch(t).then(t=>e(t.json()))})}createScales(t,e){const n=a.scaleLog().range([e,0]);return[a.scaleLinear().range([0,t]),n]}addAxis(t,e,n,r,i,o){const s=a.axisBottom(i).ticks(Math.floor(n/60)),u=a.axisLeft(o).ticks(Math.floor(r/30),".0e");e.append("g").attr("class","axis axis--x").attr("transform",`translate(0, ${r})`).call(s).append("text").attr("class","axis axis-text").attr("y",30).attr("x",n/2).attr("dy","0.71em").attr("dx","0.71em").attr("text-anchor","middle").text(t.graphBase.xAxisLabel),e.append("g").attr("class","axis axis--y").call(u).append("text").attr("class","axis axis-text").attr("transform","rotate(-90)").attr("y",20).attr("x",0-r/2).attr("dy","0.71em").attr("dx","0.71em").attr("text-anchor","middle").text(t.graphBase.yAxisLabel)}createColorGradient(t,e,n){let r=t.append("defs").append("linearGradient").attr("id","linear-gradient-"+e).attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%").attr("spreadMethod","pad"),i=a.scaleLog().range(n);r.selectAll("stop").data(i.range()).enter().append("stop").attr("offset",(t,e)=>e/(i.range().length-1)).attr("stop-color",t=>t)}animationFunction(){return this.animationFunc}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.GraphBaseConfigurationType=void 0;const a=o(n(12));e.GraphBaseConfigurationType=a.type({title:a.string,xValueName:a.string,yValueName:a.string,xAxisLabel:a.string,yAxisLabel:a.string})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(156);Object.defineProperty(e,"Graph",{enumerable:!0,get:function(){return r.Graph}}),Object.defineProperty(e,"GraphConfigurationType",{enumerable:!0,get:function(){return r.GraphConfigurationType}});var i=n(94);Object.defineProperty(e,"GraphSpectrum",{enumerable:!0,get:function(){return i.GraphSpectrum}}),Object.defineProperty(e,"GraphSpectrumConfigurationType",{enumerable:!0,get:function(){return i.GraphSpectrumConfigurationType}}),Object.defineProperty(e,"GraphSpectrumSourceOptionsType",{enumerable:!0,get:function(){return i.GraphSpectrumSourceOptionsType}});var o=n(93);Object.defineProperty(e,"Legend",{enumerable:!0,get:function(){return o.Legend}}),Object.defineProperty(e,"LegendConfigurationType",{enumerable:!0,get:function(){return o.LegendConfigurationType}})},function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",(function(){return r.a})),n.d(e,"ConnectableObservable",(function(){return i.a})),n.d(e,"GroupedObservable",(function(){return o.a})),n.d(e,"observable",(function(){return a.a})),n.d(e,"Subject",(function(){return s.a})),n.d(e,"BehaviorSubject",(function(){return u.a})),n.d(e,"ReplaySubject",(function(){return c.a})),n.d(e,"AsyncSubject",(function(){return f.a})),n.d(e,"asapScheduler",(function(){return h.a})),n.d(e,"asyncScheduler",(function(){return l.a})),n.d(e,"queueScheduler",(function(){return d.a})),n.d(e,"animationFrameScheduler",(function(){return v})),n.d(e,"VirtualTimeScheduler",(function(){return x})),n.d(e,"VirtualAction",(function(){return b})),n.d(e,"Scheduler",(function(){return _.a})),n.d(e,"Subscription",(function(){return w.a})),n.d(e,"Subscriber",(function(){return M.a})),n.d(e,"Notification",(function(){return T.a})),n.d(e,"NotificationKind",(function(){return T.b})),n.d(e,"pipe",(function(){return A.a})),n.d(e,"noop",(function(){return S.a})),n.d(e,"identity",(function(){return O.a})),n.d(e,"isObservable",(function(){return E})),n.d(e,"ArgumentOutOfRangeError",(function(){return k.a})),n.d(e,"EmptyError",(function(){return C.a})),n.d(e,"ObjectUnsubscribedError",(function(){return P.a})),n.d(e,"UnsubscriptionError",(function(){return I.a})),n.d(e,"TimeoutError",(function(){return R.a})),n.d(e,"bindCallback",(function(){return j})),n.d(e,"bindNodeCallback",(function(){return V})),n.d(e,"combineLatest",(function(){return H.b})),n.d(e,"concat",(function(){return W.a})),n.d(e,"defer",(function(){return Y.a})),n.d(e,"empty",(function(){return K.b})),n.d(e,"forkJoin",(function(){return Z})),n.d(e,"from",(function(){return $.a})),n.d(e,"fromEvent",(function(){return tt})),n.d(e,"fromEventPattern",(function(){return et})),n.d(e,"generate",(function(){return nt})),n.d(e,"iif",(function(){return it})),n.d(e,"interval",(function(){return at})),n.d(e,"merge",(function(){return ut.a})),n.d(e,"never",(function(){return ft})),n.d(e,"of",(function(){return ht.a})),n.d(e,"onErrorResumeNext",(function(){return lt})),n.d(e,"pairs",(function(){return dt})),n.d(e,"partition",(function(){return vt})),n.d(e,"race",(function(){return xt.a})),n.d(e,"range",(function(){return bt})),n.d(e,"throwError",(function(){return wt.a})),n.d(e,"timer",(function(){return Mt.a})),n.d(e,"using",(function(){return Tt})),n.d(e,"zip",(function(){return At.b})),n.d(e,"scheduled",(function(){return St.a})),n.d(e,"EMPTY",(function(){return K.a})),n.d(e,"NEVER",(function(){return ct})),n.d(e,"config",(function(){return Ot.a}));var r=n(2),i=n(60),o=n(58),a=n(22),s=n(6),u=n(61),c=n(45),f=n(31),h=n(54),l=n(8),d=n(69),p=n(0),m=n(32),y=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return p.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(m.a),g=n(30),v=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(g.a))(y),x=function(t){function e(e,n){void 0===e&&(e=b),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return p.a(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(g.a),b=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return p.a(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(m.a),_=n(56),w=n(5),M=n(1),T=n(18),A=n(39),S=n(21),O=n(16);function E(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var k=n(26),C=n(28),P=n(23),I=n(41),R=n(63),D=n(9),N=n(52),B=n(7),L=n(10);function j(t,e,n){if(e){if(!Object(L.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return j(t,n).apply(void 0,r).pipe(Object(D.a)((function(t){return Object(B.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o,a=this,s={context:a,subject:o,callbackFunc:t,scheduler:n};return new r.a((function(r){if(n){var i={args:e,subscriber:r,params:s};return n.schedule(F,0,i)}if(!o){o=new f.a;try{t.apply(a,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(t){Object(N.a)(o)?o.error(t):console.warn(t)}}return o.subscribe(r)}))}}function F(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,a=i.context,s=i.scheduler,u=i.subject;if(!u){u=i.subject=new f.a;try{o.apply(a,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(s.schedule(z,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function z(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function V(t,e,n){if(e){if(!Object(L.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return V(t,n).apply(void 0,r).pipe(Object(D.a)((function(t){return Object(B.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a((function(r){var i=o.context,a=o.subject;if(n)return n.schedule(U,0,{params:o,subscriber:r,context:i});if(!a){a=o.subject=new f.a;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?a.error(n):(a.next(t.length<=1?t[0]:t),a.complete())}]))}catch(t){Object(N.a)(a)?a.error(t):console.warn(t)}}return a.subscribe(r)}))}}function U(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,a=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new f.a;try{o.apply(i,a.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(s.schedule(q,0,{err:r,subject:u}));else{var i=t.length<=1?t[0]:t;e.add(s.schedule(G,0,{value:i,subject:u}))}}]))}catch(t){this.add(s.schedule(q,0,{err:t,subject:u}))}}this.add(u.subscribe(r))}function G(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function q(t){var e=t.err;t.subject.error(e)}var H=n(47),W=n(34),Y=n(49),K=n(11),X=n(51),$=n(13);function Z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(Object(B.a)(n))return J(n,null);if(Object(X.a)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return J(r.map((function(t){return n[t]})),r)}}if("function"==typeof t[t.length-1]){var i=t.pop();return J(t=1===t.length&&Object(B.a)(t[0])?t[0]:t,null).pipe(Object(D.a)((function(t){return i.apply(void 0,t)})))}return J(t,null)}function J(t,e){return new r.a((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=Object($.a)(t[s]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(a===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var Q=n(27);function tt(t,e,n,i){return Object(Q.a)(n)&&(i=n,n=void 0),i?tt(t,e,n).pipe(Object(D.a)((function(t){return Object(B.a)(t)?i.apply(void 0,t):i(t)}))):new r.a((function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var f=0,h=e.length;f<h;f++)t(e[f],n,r,i,o)}i.add(a)}(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function et(t,e,n){return n?et(t,e).pipe(Object(D.a)((function(t){return Object(B.a)(t)?n.apply(void 0,t):n(t)}))):new r.a((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(Q.a)(e))return function(){return e(i,r)}}))}function nt(t,e,n,i,o){var a,s;if(1==arguments.length){var u=t;s=u.initialState,e=u.condition,n=u.iterate,a=u.resultSelector||O.a,o=u.scheduler}else void 0===i||Object(L.a)(i)?(s=t,a=O.a,o=i):(s=t,a=i);return new r.a((function(t){var r=s;if(o)return o.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:a,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(e){return void t.error(e)}if(!i){t.complete();break}}var u=void 0;try{u=a(r)}catch(e){return void t.error(e)}if(t.next(u),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}}))}function rt(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function it(t,e,n){return void 0===e&&(e=K.a),void 0===n&&(n=K.a),Object(Y.a)((function(){return t()?e:n}))}var ot=n(33);function at(t,e){return void 0===t&&(t=0),void 0===e&&(e=l.a),(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=l.a),new r.a((function(n){return n.add(e.schedule(st,t,{subscriber:n,counter:0,period:t})),n}))}function st(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var ut=n(65),ct=new r.a(S.a);function ft(){return ct}var ht=n(37);function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return K.a;var n=t[0],i=t.slice(1);return 1===t.length&&Object(B.a)(n)?lt.apply(void 0,n):new r.a((function(t){var e=function(){return t.add(lt.apply(void 0,i).subscribe(t))};return Object($.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function dt(t,e){return e?new r.a((function(n){var r=Object.keys(t),i=new w.a;return i.add(e.schedule(pt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i})):new r.a((function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()}))}function pt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var mt=n(74),yt=n(42),gt=n(17);function vt(t,e,n){return[Object(gt.a)(e,n)(new r.a(Object(yt.a)(t))),Object(gt.a)(Object(mt.a)(e,n))(new r.a(Object(yt.a)(t)))]}var xt=n(66);function bt(t,e,n){return void 0===t&&(t=0),new r.a((function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(_t,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))}function _t(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var wt=n(46),Mt=n(67);function Tt(t,e){return new r.a((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Object($.a)(i):K.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var At=n(50),St=n(68),Ot=n(15)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(99).VisualizationConfigurator.fromJSONConfiguration(JSON.stringify({dataSources:{volumetricDataSource:{id:"volume-0",displayName:"volume",shaderAnimated:!1,subElementCount:248,pathOptions:{url:"data/volume/res_low_",volumeUrl:".dat",digitCount:4},dataOptions:{textureDimensions:[320,240,240],volumeWorldDimensions:[160,120,120],volumeWorldCenterPosition:[80,0,0],packedVolumes:[{displayName:"electron density",colorMap:{url:"data/colormaps/reds.png",name:"Reds"}},{displayName:"laser intensity",colorMap:{url:"data/colormaps/blue_white.png",name:"Blues"}}]}},pointsDataSources:[{id:"points-2",displayName:"electrons",shaderAnimated:!0,enableAlphaBlending:!1,subElementCount:248,pointSize:.1,options:{url:"data/particle/elns_frac_",colorUrl:"-color.dat",positionUrl:"-coordinates.dat",digitCount:4},boundingBox:{min:[0,0,0],max:[0,0,0]},polygonOffset:[-1,-1]}],gridDataSources:[{id:"grid-0",displayName:"grid",gridOptions:{bbox:[[0,-60,-60],[160,60,60]],primaryColor:[0,.5176470588,.5254901961],secondaryColor:[0,.2039215686,.2117647059],labels:{multiplyConst:1,subdivision:!0,xName:"x",yName:"z",zName:"y",range:!0},subdivision:{x:20,y:20,z:20,dashLength:2},faces:["xz_bottom","xy_back"]},fontOptions:{align:"left",family:"opensans",weight:"none",size:2,position:[0,0,0],letterSpacing:1,color:[.5,.5,.5],layoutAlign:{x:"center",y:"center"}}}]},viewports:[{options:{id:"viewport-0",name:"viewport 0",main:!0,leftBottom:[0,0],dimension:[.8,1],cameraPosition:[360,120,120],cameraTarget:[80,0,0],cameraUpVector:[0,1,0],cameraType:"controllable"},layers:["volume-0","points-2","grid-0"]},{options:{id:"viewport-2",name:"SIDE VIEW",main:!1,leftBottom:[.81,.3],dimension:[.18,.3],cameraPosition:[80,0,200],cameraTarget:[80,0,0],cameraUpVector:[0,1,0],cameraType:"static"},layers:["volume-0","points-2","grid-0"]}],vrLayers:["volume-0","points-2","grid-0"],visualizationOptions:{animationOptions:{minTime:0,maxTime:247,animationCrossfade:!0,animationEcho:4},description:{title:"Electromagnetic-electron rings",info:{descriptions:["P. Valenta, G. M. Grittani, C. M. Lazzarini, O. Klimo, and S. V. Bulanov, Physics of Plasmas 28, 122104 (2021).","The simulation investigates evolution of radial profile of high-power laser pulse in low-density plasma, which is relevant to the laser-driven acceleration of charged particles, developing hard electromagnetic radiation, and other applications. It reveals the mechanisms of coupled electromagnetic and electron rings formation during the interaction and helps to understand how these structures can be controlled. The findings can be used, e.g., for development of a new diagnostic for determining laser-plasma interaction regimes. The simulation was calculated by the 3D particle-in-cell code EPOCH and it took 200,000 CPU hours on supercomputer, producing 2 TB of data."],html:{width:17,top:2,left:81}}},renderingOptions:{zNear:.1,zFar:15e3,fps:50,clearColor:[0,0,0],rewindSpeed:.25}},graphicalElements:{static:{legends:[{legendTitle:"",colorScheme:["#000004","#51127c","#b73779","#fc8961","#fcfdbf"],domainMin:50,domainMax:500,scaleType:"linear",orientation:"horizontal",html:{elementID:"legend-electron-energy",width:10,height:6,left:20,bottom:2}},{legendTitle:"n / n",colorScheme:["#67000d","#cb181d","#fb6a4a","#fcbba1","#fff5f0"],domainMin:0,domainMax:.06,scaleType:"linear",orientation:"horizontal",html:{elementID:"legend-electron-density",width:10,height:6,left:40,bottom:2}},{legendTitle:"(E / E)",colorScheme:["#000041","#000687","#005ace","#31aeff","#ffffff"],domainMin:0,domainMax:.03,scaleType:"linear",orientation:"horizontal",html:{elementID:"legend-laser-intensity",width:10,height:6,left:60,bottom:2}}]},dynamic:{spectrumGraphs:[{graphBase:{title:"Electron energy spectrum",xAxisLabel:" (MeV)",yAxisLabel:"dQ / d (pC / MeV)",xValueName:"interval",yValueName:"count"},timeDomain:[0,247],dataSources:[{name:"electron-energy-spectrum",urlStart:"data/graph/elns_frac_",urlEnd:"-spectrum.dat",colorScheme:["#5fb6d8","#5fb6d8","#3f92b3","#1e7090","#004f6d"],digitCount:4}],html:{elementID:"graph-0",width:19.25,height:25,left:80.25,bottom:2}}]}}}))},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(75),e),i(n(101),e),i(n(96),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.referenceId=e.Hash=e.UniqueObjectFactory=e.equals=void 0,e.equals=function(t,e){return t===e||!(!t||!e)&&(Object.getPrototypeOf(t)===Object.getPrototypeOf(e)&&t.equals(e))};e.UniqueObjectFactory=class{constructor(){this._cache=new Map}create(t){const e=t.hash(),n=this._cache.get(e);if(n){for(var r=0;r<n.length;r++)if(n[r].equals(t))return n[r];n.push(t)}else this._cache.set(e,[t]);return t}};class r{static intArrayHash(t){for(var e=1,n=0;n<t.length;n++)e=31*e+t[n];return e}static floatArrayHash(t){const e=new Uint32Array(t.buffer);return r.intArrayHash(e)}static hashString(t){var e,n,r=2166136261;for(e=0,n=t.length;e<n;e++)r^=t.charCodeAt(e),r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24);return r>>>0}static arrayHash(t){for(var e=1,n=0;n<t.length;n++)if(e*=31,Number.isInteger(t[n]))e+=t[n];else if(t[n]instanceof Float32Array||t[n]instanceof Float64Array)e+=r.floatArrayHash(t[n]);else if(t[n]instanceof Uint16Array||t[n]instanceof Uint32Array||t[n]instanceof Int16Array||t[n]instanceof Int32Array||t[n]instanceof Array)e+=r.intArrayHash(t[n]);else if("function"==typeof t[n].hash)e+=t[n].hash();else{if("string"!=typeof t[n])throw"Could not hash "+t[n];e+=r.hashString(t[n])}return e}}e.Hash=r;let i=0;e.referenceId=function(t){return t.hasOwnProperty("__uid")||(t.__uid=++i),t.__uid}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(83);Object.defineProperty(e,"Animator",{enumerable:!0,get:function(){return r.Animator}}),Object.defineProperty(e,"DataSourceAnimator",{enumerable:!0,get:function(){return r.DataSourceAnimator}});var i=n(38);Object.defineProperty(e,"DataSource",{enumerable:!0,get:function(){return i.DataSource}});var o=n(84);Object.defineProperty(e,"PointsDataSource",{enumerable:!0,get:function(){return o.PointsDataSource}});var a=n(86);Object.defineProperty(e,"TexturesDataSource",{enumerable:!0,get:function(){return a.TexturesDataSource}});var s=n(88);Object.defineProperty(e,"LinesDataSource",{enumerable:!0,get:function(){return s.LinesDataSource}});var u=n(78);Object.defineProperty(e,"MeshDataSource",{enumerable:!0,get:function(){return u.MeshDataSource}});var c=n(90);Object.defineProperty(e,"GridHelper",{enumerable:!0,get:function(){return c.GridHelper}});var f=n(91);Object.defineProperty(e,"Scene",{enumerable:!0,get:function(){return f.Scene}});var h=n(80);Object.defineProperty(e,"Viewport",{enumerable:!0,get:function(){return h.Viewport}});var l=n(92);Object.defineProperty(e,"Visualization",{enumerable:!0,get:function(){return l.Visualization}});var d=n(79);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return d.Text}});var p=n(154);Object.defineProperty(e,"VisualizationConfigurator",{enumerable:!0,get:function(){return p.VisualizationConfigurator}})},function(t,e,n){"use strict";function r(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var f=t.hex.toString(16);f.length<6;)f="0"+f;return"#"+f}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+a+"}":"unknown format"}n.r(e),n.d(e,"color",(function(){return ct})),n.d(e,"controllers",(function(){return ft})),n.d(e,"dom",(function(){return ht})),n.d(e,"gui",(function(){return lt})),n.d(e,"GUI",(function(){return dt}));var i=Array.prototype.forEach,o=Array.prototype.slice,a={BREAK:{},extend:function(t){return this.each(o.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(o.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=o.call(arguments);return function(){for(var e=o.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(i&&t.forEach&&t.forEach===i)t.forEach(e,n);else if(t.length===t.length+0){var r,o=void 0;for(o=0,r=t.length;o<r;o++)if(o in t&&e.call(n,t[o],o)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||t.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():o.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:r},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:r},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:r}}},{litmus:a.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b)&&a.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v)&&a.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],u=void 0,c=void 0,f=function(){c=!1;var t=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(s,(function(e){if(e.litmus(t))return a.each(e.conversions,(function(e,n){if(u=e.read(t),!1===c&&!1!==u)return c=u,u.conversionName=n,u.conversion=e,a.BREAK})),a.BREAK})),c},h=void 0,l={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(h=8*e)|t&~(255<<h)}},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},g=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},v=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},x=function(){function t(){if(p(this,t),this.__state=f.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(t,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function b(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||x.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(x.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function _(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||x.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(x.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}x.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=l.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");a.extend(t.__state,l.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},x.recalculateHSV=function(t){var e=l.rgb_to_hsv(t.r,t.g,t.b);a.extend(t.__state,{s:e.s,v:e.v}),a.isNaN(e.h)?a.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},x.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(x.prototype,"r",2),b(x.prototype,"g",1),b(x.prototype,"b",0),_(x.prototype,"h"),_(x.prototype,"s"),_(x.prototype,"v"),Object.defineProperty(x.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(x.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=l.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var w=function(){function t(e,n){p(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),M={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){a.each(t,(function(t){M[t]=e}))}));var T=/(\d+(\.\d+)?)px/;function A(t){if("0"===t||a.isUndefined(t))return 0;var e=t.match(T);return a.isNull(e)?0:parseFloat(e[1])}var S={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;a.isUndefined(i)&&(i=!0),a.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=M[e];if(!o)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,c=i.y||i.clientY||0;s.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var f=s.initKeyboardEvent||s.initKeyEvent;a.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),f(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(e,i.bubbles||!1,i.cancelable||!0)}a.defaults(s,r),t.dispatchEvent(s)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),S},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),S},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return S},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return S},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return A(e["border-left-width"])+A(e["border-right-width"])+A(e["padding-left"])+A(e["padding-right"])+A(e.width)},getHeight:function(t){var e=getComputedStyle(t);return A(e["border-top-width"])+A(e["border-bottom-width"])+A(e["padding-top"])+A(e["padding-bottom"])+A(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},O=function(t){function e(t,n){p(this,e);var r=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),S.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return g(e,t),m(e,[{key:"setValue",value:function(t){var n=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w),E=function(t){function e(t,n,r){p(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,s=i;if(i.__select=document.createElement("select"),a.isArray(o)){var u={};a.each(o,(function(t){u[t]=t})),o=u}return a.each(o,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),i.updateDisplay(),S.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),i.domElement.appendChild(i.__select),i}return g(e,t),m(e,[{key:"setValue",value:function(t){var n=y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return S.isActive(this.__select)?this:(this.__select.value=this.getValue(),y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(w),k=function(t){function e(t,n){p(this,e);var r=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),S.bind(r.__input,"keyup",o),S.bind(r.__input,"change",o),S.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),S.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return g(e,t),m(e,[{key:"updateDisplay",value:function(){return S.isActive(this.__input)||(this.__input.value=this.getValue()),y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(w);function C(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var P=function(t){function e(t,n,r){p(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,a.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=C(i.__impliedStep),i}return g(e,t),m(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=C(t),this}}]),e}(w);var I=function(t){function e(t,n,r){p(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,s=void 0;function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(t){var e=s-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),s=t.clientY}function f(){S.unbind(window,"mousemove",c),S.unbind(window,"mouseup",f),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),S.bind(i.__input,"change",(function(){var t=parseFloat(o.__input.value);a.isNaN(t)||o.setValue(t)})),S.bind(i.__input,"blur",(function(){u()})),S.bind(i.__input,"mousedown",(function(t){S.bind(window,"mousemove",c),S.bind(window,"mouseup",f),s=t.clientY})),S.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,u())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return g(e,t),m(e,[{key:"updateDisplay",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(P);function R(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var D=function(t){function e(t,n,r,i,o){p(this,e);var a=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),s=a;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(R(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function c(){S.unbind(window,"mousemove",u),S.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function f(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(R(e,n.left,n.right,s.__min,s.__max))}function h(){S.unbind(window,"touchmove",f),S.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),S.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),S.bind(window,"mousemove",u),S.bind(window,"mouseup",c),u(t)})),S.bind(a.__background,"touchstart",(function(t){if(1!==t.touches.length)return;S.bind(window,"touchmove",f),S.bind(window,"touchend",h),f(t)})),S.addClass(a.__background,"slider"),S.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return g(e,t),m(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(P),N=function(t){function e(t,n,r){p(this,e);var i=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,S.bind(i.__button,"click",(function(t){return t.preventDefault(),o.fire(),!1})),S.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return g(e,t),m(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(w),B=function(t){function e(t,n){p(this,e);var r=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new x(r.getValue()),r.__temp=new x(0);var i=r;r.domElement=document.createElement("div"),S.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",S.bind(r.__input,"keydown",(function(t){13===t.keyCode&&d.call(this)})),S.bind(r.__input,"blur",d),S.bind(r.__selector,"mousedown",(function(){S.addClass(this,"drag").bind(window,"mouseup",(function(){S.removeClass(i.__selector,"drag")}))})),S.bind(r.__selector,"touchstart",(function(){S.addClass(this,"drag").bind(window,"touchend",(function(){S.removeClass(i.__selector,"drag")}))}));var o,s=document.createElement("div");function u(t){y(t),S.bind(window,"mousemove",y),S.bind(window,"touchmove",y),S.bind(window,"mouseup",h),S.bind(window,"touchend",h)}function c(t){g(t),S.bind(window,"mousemove",g),S.bind(window,"touchmove",g),S.bind(window,"mouseup",l),S.bind(window,"touchend",l)}function h(){S.unbind(window,"mousemove",y),S.unbind(window,"touchmove",y),S.unbind(window,"mouseup",h),S.unbind(window,"touchend",h),m()}function l(){S.unbind(window,"mousemove",g),S.unbind(window,"touchmove",g),S.unbind(window,"mouseup",l),S.unbind(window,"touchend",l),m()}function d(){var t=f(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function m(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function y(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,a=(r-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function g(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return a.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(s.style,{width:"100%",height:"100%",background:"none"}),j(s,"top","rgba(0,0,0,0)","#000"),a.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),S.bind(r.__saturation_field,"mousedown",u),S.bind(r.__saturation_field,"touchstart",u),S.bind(r.__field_knob,"mousedown",u),S.bind(r.__field_knob,"touchstart",u),S.bind(r.__hue_field,"mousedown",c),S.bind(r.__hue_field,"touchstart",c),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return g(e,t),m(e,[{key:"updateDisplay",value:function(){var t=f(this.getValue());if(!1!==t){var e=!1;a.each(x.COMPONENTS,(function(n){if(!a.isUndefined(t[n])&&!a.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&a.extend(this.__color.__state,t)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,j(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(w),L=["-moz-","-o-","-webkit-","-ms-",""];function j(t,e,n,r){t.style.background="",a.each(L,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var F=function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}},z='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',V=function(t,e){var n=t[e];return a.isArray(arguments[2])||a.isObject(arguments[2])?new E(t,e,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new D(t,e,arguments[2],arguments[3],arguments[4]):new D(t,e,arguments[2],arguments[3]):a.isNumber(arguments[4])?new I(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new I(t,e,{min:arguments[2],max:arguments[3]}):a.isString(n)?new k(t,e):a.isFunction(n)?new N(t,e,""):a.isBoolean(n)?new O(t,e):null};var U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},G=function(){function t(){p(this,t),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),S.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;S.bind(this.backgroundElement,"click",(function(){e.hide()}))}return m(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",S.unbind(t.domElement,"webkitTransitionEnd",e),S.unbind(t.domElement,"transitionend",e),S.unbind(t.domElement,"oTransitionEnd",e)};S.bind(this.domElement,"webkitTransitionEnd",e),S.bind(this.domElement,"transitionend",e),S.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-S.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-S.getHeight(this.domElement)/2+"px"}}]),t}();F(function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var q=function(){try{return!!window.localStorage}catch(t){return!1}}(),H=void 0,W=!0,Y=void 0,K=!1,X=[],$=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),S.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=a.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=a.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),a.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),a.isUndefined(r.parent)&&r.hideable&&X.push(this),r.resizable=a.isUndefined(r.parent)&&r.resizable,r.autoPlace&&a.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=q&&"true"===localStorage.getItem(nt(this,"isLocal")),s=void 0,u=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,st(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,u&&(u.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?S.addClass(n.__ul,t.CLASS_CLOSED):S.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(t){q&&(o=t,t?S.bind(window,"unload",s):S.unbind(window,"unload",s),localStorage.setItem(nt(n,"isLocal"),t))}}}),a.isUndefined(r.parent)){if(this.closed=r.closed||!1,S.addClass(this.domElement,t.CLASS_MAIN),S.makeSelectable(this.domElement,!1),q&&o){n.useLocalStorage=!0;var c=localStorage.getItem(nt(this,"gui"));c&&(r.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,S.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(S.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(S.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),S.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var f=document.createTextNode(r.name);S.addClass(f,"controller-name"),u=Z(n,f);S.addClass(this.__ul,t.CLASS_CLOSED),S.addClass(u,"title"),S.bind(u,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(a.isUndefined(r.parent)&&(W&&(Y=document.createElement("div"),S.addClass(Y,"dg"),S.addClass(Y,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),W=!1),Y.appendChild(this.domElement),S.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||st(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},S.bind(window,"resize",this.__resizeHandler),S.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),S.bind(this.__ul,"transitionend",this.__resizeHandler),S.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&at(this),s=function(){q&&"true"===localStorage.getItem(nt(n,"isLocal"))&&localStorage.setItem(nt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,r.parent||((i=n.getRoot()).width+=1,a.defer((function(){i.width-=1})))};function Z(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function J(t){S.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&S.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function Q(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function tt(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function et(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new B(e,n);else{var o=[e,n].concat(r.factoryArgs);i=V.apply(t,o)}r.before instanceof w&&(r.before=r.before.__li),tt(t,i),S.addClass(i.domElement,"c");var s=document.createElement("span");S.addClass(s,"property-name"),s.innerHTML=i.property;var u=document.createElement("div");u.appendChild(s),u.appendChild(i.domElement);var c=Z(t,u,r.before);return S.addClass(c,$.CLASS_CONTROLLER_ROW),i instanceof B?S.addClass(c,"color"):S.addClass(c,d(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,a.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:r,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(e)||a.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),et(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof D){var r=new I(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),S.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof I){var i=function(e){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=et(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=a.compose(i,n.min),n.max=a.compose(i,n.max)}else n instanceof O?(S.bind(e,"click",(function(){S.fakeEvent(n.__checkbox,"click")})),S.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof N?(S.bind(e,"click",(function(){S.fakeEvent(n.__button,"click")})),S.bind(e,"mouseover",(function(){S.addClass(n.__button,"hover")})),S.bind(e,"mouseout",(function(){S.removeClass(n.__button,"hover")}))):n instanceof B&&(S.addClass(e,"color"),n.updateDisplay=a.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=a.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&Q(t.getRoot(),!0),e}),n.setValue)}(t,c,i),t.__controllers.push(i),i}function nt(t,e){return document.location.href+"."+e}function rt(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function it(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ot(t){var e=t.__save_row=document.createElement("li");S.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),S.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",S.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",S.addClass(r,"button"),S.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",S.addClass(i,"button"),S.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",S.addClass(o,"button"),S.addClass(o,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?a.each(t.load.remembered,(function(e,n){rt(t,n,n===t.preset)})):rt(t,"Default",!1),S.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),q){var u=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(nt(0,"isLocal"))&&c.setAttribute("checked","checked"),it(t,u),S.bind(c,"change",(function(){t.useLocalStorage=!t.useLocalStorage,it(t,u)}))}var f=document.getElementById("dg-new-constructor");S.bind(f,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||H.hide()})),S.bind(n,"click",(function(){f.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),H.show(),f.focus(),f.select()})),S.bind(r,"click",(function(){t.save()})),S.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),S.bind(o,"click",(function(){t.revert()}))}function at(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){S.removeClass(t.__closeButton,$.CLASS_DRAG),S.unbind(window,"mousemove",n),S.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,S.addClass(t.__closeButton,$.CLASS_DRAG),S.bind(window,"mousemove",n),S.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),a.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),S.bind(t.__resize_handle,"mousedown",i),S.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function st(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function ut(t,e){var n={};return a.each(t.__rememberedObjects,(function(r,i){var o={},s=t.__rememberedObjectIndecesToControllers[i];a.each(s,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[i]=o})),n}$.toggleHide=function(){K=!K,a.each(X,(function(t){t.domElement.style.display=K?"none":""}))},$.CLASS_AUTO_PLACE="a",$.CLASS_AUTO_PLACE_CONTAINER="ac",$.CLASS_MAIN="main",$.CLASS_CONTROLLER_ROW="cr",$.CLASS_TOO_TALL="taller-than-window",$.CLASS_CLOSED="closed",$.CLASS_CLOSE_BUTTON="close-button",$.CLASS_CLOSE_TOP="close-top",$.CLASS_CLOSE_BOTTOM="close-bottom",$.CLASS_DRAG="drag",$.DEFAULT_WIDTH=245,$.TEXT_CLOSED="Close Controls",$.TEXT_OPEN="Open Controls",$._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||$.toggleHide()},S.bind(window,"keydown",$._keydownHandler,!1),a.extend($.prototype,{add:function(t,e){return et(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return et(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;a.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var t=this;a.each(this.__folders,(function(e){t.removeFolder(e)})),S.unbind(window,"keydown",$._keydownHandler,!1),J(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new $(e);this.__folders[t]=n;var r=Z(this,n.domElement);return S.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],J(t);var e=this;a.each(t.__folders,(function(e){t.removeFolder(e)})),a.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=S.getOffset(t.__ul).top,n=0;a.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=S.getHeight(e))})),window.innerHeight-e-20<n?(S.addClass(t.domElement,$.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(S.removeClass(t.domElement,$.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&a.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(H)&&((H=new G).domElement.innerHTML=z),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;a.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&ot(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&st(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ut(this)),t.folders={},a.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ut(this),Q(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=ut(this,!0)),this.load.remembered[t]=ut(this),this.preset=t,rt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){a.each(this.__controllers,(function(e){this.getRoot().load.remembered?tt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),a.each(this.__folders,(function(t){t.revert(t)})),t||Q(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&U.call(window,(function(){t(e)}));a.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(t){t.updateDisplay()})),a.each(this.__folders,(function(t){t.updateDisplay()}))}});var ct={Color:x,math:l,interpret:f},ft={Controller:w,BooleanController:O,OptionController:E,StringController:k,NumberController:P,NumberControllerBox:I,NumberControllerSlider:D,FunctionController:N,ColorController:B},ht={dom:S},lt={GUI:$},dt=$,pt={color:ct,controllers:ft,dom:ht,gui:lt,GUI:dt};e.default=pt},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform Particle {\n    float u_size;\n    float u_frameTime;\n};\n\nuniform float u_lastFrame;\nuniform float u_firstFrame;\nuniform float u_echo;\n\nin vec4 position;\n\nin vec2 texcoord;\nin vec3 particlePosition;\nin vec4 particleColor;\n\nout vec4 v_color;\nout vec2 v_textureCoor;\n\nvoid main() {\n    vec3 cameraRight = vec3(u_view[0].x, u_view[1].x, u_view[2].x);\n    vec3 cameraUp = vec3(u_view[0].y, u_view[1].y, u_view[2].y);\n\n    // based on http://www.opengl-tutorial.org/intermediate-tutorials/billboards-particles/billboards/\n    vec4 billboardPosition = vec4(particlePosition, 1.0);\n    billboardPosition.xyz += (cameraRight * -u_size * particleColor.w * position.x) + (cameraUp * u_size * particleColor.w * position.y);\n    \n    gl_Position = u_projection * u_view * u_globalVRTransform * billboardPosition;\n\n    float alpha;\n    if (u_frameTime <= u_firstFrame && u_frameTime >= u_lastFrame) {\n        alpha = (u_frameTime - u_lastFrame) / u_echo;\n    }\n    else {\n        if (u_frameTime < u_firstFrame) {\n            alpha = (u_frameTime  - (u_firstFrame - u_echo)) / u_echo;\n        }\n        else {\n            alpha = (u_frameTime - u_lastFrame) / u_echo;\n        }\n    }\n    v_color = vec4(particleColor.rgb, alpha);    \n    v_textureCoor = texcoord;\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform Particle {\n    float u_size;\n    float u_frameTime;\n};\n\nin vec4 position;\n\nin vec2 texcoord;\nin vec3 particlePosition;\nin vec4 particleColor;\n\nout vec4 v_color;\nout vec2 v_textureCoor;\n\nvoid main() {\n    vec3 cameraRight = vec3(u_view[0].x, u_view[1].x, u_view[2].x);\n    vec3 cameraUp = vec3(u_view[0].y, u_view[1].y, u_view[2].y);\n\n    // based on http://www.opengl-tutorial.org/intermediate-tutorials/billboards-particles/billboards/\n    vec4 billboardPosition = vec4(particlePosition, 1.0);\n    billboardPosition.xyz += (cameraRight * -u_size * particleColor.w * position.x) + (cameraUp * u_size * particleColor.w * position.y);\n    \n    gl_Position = u_projection * u_view * u_globalVRTransform * billboardPosition;\n    v_color = vec4(particleColor.rgb, 1.0);\n    v_textureCoor = texcoord;\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tailRec=void 0,e.tailRec=function(t,e){for(var n=e(t);"Left"===n._tag;)n=e(n.left);return n.right}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\nuniform sampler2D u_diffuse;\nuniform mat4 u_rotateMatrix;\nuniform vec3 u_translation;\nuniform float u_displacementMin;\nuniform float u_displacementMax;\nuniform float u_verticalShift;\n\nin vec4 position;\nin vec2 texcoord;\n\nout vec2 v_texCoord;\n\nvoid main() {\n    vec4 textureColor = texture(u_diffuse, texcoord);\n\n    // u_displacementMin and u_displacementMax are relative to u_verticalShift\n    // displacement values set only the height (size) of displacement\n    float displacement = u_translation.y + u_verticalShift + textureColor.a * (u_displacementMax - u_displacementMin) + u_displacementMin;\n\n    vec4 transformedPosition = u_rotateMatrix * (position + vec4(u_translation.x, displacement, u_translation.z , 0.0));    \n    \n    gl_Position = u_projection * u_view * u_globalVRTransform * transformedPosition;\n\n    v_texCoord = texcoord;\n}\n"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision highp  float;\n#define GLSLIFY 1\n\nuniform sampler2D u_diffuse;\nuniform float u_discardValue;\n\nin vec2 v_texCoord;\n\nout vec4 color;\n\nvoid main() {\n\tvec4 textureColor = texture(u_diffuse, v_texCoord);\n\n\tif (u_discardValue >= 0.0) {\n\t\tif (textureColor.r <= u_discardValue && textureColor.g <= u_discardValue && textureColor.b <= u_discardValue) {\n\t\t\tdiscard;\n\t\t}\n\t}\n\n\tcolor = vec4(textureColor.rgb, 1.0);\n}\n"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform float u_lastFrame;\nuniform float u_firstFrame;\nuniform float u_echo;\nuniform float u_frameTime;\n\nin vec3 linePosition;\nin vec4 lineColor;\n\nout vec4 v_color;\n\nvoid main() {    \n    gl_Position = u_projection * u_view * u_globalVRTransform * vec4(linePosition, 1.0);\n\n    float alpha;\n    if (u_frameTime <= u_firstFrame && u_frameTime >= u_lastFrame) {\n        alpha = (u_frameTime - u_lastFrame) / u_echo;\n    }\n    else {\n        if (u_frameTime < u_firstFrame) {\n            alpha = (u_frameTime  - (u_firstFrame - u_echo)) / u_echo;\n        }\n        else {\n            alpha = (u_frameTime - u_lastFrame) / u_echo;\n        }\n    }\n    v_color = vec4(lineColor.rgb, alpha);\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nin vec3 linePosition;\nin vec4 lineColor;\n\nout vec4 v_color;\n\nvoid main() {    \n    gl_Position = u_projection * u_view * u_globalVRTransform * vec4(linePosition, 1.0);\n    v_color = lineColor;\n}"},function(module,exports,__webpack_require__){var t;"undefined"!=typeof self&&self,t=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}({"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });\n\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });\n\n\n\n\n\nconst version = "2.0.3";\nconst OBJ = {\n    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],\n    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],\n    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],\n    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],\n    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],\n    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],\n    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],\n    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],\n    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],\n    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],\n    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],\n    version,\n};\n/**\n * @namespace\n */\n\n\n\n//# sourceURL=webpack:///./src/index.ts?')},"./src/layout.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });\nvar TYPES;\n(function (TYPES) {\n    TYPES["BYTE"] = "BYTE";\n    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";\n    TYPES["SHORT"] = "SHORT";\n    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";\n    TYPES["FLOAT"] = "FLOAT";\n})(TYPES || (TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nclass DuplicateAttributeException extends Error {\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    constructor(attribute) {\n        super(`found duplicate attribute: ${attribute.key}`);\n    }\n}\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nclass Attribute {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        "SHORT": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        "FLOAT": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type "FLOAT", this parameter has no effect.\n     */\n    constructor(key, size, type, normalized = false) {\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case "BYTE":\n            case "UNSIGNED_BYTE":\n                this.sizeOfType = 1;\n                break;\n            case "SHORT":\n            case "UNSIGNED_SHORT":\n                this.sizeOfType = 2;\n                break;\n            case "FLOAT":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(`Unknown gl type: ${type}`);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n}\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}\'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}\'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context\'s\n * <code>vertexAttribPointer</code> method. If you\'ve created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, "pos");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nclass Layout {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    constructor(...attributes) {\n        this.attributes = attributes;\n        this.attributeMap = {};\n        let offset = 0;\n        let maxStrideMultiple = 0;\n        for (const attribute of attributes) {\n            if (this.attributeMap[attribute.key]) {\n                throw new DuplicateAttributeException(attribute);\n            }\n            // Add padding to satisfy WebGL\'s requirement that all\n            // vertexAttribPointer calls have an offset that is a multiple of\n            // the type size.\n            if (offset % attribute.sizeOfType !== 0) {\n                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                console.warn("Layout requires padding before " + attribute.key + " attribute");\n            }\n            this.attributeMap[attribute.key] = {\n                attribute: attribute,\n                size: attribute.size,\n                type: attribute.type,\n                normalized: attribute.normalized,\n                offset: offset,\n            };\n            offset += attribute.sizeInBytes;\n            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n        }\n        // Add padding to the end to satisfy WebGL\'s requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we\'re putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn("Layout requires padding at the back");\n        }\n        this.stride = offset;\n        for (const attribute of attributes) {\n            this.attributeMap[attribute.key].stride = this.stride;\n        }\n    }\n}\n// Geometry attributes\n/**\n * Attribute layout to pack a vertex\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.POSITION = new Attribute("position", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n *\n * @see {@link Layout}\n */\nLayout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s bitangent x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n * @see {@link Layout}\n */\nLayout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s texture coordinates\' u & v as floats\n *\n * @see {@link Layout}\n */\nLayout.UV = new Attribute("uv", 2, TYPES.FLOAT);\n// Material attributes\n/**\n * Attribute layout to pack an unsigned short to be interpreted as a the index\n * into a {@link Mesh}\'s materials list.\n * <p>\n * The intention of this value is to send all of the {@link Mesh}\'s materials\n * into multiple shader uniforms and then reference the current one by this\n * vertex attribute.\n * <p>\n * example glsl code:\n *\n * <pre><code>\n *  // this is bound using MATERIAL_INDEX\n *  attribute int materialIndex;\n *\n *  struct Material {\n *    vec3 diffuse;\n *    vec3 specular;\n *    vec3 specularExponent;\n *  };\n *\n *  uniform Material materials[MAX_MATERIALS];\n *\n *  // ...\n *\n *  vec3 diffuse = materials[materialIndex];\n *\n * </code></pre>\n * TODO: More description & test to make sure subscripting by attributes even\n * works for webgl\n *\n * @see {@link Layout}\n */\nLayout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);\nLayout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);\nLayout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);\nLayout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);\nLayout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);\nLayout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);\nLayout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);\nLayout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);\nLayout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);\nLayout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);\nLayout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);\nLayout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);\nLayout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);\nLayout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);\nLayout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);\nLayout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);\nLayout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);\nLayout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);\nLayout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);\nLayout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);\n\n\n//# sourceURL=webpack:///./src/layout.ts?')},"./src/material.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });\n/**\n * The Material class.\n */\nclass Material {\n    constructor(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to "normal" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it\'s a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n}\nconst SENTINEL_MATERIAL = new Material("sentinel");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nclass MaterialLibrary {\n    constructor(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    parse_newmtl(tokens) {\n        const name = tokens[0];\n        // console.info(\'Parsing new Material:\', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    }\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    parseColor(tokens) {\n        if (tokens[0] == "spectral") {\n            throw new Error("The MTL parser does not support spectral curve files. You will " +\n                "need to convert the MTL colors to either RGB or CIEXYZ.");\n        }\n        if (tokens[0] == "xyz") {\n            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +\n                "XYZ values to RGB or create an issue to add support for XYZ");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that\'s the check\n        // that i\'m going to perform here\n        if (tokens.length == 3) {\n            const [x, y, z] = tokens;\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we\'re going to assume\n        // it\'s exactly 1, skipping the check for 2.\n        const value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    }\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The "Ka" form specifies the ambient reflectivity using RGB values.\n     * The "g" and "b" values are optional. If only the "r" value is\n     * specified, then the "g" and "b" values are assigned the value of\n     * "r". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The "Ka spectral" form specifies the ambient reflectivity using a\n     * spectral curve. "file.rfl" is the name of the ".rfl" file containing\n     * the curve data. "factor" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.\n     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments\n     * are optional and take on the value of the "x" component if only "x" is\n     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ka(tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    }\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Kd(tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    }\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ks(tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    }\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ke(tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    }\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Tf(tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    }\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: "d 0.5"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional "-halo" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * "factor" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * "factor". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_d(tokens) {\n        // this ignores the -halo option as I can\'t find any documentation on what\n        // it\'s supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");\n    }\n    /**\n     * The "illum" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: "illum 2" to specify the "Highlight on" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_illum(tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    }\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ni(tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    }\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: "Ns 250"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ns(tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    }\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: "sharpness 100"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_sharpness(tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    }\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    parse_cc(values, options) {\n        options.colorCorrection = values[0] == "on";\n    }\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    parse_blendu(values, options) {\n        options.horizontalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    parse_blendv(values, options) {\n        options.verticalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    parse_boost(values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    parse_mm(values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    }\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    parse_ost(values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    }\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    parse_o(values, options) {\n        this.parse_ost(values, options.offset, 0);\n    }\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    parse_s(values, options) {\n        this.parse_ost(values, options.scale, 1);\n    }\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    parse_t(values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    }\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    parse_texres(values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    parse_clamp(values, options) {\n        options.clamp = values[0] == "on";\n    }\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    parse_bm(values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    parse_imfchan(values, options) {\n        options.imfChan = values[0];\n    }\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    parse_type(values, options) {\n        options.reflectionType = values[0];\n    }\n    /**\n     * Parses the texture\'s options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    parseOptions(tokens) {\n        const options = emptyTextureOptions();\n        let option;\n        let values;\n        const optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit "as"\n            const token = tokens.pop();\n            if (token.startsWith("-")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            const optionMethod = this[`parse_${option}`];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    }\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    parseMap(tokens) {\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a \'-\'\n        // so if the first token doesn\'t start with a \'-\', we\'re going to assume\n        // it\'s the name of the map file.\n        let optionsString;\n        let filename = "";\n        if (!tokens[0].startsWith("-")) {\n            [filename, ...optionsString] = tokens;\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        const options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, "/");\n        return options;\n    }\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    parse_map_Ka(tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    }\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    parse_map_Kd(tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    parse_map_Ks(tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    }\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    parse_map_Ke(tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    parse_map_Ns(tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    }\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    parse_map_d(tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    }\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    parse_map_aat(tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == "on";\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    parse_map_bump(tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    parse_bump(tokens) {\n        this.parse_map_bump(tokens);\n    }\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    parse_disp(tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    }\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    parse_decal(tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    }\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    parse_refl(tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    }\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    parse() {\n        const lines = this.data.split(/\\r?\\n/);\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const [directive, ...tokens] = line.split(/\\s/);\n            const parseMethod = this[`parse_${directive}`];\n            if (!parseMethod) {\n                console.warn(`Don\'t know how to parse the directive: "${directive}"`);\n                continue;\n            }\n            // console.log(`Parsing "${directive}" with tokens: ${tokens}`);\n            parseMethod.bind(this)(tokens);\n        }\n        // some cleanup. These don\'t need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    }\n}\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1,\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: "",\n    };\n}\n\n\n//# sourceURL=webpack:///./src/material.ts?')},"./src/mesh.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nclass Mesh {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional "w" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don\'t provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    constructor(objectData, options) {\n        this.name = "";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * \'v\': indicates vertex section\n          * \'vn\': indicates vertex normal section\n          * \'f\': indicates the faces section\n          * \'vt\': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital "V" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        "v" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string (\'16/92/11\') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn\'t, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL\'s ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        const verts = [];\n        const vertNormals = [];\n        const textures = [];\n        const materialNamesByIndex = [];\n        const materialIndicesByName = {};\n        // keep track of what material we\'ve seen last\n        let currentMaterialIndex = -1;\n        let currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        const unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0,\n        };\n        const VERTEX_RE = /^v\\s/;\n        const NORMAL_RE = /^vn\\s/;\n        const TEXTURE_RE = /^vt\\s/;\n        const FACE_RE = /^f\\s/;\n        const WHITESPACE_RE = /\\s+/;\n        const USE_MATERIAL_RE = /^usemtl/;\n        // array of lines separated by the newline\n        const lines = objectData.split("\\n");\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const elements = line.split(WHITESPACE_RE);\n            elements.shift();\n            if (VERTEX_RE.test(line)) {\n                // if this is a vertex\n                verts.push(...elements);\n            }\n            else if (NORMAL_RE.test(line)) {\n                // if this is a vertex normal\n                vertNormals.push(...elements);\n            }\n            else if (TEXTURE_RE.test(line)) {\n                let coords = elements;\n                // by default, the loader will only look at the U and V\n                // coordinates of the vt declaration. So, this truncates the\n                // elements to only those 2 values. If W texture coordinate\n                // support is enabled, then the texture coordinate is\n                // expected to have three values in it.\n                if (elements.length > 2 && !options.enableWTextureCoord) {\n                    coords = elements.slice(0, 2);\n                }\n                else if (elements.length === 2 && options.enableWTextureCoord) {\n                    // If for some reason W texture coordinate support is enabled\n                    // and only the U and V coordinates are given, then we supply\n                    // the default value of 0 so that the stride length is correct\n                    // when the textures are unpacked below.\n                    coords.push("0");\n                }\n                textures.push(...coords);\n            }\n            else if (USE_MATERIAL_RE.test(line)) {\n                const materialName = elements[0];\n                // check to see if we\'ve ever seen it before\n                if (!(materialName in materialIndicesByName)) {\n                    // new material we\'ve never seen\n                    materialNamesByIndex.push(materialName);\n                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                    // push new array into indices\n                    // already contains an array at index zero, don\'t add\n                    if (materialIndicesByName[materialName] > 0) {\n                        unpacked.indices.push([]);\n                    }\n                }\n                // keep track of the current material index\n                currentMaterialIndex = materialIndicesByName[materialName];\n                // update current index array\n                currentObjectByMaterialIndex = currentMaterialIndex;\n            }\n            else if (FACE_RE.test(line)) {\n                // if this is a face\n                /*\n                split this face into an array of Vertex groups\n                for example:\n                   f 16/92/11 14/101/22 1/69/1\n                becomes:\n                  [\'16/92/11\', \'14/101/22\', \'1/69/1\'];\n                */\n                const triangles = triangulate(elements);\n                for (const triangle of triangles) {\n                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                        const hash = triangle[j] + "," + currentMaterialIndex;\n                        if (hash in unpacked.hashindices) {\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                        }\n                        else {\n                            /*\n                        Each element of the face line array is a Vertex which has its\n                        attributes delimited by a forward slash. This will separate\n                        each attribute into another array:\n                            \'19/92/11\'\n                        becomes:\n                            Vertex = [\'19\', \'92\', \'11\'];\n                        where\n                            Vertex[0] is the vertex index\n                            Vertex[1] is the texture index\n                            Vertex[2] is the normal index\n                         Think of faces having Vertices which are comprised of the\n                         attributes location (v), texture (vt), and normal (vn).\n                         */\n                            const vertex = triangle[j].split("/");\n                            // it\'s possible for faces to only specify the vertex\n                            // and the normal. In this case, vertex will only have\n                            // a length of 2 and not 3 and the normal will be the\n                            // second item in the list with an index of 1.\n                            const normalIndex = vertex.length - 1;\n                            /*\n                         The verts, textures, and vertNormals arrays each contain a\n                         flattend array of coordinates.\n\n                         Because it gets confusing by referring to Vertex and then\n                         vertex (both are different in my descriptions) I will explain\n                         what\'s going on using the vertexNormals array:\n\n                         vertex[2] will contain the one-based index of the vertexNormals\n                         section (vn). One is subtracted from this index number to play\n                         nice with javascript\'s zero-based array indexing.\n\n                         Because vertexNormal is a flattened array of x, y, z values,\n                         simple pointer arithmetic is used to skip to the start of the\n                         vertexNormal, then the offset is added to get the correct\n                         component: +0 is x, +1 is y, +2 is z.\n\n                         This same process is repeated for verts and textures.\n                         */\n                            // Vertex position\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                            // Vertex textures\n                            if (textures.length) {\n                                const stride = options.enableWTextureCoord ? 3 : 2;\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                if (options.enableWTextureCoord) {\n                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                }\n                            }\n                            // Vertex normals\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                            // Vertex material indices\n                            unpacked.materialIndices.push(currentMaterialIndex);\n                            // add the newly created Vertex to the list of indices\n                            unpacked.hashindices[hash] = unpacked.index;\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                            // increment the counter\n                            unpacked.index += 1;\n                        }\n                    }\n                }\n            }\n        }\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    calculateTangentsAndBitangents() {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), "Missing attributes for calculating tangents and bitangents");\n        const unpacked = {\n            tangents: [...new Array(this.vertices.length)].map(_ => 0),\n            bitangents: [...new Array(this.vertices.length)].map(_ => 0),\n        };\n        // Loop through all faces in the whole mesh\n        const indices = this.indices;\n        const vertices = this.vertices;\n        const normals = this.vertexNormals;\n        const uvs = this.textures;\n        for (let i = 0; i < indices.length; i += 3) {\n            const i0 = indices[i + 0];\n            const i1 = indices[i + 1];\n            const i2 = indices[i + 2];\n            const x_v0 = vertices[i0 * 3 + 0];\n            const y_v0 = vertices[i0 * 3 + 1];\n            const z_v0 = vertices[i0 * 3 + 2];\n            const x_uv0 = uvs[i0 * 2 + 0];\n            const y_uv0 = uvs[i0 * 2 + 1];\n            const x_v1 = vertices[i1 * 3 + 0];\n            const y_v1 = vertices[i1 * 3 + 1];\n            const z_v1 = vertices[i1 * 3 + 2];\n            const x_uv1 = uvs[i1 * 2 + 0];\n            const y_uv1 = uvs[i1 * 2 + 1];\n            const x_v2 = vertices[i2 * 3 + 0];\n            const y_v2 = vertices[i2 * 3 + 1];\n            const z_v2 = vertices[i2 * 3 + 2];\n            const x_uv2 = uvs[i2 * 2 + 0];\n            const y_uv2 = uvs[i2 * 2 + 1];\n            const x_deltaPos1 = x_v1 - x_v0;\n            const y_deltaPos1 = y_v1 - y_v0;\n            const z_deltaPos1 = z_v1 - z_v0;\n            const x_deltaPos2 = x_v2 - x_v0;\n            const y_deltaPos2 = y_v2 - y_v0;\n            const z_deltaPos2 = z_v2 - z_v0;\n            const x_uvDeltaPos1 = x_uv1 - x_uv0;\n            const y_uvDeltaPos1 = y_uv1 - y_uv0;\n            const x_uvDeltaPos2 = x_uv2 - x_uv0;\n            const y_uvDeltaPos2 = y_uv2 - y_uv0;\n            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            const x_n0 = normals[i0 * 3 + 0];\n            const y_n0 = normals[i0 * 3 + 1];\n            const z_n0 = normals[i0 * 3 + 2];\n            const x_n1 = normals[i1 * 3 + 0];\n            const y_n1 = normals[i1 * 3 + 1];\n            const z_n1 = normals[i1 * 3 + 2];\n            const x_n2 = normals[i2 * 3 + 0];\n            const y_n2 = normals[i2 * 3 + 1];\n            const z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    }\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    makeBufferData(layout) {\n        const numItems = this.vertices.length / 3;\n        const buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        const dataView = new DataView(buffer);\n        for (let i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            // copy in the vertex data in the order and format given by the\n            // layout param\n            for (const attribute of layout.attributes) {\n                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                switch (attribute.key) {\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:\n                        dataView.setFloat32(offset, this.vertices[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:\n                        dataView.setFloat32(offset, this.textures[i * 2], true);\n                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:\n                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:\n                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.ambient[0], true);\n                        dataView.setFloat32(offset + 4, material.ambient[1], true);\n                        dataView.setFloat32(offset + 8, material.ambient[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.diffuse[0], true);\n                        dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                        dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specular[0], true);\n                        dataView.setFloat32(offset + 4, material.specular[1], true);\n                        dataView.setFloat32(offset + 8, material.specular[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specularExponent, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.emissive[0], true);\n                        dataView.setFloat32(offset + 4, material.emissive[1], true);\n                        dataView.setFloat32(offset + 8, material.emissive[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.dissolve, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.illumination, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.refractionIndex, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.sharpness, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                        break;\n                    }\n                }\n            }\n        }\n        return buffer;\n    }\n    makeIndexBufferData() {\n        const buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    }\n    makeIndexBufferDataForMaterials(...materialIndices) {\n        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));\n        const buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    }\n    addMaterialLibrary(mtl) {\n        for (const name in mtl.materials) {\n            if (!(name in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            const material = mtl.materials[name];\n            // Find the material index for this material\n            const materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    }\n}\nfunction* triangulate(elements) {\n    if (elements.length <= 3) {\n        yield elements;\n    }\n    else if (elements.length === 4) {\n        yield [elements[0], elements[1], elements[2]];\n        yield [elements[2], elements[3], elements[0]];\n    }\n    else {\n        for (let i = 1; i < elements.length - 1; i++) {\n            yield [elements[0], elements[i], elements[i + 1]];\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/mesh.ts?')},"./src/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n\n\nfunction downloadMtlTextures(mtl, root) {\n    const mapAttributes = [\n        "mapDiffuse",\n        "mapAmbient",\n        "mapSpecular",\n        "mapDissolve",\n        "mapBump",\n        "mapDisplacement",\n        "mapDecal",\n        "mapEmissive",\n    ];\n    if (!root.endsWith("/")) {\n        root += "/";\n    }\n    const textures = [];\n    for (const materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        const material = mtl.materials[materialName];\n        for (const attr of mapAttributes) {\n            const mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                continue;\n            }\n            const url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(response => {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                const image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                return new Promise(resolve => (image.onload = resolve));\n            })\n                .catch(() => {\n                console.error(`Unable to download texture: ${url}`);\n            }));\n        }\n    }\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === "string")) {\n        return modelOptions.obj.replace(/\\.obj$/, ".mtl");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: \'path/to/model.obj\',\n *  mtl: true | \'path/to/model.mtl\',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: \'/models/suzanne/maps\'\n *  name: \'suzanne\'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model\'s .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model\'s .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: \'models/foo.obj\', mtl: true} would search for \'models/foo.mtl\'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL\'s\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL\'s texture files are located. The default is to\n * use the MTL file\'s location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(models) {\n    const finished = [];\n    for (const model of models) {\n        if (!model.obj) {\n            throw new Error(\'"obj" attribute of model object not set. The .obj file is required to be set \' +\n                "in order to use downloadModels()");\n        }\n        const options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        let name = model.name;\n        if (!name) {\n            const parts = model.obj.split("/");\n            name = parts[parts.length - 1].replace(".obj", "");\n        }\n        const namePromise = Promise.resolve(name);\n        const meshPromise = fetch(model.obj)\n            .then(response => response.text())\n            .then(data => {\n            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);\n        });\n        let mtlPromise;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            const mtl = getMtl(model);\n            mtlPromise = fetch(mtl)\n                .then(response => response.text())\n                .then((data) => {\n                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);\n                if (model.downloadMtlTextures !== false) {\n                    let root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl.substr(0, mtl.lastIndexOf("/"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then((value) => {\n                return value[0];\n            });\n        }\n        const parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    }\n    return Promise.all(finished).then(ms => {\n        // the "finished" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        const models = {};\n        for (const model of ms) {\n            const [name, mesh, mtl] = model;\n            mesh.name = name;\n            if (mtl) {\n                mesh.addMaterialLibrary(mtl);\n            }\n            models[name] = mesh;\n        }\n        return models;\n    });\n}\n/**\n * Takes in an object of `mesh_name`, `\'/url/to/OBJ/file\'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh\'s OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { \'<mesh_name>\': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    const completed = [];\n    for (const mesh_name in nameAndURLs) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            continue;\n        }\n        const url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(response => response.text())\n            .then(data => {\n            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];\n        }));\n    }\n    Promise.all(completed).then(ms => {\n        for (const [name, mesh] of ms) {\n            meshes[name] = mesh;\n        }\n        return completionCallback(meshes);\n    });\n}\nfunction _buildBuffer(gl, type, data, itemSize) {\n    const buffer = gl.createBuffer();\n    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext(\'webgl\')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don\'t copy and paste):\n *\n *     const gl   = canvas.getContext(\'webgl\'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");\n *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n *\n *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");\n *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n *\n *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");\n *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it\'s possible that the mesh doesn\'t contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?')},0:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");\n\n\n//# sourceURL=webpack:///multi_./src/index.ts?')}})},module.exports=t()},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform mat4 u_transformMatrix;\nuniform bool u_useVRTransform;\n\nin vec4 position;\nin vec2 texcoord;\n\nout vec2 v_textureCoor;\n\nvoid main() {\n    if (u_useVRTransform) gl_Position = u_projection * u_view * u_globalVRTransform * u_transformMatrix * position;\n    else gl_Position = u_projection * u_view * u_transformMatrix * position;\n\n    v_textureCoor = texcoord;\n}\n"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\nin vec2 v_textureCoor;\nout vec4 color;\n\nvoid main() {\n    color = vec4(texture(u_texture, v_textureCoor).rgb, 1.0);\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform mat4 u_transformMatrix;\nuniform bool u_useVRTransform;\nuniform vec3 u_color;\n\nin vec4 position;\n\nout vec3 v_color;\n\nvoid main() {\n    if (u_useVRTransform) gl_Position = u_projection * u_view * u_globalVRTransform * u_transformMatrix * position;\n    else gl_Position = u_projection * u_view * u_transformMatrix * position;\n\n    v_color = u_color;\n}\n"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nin vec3 v_color;\nout vec4 color;\n\nvoid main() {\n    color = vec4(v_color, 1.0);\n}"},function(t,e,n){var r=n(116),i=n(117),o=n(118),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],s=["m","w"],u=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),f=" ".charCodeAt(0);function h(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function l(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function d(t,e){if(!t.chars||0===t.chars.length)return null;var n=m(t.chars,e);return n>=0?t.chars[n]:null}function p(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var r=t.kernings,i=0;i<r.length;i++){var o=r[i];if(o.first===e&&o.second===n)return o.amount}return 0}function m(t,e,n){for(var r=n=n||0;r<t.length;r++)if(t[r].id===e)return r;return-1}t.exports=function(t){return new h(t)},h.prototype.update=function(t){if(t=i({measure:this._measure},t),this._opt=t,this._opt.tabSize=o(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,n=t.text||"",s=t.font;this._setupSpaceGlyphs(s);var c=r.lines(n,t),f=t.width||0;e.length=0;var h=c.reduce((function(t,e){return Math.max(t,e.width,f)}),0),l=0,d=0,y=o(t.lineHeight,s.common.lineHeight),g=s.common.base,v=y-g,x=t.letterSpacing||0,b=y*c.length-v,_=function(t){if("center"===t)return 1;if("right"===t)return 2;return 0}(this._opt.align);d-=b,this._width=h,this._height=b,this._descender=y-g,this._baseline=g,this._xHeight=function(t){for(var e=0;e<a.length;e++){var n=a[e].charCodeAt(0),r=m(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(s),this._capHeight=function(t){for(var e=0;e<u.length;e++){var n=u[e].charCodeAt(0),r=m(t.chars,n);if(r>=0)return t.chars[r].height}return 0}(s),this._lineHeight=y,this._ascender=y-v-this._xHeight;var w=this;c.forEach((function(t,r){for(var i,o=t.start,a=t.end,u=t.width,c=o;c<a;c++){var f=n.charCodeAt(c),m=w.getGlyph(s,f);if(m){i&&(l+=p(s,i.id,m.id));var g=l;1===_?g+=(h-u)/2:2===_&&(g+=h-u),e.push({position:[g,d],data:m,index:c,line:r}),l+=m.xadvance+x,i=m}}d+=y,l=0})),this._linesTotal=c.length},h.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=d(t,f)||function(t){for(var e=0;e<s.length;e++){var n=s[e].charCodeAt(0),r=m(t.chars,n);if(r>=0)return t.chars[r]}return 0}(t)||t.chars[0],n=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=i(e,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},h.prototype.getGlyph=function(t,e){var n=d(t,e);return n||(e===c?this._fallbackTabGlyph:e===f?this._fallbackSpaceGlyph:null)},h.prototype.computeMetrics=function(t,e,n,r){var i,o=this._opt.letterSpacing||0,a=this._opt.font,s=0,u=0,c=0;if(!a.chars||0===a.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var f=e;f<n;f++){var h,l=t.charCodeAt(f);if(h=this.getGlyph(a,l)){h.xoffset;var d=(s+=i?p(a,i.id,h.id):0)+h.xadvance+o,m=s+h.width;if(m>=r||d>=r)break;s=d,u=m,i=h}c++}return i&&(u+=i.xoffset),{start:e,end:e+c,width:u}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(t){Object.defineProperty(h.prototype,t,{get:l(t),configurable:!0})}))},function(t,e){var n=/\n/,r=/\s/;function i(t,e,n,r){var i=t.indexOf(e,n);return-1===i||i>r?r:i}function o(t){return r.test(t)}function a(t,e,n,r){return{start:e,end:e+Math.min(r,n-e)}}t.exports=function(e,n){return t.exports.lines(e,n).map((function(t){return e.substring(t.start,t.end)})).join("\n")},t.exports.lines=function(t,e){if(0===(e=e||{}).width&&"nowrap"!==e.mode)return[];t=t||"";var r="number"==typeof e.width?e.width:Number.MAX_VALUE,s=Math.max(0,e.start||0),u="number"==typeof e.end?e.end:t.length,c=e.mode,f=e.measure||a;return"pre"===c?function(t,e,r,i,o){for(var a=[],s=r,u=r;u<i&&u<e.length;u++){var c=e.charAt(u),f=n.test(c);if(f||u===i-1){var h=t(e,s,f?u:u+1,o);a.push(h),s=u+1}}return a}(f,t,s,u,r):function(t,e,n,r,a,s){var u=[],c=a;"nowrap"===s&&(c=Number.MAX_VALUE);for(;n<r&&n<e.length;){for(var f=i(e,"\n",n,r);n<f&&o(e.charAt(n));)n++;var h=t(e,n,f,c),l=n+(h.end-h.start),d=l+"\n".length;if(l<f){for(;l>n&&!o(e.charAt(l));)l--;if(l===n)d>n+"\n".length&&d--,l=d;else for(d=l;l>n&&o(e.charAt(l-"\n".length));)l--}if(l>=n){var p=t(e,n,l,c);u.push(p)}n=d}return u}(f,t,s,u,r,c)}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){t.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},function(t){t.exports=JSON.parse('{"pages":["Calibri.png"],"chars":[{"id":124,"index":878,"char":"|","width":9,"height":61,"xoffset":11,"yoffset":5,"xadvance":30,"chnl":15,"x":0,"y":0,"page":0},{"id":40,"index":894,"char":"(","width":16,"height":60,"xoffset":2,"yoffset":6,"xadvance":20,"chnl":15,"x":0,"y":66,"page":0},{"id":41,"index":895,"char":")","width":16,"height":60,"xoffset":2,"yoffset":6,"xadvance":20,"chnl":15,"x":14,"y":0,"page":0},{"id":47,"index":876,"char":"/","width":29,"height":60,"xoffset":-2,"yoffset":4,"xadvance":25,"chnl":15,"x":0,"y":131,"page":0},{"id":36,"index":936,"char":"$","width":31,"height":60,"xoffset":1,"yoffset":3,"xadvance":33,"chnl":15,"x":21,"y":65,"page":0},{"id":253,"index":457,"char":"","width":31,"height":60,"xoffset":-1,"yoffset":7,"xadvance":29,"chnl":15,"x":35,"y":0,"page":0},{"id":91,"index":896,"char":"[","width":15,"height":59,"xoffset":4,"yoffset":7,"xadvance":20,"chnl":15,"x":0,"y":196,"page":0},{"id":93,"index":897,"char":"]","width":15,"height":59,"xoffset":1,"yoffset":7,"xadvance":20,"chnl":15,"x":0,"y":260,"page":0},{"id":123,"index":898,"char":"{","width":20,"height":59,"xoffset":1,"yoffset":6,"xadvance":20,"chnl":15,"x":0,"y":324,"page":0},{"id":125,"index":899,"char":"}","width":20,"height":59,"xoffset":2,"yoffset":6,"xadvance":20,"chnl":15,"x":20,"y":196,"page":0},{"id":87,"index":116,"char":"W","width":58,"height":45,"xoffset":0,"yoffset":10,"xadvance":58,"chnl":15,"x":20,"y":260,"page":0},{"id":106,"index":361,"char":"j","width":17,"height":58,"xoffset":-3,"yoffset":9,"xadvance":16,"chnl":15,"x":34,"y":130,"page":0},{"id":282,"index":32,"char":"","width":30,"height":58,"xoffset":0,"yoffset":-3,"xadvance":32,"chnl":15,"x":45,"y":193,"page":0},{"id":352,"index":97,"char":"","width":31,"height":58,"xoffset":-1,"yoffset":-3,"xadvance":30,"chnl":15,"x":56,"y":130,"page":0},{"id":268,"index":21,"char":"","width":34,"height":58,"xoffset":1,"yoffset":-3,"xadvance":35,"chnl":15,"x":80,"y":193,"page":0},{"id":344,"index":92,"char":"","width":34,"height":58,"xoffset":1,"yoffset":-3,"xadvance":35,"chnl":15,"x":57,"y":65,"page":0},{"id":381,"index":129,"char":"","width":32,"height":58,"xoffset":-1,"yoffset":-3,"xadvance":30,"chnl":15,"x":92,"y":128,"page":0},{"id":221,"index":124,"char":"","width":34,"height":58,"xoffset":-1,"yoffset":-3,"xadvance":32,"chnl":15,"x":71,"y":0,"page":0},{"id":193,"index":6,"char":"","width":39,"height":58,"xoffset":-1,"yoffset":-3,"xadvance":38,"chnl":15,"x":96,"y":63,"page":0},{"id":205,"index":49,"char":"","width":21,"height":58,"xoffset":-1,"yoffset":-3,"xadvance":16,"chnl":15,"x":110,"y":0,"page":0},{"id":201,"index":30,"char":"","width":27,"height":58,"xoffset":3,"yoffset":-3,"xadvance":32,"chnl":15,"x":136,"y":0,"page":0},{"id":218,"index":106,"char":"","width":35,"height":58,"xoffset":3,"yoffset":-3,"xadvance":42,"chnl":15,"x":0,"y":388,"page":0},{"id":270,"index":25,"char":"","width":36,"height":58,"xoffset":3,"yoffset":-3,"xadvance":40,"chnl":15,"x":0,"y":451,"page":0},{"id":356,"index":101,"char":"","width":35,"height":58,"xoffset":-2,"yoffset":-3,"xadvance":32,"chnl":15,"x":25,"y":310,"page":0},{"id":211,"index":77,"char":"","width":41,"height":58,"xoffset":1,"yoffset":-3,"xadvance":43,"chnl":15,"x":40,"y":373,"page":0},{"id":64,"index":923,"char":"@","width":57,"height":54,"xoffset":-2,"yoffset":9,"xadvance":58,"chnl":15,"x":65,"y":310,"page":0},{"id":196,"index":9,"char":"","width":39,"height":56,"xoffset":-1,"yoffset":-1,"xadvance":38,"chnl":15,"x":41,"y":436,"page":0},{"id":214,"index":80,"char":"","width":41,"height":56,"xoffset":1,"yoffset":-1,"xadvance":43,"chnl":15,"x":85,"y":436,"page":0},{"id":220,"index":109,"char":"","width":35,"height":56,"xoffset":3,"yoffset":-1,"xadvance":42,"chnl":15,"x":86,"y":369,"page":0},{"id":81,"index":89,"char":"Q","width":46,"height":52,"xoffset":1,"yoffset":9,"xadvance":44,"chnl":15,"x":126,"y":369,"page":0},{"id":357,"index":411,"char":"","width":26,"height":51,"xoffset":-1,"yoffset":4,"xadvance":22,"chnl":15,"x":131,"y":426,"page":0},{"id":367,"index":445,"char":"","width":29,"height":50,"xoffset":3,"yoffset":5,"xadvance":34,"chnl":15,"x":162,"y":426,"page":0},{"id":77,"index":68,"char":"M","width":49,"height":45,"xoffset":3,"yoffset":10,"xadvance":56,"chnl":15,"x":83,"y":256,"page":0},{"id":98,"index":271,"char":"b","width":30,"height":49,"xoffset":3,"yoffset":7,"xadvance":34,"chnl":15,"x":127,"y":306,"page":0},{"id":100,"index":282,"char":"d","width":30,"height":49,"xoffset":1,"yoffset":7,"xadvance":34,"chnl":15,"x":119,"y":191,"page":0},{"id":102,"index":296,"char":"f","width":23,"height":49,"xoffset":-1,"yoffset":7,"xadvance":20,"chnl":15,"x":137,"y":245,"page":0},{"id":283,"index":290,"char":"","width":30,"height":49,"xoffset":1,"yoffset":7,"xadvance":32,"chnl":15,"x":162,"y":299,"page":0},{"id":353,"index":403,"char":"","width":27,"height":49,"xoffset":-2,"yoffset":7,"xadvance":25,"chnl":15,"x":177,"y":353,"page":0},{"id":269,"index":275,"char":"","width":27,"height":49,"xoffset":1,"yoffset":7,"xadvance":27,"chnl":15,"x":129,"y":126,"page":0},{"id":345,"index":398,"char":"","width":26,"height":49,"xoffset":-2,"yoffset":7,"xadvance":23,"chnl":15,"x":154,"y":180,"page":0},{"id":225,"index":260,"char":"","width":27,"height":49,"xoffset":1,"yoffset":7,"xadvance":31,"chnl":15,"x":165,"y":234,"page":0},{"id":237,"index":351,"char":"","width":19,"height":49,"xoffset":-2,"yoffset":7,"xadvance":15,"chnl":15,"x":140,"y":63,"page":0},{"id":233,"index":288,"char":"","width":30,"height":49,"xoffset":1,"yoffset":7,"xadvance":32,"chnl":15,"x":161,"y":117,"page":0},{"id":250,"index":439,"char":"","width":29,"height":49,"xoffset":3,"yoffset":7,"xadvance":34,"chnl":15,"x":164,"y":63,"page":0},{"id":271,"index":283,"char":"","width":41,"height":49,"xoffset":1,"yoffset":7,"xadvance":37,"chnl":15,"x":185,"y":171,"page":0},{"id":243,"index":383,"char":"","width":33,"height":49,"xoffset":1,"yoffset":7,"xadvance":34,"chnl":15,"x":196,"y":117,"page":0},{"id":104,"index":346,"char":"h","width":29,"height":48,"xoffset":3,"yoffset":7,"xadvance":34,"chnl":15,"x":168,"y":0,"page":0},{"id":107,"index":364,"char":"k","width":27,"height":48,"xoffset":3,"yoffset":7,"xadvance":30,"chnl":15,"x":198,"y":53,"page":0},{"id":108,"index":367,"char":"l","width":9,"height":48,"xoffset":3,"yoffset":7,"xadvance":15,"chnl":15,"x":202,"y":0,"page":0},{"id":33,"index":842,"char":"!","width":11,"height":48,"xoffset":6,"yoffset":7,"xadvance":21,"chnl":15,"x":216,"y":0,"page":0},{"id":63,"index":845,"char":"?","width":27,"height":48,"xoffset":2,"yoffset":7,"xadvance":30,"chnl":15,"x":230,"y":53,"page":0},{"id":38,"index":920,"char":"&","width":46,"height":48,"xoffset":-2,"yoffset":8,"xadvance":44,"chnl":15,"x":232,"y":0,"page":0},{"id":382,"index":462,"char":"","width":27,"height":48,"xoffset":-2,"yoffset":7,"xadvance":26,"chnl":15,"x":196,"y":407,"page":0},{"id":119,"index":449,"char":"w","width":47,"height":35,"xoffset":0,"yoffset":21,"xadvance":46,"chnl":15,"x":196,"y":460,"page":0},{"id":37,"index":1081,"char":"%","width":46,"height":47,"xoffset":0,"yoffset":9,"xadvance":46,"chnl":15,"x":197,"y":225,"page":0},{"id":67,"index":18,"char":"C","width":34,"height":46,"xoffset":1,"yoffset":9,"xadvance":35,"chnl":15,"x":231,"y":171,"page":0},{"id":71,"index":39,"char":"G","width":37,"height":46,"xoffset":1,"yoffset":9,"xadvance":41,"chnl":15,"x":234,"y":106,"page":0},{"id":74,"index":58,"char":"J","width":19,"height":46,"xoffset":-2,"yoffset":10,"xadvance":21,"chnl":15,"x":262,"y":53,"page":0},{"id":79,"index":75,"char":"O","width":41,"height":46,"xoffset":1,"yoffset":9,"xadvance":43,"chnl":15,"x":283,"y":0,"page":0},{"id":83,"index":94,"char":"S","width":29,"height":46,"xoffset":0,"yoffset":9,"xadvance":30,"chnl":15,"x":197,"y":277,"page":0},{"id":85,"index":104,"char":"U","width":35,"height":46,"xoffset":3,"yoffset":10,"xadvance":42,"chnl":15,"x":209,"y":328,"page":0},{"id":103,"index":336,"char":"g","width":31,"height":46,"xoffset":0,"yoffset":20,"xadvance":31,"chnl":15,"x":231,"y":277,"page":0},{"id":105,"index":349,"char":"i","width":10,"height":46,"xoffset":2,"yoffset":9,"xadvance":15,"chnl":15,"x":248,"y":222,"page":0},{"id":109,"index":373,"char":"m","width":46,"height":35,"xoffset":3,"yoffset":20,"xadvance":52,"chnl":15,"x":263,"y":222,"page":0},{"id":112,"index":393,"char":"p","width":30,"height":46,"xoffset":3,"yoffset":20,"xadvance":34,"chnl":15,"x":270,"y":157,"page":0},{"id":113,"index":395,"char":"q","width":30,"height":46,"xoffset":1,"yoffset":20,"xadvance":34,"chnl":15,"x":276,"y":104,"page":0},{"id":121,"index":455,"char":"y","width":31,"height":46,"xoffset":-1,"yoffset":21,"xadvance":29,"chnl":15,"x":286,"y":51,"page":0},{"id":50,"index":1006,"char":"2","width":30,"height":46,"xoffset":2,"yoffset":9,"xadvance":33,"chnl":15,"x":305,"y":155,"page":0},{"id":51,"index":1007,"char":"3","width":30,"height":46,"xoffset":1,"yoffset":9,"xadvance":33,"chnl":15,"x":311,"y":102,"page":0},{"id":53,"index":1009,"char":"5","width":30,"height":46,"xoffset":1,"yoffset":10,"xadvance":33,"chnl":15,"x":322,"y":51,"page":0},{"id":54,"index":1010,"char":"6","width":31,"height":46,"xoffset":1,"yoffset":9,"xadvance":33,"chnl":15,"x":329,"y":0,"page":0},{"id":56,"index":1012,"char":"8","width":32,"height":46,"xoffset":1,"yoffset":9,"xadvance":33,"chnl":15,"x":228,"y":379,"page":0},{"id":57,"index":1013,"char":"9","width":31,"height":46,"xoffset":1,"yoffset":9,"xadvance":33,"chnl":15,"x":249,"y":328,"page":0},{"id":48,"index":1004,"char":"0","width":32,"height":46,"xoffset":0,"yoffset":9,"xadvance":33,"chnl":15,"x":267,"y":262,"page":0},{"id":228,"index":263,"char":"","width":27,"height":46,"xoffset":1,"yoffset":9,"xadvance":31,"chnl":15,"x":248,"y":430,"page":0},{"id":246,"index":386,"char":"","width":33,"height":46,"xoffset":1,"yoffset":9,"xadvance":34,"chnl":15,"x":265,"y":379,"page":0},{"id":252,"index":442,"char":"","width":29,"height":46,"xoffset":2,"yoffset":9,"xadvance":34,"chnl":15,"x":285,"y":313,"page":0},{"id":956,"index":645,"char":"","width":34,"height":46,"xoffset":3,"yoffset":21,"xadvance":36,"chnl":15,"x":304,"y":262,"page":0},{"id":65,"index":4,"char":"A","width":39,"height":45,"xoffset":-1,"yoffset":10,"xadvance":38,"chnl":15,"x":314,"y":206,"page":0},{"id":66,"index":17,"char":"B","width":31,"height":45,"xoffset":3,"yoffset":10,"xadvance":35,"chnl":15,"x":340,"y":153,"page":0},{"id":68,"index":24,"char":"D","width":36,"height":45,"xoffset":3,"yoffset":10,"xadvance":40,"chnl":15,"x":346,"y":102,"page":0},{"id":69,"index":28,"char":"E","width":27,"height":45,"xoffset":3,"yoffset":10,"xadvance":32,"chnl":15,"x":357,"y":51,"page":0},{"id":70,"index":38,"char":"F","width":26,"height":45,"xoffset":3,"yoffset":10,"xadvance":30,"chnl":15,"x":365,"y":0,"page":0},{"id":72,"index":44,"char":"H","width":34,"height":45,"xoffset":3,"yoffset":10,"xadvance":40,"chnl":15,"x":280,"y":430,"page":0},{"id":73,"index":47,"char":"I","width":9,"height":45,"xoffset":3,"yoffset":10,"xadvance":16,"chnl":15,"x":303,"y":364,"page":0},{"id":75,"index":60,"char":"K","width":31,"height":45,"xoffset":3,"yoffset":10,"xadvance":34,"chnl":15,"x":317,"y":364,"page":0},{"id":76,"index":62,"char":"L","width":25,"height":45,"xoffset":3,"yoffset":10,"xadvance":27,"chnl":15,"x":319,"y":313,"page":0},{"id":78,"index":69,"char":"N","width":35,"height":45,"xoffset":3,"yoffset":10,"xadvance":42,"chnl":15,"x":343,"y":256,"page":0},{"id":80,"index":87,"char":"P","width":29,"height":45,"xoffset":3,"yoffset":10,"xadvance":34,"chnl":15,"x":358,"y":203,"page":0},{"id":82,"index":90,"char":"R","width":31,"height":45,"xoffset":3,"yoffset":10,"xadvance":35,"chnl":15,"x":376,"y":152,"page":0},{"id":84,"index":100,"char":"T","width":35,"height":45,"xoffset":-2,"yoffset":10,"xadvance":32,"chnl":15,"x":387,"y":101,"page":0},{"id":86,"index":115,"char":"V","width":39,"height":45,"xoffset":-1,"yoffset":10,"xadvance":37,"chnl":15,"x":389,"y":50,"page":0},{"id":88,"index":121,"char":"X","width":35,"height":45,"xoffset":0,"yoffset":10,"xadvance":34,"chnl":15,"x":396,"y":0,"page":0},{"id":89,"index":122,"char":"Y","width":34,"height":45,"xoffset":-1,"yoffset":10,"xadvance":32,"chnl":15,"x":349,"y":306,"page":0},{"id":90,"index":127,"char":"Z","width":31,"height":45,"xoffset":0,"yoffset":10,"xadvance":30,"chnl":15,"x":383,"y":253,"page":0},{"id":49,"index":1005,"char":"1","width":28,"height":45,"xoffset":4,"yoffset":10,"xadvance":33,"chnl":15,"x":392,"y":202,"page":0},{"id":52,"index":1008,"char":"4","width":34,"height":45,"xoffset":0,"yoffset":10,"xadvance":33,"chnl":15,"x":412,"y":151,"page":0},{"id":55,"index":1011,"char":"7","width":31,"height":45,"xoffset":1,"yoffset":10,"xadvance":33,"chnl":15,"x":427,"y":100,"page":0},{"id":35,"index":951,"char":"#","width":34,"height":45,"xoffset":-1,"yoffset":10,"xadvance":32,"chnl":15,"x":433,"y":50,"page":0},{"id":116,"index":410,"char":"t","width":23,"height":43,"xoffset":-1,"yoffset":13,"xadvance":22,"chnl":15,"x":436,"y":0,"page":0},{"id":59,"index":854,"char":";","width":14,"height":42,"xoffset":0,"yoffset":22,"xadvance":17,"chnl":15,"x":464,"y":0,"page":0},{"id":95,"index":890,"char":"_","width":37,"height":8,"xoffset":-2,"yoffset":58,"xadvance":32,"chnl":15,"x":270,"y":208,"page":0},{"id":97,"index":258,"char":"a","width":27,"height":35,"xoffset":1,"yoffset":20,"xadvance":31,"chnl":15,"x":483,"y":0,"page":0},{"id":99,"index":272,"char":"c","width":27,"height":35,"xoffset":1,"yoffset":20,"xadvance":27,"chnl":15,"x":483,"y":40,"page":0},{"id":101,"index":286,"char":"e","width":30,"height":35,"xoffset":1,"yoffset":20,"xadvance":32,"chnl":15,"x":472,"y":80,"page":0},{"id":110,"index":374,"char":"n","width":29,"height":35,"xoffset":3,"yoffset":20,"xadvance":34,"chnl":15,"x":319,"y":414,"page":0},{"id":111,"index":381,"char":"o","width":33,"height":35,"xoffset":1,"yoffset":20,"xadvance":34,"chnl":15,"x":319,"y":454,"page":0},{"id":114,"index":396,"char":"r","width":21,"height":35,"xoffset":3,"yoffset":20,"xadvance":23,"chnl":15,"x":353,"y":356,"page":0},{"id":115,"index":400,"char":"s","width":24,"height":35,"xoffset":1,"yoffset":20,"xadvance":25,"chnl":15,"x":353,"y":396,"page":0},{"id":117,"index":437,"char":"u","width":29,"height":35,"xoffset":3,"yoffset":21,"xadvance":34,"chnl":15,"x":379,"y":356,"page":0},{"id":118,"index":448,"char":"v","width":31,"height":35,"xoffset":-1,"yoffset":21,"xadvance":29,"chnl":15,"x":388,"y":303,"page":0},{"id":120,"index":454,"char":"x","width":29,"height":35,"xoffset":-1,"yoffset":21,"xadvance":28,"chnl":15,"x":419,"y":252,"page":0},{"id":60,"index":1092,"char":"<","width":31,"height":35,"xoffset":0,"yoffset":17,"xadvance":32,"chnl":15,"x":425,"y":201,"page":0},{"id":62,"index":1093,"char":">","width":31,"height":35,"xoffset":1,"yoffset":17,"xadvance":32,"chnl":15,"x":451,"y":150,"page":0},{"id":122,"index":460,"char":"z","width":24,"height":34,"xoffset":1,"yoffset":21,"xadvance":26,"chnl":15,"x":487,"y":120,"page":0},{"id":43,"index":1085,"char":"+","width":32,"height":34,"xoffset":0,"yoffset":18,"xadvance":32,"chnl":15,"x":357,"y":436,"page":0},{"id":58,"index":855,"char":":","width":11,"height":33,"xoffset":4,"yoffset":22,"xadvance":17,"chnl":15,"x":382,"y":396,"page":0},{"id":126,"index":917,"char":"~","width":33,"height":16,"xoffset":0,"yoffset":15,"xadvance":32,"chnl":15,"x":280,"y":480,"page":0},{"id":61,"index":1089,"char":"=","width":30,"height":21,"xoffset":1,"yoffset":24,"xadvance":32,"chnl":15,"x":131,"y":482,"page":0},{"id":94,"index":916,"char":"^","width":29,"height":27,"xoffset":1,"yoffset":10,"xadvance":32,"chnl":15,"x":357,"y":475,"page":0},{"id":42,"index":910,"char":"*","width":26,"height":28,"xoffset":3,"yoffset":6,"xadvance":32,"chnl":15,"x":248,"y":481,"page":0},{"id":34,"index":919,"char":"\\"","width":21,"height":21,"xoffset":2,"yoffset":7,"xadvance":26,"chnl":15,"x":166,"y":481,"page":0},{"id":39,"index":918,"char":"\'","width":9,"height":21,"xoffset":2,"yoffset":7,"xadvance":14,"chnl":15,"x":209,"y":379,"page":0},{"id":44,"index":853,"char":",","width":14,"height":20,"xoffset":-1,"yoffset":44,"xadvance":16,"chnl":15,"x":228,"y":430,"page":0},{"id":45,"index":882,"char":"-","width":20,"height":8,"xoffset":0,"yoffset":33,"xadvance":20,"chnl":15,"x":234,"y":157,"page":0},{"id":96,"index":493,"char":"`","width":19,"height":18,"xoffset":-2,"yoffset":7,"xadvance":19,"chnl":15,"x":463,"y":120,"page":0},{"id":46,"index":856,"char":".","width":11,"height":11,"xoffset":3,"yoffset":44,"xadvance":16,"chnl":15,"x":303,"y":414,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":51,"xadvance":15,"chnl":15,"x":343,"y":306,"page":0}],"info":{"face":"Calibri","size":65,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":79,"base":51,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t){t.exports=JSON.parse('{"pages":["Calibrib.png"],"chars":[{"id":124,"index":878,"char":"|","width":11,"height":57,"xoffset":9,"yoffset":5,"xadvance":29,"chnl":15,"x":0,"y":0,"page":0},{"id":87,"index":116,"char":"W","width":56,"height":42,"xoffset":-1,"yoffset":9,"xadvance":54,"chnl":15,"x":0,"y":62,"page":0},{"id":40,"index":894,"char":"(","width":17,"height":56,"xoffset":1,"yoffset":5,"xadvance":19,"chnl":15,"x":16,"y":0,"page":0},{"id":41,"index":895,"char":")","width":17,"height":56,"xoffset":1,"yoffset":5,"xadvance":19,"chnl":15,"x":38,"y":0,"page":0},{"id":123,"index":898,"char":"{","width":21,"height":56,"xoffset":0,"yoffset":5,"xadvance":21,"chnl":15,"x":60,"y":0,"page":0},{"id":125,"index":899,"char":"}","width":21,"height":56,"xoffset":1,"yoffset":5,"xadvance":21,"chnl":15,"x":61,"y":61,"page":0},{"id":47,"index":876,"char":"/","width":29,"height":56,"xoffset":-2,"yoffset":3,"xadvance":26,"chnl":15,"x":0,"y":109,"page":0},{"id":36,"index":936,"char":"$","width":29,"height":56,"xoffset":0,"yoffset":2,"xadvance":30,"chnl":15,"x":86,"y":0,"page":0},{"id":253,"index":457,"char":"","width":31,"height":56,"xoffset":-1,"yoffset":6,"xadvance":28,"chnl":15,"x":0,"y":170,"page":0},{"id":91,"index":896,"char":"[","width":16,"height":55,"xoffset":3,"yoffset":6,"xadvance":19,"chnl":15,"x":34,"y":109,"page":0},{"id":93,"index":897,"char":"]","width":16,"height":55,"xoffset":1,"yoffset":6,"xadvance":19,"chnl":15,"x":0,"y":231,"page":0},{"id":106,"index":361,"char":"j","width":17,"height":54,"xoffset":-3,"yoffset":7,"xadvance":15,"chnl":15,"x":0,"y":291,"page":0},{"id":64,"index":923,"char":"@","width":54,"height":51,"xoffset":-2,"yoffset":8,"xadvance":54,"chnl":15,"x":21,"y":231,"page":0},{"id":352,"index":97,"char":"","width":30,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":28,"chnl":15,"x":36,"y":169,"page":0},{"id":268,"index":21,"char":"","width":32,"height":54,"xoffset":0,"yoffset":-2,"xadvance":32,"chnl":15,"x":71,"y":122,"page":0},{"id":344,"index":92,"char":"","width":33,"height":54,"xoffset":1,"yoffset":-2,"xadvance":34,"chnl":15,"x":87,"y":61,"page":0},{"id":221,"index":124,"char":"","width":34,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":31,"chnl":15,"x":120,"y":0,"page":0},{"id":193,"index":6,"char":"","width":39,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":36,"chnl":15,"x":0,"y":350,"page":0},{"id":205,"index":49,"char":"","width":21,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":16,"chnl":15,"x":22,"y":287,"page":0},{"id":218,"index":106,"char":"","width":35,"height":54,"xoffset":2,"yoffset":-2,"xadvance":39,"chnl":15,"x":0,"y":409,"page":0},{"id":356,"index":101,"char":"","width":33,"height":54,"xoffset":-2,"yoffset":-2,"xadvance":30,"chnl":15,"x":40,"y":409,"page":0},{"id":211,"index":77,"char":"","width":40,"height":54,"xoffset":0,"yoffset":-2,"xadvance":41,"chnl":15,"x":44,"y":346,"page":0},{"id":282,"index":32,"char":"","width":29,"height":53,"xoffset":0,"yoffset":-2,"xadvance":29,"chnl":15,"x":48,"y":287,"page":0},{"id":381,"index":129,"char":"","width":31,"height":53,"xoffset":-1,"yoffset":-2,"xadvance":29,"chnl":15,"x":80,"y":181,"page":0},{"id":201,"index":30,"char":"","width":26,"height":53,"xoffset":2,"yoffset":-2,"xadvance":29,"chnl":15,"x":108,"y":120,"page":0},{"id":270,"index":25,"char":"","width":35,"height":53,"xoffset":2,"yoffset":-2,"xadvance":38,"chnl":15,"x":125,"y":59,"page":0},{"id":196,"index":9,"char":"","width":39,"height":53,"xoffset":-1,"yoffset":-2,"xadvance":36,"chnl":15,"x":159,"y":0,"page":0},{"id":214,"index":80,"char":"","width":40,"height":53,"xoffset":0,"yoffset":-2,"xadvance":41,"chnl":15,"x":82,"y":239,"page":0},{"id":220,"index":109,"char":"","width":35,"height":53,"xoffset":2,"yoffset":-2,"xadvance":39,"chnl":15,"x":116,"y":178,"page":0},{"id":81,"index":89,"char":"Q","width":43,"height":49,"xoffset":0,"yoffset":8,"xadvance":41,"chnl":15,"x":139,"y":117,"page":0},{"id":357,"index":411,"char":"","width":27,"height":49,"xoffset":-1,"yoffset":2,"xadvance":22,"chnl":15,"x":165,"y":58,"page":0},{"id":77,"index":68,"char":"M","width":48,"height":42,"xoffset":2,"yoffset":9,"xadvance":52,"chnl":15,"x":82,"y":297,"page":0},{"id":119,"index":449,"char":"w","width":47,"height":32,"xoffset":-1,"yoffset":19,"xadvance":45,"chnl":15,"x":127,"y":236,"page":0},{"id":367,"index":445,"char":"","width":29,"height":47,"xoffset":2,"yoffset":4,"xadvance":32,"chnl":15,"x":156,"y":171,"page":0},{"id":271,"index":283,"char":"","width":41,"height":47,"xoffset":0,"yoffset":5,"xadvance":36,"chnl":15,"x":187,"y":112,"page":0},{"id":109,"index":373,"char":"m","width":46,"height":33,"xoffset":2,"yoffset":18,"xadvance":49,"chnl":15,"x":197,"y":58,"page":0},{"id":283,"index":290,"char":"","width":30,"height":46,"xoffset":0,"yoffset":6,"xadvance":30,"chnl":15,"x":203,"y":0,"page":0},{"id":353,"index":403,"char":"","width":26,"height":46,"xoffset":-2,"yoffset":6,"xadvance":24,"chnl":15,"x":238,"y":0,"page":0},{"id":269,"index":275,"char":"","width":25,"height":46,"xoffset":0,"yoffset":6,"xadvance":25,"chnl":15,"x":78,"y":405,"page":0},{"id":225,"index":260,"char":"","width":28,"height":46,"xoffset":0,"yoffset":6,"xadvance":30,"chnl":15,"x":89,"y":344,"page":0},{"id":233,"index":288,"char":"","width":30,"height":46,"xoffset":0,"yoffset":6,"xadvance":30,"chnl":15,"x":78,"y":456,"page":0},{"id":250,"index":439,"char":"","width":29,"height":46,"xoffset":2,"yoffset":6,"xadvance":32,"chnl":15,"x":108,"y":395,"page":0},{"id":243,"index":383,"char":"","width":32,"height":46,"xoffset":0,"yoffset":6,"xadvance":32,"chnl":15,"x":122,"y":344,"page":0},{"id":98,"index":271,"char":"b","width":30,"height":45,"xoffset":2,"yoffset":6,"xadvance":32,"chnl":15,"x":135,"y":273,"page":0},{"id":100,"index":282,"char":"d","width":30,"height":45,"xoffset":0,"yoffset":6,"xadvance":32,"chnl":15,"x":113,"y":446,"page":0},{"id":102,"index":296,"char":"f","width":23,"height":45,"xoffset":-1,"yoffset":6,"xadvance":19,"chnl":15,"x":142,"y":395,"page":0},{"id":104,"index":346,"char":"h","width":29,"height":45,"xoffset":2,"yoffset":6,"xadvance":32,"chnl":15,"x":159,"y":323,"page":0},{"id":107,"index":364,"char":"k","width":28,"height":45,"xoffset":2,"yoffset":6,"xadvance":29,"chnl":15,"x":170,"y":273,"page":0},{"id":108,"index":367,"char":"l","width":11,"height":45,"xoffset":2,"yoffset":6,"xadvance":15,"chnl":15,"x":179,"y":223,"page":0},{"id":33,"index":842,"char":"!","width":12,"height":45,"xoffset":5,"yoffset":6,"xadvance":20,"chnl":15,"x":190,"y":164,"page":0},{"id":63,"index":845,"char":"?","width":26,"height":45,"xoffset":1,"yoffset":6,"xadvance":28,"chnl":15,"x":195,"y":214,"page":0},{"id":345,"index":398,"char":"","width":25,"height":45,"xoffset":-2,"yoffset":6,"xadvance":21,"chnl":15,"x":207,"y":164,"page":0},{"id":382,"index":462,"char":"","width":26,"height":45,"xoffset":-2,"yoffset":6,"xadvance":24,"chnl":15,"x":233,"y":96,"page":0},{"id":237,"index":351,"char":"","width":19,"height":45,"xoffset":-1,"yoffset":6,"xadvance":15,"chnl":15,"x":148,"y":445,"page":0},{"id":105,"index":349,"char":"i","width":12,"height":44,"xoffset":1,"yoffset":7,"xadvance":15,"chnl":15,"x":0,"y":468,"page":0},{"id":37,"index":1081,"char":"%","width":44,"height":44,"xoffset":0,"yoffset":8,"xadvance":44,"chnl":15,"x":17,"y":468,"page":0},{"id":38,"index":920,"char":"&","width":44,"height":44,"xoffset":-2,"yoffset":7,"xadvance":42,"chnl":15,"x":170,"y":373,"page":0},{"id":228,"index":263,"char":"","width":28,"height":44,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":193,"y":323,"page":0},{"id":246,"index":386,"char":"","width":32,"height":44,"xoffset":0,"yoffset":8,"xadvance":32,"chnl":15,"x":203,"y":264,"page":0},{"id":252,"index":442,"char":"","width":29,"height":44,"xoffset":2,"yoffset":8,"xadvance":32,"chnl":15,"x":226,"y":214,"page":0},{"id":67,"index":18,"char":"C","width":32,"height":43,"xoffset":0,"yoffset":8,"xadvance":32,"chnl":15,"x":237,"y":146,"page":0},{"id":71,"index":39,"char":"G","width":36,"height":43,"xoffset":0,"yoffset":8,"xadvance":38,"chnl":15,"x":264,"y":51,"page":0},{"id":74,"index":58,"char":"J","width":20,"height":43,"xoffset":-2,"yoffset":9,"xadvance":20,"chnl":15,"x":269,"y":0,"page":0},{"id":79,"index":75,"char":"O","width":40,"height":43,"xoffset":0,"yoffset":8,"xadvance":41,"chnl":15,"x":294,"y":0,"page":0},{"id":83,"index":94,"char":"S","width":29,"height":43,"xoffset":0,"yoffset":8,"xadvance":28,"chnl":15,"x":172,"y":422,"page":0},{"id":85,"index":104,"char":"U","width":35,"height":43,"xoffset":2,"yoffset":9,"xadvance":39,"chnl":15,"x":206,"y":422,"page":0},{"id":103,"index":336,"char":"g","width":30,"height":43,"xoffset":-1,"yoffset":18,"xadvance":28,"chnl":15,"x":219,"y":372,"page":0},{"id":112,"index":393,"char":"p","width":30,"height":43,"xoffset":2,"yoffset":18,"xadvance":32,"chnl":15,"x":226,"y":313,"page":0},{"id":113,"index":395,"char":"q","width":30,"height":43,"xoffset":0,"yoffset":18,"xadvance":32,"chnl":15,"x":240,"y":263,"page":0},{"id":121,"index":455,"char":"y","width":31,"height":43,"xoffset":-1,"yoffset":19,"xadvance":28,"chnl":15,"x":260,"y":194,"page":0},{"id":50,"index":1006,"char":"2","width":29,"height":43,"xoffset":1,"yoffset":8,"xadvance":30,"chnl":15,"x":274,"y":99,"page":0},{"id":51,"index":1007,"char":"3","width":29,"height":43,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":305,"y":48,"page":0},{"id":53,"index":1009,"char":"5","width":29,"height":43,"xoffset":1,"yoffset":9,"xadvance":30,"chnl":15,"x":246,"y":420,"page":0},{"id":54,"index":1010,"char":"6","width":30,"height":43,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":246,"y":468,"page":0},{"id":56,"index":1012,"char":"8","width":31,"height":43,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":254,"y":361,"page":0},{"id":57,"index":1013,"char":"9","width":30,"height":43,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":261,"y":311,"page":0},{"id":48,"index":1004,"char":"0","width":31,"height":43,"xoffset":0,"yoffset":8,"xadvance":30,"chnl":15,"x":280,"y":409,"page":0},{"id":956,"index":645,"char":"","width":34,"height":43,"xoffset":2,"yoffset":19,"xadvance":34,"chnl":15,"x":290,"y":359,"page":0},{"id":65,"index":4,"char":"A","width":39,"height":42,"xoffset":-1,"yoffset":9,"xadvance":36,"chnl":15,"x":172,"y":470,"page":0},{"id":66,"index":17,"char":"B","width":31,"height":42,"xoffset":2,"yoffset":9,"xadvance":34,"chnl":15,"x":274,"y":147,"page":0},{"id":68,"index":24,"char":"D","width":35,"height":42,"xoffset":2,"yoffset":9,"xadvance":38,"chnl":15,"x":308,"y":96,"page":0},{"id":69,"index":28,"char":"E","width":26,"height":42,"xoffset":2,"yoffset":9,"xadvance":29,"chnl":15,"x":281,"y":457,"page":0},{"id":70,"index":38,"char":"F","width":25,"height":42,"xoffset":2,"yoffset":9,"xadvance":28,"chnl":15,"x":216,"y":470,"page":0},{"id":72,"index":44,"char":"H","width":34,"height":42,"xoffset":2,"yoffset":9,"xadvance":38,"chnl":15,"x":312,"y":457,"page":0},{"id":73,"index":47,"char":"I","width":12,"height":42,"xoffset":2,"yoffset":9,"xadvance":16,"chnl":15,"x":316,"y":407,"page":0},{"id":75,"index":60,"char":"K","width":32,"height":42,"xoffset":2,"yoffset":9,"xadvance":33,"chnl":15,"x":275,"y":242,"page":0},{"id":76,"index":62,"char":"L","width":25,"height":42,"xoffset":2,"yoffset":9,"xadvance":25,"chnl":15,"x":296,"y":194,"page":0},{"id":78,"index":69,"char":"N","width":35,"height":42,"xoffset":2,"yoffset":9,"xadvance":40,"chnl":15,"x":310,"y":143,"page":0},{"id":80,"index":87,"char":"P","width":30,"height":42,"xoffset":2,"yoffset":9,"xadvance":32,"chnl":15,"x":296,"y":289,"page":0},{"id":82,"index":90,"char":"R","width":32,"height":42,"xoffset":2,"yoffset":9,"xadvance":34,"chnl":15,"x":312,"y":241,"page":0},{"id":84,"index":100,"char":"T","width":33,"height":42,"xoffset":-2,"yoffset":9,"xadvance":30,"chnl":15,"x":326,"y":190,"page":0},{"id":86,"index":115,"char":"V","width":38,"height":42,"xoffset":-1,"yoffset":9,"xadvance":35,"chnl":15,"x":329,"y":336,"page":0},{"id":88,"index":121,"char":"X","width":35,"height":42,"xoffset":-1,"yoffset":9,"xadvance":33,"chnl":15,"x":331,"y":288,"page":0},{"id":89,"index":122,"char":"Y","width":34,"height":42,"xoffset":-1,"yoffset":9,"xadvance":31,"chnl":15,"x":349,"y":237,"page":0},{"id":90,"index":127,"char":"Z","width":30,"height":42,"xoffset":-1,"yoffset":9,"xadvance":29,"chnl":15,"x":371,"y":284,"page":0},{"id":49,"index":1005,"char":"1","width":27,"height":42,"xoffset":2,"yoffset":9,"xadvance":30,"chnl":15,"x":333,"y":383,"page":0},{"id":52,"index":1008,"char":"4","width":32,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":351,"y":430,"page":0},{"id":55,"index":1011,"char":"7","width":30,"height":42,"xoffset":0,"yoffset":9,"xadvance":30,"chnl":15,"x":365,"y":383,"page":0},{"id":35,"index":951,"char":"#","width":32,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":372,"y":331,"page":0},{"id":116,"index":410,"char":"t","width":22,"height":40,"xoffset":-1,"yoffset":12,"xadvance":21,"chnl":15,"x":388,"y":430,"page":0},{"id":59,"index":854,"char":";","width":15,"height":40,"xoffset":0,"yoffset":19,"xadvance":17,"chnl":15,"x":400,"y":378,"page":0},{"id":95,"index":890,"char":"_","width":34,"height":9,"xoffset":-2,"yoffset":52,"xadvance":30,"chnl":15,"x":113,"y":496,"page":0},{"id":97,"index":258,"char":"a","width":28,"height":33,"xoffset":0,"yoffset":18,"xadvance":30,"chnl":15,"x":388,"y":475,"page":0},{"id":99,"index":272,"char":"c","width":25,"height":33,"xoffset":0,"yoffset":18,"xadvance":25,"chnl":15,"x":351,"y":477,"page":0},{"id":101,"index":286,"char":"e","width":30,"height":33,"xoffset":0,"yoffset":18,"xadvance":30,"chnl":15,"x":415,"y":423,"page":0},{"id":110,"index":374,"char":"n","width":29,"height":33,"xoffset":2,"yoffset":18,"xadvance":32,"chnl":15,"x":421,"y":461,"page":0},{"id":111,"index":381,"char":"o","width":32,"height":33,"xoffset":0,"yoffset":18,"xadvance":32,"chnl":15,"x":339,"y":0,"page":0},{"id":114,"index":396,"char":"r","width":21,"height":33,"xoffset":2,"yoffset":18,"xadvance":21,"chnl":15,"x":339,"y":38,"page":0},{"id":115,"index":400,"char":"s","width":24,"height":33,"xoffset":0,"yoffset":18,"xadvance":24,"chnl":15,"x":348,"y":76,"page":0},{"id":117,"index":437,"char":"u","width":29,"height":33,"xoffset":2,"yoffset":19,"xadvance":32,"chnl":15,"x":365,"y":38,"page":0},{"id":60,"index":1092,"char":"<","width":29,"height":33,"xoffset":0,"yoffset":16,"xadvance":30,"chnl":15,"x":376,"y":0,"page":0},{"id":62,"index":1093,"char":">","width":29,"height":33,"xoffset":1,"yoffset":16,"xadvance":30,"chnl":15,"x":350,"y":114,"page":0},{"id":118,"index":448,"char":"v","width":31,"height":32,"xoffset":-1,"yoffset":19,"xadvance":28,"chnl":15,"x":377,"y":76,"page":0},{"id":120,"index":454,"char":"x","width":30,"height":32,"xoffset":-1,"yoffset":19,"xadvance":28,"chnl":15,"x":399,"y":38,"page":0},{"id":122,"index":460,"char":"z","width":24,"height":32,"xoffset":0,"yoffset":19,"xadvance":24,"chnl":15,"x":410,"y":0,"page":0},{"id":58,"index":855,"char":":","width":12,"height":32,"xoffset":3,"yoffset":19,"xadvance":17,"chnl":15,"x":350,"y":152,"page":0},{"id":94,"index":916,"char":"^","width":32,"height":27,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":364,"y":189,"page":0},{"id":43,"index":1085,"char":"+","width":31,"height":32,"xoffset":0,"yoffset":16,"xadvance":30,"chnl":15,"x":367,"y":152,"page":0},{"id":126,"index":917,"char":"~","width":31,"height":16,"xoffset":0,"yoffset":13,"xadvance":30,"chnl":15,"x":384,"y":113,"page":0},{"id":61,"index":1089,"char":"=","width":29,"height":21,"xoffset":0,"yoffset":21,"xadvance":30,"chnl":15,"x":413,"y":75,"page":0},{"id":42,"index":910,"char":"*","width":26,"height":27,"xoffset":2,"yoffset":5,"xadvance":30,"chnl":15,"x":434,"y":37,"page":0},{"id":34,"index":919,"char":"\\"","width":22,"height":20,"xoffset":2,"yoffset":6,"xadvance":26,"chnl":15,"x":439,"y":0,"page":0},{"id":44,"index":853,"char":",","width":16,"height":21,"xoffset":-1,"yoffset":39,"xadvance":15,"chnl":15,"x":388,"y":221,"page":0},{"id":39,"index":918,"char":"\'","width":11,"height":20,"xoffset":2,"yoffset":6,"xadvance":14,"chnl":15,"x":333,"y":430,"page":0},{"id":96,"index":493,"char":"`","width":19,"height":17,"xoffset":-2,"yoffset":6,"xadvance":18,"chnl":15,"x":296,"y":336,"page":0},{"id":45,"index":882,"char":"-","width":19,"height":10,"xoffset":0,"yoffset":29,"xadvance":18,"chnl":15,"x":364,"y":221,"page":0},{"id":46,"index":856,"char":".","width":13,"height":13,"xoffset":2,"yoffset":38,"xadvance":16,"chnl":15,"x":152,"y":495,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":47,"xadvance":14,"chnl":15,"x":190,"y":214,"page":0}],"info":{"face":"Calibrib","size":60,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":73,"base":47,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t){t.exports=JSON.parse('{"pages":["Calibrii.png"],"chars":[{"id":124,"index":878,"char":"|","width":19,"height":57,"xoffset":5,"yoffset":5,"xadvance":28,"chnl":15,"x":0,"y":0,"page":0},{"id":102,"index":296,"char":"f","width":34,"height":56,"xoffset":-8,"yoffset":6,"xadvance":18,"chnl":15,"x":0,"y":62,"page":0},{"id":40,"index":894,"char":"(","width":21,"height":56,"xoffset":1,"yoffset":5,"xadvance":18,"chnl":15,"x":24,"y":0,"page":0},{"id":41,"index":895,"char":")","width":21,"height":56,"xoffset":-3,"yoffset":5,"xadvance":18,"chnl":15,"x":0,"y":123,"page":0},{"id":36,"index":936,"char":"$","width":32,"height":56,"xoffset":-1,"yoffset":2,"xadvance":30,"chnl":15,"x":0,"y":184,"page":0},{"id":253,"index":457,"char":"","width":31,"height":56,"xoffset":-1,"yoffset":6,"xadvance":27,"chnl":15,"x":26,"y":123,"page":0},{"id":123,"index":898,"char":"{","width":23,"height":55,"xoffset":1,"yoffset":6,"xadvance":19,"chnl":15,"x":39,"y":61,"page":0},{"id":125,"index":899,"char":"}","width":24,"height":55,"xoffset":-3,"yoffset":6,"xadvance":19,"chnl":15,"x":50,"y":0,"page":0},{"id":47,"index":876,"char":"/","width":37,"height":55,"xoffset":-6,"yoffset":4,"xadvance":23,"chnl":15,"x":0,"y":245,"page":0},{"id":87,"index":116,"char":"W","width":54,"height":42,"xoffset":4,"yoffset":9,"xadvance":53,"chnl":15,"x":37,"y":184,"page":0},{"id":106,"index":361,"char":"j","width":25,"height":54,"xoffset":-8,"yoffset":8,"xadvance":14,"chnl":15,"x":62,"y":121,"page":0},{"id":91,"index":896,"char":"[","width":24,"height":54,"xoffset":-1,"yoffset":6,"xadvance":18,"chnl":15,"x":67,"y":60,"page":0},{"id":93,"index":897,"char":"]","width":24,"height":54,"xoffset":-4,"yoffset":6,"xadvance":18,"chnl":15,"x":79,"y":0,"page":0},{"id":64,"index":923,"char":"@","width":54,"height":50,"xoffset":-2,"yoffset":8,"xadvance":54,"chnl":15,"x":92,"y":119,"page":0},{"id":352,"index":97,"char":"","width":34,"height":54,"xoffset":-2,"yoffset":-2,"xadvance":27,"chnl":15,"x":96,"y":59,"page":0},{"id":268,"index":21,"char":"","width":36,"height":54,"xoffset":1,"yoffset":-2,"xadvance":31,"chnl":15,"x":108,"y":0,"page":0},{"id":344,"index":92,"char":"","width":34,"height":54,"xoffset":0,"yoffset":-2,"xadvance":33,"chnl":15,"x":135,"y":59,"page":0},{"id":221,"index":124,"char":"","width":31,"height":54,"xoffset":4,"yoffset":-2,"xadvance":29,"chnl":15,"x":149,"y":0,"page":0},{"id":193,"index":6,"char":"","width":38,"height":54,"xoffset":-4,"yoffset":-2,"xadvance":35,"chnl":15,"x":0,"y":305,"page":0},{"id":205,"index":49,"char":"","width":26,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":15,"chnl":15,"x":42,"y":231,"page":0},{"id":218,"index":106,"char":"","width":38,"height":54,"xoffset":3,"yoffset":-2,"xadvance":38,"chnl":15,"x":0,"y":364,"page":0},{"id":356,"index":101,"char":"","width":37,"height":54,"xoffset":-1,"yoffset":-2,"xadvance":29,"chnl":15,"x":0,"y":423,"page":0},{"id":211,"index":77,"char":"","width":39,"height":54,"xoffset":1,"yoffset":-2,"xadvance":39,"chnl":15,"x":42,"y":423,"page":0},{"id":282,"index":32,"char":"","width":34,"height":53,"xoffset":0,"yoffset":-2,"xadvance":29,"chnl":15,"x":43,"y":290,"page":0},{"id":381,"index":129,"char":"","width":35,"height":53,"xoffset":-3,"yoffset":-2,"xadvance":28,"chnl":15,"x":73,"y":231,"page":0},{"id":201,"index":30,"char":"","width":32,"height":53,"xoffset":1,"yoffset":-2,"xadvance":29,"chnl":15,"x":43,"y":348,"page":0},{"id":270,"index":25,"char":"","width":37,"height":53,"xoffset":1,"yoffset":-2,"xadvance":37,"chnl":15,"x":80,"y":348,"page":0},{"id":77,"index":68,"char":"M","width":52,"height":42,"xoffset":0,"yoffset":9,"xadvance":51,"chnl":15,"x":96,"y":174,"page":0},{"id":196,"index":9,"char":"","width":38,"height":52,"xoffset":-4,"yoffset":-1,"xadvance":35,"chnl":15,"x":82,"y":289,"page":0},{"id":214,"index":80,"char":"","width":39,"height":52,"xoffset":1,"yoffset":-1,"xadvance":39,"chnl":15,"x":113,"y":221,"page":0},{"id":220,"index":109,"char":"","width":38,"height":52,"xoffset":3,"yoffset":-1,"xadvance":38,"chnl":15,"x":153,"y":118,"page":0},{"id":81,"index":89,"char":"Q","width":39,"height":48,"xoffset":1,"yoffset":9,"xadvance":40,"chnl":15,"x":174,"y":59,"page":0},{"id":367,"index":445,"char":"","width":30,"height":47,"xoffset":1,"yoffset":5,"xadvance":31,"chnl":15,"x":185,"y":0,"page":0},{"id":109,"index":373,"char":"m","width":46,"height":33,"xoffset":0,"yoffset":19,"xadvance":47,"chnl":15,"x":153,"y":175,"page":0},{"id":283,"index":290,"char":"","width":30,"height":46,"xoffset":0,"yoffset":6,"xadvance":29,"chnl":15,"x":196,"y":112,"page":0},{"id":353,"index":403,"char":"","width":29,"height":46,"xoffset":-2,"yoffset":6,"xadvance":23,"chnl":15,"x":218,"y":52,"page":0},{"id":269,"index":275,"char":"","width":29,"height":46,"xoffset":0,"yoffset":6,"xadvance":25,"chnl":15,"x":220,"y":0,"page":0},{"id":225,"index":260,"char":"","width":31,"height":46,"xoffset":0,"yoffset":6,"xadvance":31,"chnl":15,"x":86,"y":406,"page":0},{"id":233,"index":288,"char":"","width":29,"height":46,"xoffset":0,"yoffset":6,"xadvance":29,"chnl":15,"x":86,"y":457,"page":0},{"id":250,"index":439,"char":"","width":30,"height":46,"xoffset":1,"yoffset":6,"xadvance":31,"chnl":15,"x":120,"y":457,"page":0},{"id":243,"index":383,"char":"","width":30,"height":46,"xoffset":0,"yoffset":6,"xadvance":31,"chnl":15,"x":122,"y":346,"page":0},{"id":98,"index":271,"char":"b","width":31,"height":45,"xoffset":0,"yoffset":6,"xadvance":31,"chnl":15,"x":122,"y":397,"page":0},{"id":100,"index":282,"char":"d","width":33,"height":45,"xoffset":0,"yoffset":6,"xadvance":31,"chnl":15,"x":155,"y":447,"page":0},{"id":104,"index":346,"char":"h","width":30,"height":45,"xoffset":0,"yoffset":6,"xadvance":31,"chnl":15,"x":125,"y":278,"page":0},{"id":107,"index":364,"char":"k","width":30,"height":45,"xoffset":0,"yoffset":6,"xadvance":27,"chnl":15,"x":157,"y":213,"page":0},{"id":108,"index":367,"char":"l","width":17,"height":45,"xoffset":0,"yoffset":6,"xadvance":14,"chnl":15,"x":157,"y":328,"page":0},{"id":33,"index":842,"char":"!","width":17,"height":45,"xoffset":3,"yoffset":7,"xadvance":20,"chnl":15,"x":160,"y":263,"page":0},{"id":63,"index":845,"char":"?","width":25,"height":45,"xoffset":5,"yoffset":7,"xadvance":28,"chnl":15,"x":158,"y":378,"page":0},{"id":345,"index":398,"char":"","width":29,"height":45,"xoffset":-3,"yoffset":6,"xadvance":21,"chnl":15,"x":179,"y":313,"page":0},{"id":382,"index":462,"char":"","width":29,"height":45,"xoffset":-2,"yoffset":6,"xadvance":24,"chnl":15,"x":182,"y":263,"page":0},{"id":237,"index":351,"char":"","width":22,"height":45,"xoffset":-2,"yoffset":6,"xadvance":14,"chnl":15,"x":192,"y":213,"page":0},{"id":271,"index":283,"char":"","width":42,"height":45,"xoffset":0,"yoffset":6,"xadvance":33,"chnl":15,"x":204,"y":163,"page":0},{"id":357,"index":411,"char":"","width":26,"height":45,"xoffset":1,"yoffset":6,"xadvance":21,"chnl":15,"x":231,"y":103,"page":0},{"id":37,"index":1081,"char":"%","width":43,"height":44,"xoffset":1,"yoffset":8,"xadvance":43,"chnl":15,"x":252,"y":51,"page":0},{"id":38,"index":920,"char":"&","width":40,"height":44,"xoffset":-2,"yoffset":7,"xadvance":41,"chnl":15,"x":254,"y":0,"page":0},{"id":67,"index":18,"char":"C","width":34,"height":43,"xoffset":1,"yoffset":9,"xadvance":31,"chnl":15,"x":299,"y":0,"page":0},{"id":71,"index":39,"char":"G","width":38,"height":43,"xoffset":1,"yoffset":9,"xadvance":38,"chnl":15,"x":188,"y":363,"page":0},{"id":74,"index":58,"char":"J","width":25,"height":43,"xoffset":-4,"yoffset":9,"xadvance":19,"chnl":15,"x":213,"y":313,"page":0},{"id":79,"index":75,"char":"O","width":39,"height":43,"xoffset":1,"yoffset":9,"xadvance":39,"chnl":15,"x":216,"y":263,"page":0},{"id":83,"index":94,"char":"S","width":31,"height":43,"xoffset":-2,"yoffset":9,"xadvance":27,"chnl":15,"x":219,"y":213,"page":0},{"id":85,"index":104,"char":"U","width":38,"height":43,"xoffset":3,"yoffset":9,"xadvance":38,"chnl":15,"x":251,"y":153,"page":0},{"id":103,"index":336,"char":"g","width":31,"height":43,"xoffset":0,"yoffset":19,"xadvance":31,"chnl":15,"x":262,"y":100,"page":0},{"id":105,"index":349,"char":"i","width":17,"height":43,"xoffset":0,"yoffset":8,"xadvance":14,"chnl":15,"x":255,"y":201,"page":0},{"id":112,"index":393,"char":"p","width":33,"height":43,"xoffset":-2,"yoffset":19,"xadvance":31,"chnl":15,"x":193,"y":411,"page":0},{"id":113,"index":395,"char":"q","width":31,"height":43,"xoffset":0,"yoffset":19,"xadvance":31,"chnl":15,"x":193,"y":459,"page":0},{"id":119,"index":449,"char":"w","width":43,"height":32,"xoffset":2,"yoffset":19,"xadvance":43,"chnl":15,"x":229,"y":459,"page":0},{"id":121,"index":455,"char":"y","width":31,"height":43,"xoffset":-1,"yoffset":19,"xadvance":27,"chnl":15,"x":231,"y":361,"page":0},{"id":51,"index":1007,"char":"3","width":31,"height":43,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":243,"y":311,"page":0},{"id":54,"index":1010,"char":"6","width":31,"height":43,"xoffset":1,"yoffset":9,"xadvance":30,"chnl":15,"x":231,"y":409,"page":0},{"id":56,"index":1012,"char":"8","width":33,"height":43,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":260,"y":249,"page":0},{"id":57,"index":1013,"char":"9","width":32,"height":43,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":277,"y":201,"page":0},{"id":48,"index":1004,"char":"0","width":32,"height":43,"xoffset":0,"yoffset":9,"xadvance":30,"chnl":15,"x":294,"y":148,"page":0},{"id":228,"index":263,"char":"","width":31,"height":43,"xoffset":0,"yoffset":9,"xadvance":31,"chnl":15,"x":298,"y":100,"page":0},{"id":246,"index":386,"char":"","width":30,"height":43,"xoffset":0,"yoffset":9,"xadvance":31,"chnl":15,"x":300,"y":48,"page":0},{"id":252,"index":442,"char":"","width":30,"height":43,"xoffset":1,"yoffset":9,"xadvance":31,"chnl":15,"x":267,"y":359,"page":0},{"id":956,"index":645,"char":"","width":34,"height":43,"xoffset":-2,"yoffset":19,"xadvance":32,"chnl":15,"x":267,"y":407,"page":0},{"id":65,"index":4,"char":"A","width":37,"height":42,"xoffset":-4,"yoffset":9,"xadvance":35,"chnl":15,"x":279,"y":297,"page":0},{"id":66,"index":17,"char":"B","width":32,"height":42,"xoffset":1,"yoffset":9,"xadvance":33,"chnl":15,"x":298,"y":249,"page":0},{"id":68,"index":24,"char":"D","width":37,"height":42,"xoffset":1,"yoffset":9,"xadvance":37,"chnl":15,"x":314,"y":196,"page":0},{"id":69,"index":28,"char":"E","width":32,"height":42,"xoffset":1,"yoffset":9,"xadvance":29,"chnl":15,"x":331,"y":148,"page":0},{"id":70,"index":38,"char":"F","width":31,"height":42,"xoffset":0,"yoffset":9,"xadvance":28,"chnl":15,"x":334,"y":96,"page":0},{"id":72,"index":44,"char":"H","width":39,"height":42,"xoffset":0,"yoffset":9,"xadvance":37,"chnl":15,"x":335,"y":48,"page":0},{"id":73,"index":47,"char":"I","width":16,"height":42,"xoffset":0,"yoffset":9,"xadvance":15,"chnl":15,"x":338,"y":0,"page":0},{"id":75,"index":60,"char":"K","width":35,"height":42,"xoffset":0,"yoffset":9,"xadvance":31,"chnl":15,"x":359,"y":0,"page":0},{"id":76,"index":62,"char":"L","width":24,"height":42,"xoffset":1,"yoffset":9,"xadvance":25,"chnl":15,"x":302,"y":344,"page":0},{"id":78,"index":69,"char":"N","width":40,"height":42,"xoffset":0,"yoffset":9,"xadvance":39,"chnl":15,"x":321,"y":296,"page":0},{"id":80,"index":87,"char":"P","width":33,"height":42,"xoffset":0,"yoffset":9,"xadvance":31,"chnl":15,"x":335,"y":243,"page":0},{"id":82,"index":90,"char":"R","width":33,"height":42,"xoffset":0,"yoffset":9,"xadvance":33,"chnl":15,"x":356,"y":195,"page":0},{"id":84,"index":100,"char":"T","width":33,"height":42,"xoffset":3,"yoffset":9,"xadvance":29,"chnl":15,"x":368,"y":143,"page":0},{"id":86,"index":115,"char":"V","width":36,"height":42,"xoffset":4,"yoffset":9,"xadvance":34,"chnl":15,"x":370,"y":95,"page":0},{"id":88,"index":121,"char":"X","width":39,"height":42,"xoffset":-3,"yoffset":9,"xadvance":31,"chnl":15,"x":379,"y":47,"page":0},{"id":89,"index":122,"char":"Y","width":31,"height":42,"xoffset":4,"yoffset":9,"xadvance":29,"chnl":15,"x":399,"y":0,"page":0},{"id":90,"index":127,"char":"Z","width":35,"height":42,"xoffset":-3,"yoffset":9,"xadvance":28,"chnl":15,"x":277,"y":455,"page":0},{"id":49,"index":1005,"char":"1","width":26,"height":42,"xoffset":1,"yoffset":9,"xadvance":30,"chnl":15,"x":306,"y":391,"page":0},{"id":50,"index":1006,"char":"2","width":31,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":331,"y":343,"page":0},{"id":52,"index":1008,"char":"4","width":32,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":366,"y":290,"page":0},{"id":53,"index":1009,"char":"5","width":32,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":373,"y":242,"page":0},{"id":55,"index":1011,"char":"7","width":31,"height":42,"xoffset":3,"yoffset":9,"xadvance":30,"chnl":15,"x":394,"y":190,"page":0},{"id":35,"index":951,"char":"#","width":35,"height":42,"xoffset":-1,"yoffset":9,"xadvance":30,"chnl":15,"x":406,"y":142,"page":0},{"id":116,"index":410,"char":"t","width":21,"height":40,"xoffset":1,"yoffset":12,"xadvance":20,"chnl":15,"x":411,"y":94,"page":0},{"id":59,"index":854,"char":";","width":20,"height":39,"xoffset":-4,"yoffset":20,"xadvance":16,"chnl":15,"x":423,"y":47,"page":0},{"id":95,"index":890,"char":"_","width":34,"height":8,"xoffset":-7,"yoffset":54,"xadvance":30,"chnl":15,"x":43,"y":406,"page":0},{"id":97,"index":258,"char":"a","width":31,"height":33,"xoffset":0,"yoffset":19,"xadvance":31,"chnl":15,"x":435,"y":0,"page":0},{"id":99,"index":272,"char":"c","width":27,"height":33,"xoffset":0,"yoffset":19,"xadvance":25,"chnl":15,"x":437,"y":91,"page":0},{"id":101,"index":286,"char":"e","width":29,"height":33,"xoffset":0,"yoffset":19,"xadvance":29,"chnl":15,"x":448,"y":38,"page":0},{"id":110,"index":374,"char":"n","width":30,"height":33,"xoffset":0,"yoffset":19,"xadvance":31,"chnl":15,"x":471,"y":0,"page":0},{"id":111,"index":381,"char":"o","width":30,"height":33,"xoffset":0,"yoffset":19,"xadvance":31,"chnl":15,"x":317,"y":438,"page":0},{"id":114,"index":396,"char":"r","width":24,"height":33,"xoffset":0,"yoffset":19,"xadvance":21,"chnl":15,"x":317,"y":476,"page":0},{"id":115,"index":400,"char":"s","width":26,"height":33,"xoffset":-2,"yoffset":19,"xadvance":23,"chnl":15,"x":346,"y":476,"page":0},{"id":117,"index":437,"char":"u","width":30,"height":33,"xoffset":1,"yoffset":19,"xadvance":31,"chnl":15,"x":337,"y":390,"page":0},{"id":118,"index":448,"char":"v","width":28,"height":32,"xoffset":2,"yoffset":19,"xadvance":27,"chnl":15,"x":352,"y":428,"page":0},{"id":120,"index":454,"char":"x","width":32,"height":32,"xoffset":-3,"yoffset":19,"xadvance":26,"chnl":15,"x":377,"y":465,"page":0},{"id":122,"index":460,"char":"z","width":27,"height":32,"xoffset":-2,"yoffset":19,"xadvance":24,"chnl":15,"x":367,"y":337,"page":0},{"id":60,"index":1092,"char":"<","width":32,"height":32,"xoffset":1,"yoffset":16,"xadvance":30,"chnl":15,"x":372,"y":374,"page":0},{"id":62,"index":1093,"char":">","width":32,"height":32,"xoffset":-1,"yoffset":16,"xadvance":30,"chnl":15,"x":399,"y":337,"page":0},{"id":58,"index":855,"char":":","width":15,"height":31,"xoffset":1,"yoffset":20,"xadvance":16,"chnl":15,"x":403,"y":289,"page":0},{"id":43,"index":1085,"char":"+","width":30,"height":31,"xoffset":1,"yoffset":16,"xadvance":30,"chnl":15,"x":410,"y":237,"page":0},{"id":61,"index":1089,"char":"=","width":31,"height":19,"xoffset":0,"yoffset":22,"xadvance":30,"chnl":15,"x":0,"y":482,"page":0},{"id":126,"index":917,"char":"~","width":31,"height":15,"xoffset":2,"yoffset":14,"xadvance":30,"chnl":15,"x":155,"y":497,"page":0},{"id":94,"index":916,"char":"^","width":28,"height":26,"xoffset":2,"yoffset":9,"xadvance":30,"chnl":15,"x":36,"y":482,"page":0},{"id":42,"index":910,"char":"*","width":26,"height":26,"xoffset":5,"yoffset":6,"xadvance":30,"chnl":15,"x":430,"y":189,"page":0},{"id":34,"index":919,"char":"\\"","width":22,"height":19,"xoffset":5,"yoffset":6,"xadvance":24,"chnl":15,"x":446,"y":129,"page":0},{"id":96,"index":493,"char":"`","width":22,"height":17,"xoffset":-2,"yoffset":6,"xadvance":17,"chnl":15,"x":469,"y":76,"page":0},{"id":39,"index":918,"char":"\'","width":11,"height":19,"xoffset":5,"yoffset":6,"xadvance":13,"chnl":15,"x":69,"y":482,"page":0},{"id":44,"index":853,"char":",","width":16,"height":19,"xoffset":-5,"yoffset":40,"xadvance":15,"chnl":15,"x":482,"y":38,"page":0},{"id":45,"index":882,"char":"-","width":19,"height":8,"xoffset":0,"yoffset":30,"xadvance":18,"chnl":15,"x":482,"y":62,"page":0},{"id":46,"index":856,"char":".","width":11,"height":11,"xoffset":0,"yoffset":40,"xadvance":15,"chnl":15,"x":125,"y":328,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":47,"xadvance":14,"chnl":15,"x":37,"y":231,"page":0}],"info":{"face":"Calibrii","size":60,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":73,"base":47,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/Calibri9ccb2f06c77aecd0818854d9361cf7fc.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/Calibrib33802a5cdc9af918fb02e1412b32b728.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/Calibrii70a08fe6ab73c975f9e24d9256df4e8b.png"},function(t){t.exports=JSON.parse('{"pages":["OpenSans.png"],"chars":[{"id":124,"index":95,"char":"|","width":7,"height":54,"xoffset":10,"yoffset":2,"xadvance":28,"chnl":15,"x":0,"y":0,"page":0},{"id":253,"index":191,"char":"","width":29,"height":54,"xoffset":-2,"yoffset":2,"xadvance":25,"chnl":15,"x":0,"y":59,"page":0},{"id":106,"index":77,"char":"j","width":15,"height":53,"xoffset":-5,"yoffset":3,"xadvance":13,"chnl":15,"x":12,"y":0,"page":0},{"id":282,"index":220,"char":"","width":24,"height":51,"xoffset":3,"yoffset":-7,"xadvance":28,"chnl":15,"x":32,"y":0,"page":0},{"id":352,"index":290,"char":"","width":26,"height":51,"xoffset":1,"yoffset":-7,"xadvance":27,"chnl":15,"x":0,"y":118,"page":0},{"id":268,"index":206,"char":"","width":31,"height":51,"xoffset":1,"yoffset":-7,"xadvance":32,"chnl":15,"x":0,"y":174,"page":0},{"id":344,"index":282,"char":"","width":29,"height":51,"xoffset":3,"yoffset":-7,"xadvance":31,"chnl":15,"x":31,"y":118,"page":0},{"id":381,"index":319,"char":"","width":29,"height":51,"xoffset":0,"yoffset":-7,"xadvance":29,"chnl":15,"x":34,"y":56,"page":0},{"id":221,"index":159,"char":"","width":32,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":28,"chnl":15,"x":61,"y":0,"page":0},{"id":193,"index":131,"char":"","width":36,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":32,"chnl":15,"x":0,"y":230,"page":0},{"id":205,"index":920,"char":"","width":14,"height":51,"xoffset":2,"yoffset":-7,"xadvance":14,"chnl":15,"x":36,"y":174,"page":0},{"id":201,"index":139,"char":"","width":24,"height":51,"xoffset":3,"yoffset":-7,"xadvance":28,"chnl":15,"x":0,"y":286,"page":0},{"id":218,"index":156,"char":"","width":31,"height":51,"xoffset":3,"yoffset":-7,"xadvance":36,"chnl":15,"x":0,"y":342,"page":0},{"id":270,"index":208,"char":"","width":32,"height":51,"xoffset":3,"yoffset":-7,"xadvance":36,"chnl":15,"x":29,"y":286,"page":0},{"id":356,"index":294,"char":"","width":31,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":28,"chnl":15,"x":41,"y":230,"page":0},{"id":211,"index":149,"char":"","width":37,"height":51,"xoffset":1,"yoffset":-7,"xadvance":39,"chnl":15,"x":55,"y":174,"page":0},{"id":74,"index":45,"char":"J","width":17,"height":49,"xoffset":-6,"yoffset":4,"xadvance":13,"chnl":15,"x":65,"y":112,"page":0},{"id":81,"index":52,"char":"Q","width":37,"height":49,"xoffset":1,"yoffset":4,"xadvance":39,"chnl":15,"x":68,"y":56,"page":0},{"id":87,"index":58,"char":"W","width":49,"height":40,"xoffset":-1,"yoffset":4,"xadvance":46,"chnl":15,"x":98,"y":0,"page":0},{"id":196,"index":134,"char":"","width":36,"height":49,"xoffset":-2,"yoffset":-5,"xadvance":32,"chnl":15,"x":87,"y":110,"page":0},{"id":214,"index":152,"char":"","width":37,"height":49,"xoffset":1,"yoffset":-5,"xadvance":39,"chnl":15,"x":110,"y":45,"page":0},{"id":220,"index":158,"char":"","width":31,"height":49,"xoffset":3,"yoffset":-5,"xadvance":36,"chnl":15,"x":0,"y":398,"page":0},{"id":40,"index":11,"char":"(","width":15,"height":48,"xoffset":0,"yoffset":4,"xadvance":15,"chnl":15,"x":0,"y":452,"page":0},{"id":41,"index":12,"char":")","width":15,"height":48,"xoffset":-1,"yoffset":4,"xadvance":15,"chnl":15,"x":20,"y":452,"page":0},{"id":91,"index":62,"char":"[","width":15,"height":48,"xoffset":2,"yoffset":4,"xadvance":16,"chnl":15,"x":36,"y":342,"page":0},{"id":93,"index":64,"char":"]","width":15,"height":48,"xoffset":-1,"yoffset":4,"xadvance":16,"chnl":15,"x":36,"y":395,"page":0},{"id":123,"index":94,"char":"{","width":20,"height":48,"xoffset":-1,"yoffset":4,"xadvance":19,"chnl":15,"x":40,"y":448,"page":0},{"id":125,"index":96,"char":"}","width":20,"height":48,"xoffset":0,"yoffset":4,"xadvance":19,"chnl":15,"x":56,"y":342,"page":0},{"id":36,"index":7,"char":"$","width":26,"height":45,"xoffset":1,"yoffset":2,"xadvance":29,"chnl":15,"x":56,"y":395,"page":0},{"id":367,"index":305,"char":"","width":26,"height":45,"xoffset":2,"yoffset":-1,"xadvance":31,"chnl":15,"x":66,"y":286,"page":0},{"id":64,"index":35,"char":"@","width":43,"height":44,"xoffset":1,"yoffset":4,"xadvance":45,"chnl":15,"x":77,"y":230,"page":0},{"id":103,"index":74,"char":"g","width":29,"height":43,"xoffset":-1,"yoffset":13,"xadvance":27,"chnl":15,"x":81,"y":336,"page":0},{"id":112,"index":83,"char":"p","width":28,"height":43,"xoffset":2,"yoffset":13,"xadvance":31,"chnl":15,"x":97,"y":279,"page":0},{"id":113,"index":84,"char":"q","width":28,"height":43,"xoffset":1,"yoffset":13,"xadvance":31,"chnl":15,"x":97,"y":164,"page":0},{"id":121,"index":92,"char":"y","width":29,"height":43,"xoffset":-2,"yoffset":13,"xadvance":25,"chnl":15,"x":128,"y":99,"page":0},{"id":283,"index":221,"char":"","width":27,"height":43,"xoffset":1,"yoffset":2,"xadvance":28,"chnl":15,"x":125,"y":212,"page":0},{"id":353,"index":291,"char":"","width":23,"height":43,"xoffset":1,"yoffset":2,"xadvance":24,"chnl":15,"x":130,"y":147,"page":0},{"id":269,"index":207,"char":"","width":24,"height":43,"xoffset":1,"yoffset":2,"xadvance":24,"chnl":15,"x":65,"y":445,"page":0},{"id":225,"index":163,"char":"","width":25,"height":43,"xoffset":0,"yoffset":2,"xadvance":28,"chnl":15,"x":87,"y":384,"page":0},{"id":233,"index":171,"char":"","width":27,"height":43,"xoffset":1,"yoffset":2,"xadvance":28,"chnl":15,"x":115,"y":327,"page":0},{"id":250,"index":188,"char":"","width":26,"height":43,"xoffset":2,"yoffset":2,"xadvance":31,"chnl":15,"x":130,"y":260,"page":0},{"id":243,"index":181,"char":"","width":29,"height":43,"xoffset":1,"yoffset":2,"xadvance":30,"chnl":15,"x":157,"y":195,"page":0},{"id":956,"index":393,"char":"","width":26,"height":43,"xoffset":2,"yoffset":13,"xadvance":31,"chnl":15,"x":158,"y":147,"page":0},{"id":98,"index":69,"char":"b","width":28,"height":42,"xoffset":2,"yoffset":2,"xadvance":31,"chnl":15,"x":94,"y":432,"page":0},{"id":100,"index":71,"char":"d","width":28,"height":42,"xoffset":1,"yoffset":2,"xadvance":31,"chnl":15,"x":117,"y":375,"page":0},{"id":102,"index":73,"char":"f","width":22,"height":42,"xoffset":-1,"yoffset":2,"xadvance":17,"chnl":15,"x":147,"y":308,"page":0},{"id":104,"index":75,"char":"h","width":26,"height":42,"xoffset":2,"yoffset":2,"xadvance":31,"chnl":15,"x":161,"y":243,"page":0},{"id":107,"index":78,"char":"k","width":25,"height":42,"xoffset":2,"yoffset":2,"xadvance":26,"chnl":15,"x":152,"y":0,"page":0},{"id":108,"index":79,"char":"l","width":8,"height":42,"xoffset":2,"yoffset":2,"xadvance":13,"chnl":15,"x":152,"y":47,"page":0},{"id":109,"index":80,"char":"m","width":42,"height":31,"xoffset":2,"yoffset":13,"xadvance":47,"chnl":15,"x":94,"y":479,"page":0},{"id":119,"index":90,"char":"w","width":42,"height":31,"xoffset":-1,"yoffset":13,"xadvance":39,"chnl":15,"x":162,"y":94,"page":0},{"id":345,"index":283,"char":"","width":21,"height":42,"xoffset":1,"yoffset":2,"xadvance":20,"chnl":15,"x":165,"y":47,"page":0},{"id":382,"index":320,"char":"","width":23,"height":42,"xoffset":0,"yoffset":2,"xadvance":23,"chnl":15,"x":182,"y":0,"page":0},{"id":237,"index":175,"char":"","width":14,"height":42,"xoffset":2,"yoffset":2,"xadvance":13,"chnl":15,"x":191,"y":47,"page":0},{"id":271,"index":209,"char":"","width":36,"height":42,"xoffset":1,"yoffset":2,"xadvance":31,"chnl":15,"x":189,"y":130,"page":0},{"id":357,"index":295,"char":"","width":21,"height":42,"xoffset":-1,"yoffset":2,"xadvance":18,"chnl":15,"x":191,"y":177,"page":0},{"id":67,"index":38,"char":"C","width":31,"height":41,"xoffset":1,"yoffset":4,"xadvance":32,"chnl":15,"x":127,"y":422,"page":0},{"id":71,"index":42,"char":"G","width":34,"height":41,"xoffset":1,"yoffset":4,"xadvance":36,"chnl":15,"x":141,"y":468,"page":0},{"id":79,"index":50,"char":"O","width":37,"height":41,"xoffset":1,"yoffset":4,"xadvance":39,"chnl":15,"x":150,"y":355,"page":0},{"id":83,"index":54,"char":"S","width":26,"height":41,"xoffset":1,"yoffset":4,"xadvance":27,"chnl":15,"x":174,"y":290,"page":0},{"id":105,"index":76,"char":"i","width":9,"height":41,"xoffset":2,"yoffset":3,"xadvance":13,"chnl":15,"x":192,"y":224,"page":0},{"id":51,"index":22,"char":"3","width":27,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":163,"y":401,"page":0},{"id":54,"index":25,"char":"6","width":27,"height":41,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":192,"y":336,"page":0},{"id":56,"index":27,"char":"8","width":27,"height":41,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":205,"y":270,"page":0},{"id":57,"index":28,"char":"9","width":27,"height":41,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":206,"y":224,"page":0},{"id":48,"index":19,"char":"0","width":28,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":217,"y":177,"page":0},{"id":63,"index":34,"char":"?","width":23,"height":41,"xoffset":-1,"yoffset":4,"xadvance":21,"chnl":15,"x":180,"y":447,"page":0},{"id":37,"index":8,"char":"%","width":40,"height":41,"xoffset":1,"yoffset":4,"xadvance":41,"chnl":15,"x":195,"y":382,"page":0},{"id":38,"index":9,"char":"&","width":38,"height":41,"xoffset":1,"yoffset":4,"xadvance":36,"chnl":15,"x":224,"y":316,"page":0},{"id":228,"index":166,"char":"","width":25,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":237,"y":270,"page":0},{"id":246,"index":184,"char":"","width":29,"height":41,"xoffset":1,"yoffset":4,"xadvance":30,"chnl":15,"x":238,"y":223,"page":0},{"id":252,"index":190,"char":"","width":26,"height":41,"xoffset":2,"yoffset":4,"xadvance":31,"chnl":15,"x":208,"y":428,"page":0},{"id":65,"index":36,"char":"A","width":36,"height":40,"xoffset":-2,"yoffset":4,"xadvance":32,"chnl":15,"x":239,"y":428,"page":0},{"id":66,"index":37,"char":"B","width":29,"height":40,"xoffset":3,"yoffset":4,"xadvance":32,"chnl":15,"x":240,"y":362,"page":0},{"id":68,"index":39,"char":"D","width":32,"height":40,"xoffset":3,"yoffset":4,"xadvance":36,"chnl":15,"x":267,"y":269,"page":0},{"id":69,"index":40,"char":"E","width":24,"height":40,"xoffset":3,"yoffset":4,"xadvance":28,"chnl":15,"x":267,"y":314,"page":0},{"id":70,"index":41,"char":"F","width":24,"height":40,"xoffset":3,"yoffset":4,"xadvance":26,"chnl":15,"x":274,"y":359,"page":0},{"id":72,"index":43,"char":"H","width":31,"height":40,"xoffset":3,"yoffset":4,"xadvance":37,"chnl":15,"x":296,"y":314,"page":0},{"id":73,"index":918,"char":"I","width":8,"height":40,"xoffset":3,"yoffset":4,"xadvance":14,"chnl":15,"x":280,"y":404,"page":0},{"id":75,"index":46,"char":"K","width":30,"height":40,"xoffset":3,"yoffset":4,"xadvance":31,"chnl":15,"x":280,"y":449,"page":0},{"id":76,"index":47,"char":"L","width":24,"height":40,"xoffset":3,"yoffset":4,"xadvance":26,"chnl":15,"x":293,"y":404,"page":0},{"id":77,"index":48,"char":"M","width":39,"height":40,"xoffset":3,"yoffset":4,"xadvance":45,"chnl":15,"x":303,"y":359,"page":0},{"id":78,"index":49,"char":"N","width":32,"height":40,"xoffset":3,"yoffset":4,"xadvance":38,"chnl":15,"x":315,"y":449,"page":0},{"id":80,"index":51,"char":"P","width":27,"height":40,"xoffset":3,"yoffset":4,"xadvance":30,"chnl":15,"x":322,"y":404,"page":0},{"id":82,"index":53,"char":"R","width":29,"height":40,"xoffset":3,"yoffset":4,"xadvance":31,"chnl":15,"x":352,"y":449,"page":0},{"id":84,"index":55,"char":"T","width":31,"height":40,"xoffset":-2,"yoffset":4,"xadvance":28,"chnl":15,"x":210,"y":0,"page":0},{"id":85,"index":56,"char":"U","width":31,"height":40,"xoffset":3,"yoffset":4,"xadvance":36,"chnl":15,"x":210,"y":45,"page":0},{"id":86,"index":57,"char":"V","width":34,"height":40,"xoffset":-2,"yoffset":4,"xadvance":30,"chnl":15,"x":230,"y":90,"page":0},{"id":88,"index":59,"char":"X","width":32,"height":40,"xoffset":-2,"yoffset":4,"xadvance":29,"chnl":15,"x":250,"y":135,"page":0},{"id":89,"index":60,"char":"Y","width":32,"height":40,"xoffset":-2,"yoffset":4,"xadvance":28,"chnl":15,"x":272,"y":180,"page":0},{"id":90,"index":61,"char":"Z","width":29,"height":40,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":304,"y":225,"page":0},{"id":49,"index":20,"char":"1","width":17,"height":40,"xoffset":3,"yoffset":4,"xadvance":29,"chnl":15,"x":332,"y":270,"page":0},{"id":50,"index":21,"char":"2","width":27,"height":40,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":347,"y":315,"page":0},{"id":52,"index":23,"char":"4","width":31,"height":40,"xoffset":-1,"yoffset":4,"xadvance":29,"chnl":15,"x":354,"y":360,"page":0},{"id":53,"index":24,"char":"5","width":26,"height":40,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":386,"y":405,"page":0},{"id":55,"index":26,"char":"7","width":28,"height":40,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":386,"y":450,"page":0},{"id":33,"index":4,"char":"!","width":10,"height":40,"xoffset":2,"yoffset":4,"xadvance":13,"chnl":15,"x":246,"y":0,"page":0},{"id":47,"index":18,"char":"/","width":21,"height":40,"xoffset":-2,"yoffset":4,"xadvance":18,"chnl":15,"x":246,"y":45,"page":0},{"id":35,"index":6,"char":"#","width":34,"height":40,"xoffset":-1,"yoffset":4,"xadvance":32,"chnl":15,"x":269,"y":90,"page":0},{"id":59,"index":30,"char":";","width":12,"height":38,"xoffset":0,"yoffset":13,"xadvance":13,"chnl":15,"x":250,"y":180,"page":0},{"id":116,"index":87,"char":"t","width":20,"height":37,"xoffset":-1,"yoffset":7,"xadvance":18,"chnl":15,"x":304,"y":270,"page":0},{"id":97,"index":68,"char":"a","width":25,"height":32,"xoffset":0,"yoffset":13,"xadvance":28,"chnl":15,"x":272,"y":225,"page":0},{"id":99,"index":70,"char":"c","width":23,"height":32,"xoffset":1,"yoffset":13,"xadvance":24,"chnl":15,"x":354,"y":405,"page":0},{"id":101,"index":72,"char":"e","width":27,"height":32,"xoffset":1,"yoffset":13,"xadvance":28,"chnl":15,"x":239,"y":473,"page":0},{"id":111,"index":82,"char":"o","width":29,"height":32,"xoffset":1,"yoffset":13,"xadvance":30,"chnl":15,"x":287,"y":135,"page":0},{"id":115,"index":86,"char":"s","width":23,"height":32,"xoffset":1,"yoffset":13,"xadvance":24,"chnl":15,"x":208,"y":474,"page":0},{"id":58,"index":29,"char":":","width":10,"height":32,"xoffset":2,"yoffset":13,"xadvance":13,"chnl":15,"x":332,"y":315,"page":0},{"id":110,"index":81,"char":"n","width":26,"height":31,"xoffset":2,"yoffset":13,"xadvance":31,"chnl":15,"x":309,"y":172,"page":0},{"id":114,"index":85,"char":"r","width":19,"height":31,"xoffset":2,"yoffset":13,"xadvance":20,"chnl":15,"x":338,"y":208,"page":0},{"id":117,"index":88,"char":"u","width":26,"height":31,"xoffset":2,"yoffset":13,"xadvance":31,"chnl":15,"x":261,"y":0,"page":0},{"id":118,"index":89,"char":"v","width":29,"height":31,"xoffset":-2,"yoffset":13,"xadvance":25,"chnl":15,"x":354,"y":244,"page":0},{"id":120,"index":91,"char":"x","width":28,"height":31,"xoffset":-1,"yoffset":13,"xadvance":26,"chnl":15,"x":379,"y":280,"page":0},{"id":122,"index":93,"char":"z","width":23,"height":31,"xoffset":0,"yoffset":13,"xadvance":23,"chnl":15,"x":379,"y":316,"page":0},{"id":94,"index":65,"char":"^","width":29,"height":27,"xoffset":-1,"yoffset":4,"xadvance":27,"chnl":15,"x":390,"y":352,"page":0},{"id":60,"index":31,"char":"<","width":27,"height":28,"xoffset":1,"yoffset":10,"xadvance":29,"chnl":15,"x":407,"y":316,"page":0},{"id":62,"index":33,"char":">","width":27,"height":28,"xoffset":1,"yoffset":10,"xadvance":29,"chnl":15,"x":417,"y":384,"page":0},{"id":43,"index":14,"char":"+","width":27,"height":28,"xoffset":1,"yoffset":10,"xadvance":29,"chnl":15,"x":424,"y":349,"page":0},{"id":61,"index":32,"char":"=","width":27,"height":17,"xoffset":1,"yoffset":16,"xadvance":29,"chnl":15,"x":271,"y":494,"page":0},{"id":95,"index":66,"char":"_","width":27,"height":7,"xoffset":-2,"yoffset":44,"xadvance":22,"chnl":15,"x":240,"y":407,"page":0},{"id":126,"index":97,"char":"~","width":27,"height":10,"xoffset":1,"yoffset":19,"xadvance":29,"chnl":15,"x":40,"y":501,"page":0},{"id":42,"index":13,"char":"*","width":27,"height":26,"xoffset":0,"yoffset":2,"xadvance":28,"chnl":15,"x":417,"y":417,"page":0},{"id":34,"index":5,"char":"\\"","width":18,"height":17,"xoffset":1,"yoffset":4,"xadvance":20,"chnl":15,"x":180,"y":493,"page":0},{"id":39,"index":10,"char":"\'","width":9,"height":17,"xoffset":1,"yoffset":4,"xadvance":11,"chnl":15,"x":338,"y":244,"page":0},{"id":44,"index":15,"char":",","width":11,"height":16,"xoffset":0,"yoffset":34,"xadvance":12,"chnl":15,"x":163,"y":447,"page":0},{"id":45,"index":16,"char":"-","width":16,"height":8,"xoffset":0,"yoffset":25,"xadvance":16,"chnl":15,"x":130,"y":195,"page":0},{"id":96,"index":67,"char":"`","width":14,"height":12,"xoffset":8,"yoffset":2,"xadvance":29,"chnl":15,"x":205,"y":316,"page":0},{"id":46,"index":17,"char":".","width":10,"height":11,"xoffset":2,"yoffset":34,"xadvance":13,"chnl":15,"x":224,"y":362,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":40,"xadvance":13,"chnl":15,"x":152,"y":94,"page":0}],"info":{"face":"OpenSans-Regular","size":50,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":53,"base":40,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t){t.exports=JSON.parse('{"pages":["OpenSansb.png"],"chars":[{"id":106,"index":77,"char":"j","width":19,"height":54,"xoffset":-5,"yoffset":2,"xadvance":15,"chnl":15,"x":0,"y":0,"page":0},{"id":253,"index":191,"char":"","width":32,"height":54,"xoffset":-2,"yoffset":2,"xadvance":28,"chnl":15,"x":0,"y":59,"page":0},{"id":124,"index":95,"char":"|","width":9,"height":53,"xoffset":9,"yoffset":2,"xadvance":28,"chnl":15,"x":24,"y":0,"page":0},{"id":87,"index":58,"char":"W","width":52,"height":40,"xoffset":-2,"yoffset":4,"xadvance":48,"chnl":15,"x":0,"y":118,"page":0},{"id":282,"index":220,"char":"","width":25,"height":51,"xoffset":2,"yoffset":-7,"xadvance":28,"chnl":15,"x":37,"y":58,"page":0},{"id":352,"index":290,"char":"","width":27,"height":51,"xoffset":0,"yoffset":-7,"xadvance":28,"chnl":15,"x":38,"y":0,"page":0},{"id":268,"index":206,"char":"","width":31,"height":51,"xoffset":1,"yoffset":-7,"xadvance":32,"chnl":15,"x":0,"y":163,"page":0},{"id":344,"index":282,"char":"","width":33,"height":51,"xoffset":2,"yoffset":-7,"xadvance":33,"chnl":15,"x":0,"y":219,"page":0},{"id":381,"index":319,"char":"","width":31,"height":51,"xoffset":-1,"yoffset":-7,"xadvance":29,"chnl":15,"x":36,"y":163,"page":0},{"id":221,"index":159,"char":"","width":35,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":31,"chnl":15,"x":67,"y":56,"page":0},{"id":193,"index":131,"char":"","width":38,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":34,"chnl":15,"x":70,"y":0,"page":0},{"id":205,"index":920,"char":"","width":18,"height":51,"xoffset":2,"yoffset":-7,"xadvance":17,"chnl":15,"x":0,"y":275,"page":0},{"id":201,"index":139,"char":"","width":25,"height":51,"xoffset":2,"yoffset":-7,"xadvance":28,"chnl":15,"x":0,"y":331,"page":0},{"id":218,"index":156,"char":"","width":33,"height":51,"xoffset":2,"yoffset":-7,"xadvance":38,"chnl":15,"x":23,"y":275,"page":0},{"id":270,"index":208,"char":"","width":34,"height":51,"xoffset":2,"yoffset":-7,"xadvance":37,"chnl":15,"x":38,"y":219,"page":0},{"id":356,"index":294,"char":"","width":31,"height":51,"xoffset":-1,"yoffset":-7,"xadvance":29,"chnl":15,"x":72,"y":112,"page":0},{"id":211,"index":149,"char":"","width":38,"height":51,"xoffset":1,"yoffset":-7,"xadvance":40,"chnl":15,"x":107,"y":56,"page":0},{"id":74,"index":45,"char":"J","width":20,"height":50,"xoffset":-6,"yoffset":4,"xadvance":17,"chnl":15,"x":113,"y":0,"page":0},{"id":196,"index":134,"char":"","width":38,"height":50,"xoffset":-2,"yoffset":-6,"xadvance":34,"chnl":15,"x":138,"y":0,"page":0},{"id":214,"index":152,"char":"","width":38,"height":50,"xoffset":1,"yoffset":-6,"xadvance":40,"chnl":15,"x":0,"y":387,"page":0},{"id":220,"index":158,"char":"","width":33,"height":50,"xoffset":2,"yoffset":-6,"xadvance":38,"chnl":15,"x":30,"y":331,"page":0},{"id":81,"index":52,"char":"Q","width":38,"height":49,"xoffset":1,"yoffset":4,"xadvance":40,"chnl":15,"x":61,"y":275,"page":0},{"id":40,"index":11,"char":"(","width":17,"height":48,"xoffset":0,"yoffset":4,"xadvance":17,"chnl":15,"x":0,"y":442,"page":0},{"id":41,"index":12,"char":")","width":17,"height":48,"xoffset":-1,"yoffset":4,"xadvance":17,"chnl":15,"x":22,"y":442,"page":0},{"id":91,"index":62,"char":"[","width":16,"height":48,"xoffset":1,"yoffset":4,"xadvance":17,"chnl":15,"x":43,"y":386,"page":0},{"id":93,"index":64,"char":"]","width":16,"height":48,"xoffset":-1,"yoffset":4,"xadvance":17,"chnl":15,"x":44,"y":439,"page":0},{"id":123,"index":94,"char":"{","width":21,"height":48,"xoffset":-1,"yoffset":4,"xadvance":20,"chnl":15,"x":64,"y":386,"page":0},{"id":125,"index":96,"char":"}","width":21,"height":48,"xoffset":0,"yoffset":4,"xadvance":20,"chnl":15,"x":68,"y":329,"page":0},{"id":119,"index":90,"char":"w","width":46,"height":31,"xoffset":-2,"yoffset":13,"xadvance":43,"chnl":15,"x":72,"y":168,"page":0},{"id":37,"index":8,"char":"%","width":46,"height":41,"xoffset":0,"yoffset":4,"xadvance":45,"chnl":15,"x":108,"y":112,"page":0},{"id":367,"index":305,"char":"","width":29,"height":46,"xoffset":2,"yoffset":-2,"xadvance":33,"chnl":15,"x":150,"y":55,"page":0},{"id":109,"index":80,"char":"m","width":45,"height":32,"xoffset":2,"yoffset":12,"xadvance":49,"chnl":15,"x":181,"y":0,"page":0},{"id":36,"index":7,"char":"$","width":29,"height":45,"xoffset":0,"yoffset":2,"xadvance":29,"chnl":15,"x":77,"y":204,"page":0},{"id":103,"index":74,"char":"g","width":32,"height":44,"xoffset":-2,"yoffset":12,"xadvance":28,"chnl":15,"x":65,"y":439,"page":0},{"id":112,"index":83,"char":"p","width":29,"height":44,"xoffset":2,"yoffset":12,"xadvance":32,"chnl":15,"x":90,"y":382,"page":0},{"id":113,"index":84,"char":"q","width":30,"height":44,"xoffset":0,"yoffset":12,"xadvance":32,"chnl":15,"x":94,"y":329,"page":0},{"id":64,"index":35,"char":"@","width":44,"height":44,"xoffset":0,"yoffset":4,"xadvance":45,"chnl":15,"x":104,"y":254,"page":0},{"id":121,"index":92,"char":"y","width":32,"height":43,"xoffset":-2,"yoffset":13,"xadvance":28,"chnl":15,"x":111,"y":204,"page":0},{"id":283,"index":221,"char":"","width":29,"height":43,"xoffset":0,"yoffset":2,"xadvance":30,"chnl":15,"x":148,"y":158,"page":0},{"id":353,"index":291,"char":"","width":25,"height":43,"xoffset":0,"yoffset":2,"xadvance":25,"chnl":15,"x":148,"y":206,"page":0},{"id":269,"index":207,"char":"","width":28,"height":43,"xoffset":0,"yoffset":2,"xadvance":26,"chnl":15,"x":159,"y":106,"page":0},{"id":225,"index":163,"char":"","width":28,"height":43,"xoffset":0,"yoffset":2,"xadvance":30,"chnl":15,"x":184,"y":37,"page":0},{"id":233,"index":171,"char":"","width":29,"height":43,"xoffset":0,"yoffset":2,"xadvance":30,"chnl":15,"x":102,"y":431,"page":0},{"id":250,"index":188,"char":"","width":29,"height":43,"xoffset":2,"yoffset":2,"xadvance":33,"chnl":15,"x":124,"y":378,"page":0},{"id":357,"index":295,"char":"","width":26,"height":43,"xoffset":-1,"yoffset":2,"xadvance":22,"chnl":15,"x":129,"y":303,"page":0},{"id":243,"index":181,"char":"","width":30,"height":43,"xoffset":0,"yoffset":2,"xadvance":31,"chnl":15,"x":153,"y":254,"page":0},{"id":956,"index":393,"char":"","width":29,"height":43,"xoffset":2,"yoffset":13,"xadvance":33,"chnl":15,"x":178,"y":206,"page":0},{"id":77,"index":48,"char":"M","width":42,"height":40,"xoffset":2,"yoffset":4,"xadvance":47,"chnl":15,"x":182,"y":154,"page":0},{"id":98,"index":69,"char":"b","width":29,"height":42,"xoffset":2,"yoffset":2,"xadvance":32,"chnl":15,"x":192,"y":85,"page":0},{"id":100,"index":71,"char":"d","width":30,"height":42,"xoffset":0,"yoffset":2,"xadvance":32,"chnl":15,"x":217,"y":37,"page":0},{"id":102,"index":73,"char":"f","width":25,"height":42,"xoffset":-1,"yoffset":2,"xadvance":19,"chnl":15,"x":226,"y":84,"page":0},{"id":104,"index":75,"char":"h","width":29,"height":42,"xoffset":2,"yoffset":2,"xadvance":33,"chnl":15,"x":252,"y":0,"page":0},{"id":105,"index":76,"char":"i","width":12,"height":42,"xoffset":2,"yoffset":2,"xadvance":15,"chnl":15,"x":136,"y":426,"page":0},{"id":107,"index":78,"char":"k","width":31,"height":42,"xoffset":2,"yoffset":2,"xadvance":31,"chnl":15,"x":153,"y":426,"page":0},{"id":108,"index":79,"char":"l","width":11,"height":42,"xoffset":2,"yoffset":2,"xadvance":15,"chnl":15,"x":158,"y":351,"page":0},{"id":345,"index":283,"char":"","width":25,"height":42,"xoffset":0,"yoffset":2,"xadvance":23,"chnl":15,"x":160,"y":302,"page":0},{"id":382,"index":320,"char":"","width":26,"height":42,"xoffset":-1,"yoffset":2,"xadvance":24,"chnl":15,"x":188,"y":254,"page":0},{"id":237,"index":175,"char":"","width":18,"height":42,"xoffset":2,"yoffset":2,"xadvance":15,"chnl":15,"x":212,"y":199,"page":0},{"id":271,"index":209,"char":"","width":40,"height":42,"xoffset":0,"yoffset":2,"xadvance":32,"chnl":15,"x":229,"y":131,"page":0},{"id":228,"index":166,"char":"","width":28,"height":42,"xoffset":0,"yoffset":2,"xadvance":30,"chnl":15,"x":256,"y":47,"page":0},{"id":246,"index":184,"char":"","width":30,"height":42,"xoffset":0,"yoffset":2,"xadvance":31,"chnl":15,"x":286,"y":0,"page":0},{"id":252,"index":190,"char":"","width":29,"height":42,"xoffset":2,"yoffset":2,"xadvance":33,"chnl":15,"x":174,"y":349,"page":0},{"id":67,"index":38,"char":"C","width":31,"height":41,"xoffset":1,"yoffset":4,"xadvance":32,"chnl":15,"x":190,"y":301,"page":0},{"id":71,"index":42,"char":"G","width":33,"height":41,"xoffset":1,"yoffset":4,"xadvance":36,"chnl":15,"x":219,"y":246,"page":0},{"id":79,"index":50,"char":"O","width":38,"height":41,"xoffset":1,"yoffset":4,"xadvance":40,"chnl":15,"x":235,"y":178,"page":0},{"id":83,"index":54,"char":"S","width":27,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":274,"y":94,"page":0},{"id":51,"index":22,"char":"3","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":289,"y":47,"page":0},{"id":54,"index":25,"char":"6","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":321,"y":0,"page":0},{"id":56,"index":27,"char":"8","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":189,"y":396,"page":0},{"id":57,"index":28,"char":"9","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":208,"y":347,"page":0},{"id":48,"index":19,"char":"0","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":226,"y":292,"page":0},{"id":63,"index":34,"char":"?","width":27,"height":41,"xoffset":-2,"yoffset":4,"xadvance":24,"chnl":15,"x":257,"y":224,"page":0},{"id":38,"index":9,"char":"&","width":39,"height":41,"xoffset":0,"yoffset":4,"xadvance":38,"chnl":15,"x":278,"y":140,"page":0},{"id":65,"index":36,"char":"A","width":38,"height":40,"xoffset":-2,"yoffset":4,"xadvance":34,"chnl":15,"x":306,"y":93,"page":0},{"id":66,"index":37,"char":"B","width":30,"height":40,"xoffset":2,"yoffset":4,"xadvance":34,"chnl":15,"x":323,"y":46,"page":0},{"id":68,"index":39,"char":"D","width":34,"height":40,"xoffset":2,"yoffset":4,"xadvance":37,"chnl":15,"x":355,"y":0,"page":0},{"id":69,"index":40,"char":"E","width":25,"height":40,"xoffset":2,"yoffset":4,"xadvance":28,"chnl":15,"x":189,"y":442,"page":0},{"id":70,"index":41,"char":"F","width":24,"height":40,"xoffset":2,"yoffset":4,"xadvance":27,"chnl":15,"x":219,"y":442,"page":0},{"id":72,"index":43,"char":"H","width":33,"height":40,"xoffset":2,"yoffset":4,"xadvance":38,"chnl":15,"x":223,"y":393,"page":0},{"id":73,"index":918,"char":"I","width":12,"height":40,"xoffset":2,"yoffset":4,"xadvance":17,"chnl":15,"x":123,"y":158,"page":0},{"id":75,"index":46,"char":"K","width":33,"height":40,"xoffset":2,"yoffset":4,"xadvance":33,"chnl":15,"x":242,"y":338,"page":0},{"id":76,"index":47,"char":"L","width":26,"height":40,"xoffset":2,"yoffset":4,"xadvance":28,"chnl":15,"x":260,"y":270,"page":0},{"id":78,"index":49,"char":"N","width":36,"height":40,"xoffset":2,"yoffset":4,"xadvance":41,"chnl":15,"x":289,"y":186,"page":0},{"id":80,"index":51,"char":"P","width":29,"height":40,"xoffset":2,"yoffset":4,"xadvance":31,"chnl":15,"x":322,"y":138,"page":0},{"id":82,"index":53,"char":"R","width":33,"height":40,"xoffset":2,"yoffset":4,"xadvance":33,"chnl":15,"x":349,"y":91,"page":0},{"id":84,"index":55,"char":"T","width":31,"height":40,"xoffset":-1,"yoffset":4,"xadvance":29,"chnl":15,"x":358,"y":45,"page":0},{"id":85,"index":56,"char":"U","width":33,"height":40,"xoffset":2,"yoffset":4,"xadvance":38,"chnl":15,"x":248,"y":438,"page":0},{"id":86,"index":57,"char":"V","width":36,"height":40,"xoffset":-2,"yoffset":4,"xadvance":32,"chnl":15,"x":261,"y":383,"page":0},{"id":88,"index":59,"char":"X","width":37,"height":40,"xoffset":-2,"yoffset":4,"xadvance":33,"chnl":15,"x":280,"y":315,"page":0},{"id":89,"index":60,"char":"Y","width":35,"height":40,"xoffset":-2,"yoffset":4,"xadvance":31,"chnl":15,"x":291,"y":231,"page":0},{"id":90,"index":61,"char":"Z","width":31,"height":40,"xoffset":-1,"yoffset":4,"xadvance":29,"chnl":15,"x":330,"y":183,"page":0},{"id":49,"index":20,"char":"1","width":22,"height":40,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":356,"y":136,"page":0},{"id":50,"index":21,"char":"2","width":29,"height":40,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":286,"y":428,"page":0},{"id":52,"index":23,"char":"4","width":31,"height":40,"xoffset":-1,"yoffset":4,"xadvance":29,"chnl":15,"x":302,"y":360,"page":0},{"id":53,"index":24,"char":"5","width":28,"height":40,"xoffset":0,"yoffset":4,"xadvance":29,"chnl":15,"x":322,"y":276,"page":0},{"id":55,"index":26,"char":"7","width":30,"height":40,"xoffset":-1,"yoffset":4,"xadvance":29,"chnl":15,"x":331,"y":228,"page":0},{"id":33,"index":4,"char":"!","width":13,"height":40,"xoffset":1,"yoffset":4,"xadvance":14,"chnl":15,"x":320,"y":405,"page":0},{"id":47,"index":18,"char":"/","width":24,"height":40,"xoffset":-2,"yoffset":4,"xadvance":21,"chnl":15,"x":320,"y":450,"page":0},{"id":35,"index":6,"char":"#","width":34,"height":40,"xoffset":-1,"yoffset":4,"xadvance":32,"chnl":15,"x":338,"y":321,"page":0},{"id":116,"index":87,"char":"t","width":23,"height":38,"xoffset":-1,"yoffset":7,"xadvance":22,"chnl":15,"x":286,"y":473,"page":0},{"id":59,"index":30,"char":";","width":14,"height":38,"xoffset":0,"yoffset":12,"xadvance":15,"chnl":15,"x":136,"y":473,"page":0},{"id":97,"index":68,"char":"a","width":28,"height":32,"xoffset":0,"yoffset":12,"xadvance":30,"chnl":15,"x":102,"y":479,"page":0},{"id":99,"index":70,"char":"c","width":26,"height":32,"xoffset":0,"yoffset":12,"xadvance":26,"chnl":15,"x":291,"y":276,"page":0},{"id":101,"index":72,"char":"e","width":29,"height":32,"xoffset":0,"yoffset":12,"xadvance":30,"chnl":15,"x":155,"y":473,"page":0},{"id":110,"index":81,"char":"n","width":29,"height":32,"xoffset":2,"yoffset":12,"xadvance":33,"chnl":15,"x":355,"y":273,"page":0},{"id":111,"index":82,"char":"o","width":30,"height":32,"xoffset":0,"yoffset":12,"xadvance":31,"chnl":15,"x":366,"y":181,"page":0},{"id":114,"index":85,"char":"r","width":22,"height":32,"xoffset":2,"yoffset":12,"xadvance":23,"chnl":15,"x":383,"y":136,"page":0},{"id":115,"index":86,"char":"s","width":25,"height":32,"xoffset":0,"yoffset":12,"xadvance":25,"chnl":15,"x":387,"y":90,"page":0},{"id":117,"index":88,"char":"u","width":29,"height":32,"xoffset":2,"yoffset":13,"xadvance":33,"chnl":15,"x":366,"y":218,"page":0},{"id":118,"index":89,"char":"v","width":32,"height":31,"xoffset":-2,"yoffset":13,"xadvance":28,"chnl":15,"x":394,"y":0,"page":0},{"id":120,"index":91,"char":"x","width":32,"height":31,"xoffset":-2,"yoffset":13,"xadvance":29,"chnl":15,"x":394,"y":36,"page":0},{"id":58,"index":29,"char":":","width":13,"height":32,"xoffset":1,"yoffset":12,"xadvance":14,"chnl":15,"x":256,"y":94,"page":0},{"id":122,"index":93,"char":"z","width":26,"height":31,"xoffset":-1,"yoffset":13,"xadvance":24,"chnl":15,"x":338,"y":366,"page":0},{"id":60,"index":31,"char":"<","width":28,"height":30,"xoffset":0,"yoffset":9,"xadvance":29,"chnl":15,"x":338,"y":402,"page":0},{"id":62,"index":33,"char":">","width":28,"height":30,"xoffset":0,"yoffset":9,"xadvance":29,"chnl":15,"x":369,"y":366,"page":0},{"id":94,"index":65,"char":"^","width":30,"height":27,"xoffset":-2,"yoffset":4,"xadvance":27,"chnl":15,"x":248,"y":483,"page":0},{"id":43,"index":14,"char":"+","width":28,"height":28,"xoffset":0,"yoffset":10,"xadvance":29,"chnl":15,"x":377,"y":310,"page":0},{"id":61,"index":32,"char":"=","width":28,"height":19,"xoffset":0,"yoffset":15,"xadvance":29,"chnl":15,"x":65,"y":488,"page":0},{"id":126,"index":97,"char":"~","width":28,"height":12,"xoffset":0,"yoffset":18,"xadvance":29,"chnl":15,"x":192,"y":132,"page":0},{"id":42,"index":13,"char":"*","width":28,"height":27,"xoffset":0,"yoffset":2,"xadvance":27,"chnl":15,"x":389,"y":255,"page":0},{"id":95,"index":66,"char":"_","width":25,"height":7,"xoffset":-2,"yoffset":44,"xadvance":21,"chnl":15,"x":158,"y":398,"page":0},{"id":34,"index":5,"char":"\\"","width":21,"height":17,"xoffset":1,"yoffset":4,"xadvance":24,"chnl":15,"x":129,"y":351,"page":0},{"id":96,"index":67,"char":"`","width":18,"height":12,"xoffset":6,"yoffset":2,"xadvance":30,"chnl":15,"x":366,"y":255,"page":0},{"id":39,"index":10,"char":"\'","width":11,"height":17,"xoffset":1,"yoffset":4,"xadvance":13,"chnl":15,"x":302,"y":405,"page":0},{"id":45,"index":16,"char":"-","width":17,"height":10,"xoffset":-1,"yoffset":24,"xadvance":16,"chnl":15,"x":235,"y":224,"page":0},{"id":44,"index":15,"char":",","width":14,"height":16,"xoffset":0,"yoffset":34,"xadvance":15,"chnl":15,"x":260,"y":315,"page":0},{"id":46,"index":17,"char":".","width":13,"height":12,"xoffset":1,"yoffset":32,"xadvance":14,"chnl":15,"x":280,"y":360,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":40,"xadvance":13,"chnl":15,"x":150,"y":106,"page":0}],"info":{"face":"OpenSans-Bold","size":50,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":53,"base":40,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t){t.exports=JSON.parse('{"pages":["OpenSansi.png"],"chars":[{"id":102,"index":73,"char":"f","width":32,"height":54,"xoffset":-8,"yoffset":2,"xadvance":16,"chnl":15,"x":0,"y":0,"page":0},{"id":124,"index":95,"char":"|","width":7,"height":54,"xoffset":11,"yoffset":2,"xadvance":28,"chnl":15,"x":0,"y":59,"page":0},{"id":253,"index":191,"char":"","width":34,"height":54,"xoffset":-7,"yoffset":2,"xadvance":23,"chnl":15,"x":0,"y":118,"page":0},{"id":106,"index":77,"char":"j","width":24,"height":53,"xoffset":-8,"yoffset":3,"xadvance":13,"chnl":15,"x":12,"y":59,"page":0},{"id":282,"index":220,"char":"","width":29,"height":51,"xoffset":0,"yoffset":-7,"xadvance":26,"chnl":15,"x":37,"y":0,"page":0},{"id":352,"index":290,"char":"","width":29,"height":51,"xoffset":-1,"yoffset":-7,"xadvance":25,"chnl":15,"x":0,"y":177,"page":0},{"id":268,"index":206,"char":"","width":32,"height":51,"xoffset":2,"yoffset":-7,"xadvance":29,"chnl":15,"x":0,"y":233,"page":0},{"id":344,"index":282,"char":"","width":30,"height":51,"xoffset":0,"yoffset":-7,"xadvance":28,"chnl":15,"x":34,"y":177,"page":0},{"id":381,"index":319,"char":"","width":33,"height":51,"xoffset":-2,"yoffset":-7,"xadvance":27,"chnl":15,"x":39,"y":117,"page":0},{"id":221,"index":159,"char":"","width":29,"height":51,"xoffset":3,"yoffset":-7,"xadvance":25,"chnl":15,"x":41,"y":56,"page":0},{"id":193,"index":131,"char":"","width":34,"height":51,"xoffset":-5,"yoffset":-7,"xadvance":28,"chnl":15,"x":71,"y":0,"page":0},{"id":205,"index":920,"char":"","width":22,"height":51,"xoffset":0,"yoffset":-7,"xadvance":14,"chnl":15,"x":75,"y":56,"page":0},{"id":201,"index":139,"char":"","width":29,"height":51,"xoffset":0,"yoffset":-7,"xadvance":26,"chnl":15,"x":0,"y":289,"page":0},{"id":218,"index":156,"char":"","width":34,"height":51,"xoffset":2,"yoffset":-7,"xadvance":34,"chnl":15,"x":0,"y":345,"page":0},{"id":270,"index":208,"char":"","width":34,"height":51,"xoffset":0,"yoffset":-7,"xadvance":33,"chnl":15,"x":34,"y":289,"page":0},{"id":356,"index":294,"char":"","width":29,"height":51,"xoffset":3,"yoffset":-7,"xadvance":25,"chnl":15,"x":37,"y":233,"page":0},{"id":211,"index":149,"char":"","width":35,"height":51,"xoffset":2,"yoffset":-7,"xadvance":36,"chnl":15,"x":69,"y":173,"page":0},{"id":74,"index":45,"char":"J","width":26,"height":49,"xoffset":-10,"yoffset":4,"xadvance":13,"chnl":15,"x":71,"y":229,"page":0},{"id":81,"index":52,"char":"Q","width":35,"height":49,"xoffset":2,"yoffset":4,"xadvance":36,"chnl":15,"x":77,"y":112,"page":0},{"id":196,"index":134,"char":"","width":33,"height":49,"xoffset":-5,"yoffset":-5,"xadvance":28,"chnl":15,"x":102,"y":56,"page":0},{"id":214,"index":152,"char":"","width":35,"height":49,"xoffset":2,"yoffset":-5,"xadvance":36,"chnl":15,"x":110,"y":0,"page":0},{"id":220,"index":158,"char":"","width":34,"height":49,"xoffset":2,"yoffset":-5,"xadvance":34,"chnl":15,"x":0,"y":401,"page":0},{"id":40,"index":11,"char":"(","width":20,"height":48,"xoffset":0,"yoffset":4,"xadvance":14,"chnl":15,"x":0,"y":455,"page":0},{"id":41,"index":12,"char":")","width":20,"height":48,"xoffset":-6,"yoffset":4,"xadvance":14,"chnl":15,"x":25,"y":455,"page":0},{"id":91,"index":62,"char":"[","width":23,"height":48,"xoffset":-2,"yoffset":4,"xadvance":14,"chnl":15,"x":39,"y":345,"page":0},{"id":93,"index":64,"char":"]","width":23,"height":48,"xoffset":-6,"yoffset":4,"xadvance":14,"chnl":15,"x":39,"y":398,"page":0},{"id":123,"index":94,"char":"{","width":23,"height":48,"xoffset":-1,"yoffset":4,"xadvance":17,"chnl":15,"x":50,"y":451,"page":0},{"id":125,"index":96,"char":"}","width":23,"height":48,"xoffset":-4,"yoffset":4,"xadvance":17,"chnl":15,"x":67,"y":345,"page":0},{"id":87,"index":58,"char":"W","width":45,"height":40,"xoffset":3,"yoffset":4,"xadvance":43,"chnl":15,"x":67,"y":398,"page":0},{"id":36,"index":7,"char":"$","width":28,"height":45,"xoffset":0,"yoffset":2,"xadvance":28,"chnl":15,"x":73,"y":283,"page":0},{"id":367,"index":305,"char":"","width":29,"height":45,"xoffset":1,"yoffset":-1,"xadvance":29,"chnl":15,"x":102,"y":229,"page":0},{"id":77,"index":48,"char":"M","width":44,"height":40,"xoffset":0,"yoffset":4,"xadvance":42,"chnl":15,"x":109,"y":166,"page":0},{"id":64,"index":35,"char":"@","width":42,"height":44,"xoffset":1,"yoffset":4,"xadvance":42,"chnl":15,"x":117,"y":110,"page":0},{"id":103,"index":74,"char":"g","width":34,"height":43,"xoffset":-5,"yoffset":13,"xadvance":25,"chnl":15,"x":140,"y":54,"page":0},{"id":109,"index":80,"char":"m","width":43,"height":31,"xoffset":-1,"yoffset":13,"xadvance":44,"chnl":15,"x":150,"y":0,"page":0},{"id":112,"index":83,"char":"p","width":31,"height":43,"xoffset":-3,"yoffset":13,"xadvance":29,"chnl":15,"x":95,"y":333,"page":0},{"id":113,"index":84,"char":"q","width":29,"height":43,"xoffset":0,"yoffset":13,"xadvance":29,"chnl":15,"x":106,"y":279,"page":0},{"id":121,"index":92,"char":"y","width":34,"height":43,"xoffset":-7,"yoffset":13,"xadvance":23,"chnl":15,"x":136,"y":211,"page":0},{"id":283,"index":221,"char":"","width":26,"height":43,"xoffset":0,"yoffset":2,"xadvance":25,"chnl":15,"x":158,"y":159,"page":0},{"id":353,"index":291,"char":"","width":26,"height":43,"xoffset":-2,"yoffset":2,"xadvance":21,"chnl":15,"x":164,"y":102,"page":0},{"id":269,"index":207,"char":"","width":26,"height":43,"xoffset":0,"yoffset":2,"xadvance":23,"chnl":15,"x":179,"y":36,"page":0},{"id":225,"index":163,"char":"","width":29,"height":43,"xoffset":0,"yoffset":2,"xadvance":28,"chnl":15,"x":78,"y":443,"page":0},{"id":233,"index":171,"char":"","width":26,"height":43,"xoffset":0,"yoffset":2,"xadvance":25,"chnl":15,"x":112,"y":443,"page":0},{"id":250,"index":188,"char":"","width":29,"height":43,"xoffset":1,"yoffset":2,"xadvance":29,"chnl":15,"x":117,"y":381,"page":0},{"id":243,"index":181,"char":"","width":27,"height":43,"xoffset":0,"yoffset":2,"xadvance":28,"chnl":15,"x":131,"y":327,"page":0},{"id":956,"index":393,"char":"","width":33,"height":43,"xoffset":-3,"yoffset":13,"xadvance":29,"chnl":15,"x":140,"y":259,"page":0},{"id":98,"index":69,"char":"b","width":29,"height":42,"xoffset":-1,"yoffset":2,"xadvance":29,"chnl":15,"x":175,"y":207,"page":0},{"id":100,"index":71,"char":"d","width":31,"height":42,"xoffset":0,"yoffset":2,"xadvance":29,"chnl":15,"x":189,"y":150,"page":0},{"id":104,"index":75,"char":"h","width":29,"height":42,"xoffset":-1,"yoffset":2,"xadvance":29,"chnl":15,"x":195,"y":84,"page":0},{"id":107,"index":78,"char":"k","width":28,"height":42,"xoffset":-1,"yoffset":2,"xadvance":24,"chnl":15,"x":210,"y":0,"page":0},{"id":108,"index":79,"char":"l","width":16,"height":42,"xoffset":-1,"yoffset":2,"xadvance":13,"chnl":15,"x":143,"y":429,"page":0},{"id":345,"index":283,"char":"","width":26,"height":42,"xoffset":-1,"yoffset":2,"xadvance":20,"chnl":15,"x":151,"y":375,"page":0},{"id":382,"index":320,"char":"","width":28,"height":42,"xoffset":-3,"yoffset":2,"xadvance":22,"chnl":15,"x":163,"y":307,"page":0},{"id":237,"index":175,"char":"","width":21,"height":42,"xoffset":-1,"yoffset":2,"xadvance":13,"chnl":15,"x":178,"y":254,"page":0},{"id":271,"index":209,"char":"","width":39,"height":42,"xoffset":0,"yoffset":2,"xadvance":29,"chnl":15,"x":164,"y":422,"page":0},{"id":357,"index":295,"char":"","width":25,"height":42,"xoffset":0,"yoffset":2,"xadvance":16,"chnl":15,"x":164,"y":469,"page":0},{"id":67,"index":38,"char":"C","width":32,"height":41,"xoffset":2,"yoffset":4,"xadvance":29,"chnl":15,"x":194,"y":469,"page":0},{"id":71,"index":42,"char":"G","width":33,"height":41,"xoffset":2,"yoffset":4,"xadvance":34,"chnl":15,"x":182,"y":354,"page":0},{"id":79,"index":50,"char":"O","width":35,"height":41,"xoffset":2,"yoffset":4,"xadvance":36,"chnl":15,"x":196,"y":301,"page":0},{"id":83,"index":54,"char":"S","width":29,"height":41,"xoffset":-1,"yoffset":4,"xadvance":25,"chnl":15,"x":204,"y":254,"page":0},{"id":105,"index":76,"char":"i","width":16,"height":41,"xoffset":-1,"yoffset":3,"xadvance":13,"chnl":15,"x":209,"y":197,"page":0},{"id":51,"index":22,"char":"3","width":29,"height":41,"xoffset":-1,"yoffset":4,"xadvance":28,"chnl":15,"x":225,"y":131,"page":0},{"id":54,"index":25,"char":"6","width":28,"height":41,"xoffset":1,"yoffset":4,"xadvance":28,"chnl":15,"x":208,"y":400,"page":0},{"id":56,"index":27,"char":"8","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":220,"y":347,"page":0},{"id":57,"index":28,"char":"9","width":28,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":236,"y":300,"page":0},{"id":48,"index":19,"char":"0","width":28,"height":41,"xoffset":1,"yoffset":4,"xadvance":28,"chnl":15,"x":231,"y":446,"page":0},{"id":63,"index":34,"char":"?","width":23,"height":41,"xoffset":2,"yoffset":4,"xadvance":21,"chnl":15,"x":241,"y":393,"page":0},{"id":37,"index":8,"char":"%","width":37,"height":41,"xoffset":2,"yoffset":4,"xadvance":40,"chnl":15,"x":254,"y":346,"page":0},{"id":38,"index":9,"char":"&","width":34,"height":41,"xoffset":0,"yoffset":4,"xadvance":33,"chnl":15,"x":264,"y":439,"page":0},{"id":228,"index":166,"char":"","width":29,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":269,"y":392,"page":0},{"id":246,"index":184,"char":"","width":27,"height":41,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":230,"y":177,"page":0},{"id":252,"index":190,"char":"","width":29,"height":41,"xoffset":1,"yoffset":4,"xadvance":29,"chnl":15,"x":238,"y":223,"page":0},{"id":65,"index":36,"char":"A","width":32,"height":40,"xoffset":-5,"yoffset":4,"xadvance":28,"chnl":15,"x":269,"y":269,"page":0},{"id":66,"index":37,"char":"B","width":31,"height":40,"xoffset":0,"yoffset":4,"xadvance":30,"chnl":15,"x":296,"y":314,"page":0},{"id":68,"index":39,"char":"D","width":34,"height":40,"xoffset":0,"yoffset":4,"xadvance":33,"chnl":15,"x":229,"y":47,"page":0},{"id":69,"index":40,"char":"E","width":29,"height":40,"xoffset":0,"yoffset":4,"xadvance":26,"chnl":15,"x":243,"y":0,"page":0},{"id":70,"index":41,"char":"F","width":29,"height":40,"xoffset":0,"yoffset":4,"xadvance":24,"chnl":15,"x":259,"y":92,"page":0},{"id":72,"index":43,"char":"H","width":36,"height":40,"xoffset":0,"yoffset":4,"xadvance":34,"chnl":15,"x":268,"y":45,"page":0},{"id":73,"index":918,"char":"I","width":16,"height":40,"xoffset":0,"yoffset":4,"xadvance":14,"chnl":15,"x":277,"y":0,"page":0},{"id":75,"index":46,"char":"K","width":34,"height":40,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":298,"y":0,"page":0},{"id":76,"index":47,"char":"L","width":23,"height":40,"xoffset":0,"yoffset":4,"xadvance":24,"chnl":15,"x":262,"y":137,"page":0},{"id":78,"index":49,"char":"N","width":37,"height":40,"xoffset":0,"yoffset":4,"xadvance":35,"chnl":15,"x":272,"y":182,"page":0},{"id":80,"index":51,"char":"P","width":30,"height":40,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":290,"y":137,"page":0},{"id":82,"index":53,"char":"R","width":30,"height":40,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":293,"y":90,"page":0},{"id":84,"index":55,"char":"T","width":29,"height":40,"xoffset":3,"yoffset":4,"xadvance":25,"chnl":15,"x":309,"y":45,"page":0},{"id":85,"index":56,"char":"U","width":34,"height":40,"xoffset":2,"yoffset":4,"xadvance":34,"chnl":15,"x":337,"y":0,"page":0},{"id":86,"index":57,"char":"V","width":31,"height":40,"xoffset":3,"yoffset":4,"xadvance":27,"chnl":15,"x":306,"y":227,"page":0},{"id":88,"index":59,"char":"X","width":37,"height":40,"xoffset":-5,"yoffset":4,"xadvance":26,"chnl":15,"x":314,"y":182,"page":0},{"id":89,"index":60,"char":"Y","width":29,"height":40,"xoffset":3,"yoffset":4,"xadvance":25,"chnl":15,"x":325,"y":135,"page":0},{"id":90,"index":61,"char":"Z","width":33,"height":40,"xoffset":-2,"yoffset":4,"xadvance":27,"chnl":15,"x":328,"y":90,"page":0},{"id":49,"index":20,"char":"1","width":19,"height":40,"xoffset":5,"yoffset":4,"xadvance":28,"chnl":15,"x":343,"y":45,"page":0},{"id":50,"index":21,"char":"2","width":30,"height":40,"xoffset":-2,"yoffset":4,"xadvance":28,"chnl":15,"x":303,"y":359,"page":0},{"id":52,"index":23,"char":"4","width":30,"height":40,"xoffset":-2,"yoffset":4,"xadvance":28,"chnl":15,"x":332,"y":272,"page":0},{"id":53,"index":24,"char":"5","width":29,"height":40,"xoffset":0,"yoffset":4,"xadvance":28,"chnl":15,"x":342,"y":227,"page":0},{"id":55,"index":26,"char":"7","width":28,"height":40,"xoffset":2,"yoffset":4,"xadvance":28,"chnl":15,"x":356,"y":180,"page":0},{"id":33,"index":4,"char":"!","width":17,"height":40,"xoffset":-1,"yoffset":4,"xadvance":13,"chnl":15,"x":359,"y":135,"page":0},{"id":47,"index":18,"char":"/","width":28,"height":40,"xoffset":-4,"yoffset":4,"xadvance":18,"chnl":15,"x":366,"y":90,"page":0},{"id":35,"index":6,"char":"#","width":35,"height":40,"xoffset":0,"yoffset":4,"xadvance":32,"chnl":15,"x":381,"y":135,"page":0},{"id":119,"index":90,"char":"w","width":39,"height":31,"xoffset":1,"yoffset":13,"xadvance":36,"chnl":15,"x":367,"y":45,"page":0},{"id":59,"index":30,"char":";","width":17,"height":38,"xoffset":-4,"yoffset":13,"xadvance":13,"chnl":15,"x":376,"y":0,"page":0},{"id":116,"index":87,"char":"t","width":20,"height":37,"xoffset":0,"yoffset":7,"xadvance":16,"chnl":15,"x":306,"y":272,"page":0},{"id":97,"index":68,"char":"a","width":29,"height":32,"xoffset":0,"yoffset":13,"xadvance":28,"chnl":15,"x":272,"y":227,"page":0},{"id":99,"index":70,"char":"c","width":25,"height":32,"xoffset":0,"yoffset":13,"xadvance":23,"chnl":15,"x":229,"y":92,"page":0},{"id":101,"index":72,"char":"e","width":25,"height":32,"xoffset":0,"yoffset":13,"xadvance":25,"chnl":15,"x":398,"y":0,"page":0},{"id":115,"index":86,"char":"s","width":24,"height":32,"xoffset":-2,"yoffset":13,"xadvance":21,"chnl":15,"x":399,"y":81,"page":0},{"id":58,"index":29,"char":":","width":14,"height":32,"xoffset":-1,"yoffset":13,"xadvance":13,"chnl":15,"x":210,"y":47,"page":0},{"id":110,"index":81,"char":"n","width":29,"height":31,"xoffset":-1,"yoffset":13,"xadvance":29,"chnl":15,"x":411,"y":37,"page":0},{"id":111,"index":82,"char":"o","width":27,"height":31,"xoffset":0,"yoffset":13,"xadvance":28,"chnl":15,"x":428,"y":0,"page":0},{"id":114,"index":85,"char":"r","width":24,"height":31,"xoffset":-1,"yoffset":13,"xadvance":20,"chnl":15,"x":332,"y":317,"page":0},{"id":117,"index":88,"char":"u","width":29,"height":31,"xoffset":1,"yoffset":13,"xadvance":29,"chnl":15,"x":303,"y":404,"page":0},{"id":118,"index":89,"char":"v","width":27,"height":31,"xoffset":0,"yoffset":13,"xadvance":23,"chnl":15,"x":303,"y":440,"page":0},{"id":120,"index":91,"char":"x","width":31,"height":31,"xoffset":-4,"yoffset":13,"xadvance":24,"chnl":15,"x":303,"y":476,"page":0},{"id":122,"index":93,"char":"z","width":27,"height":31,"xoffset":-3,"yoffset":13,"xadvance":22,"chnl":15,"x":335,"y":440,"page":0},{"id":60,"index":31,"char":"<","width":26,"height":28,"xoffset":1,"yoffset":10,"xadvance":28,"chnl":15,"x":337,"y":404,"page":0},{"id":62,"index":33,"char":">","width":26,"height":28,"xoffset":1,"yoffset":10,"xadvance":28,"chnl":15,"x":339,"y":476,"page":0},{"id":94,"index":65,"char":"^","width":28,"height":26,"xoffset":-1,"yoffset":4,"xadvance":26,"chnl":15,"x":264,"y":485,"page":0},{"id":126,"index":97,"char":"~","width":27,"height":10,"xoffset":1,"yoffset":19,"xadvance":28,"chnl":15,"x":231,"y":492,"page":0},{"id":42,"index":13,"char":"*","width":27,"height":27,"xoffset":3,"yoffset":2,"xadvance":28,"chnl":15,"x":367,"y":437,"page":0},{"id":43,"index":14,"char":"+","width":26,"height":26,"xoffset":1,"yoffset":11,"xadvance":28,"chnl":15,"x":238,"y":269,"page":0},{"id":61,"index":32,"char":"=","width":26,"height":18,"xoffset":1,"yoffset":16,"xadvance":28,"chnl":15,"x":78,"y":491,"page":0},{"id":95,"index":66,"char":"_","width":25,"height":7,"xoffset":-7,"yoffset":44,"xadvance":20,"chnl":15,"x":195,"y":131,"page":0},{"id":34,"index":5,"char":"\\"","width":19,"height":17,"xoffset":3,"yoffset":4,"xadvance":19,"chnl":15,"x":182,"y":400,"page":0},{"id":39,"index":10,"char":"\'","width":10,"height":17,"xoffset":3,"yoffset":4,"xadvance":11,"chnl":15,"x":208,"y":446,"page":0},{"id":45,"index":16,"char":"-","width":17,"height":8,"xoffset":-1,"yoffset":25,"xadvance":16,"chnl":15,"x":117,"y":429,"page":0},{"id":44,"index":15,"char":",","width":14,"height":16,"xoffset":-4,"yoffset":34,"xadvance":12,"chnl":15,"x":163,"y":354,"page":0},{"id":96,"index":67,"char":"`","width":12,"height":12,"xoffset":12,"yoffset":2,"xadvance":28,"chnl":15,"x":95,"y":381,"page":0},{"id":46,"index":17,"char":".","width":10,"height":11,"xoffset":-1,"yoffset":34,"xadvance":13,"chnl":15,"x":179,"y":84,"page":0},{"id":32,"index":3,"char":" ","width":0,"height":0,"xoffset":-2,"yoffset":40,"xadvance":13,"chnl":15,"x":112,"y":381,"page":0}],"info":{"face":"OpenSans-Italic","size":50,"bold":0,"italic":0,"charset":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","1","2","3","4","5","6","7","8","9","0","\\"","!","`","?","\'",".",",",";",":","(",")","[","]","{","}","<",">","|","/","@","^","$","-","%","+","=","#","_","&","~","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"unicode":1,"stretchH":100,"smooth":1,"aa":1,"padding":[0,0,0,0],"spacing":[0,0]},"common":{"lineHeight":53,"base":40,"scaleW":512,"scaleH":512,"pages":1,"packed":0,"alphaChnl":0,"redChnl":0,"greenChnl":0,"blueChnl":0},"distanceField":{"fieldType":"msdf","distanceRange":4},"kernings":[]}')},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/OpenSans11bd9d3c3fba8ec2703f65ac3d1a5276.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/OpenSansb1b25819bd6ca6e680ac999a797a9eb1e.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/OpenSansie23d5fe93425d6147654119dea143072.png"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nin vec4 position;\nin vec2 texcoord;\n// in vec3 textCenterPosition;\n// in vec2 textSize;\n\nout vec2 v_texCoord;\n\nvoid main() {\n\n    // vec3 cameraRight = vec3(u_view[0].x, u_view[1].x, u_view[2].x);\n    // vec3 cameraUp = vec3(u_view[0].y, u_view[1].y, u_view[2].y);\n\n    // // based on http://www.opengl-tutorial.org/intermediate-tutorials/billboards-particles/billboards/\n    // vec4 billboardPosition = vec4(textCenterPosition, 1.0);\n    // billboardPosition.xyz += (cameraRight * -textSize.x * position.x) + (cameraUp * textSize.y * position.y);\n    \n    // gl_Position = u_projection * u_view * u_globalVRTransform * billboardPosition;\n\n    v_texCoord = texcoord;\n  \n    gl_Position = u_projection * u_view * u_globalVRTransform * position;\n}"},function(t,e,n){"use strict";n.r(e),e.default='#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_diffuse;\nuniform vec3 u_fontColor;\nuniform float u_distanceRange;\n\nin vec2 v_texCoord;\n\nout vec4 color;\n\n// based on Chlumsky thesis https://computergraphics.stackexchange.com/a/2151/2811\n// https://gamedev.stackexchange.com/questions/92265/signed-distance-fields-how-are-different-colour-channels-used-to-improve-output\n\n// Computation of the median value using minima and maxima\nfloat median(float a, float b, float c) {\n  return max(min(a, b), min(max(a, b), c));\n}\n\nvoid main() {\n    vec2 msdfUnit = u_distanceRange / vec2(textureSize(u_diffuse, 0));\n\n    vec4 fontColor = vec4(u_fontColor, 1.0);\n\n    // Bilinear sampling of the distance field\n    vec3 sampleColor = texture(u_diffuse, v_texCoord).rgb;\n    // Acquiring the signed distance\n    float dist =  median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\n\n    // The anti-aliased measure of how "inside" the fragment lies\n    dist *= dot(msdfUnit, 0.5/fwidth(v_texCoord));    \n    float opacity = clamp(dist + 0.5, 0.0, 1.0);\n\n    color = vec4(u_fontColor, opacity);\n}'},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform Gridline {\n    vec3 u_bboxCorner;\n    vec3 u_subdivision;\n    float u_halfDashSize;\n    vec3 u_color;\n};\n\nin vec3 linePosition;\n\nout vec3 v_color;\nout vec3 v_position;\nout vec3 v_bboxCorner;\nout vec3 v_subdivision;\nout float v_halfDashSize;\n\nvoid main() {    \n    gl_Position = u_projection * u_view * u_globalVRTransform * vec4(linePosition, 1.0);\n    v_color = u_color;\n    v_position = linePosition;\n    v_bboxCorner = u_bboxCorner;\n    v_halfDashSize = u_halfDashSize;\n    v_subdivision = u_subdivision;\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nin vec3 v_color;\nin vec3 v_position;\nin vec3 v_bboxCorner;\nin vec3 v_subdivision;\nin float v_halfDashSize;\n\nout vec4 color;\n\nvoid main() {\n    vec4 gridColor = vec4(v_color, 1.0);\n\n    if (v_subdivision == vec3(0.0))\n        color = gridColor;\n        \n    else {\n        // calculate distance from intersection\n        vec3 dist = mod(v_position + v_bboxCorner, v_subdivision);\n        if ((dist.x <= v_subdivision.x - v_halfDashSize && dist.x >= v_halfDashSize) \n        || (dist.y <= v_subdivision.y - v_halfDashSize && dist.y >= v_halfDashSize) \n        || (dist.z <= v_subdivision.z - v_halfDashSize && dist.z >= v_halfDashSize))\n            discard;\n        else \n            color = gridColor;\n    }       \n}"},function(t,e,n){"use strict";(function(t){var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"};e.BrowserInfo=r;var i=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform};e.NodeInfo=i;var o=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"};e.SearchBotDeviceInfo=o;var a=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null};e.BotInfo=a;var s=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null};e.ReactNativeInfo=s;var u=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(t){return""!==t&&c.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}function l(t){var e=h(t);if(!e)return null;var i=e[0],s=e[1];if("searchbot"===i)return new a;var c=s[1]&&s[1].split(/[._]/).slice(0,3);c?c.length<3&&(c=n(c,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-c.length))):c=[];var f=c.join("."),l=d(t),p=u.exec(t);return p&&p[1]?new o(i,f,l,p[1]):new r(i,c.join("."),l)}function d(t){for(var e=0,n=f.length;e<n;e++){var r=f[e],i=r[0];if(r[1].exec(t))return i}return null}function p(){return void 0!==t&&t.version?new i(t.version.slice(1)):null}e.detect=function(t){return t?l(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new s:"undefined"!=typeof navigator?l(navigator.userAgent):p()},e.browserName=function(t){var e=h(t);return e?e[0]:null},e.parseUserAgent=l,e.detectOS=d,e.getNodeVersion=p}).call(this,n(136))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!f){var t=s(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.PerspectiveProjection=e.FirstPersonCamera=e.ThirdPersonCamera=e.BaseCamera=e.cartesianToSpherical=e.sphericalToCartesian=e.ZENITH=e.AZIMUTH=e.RADIUS=void 0;const r=n(19);function i(t,e,n,r){return r[2]=Math.cos(e)*Math.cos(n)*t,r[1]=Math.sin(n)*t,r[0]=Math.sin(e)*Math.cos(n)*t,r}function o(t,n){return n[e.RADIUS]=r.vec3.len(t),n[e.AZIMUTH]=Math.atan2(t[0],t[2]),n[e.ZENITH]=Math.asin(t[1]/n[e.RADIUS]),n}e.RADIUS=0,e.AZIMUTH=1,e.ZENITH=2,e.sphericalToCartesian=i,e.cartesianToSpherical=o;class a{constructor(t,e,n){this.orientation=t,this.baseLocation=e,this.baseUpOrientation=n}get radius(){return this.orientation[e.RADIUS]}get up(){if(this._up)return this._up;const t=this._up=r.vec3.create();return i(this.orientation[e.RADIUS],this.orientation[e.AZIMUTH]+this.baseUpOrientation[e.AZIMUTH],this.orientation[e.ZENITH]+this.baseUpOrientation[e.ZENITH],t),t}get right(){return this._right||(this._right=r.vec3.cross(r.vec3.create(),this.view,this.up))}move(t,e){return this.create(this.orientation,r.vec3.scaleAndAdd(r.vec3.create(),this.baseLocation,e,t/r.vec3.len(e)),this.baseUpOrientation)}forwardBackward(t){return this.move(t,this.view)}leftRight(t){return this.move(t,this.right)}upDown(t){return this.move(t,this.up)}turn(t,e){const n=r.vec3.clone(this.orientation);return n[e]+=t,this.create(n,this.baseLocation,this.baseUpOrientation)}turnLeftRight(t){return this.turn(t,e.AZIMUTH)}turnUpDown(t){return this.turn(t,e.ZENITH)}toExistingMatrix(t){return r.mat4.invert(t,this.inverseMatrix())||r.mat4.identity(t)}toMatrix(){return this._matrix?this._matrix:(this._matrix=r.mat4.create(),this.toExistingMatrix(this._matrix))}inverseMatrix(){if(this._inverse)return this._inverse;const t=this._inverse=r.mat4.create(),e=this.view,n=this.right,i=this.up,o=this.eyeLocation;var a=1/r.vec3.len(n);return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,a=1/r.vec3.len(i),t[4]=i[0]*a,t[5]=i[1]*a,t[6]=i[2]*a,a=-1/r.vec3.len(e),t[8]=e[0]*a,t[9]=e[1]*a,t[10]=e[2]*a,t[12]=o[0],t[13]=o[1],t[14]=o[2],t[15]=1,t}}e.BaseCamera=a;class s extends a{constructor(t,e,n){super(t,e,n)}static lookAt(t,e,n=r.vec3.fromValues(0,1,0)){const i=r.vec3.sub(r.vec3.create(),t,e),a=r.vec3.create();o(i,a);const u=r.vec3.create();return o(n,u),new s(a,e,u)}create(t,e,n){return new s(t,e,n)}get targetLocation(){return this.baseLocation}get view(){if(this._view)return this._view;const t=this._view=r.vec3.create();return i(-this.orientation[e.RADIUS],this.orientation[e.AZIMUTH],this.orientation[e.ZENITH],t),t}get eyeLocation(){return this._pos||(this._pos=r.vec3.scaleAndAdd(r.vec3.create(),this.targetLocation,this.view,-1))}zoom(t){const n=r.vec3.clone(this.orientation);return n[e.RADIUS]-=t,n[e.RADIUS]=Math.max(n[e.RADIUS],1e-5),new s(n,this.targetLocation,this.baseUpOrientation)}}e.ThirdPersonCamera=s;class u extends a{constructor(t,e,n){super(t,e,n)}static lookAt(t,e,n=r.vec3.fromValues(0,1,0)){const i=r.vec3.sub(r.vec3.create(),e,t),a=r.vec3.create();o(i,a);const s=r.vec3.create();return o(n,s),new u(a,t,s)}create(t,e,n){return new u(t,e,n)}get eyeLocation(){return this.baseLocation}get view(){if(this._view)return this._view;const t=this._view=r.vec3.create();return i(this.orientation[e.RADIUS],this.orientation[e.AZIMUTH],this.orientation[e.ZENITH],t),t}get targetLocation(){return this._pos||(this._pos=r.vec3.add(r.vec3.create(),this.eyeLocation,this.view))}zoom(t){return this.forwardBackward(t)}}e.FirstPersonCamera=u;class c{constructor(t,e,n,r,i){this.near=t,this.far=e,this.fovYRadians=n,this.screenWidth=r,this.screenHeight=i,this._matrixCache=void 0,this.height=Math.tan(.5*n);const o=this.height*t,a=o*this.screenWidth/this.screenHeight;this.frustumLeft=-a,this.frustumRight=a,this.frustumBottom=-o,this.frustumTop=o}toMatrix(){return this._matrixCache?this._matrixCache:this._matrixCache=this.toExistingMatrix(r.mat4.create())}toExistingMatrix(t){return r.mat4.perspective(t,this.fovYRadians,this.screenWidth/this.screenHeight,this.near,this.far)}}e.PerspectiveProjection=c;class f{constructor(t,e){this.view=t,this.projection=e,this._matrixCache=void 0}projectPointToScreenSpace(t){const e=r.vec4.transformMat4(r.vec4.create(),r.vec4.fromValues(t[0],t[1],t[2],1),this.toMatrix());if(!(e[3]<this.projection.near))return e[0]/=e[3],e[1]/=e[3],e[0]+=1,e[1]*=-1,e[1]+=1,e[0]*=.5*this.projection.screenWidth,e[1]*=.5*this.projection.screenHeight,e}static lookAtNodeFromDirection(t,e,n,i=r.vec3.fromValues(0,1,0)){const o=r.vec3.normalize(r.vec3.create(),t),a=e.centerAA,u=e.diagonalSizeAA,h=n.frustumTop,l=n.near,d=u*l/h,p=r.vec3.scaleAndAdd(r.vec3.create(),a,o,-d),m=s.lookAt(p,a,i),y=Math.max(10*(u+d),n.far),g=new c(l,y,n.fovYRadians,n.screenWidth,n.screenHeight);return new f(m,g)}forwardBackward(t){return new f(this.view.forwardBackward(t),this.projection)}leftRight(t){return new f(this.view.leftRight(t),this.projection)}upDown(t){return new f(this.view.upDown(t),this.projection)}turnLeftRight(t){return new f(this.view.turnLeftRight(t),this.projection)}turnUpDown(t){return new f(this.view.turnUpDown(t),this.projection)}zoom(t){return new f(this.view.zoom(t),this.projection)}resize(t,e){return new f(this.view,new c(this.projection.near,this.projection.far,this.projection.fovYRadians,t,e))}toMatrix(){return this._matrixCache?this._matrixCache:this._matrixCache=this.toExistingMatrix(r.mat4.create())}toExistingMatrix(t){return r.mat4.mul(t,this.projection.toMatrix(),this.view.toMatrix())}}e.Camera=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardController=e.ResizeController=e.WheelController=e.PointerController=void 0;const r=n(97),i=n(169);function o(t){return{dx:t[1].x-t[0].x,dy:t[1].y-t[0].y}}function a(t,...e){t.addEventListener;const n=e.map(e=>r.fromEvent(t,e));return r.merge(...n)}e.PointerController=class{constructor(t,e){const n=function(t){const e=new r.Subject,n=a(t,"pointerdown"),i=a(t,"pointerup","pointerout","pointerleave","pointercancel"),o=a(t,"pointermove"),s=new Map;return n.subscribe(t=>{const n=s.get(t.pointerId)||new r.Subject;s.set(t.pointerId,n),e.next(n),n.next(t)}),i.subscribe(t=>{const e=s.get(t.pointerId);e&&(e.next(t),e.complete(),s.delete(t.pointerId))}),o.subscribe(t=>{const e=s.get(t.pointerId);e&&e.next(t)}),e}(t);t.style.touchAction="none";var s=0;n.subscribe(t=>{++s,t.subscribe(void 0,void 0,()=>--s),t.pipe(i.bufferCount(2,1),i.filter(t=>2==t.length),i.filter(()=>1==s),i.map(o),i.withLatestFrom(e),i.filter(([t,e])=>Math.abs(t.dx)>0||Math.abs(t.dy)>0),i.map(([t,e])=>e.turnLeftRight(-t.dx/e.projection.screenWidth).turnUpDown(t.dy/e.projection.screenHeight))).subscribe(t=>e.next(t))});n.pipe(i.bufferCount(2,1),i.filter(t=>2==t.length),i.flatMap(e=>r.combineLatest(e).pipe(i.map(([e,n])=>function(t,e,n=1,r=1){return Math.sqrt((t.x-e.x)*(t.x-e.x)*n*n+(t.y-e.y)*(t.y-e.y)*r*r)}(e,n,1/t.clientWidth,1/t.clientHeight)),i.bufferCount(2,1),i.filter(t=>2==t.length),i.map(t=>t[1]-t[0])))).pipe(i.withLatestFrom(e),i.map(([t,e])=>{const n=Math.max(e.projection.near,e.view.radius*(1-t));return e.zoom(e.view.radius-n)})).subscribe(t=>e.next(t))}};e.WheelController=class{constructor(t,e,n){r.fromEvent(t,"wheel").pipe(i.withLatestFrom(e),i.map(([t,e])=>{const r=-Math.sign(t.deltaY)*n(e);return e.zoom(r)})).subscribe(e)}};e.ResizeController=class{constructor(t,e){r.fromEvent(window,"resize").pipe(i.withLatestFrom(e),i.map(([e,n])=>n.resize(t.clientWidth,t.clientHeight))).subscribe(e)}};e.KeyboardController=class{constructor(t,e,n){this.canvas=t,this.camera=e,this.speedResolver=n,this.keySign={},t.getAttribute("tabindex")||t.setAttribute("tabindex","1"),t.focus();this.keySign.z=this.keySign.a=this.keySign.s=-1,this.keySign.q=this.keySign.d=this.keySign.w=1,this.cameraMovement((t,e)=>t.upDown(e),"q","z"),this.cameraMovement((t,e)=>t.leftRight(e),"a","d"),this.cameraMovement((t,e)=>t.forwardBackward(e),"w","s")}keyDown(t,...e){const n=a(t,"keydown").pipe(i.filter(t=>!t.repeat&&e.indexOf(t.key)>=0)),o=a(t,"keyup"),s=r.interval(10);return n.pipe(i.flatMap(t=>{const e=o.pipe(i.filter(e=>e.key==t.key));return r.concat(r.from([t]),s.pipe(i.takeUntil(e))).pipe(i.map(t=>Date.now())).pipe(i.bufferCount(2,1),i.filter(t=>2==t.length),i.map(t=>.001*(t[1]-t[0])),i.map(e=>[e,t.key]))}))}cameraMovement(t,...e){this.keyDown(this.canvas,...e).pipe(i.withLatestFrom(this.camera),i.map(([[e,n],r])=>t(r,this.keySign[n]*e*this.speedResolver(r)))).subscribe(this.camera)}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nuniform vec4 color;\n\nin vec4 position;\n\nout vec4 v_mycolor;\n\nvoid main() {\n    gl_Position = u_projection * u_view * position;\n    v_mycolor = color;\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nin vec4 v_mycolor;\n\nout vec4 color;\n\nvoid main() {\n    color = vec4(v_mycolor.xyz, 1.0);\n}"},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressLoader=e.defaultProgressLoaderOptions=e.ProgressLoaderOptionsType=void 0;const a=o(n(12));e.ProgressLoaderOptionsType=a.type({parentId:a.string,sceneContainerId:a.string}),e.defaultProgressLoaderOptions={parentId:"loaderParent",sceneContainerId:"container"};e.ProgressLoader=class{constructor(t,n=100){this._totalCount=n,this._tickCount=0,this._minTranslation=-34,this._maxTranslation=-2,this._translationLength=this._maxTranslation-this._minTranslation,this._options=Object.assign(Object.assign({},e.defaultProgressLoaderOptions),t);let r=document.getElementById(this._options.parentId),i=document.getElementById(this._options.sceneContainerId);null!=r&&null!=i&&(r.innerHTML+='<style>\n                #progress-loader {\n                    z-index: 2;\n                    position: fixed;\n                    left: 50vw;\n                    bottom: 50vh;\n                    height: auto;\n                    width: auto;\n                    background-repeat: no-repeat;\n                    opacity: 0.9;\n                    transform: translate(-50%, 50%);\n                }\n                \n                #svg-loader {\n                    width: 8vh;\n                }\n            </style>\n            <div id="progress-loader">\n                <svg id="svg-loader" viewBox="0 0 29.564 29.775" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">\n                    <defs id="defs4769">\n                        <clipPath id="fgClipPath">\n                            <path id="loader-clipPath" transform="matrix(1 0 0 1 -34 0)" fill="#ffffff" stroke-width=".25667" d="m55.997 137.34c0.1955-0.0569 0.53892 0.27755 0.95794 0.96078 0.41837 0.69028 0.90777 1.7293 1.3711 3.0672 0.46398 1.345 0.89799 2.9819 1.2134 4.8393 0.3154 1.8574 0.51025 3.9283 0.51416 6.106 0.0039 2.1777-0.18247 4.2557-0.49005 6.1131-0.30563 1.8575-0.73442 3.5013-1.1912 4.8464-0.45681 1.345-0.94231 2.384-1.3568 3.0744-0.4151 0.69029-0.82239 1.031-1.0185 0.97399m-33.735-29.991c-0.02892-5e-3 -0.05572-4e-3 -0.08016 3e-3h0.089c-0.0028 0-0.0061-3e-3 -0.0088-3e-3zm0.0088 3e-3c0.20252 0.0426 0.50748 0.37104 0.86916 0.9607 0.41837 0.69029 0.90754 1.7292 1.3709 3.067 0.46398 1.345 0.89829 2.9823 1.2137 4.8397 0.3154 1.8574 0.51029 3.9283 0.51421 6.106 0.0039 2.1776-0.18269 4.2553-0.49027 6.1128-0.30562 1.8574-0.73449 3.5014-1.1913 4.8464-0.45682 1.345-0.94236 2.384-1.3568 3.0743-0.41511 0.69029-0.82238 1.0312-1.0185 0.97427v6e-3h33.815v-29.987z" />\n                        </clipPath>\n                    </defs>\n                    <g id="layer-bg" transform="translate(-26.552 -137.32)">\n                        <g id="bg-group">\n                            <g id="g4123-bg" transform="matrix(.070661 0 0 -.070661 -93.82 1289)">\n                                <path id="path4125-bg" fill="#343738" d="m1954.8 16089c-0.05 29.1-1.68 56.8-4.1 81.8-2.42 25.1-5.62 47.5-8.53 66.3-5.88 37.5-10.29 60.6-4.12 62.4 3 0.8 8.27-3.9 14.7-13.5 6.42-9.7 13.93-24.3 21.04-43.1 7.12-18.9 13.78-41.9 18.62-68s7.83-55.2 7.89-85.8-2.8-59.8-7.52-85.9c-4.69-26.1-11.27-49.2-18.28-68.1s-14.46-33.5-20.82-43.2c-6.37-9.7-11.61-14.4-14.62-13.6-6.18 1.8-1.9 24.9 3.77 62.5 5.72 37.5 12.19 89.9 11.97 148.2" />\n                            </g>\n                            <g id="g4127-bg" transform="matrix(.070592 0 0 -.070592 -93.82 1289)">\n                                <path id="path4129-bg" fill="#343738" d="m2022.4 16102c0.07 54.3-5.21 103-9.61 138.1-4.39 35.1-7.4 56.8-1.64 58.2 5.55 1.3 18.95-18.4 31.11-53.7 12.14-35.2 22.37-86 22.29-142.6 0.08-56.5-10.15-107.3-22.29-142.5-12.16-35.3-25.56-55-31.11-53.7-5.76 1.4-2.75 23.1 1.64 58.2 4.4 35.1 9.68 83.8 9.61 138" />\n                            </g>\n                            <g id="g4131-bg" transform="matrix(.070406 0 0 -.070406 -93.82 1289)">\n                                <path id="path4133-bg" fill="#343738" d="m2096.6 16145c0.05 42.5-3.71 80.8-6.74 108.4-3 27.7-4.89 44.8-0.37 45.8 4.39 0.9 14.44-14.9 23.5-42.6s16.71-67.4 16.63-111.6c0.04-44.3-7.61-84-16.68-111.7-9.09-27.7-19.16-43.5-23.54-42.5-4.53 0.9-2.63 18.1 0.39 45.7 3.05 27.6 6.85 65.9 6.81 108.5" />\n                            </g>\n                            <g id="g4135-bg" transform="matrix(.070655 0 0 -.070655 -93.82 1289)">\n                                <path id="path4137-bg" fill="#343738" d="m1891 16090c-0.07 29-1.87 56.5-4.6 81.4-2.71 24.9-6.32 47.1-9.65 65.7-6.69 37.2-12.01 59.9-5.92 61.9 2.98 1 8.41-3.5 15.15-12.9 6.72-9.4 14.66-23.7 22.22-42.4 7.53-18.7 14.64-41.7 19.79-67.7 5.16-26.1 8.34-55.3 8.41-85.9 0.1-30.6-2.95-59.8-7.97-85.9-4.99-26.1-11.99-49.1-19.42-67.8-7.42-18.7-15.28-33.1-21.93-42.6-6.66-9.4-12.08-13.9-15.05-13-6.1 2-0.97 24.8 5.5 62 6.54 37.1 13.7 89.2 13.47 147.2" />\n                            </g>\n                            <g id="g4139-bg" transform="matrix(.070599 0 0 -.070599 -93.82 1289)">\n                                <path id="path4141-bg" fill="#343738" d="m1830 16103c-0.07 27.2-1.7 53-4.14 76.3s-5.67 44.2-8.63 61.6c-5.95 34.9-10.61 56.3-4.89 58 2.78 0.9 7.81-3.4 13.99-12.2 6.19-8.9 13.45-22.4 20.35-39.9 6.89-17.6 13.38-39 18.09-63.4 4.7-24.4 7.61-51.6 7.7-80.2 0.1-28.6-2.64-55.9-7.19-80.3-4.53-24.4-10.87-45.9-17.63-63.5-6.73-17.5-13.93-31.1-20-40-6.12-9-11.1-13.3-13.89-12.4-5.75 1.7-1.29 23.2 4.4 58.1 5.74 34.8 12.1 83.6 11.84 137.9" />\n                            </g>\n                            <g id="g4143-bg" transform="matrix(.070478 0 0 -.070478 -93.82 1289)">\n                                <path id="path4145-bg1" fill="#343738" d="m1768.6 16132c-0.11 46.1-4.38 87.6-7.84 117.5-3.45 29.8-5.68 48.4-0.78 49.5 4.74 1 15.83-16 25.82-46 10.01-29.9 18.47-72.9 18.58-120.9 0.23-47.9-7.87-91-17.63-121-9.75-30.1-20.63-47.2-25.38-46.2-4.92 1.1-2.87 19.6 0.31 49.6 3.21 29.9 7.15 71.4 6.92 117.5" />\n                            </g>\n                            <g id="g4147-bg" transform="matrix(.070211 0 0 -.070211 -93.82 1289)">\n                                <path id="path4149-bg" fill="#343738" d="m1717.8 16195c-0.14 57.8-6.92 104.1-0.76 104.8 3.01 0.3 8.69-10.9 13.68-29.8 5.02-18.8 9.17-45.4 9.3-74.9 0.15-29.5-3.77-56.1-8.57-75s-10.37-30.2-13.38-29.9c-6.17 0.6 0.12 47-0.27 104.8" />\n                            </g>\n                        </g>\n                    </g>\n                    <g id="layer1" transform="translate(-26.552 -137.32)">\n                        <g id="g5485" clip-path="url(#fgClipPath)">\n                            <g id="g4123" transform="matrix(.070661 0 0 -.070661 -93.82 1289)">\n                                <path id="path4125" fill="#ef4625" d="m1954.8 16089c-0.05 29.1-1.68 56.8-4.1 81.8-2.42 25.1-5.62 47.5-8.53 66.3-5.88 37.5-10.29 60.6-4.12 62.4 3 0.8 8.27-3.9 14.7-13.5 6.42-9.7 13.93-24.3 21.04-43.1 7.12-18.9 13.78-41.9 18.62-68s7.83-55.2 7.89-85.8-2.8-59.8-7.52-85.9c-4.69-26.1-11.27-49.2-18.28-68.1s-14.46-33.5-20.82-43.2c-6.37-9.7-11.61-14.4-14.62-13.6-6.18 1.8-1.9 24.9 3.77 62.5 5.72 37.5 12.19 89.9 11.97 148.2" />\n                            </g>\n                            <g id="g4127" transform="matrix(.070592 0 0 -.070592 -93.82 1289)">\n                                <path id="path4129" fill="#ef4625" d="m2022.4 16102c0.07 54.3-5.21 103-9.61 138.1-4.39 35.1-7.4 56.8-1.64 58.2 5.55 1.3 18.95-18.4 31.11-53.7 12.14-35.2 22.37-86 22.29-142.6 0.08-56.5-10.15-107.3-22.29-142.5-12.16-35.3-25.56-55-31.11-53.7-5.76 1.4-2.75 23.1 1.64 58.2 4.4 35.1 9.68 83.8 9.61 138" />\n                            </g>\n                            <g id="g4131" transform="matrix(.070406 0 0 -.070406 -93.82 1289)">\n                                <path id="path4133" fill="#ef4625" d="m2096.6 16145c0.05 42.5-3.71 80.8-6.74 108.4-3 27.7-4.89 44.8-0.37 45.8 4.39 0.9 14.44-14.9 23.5-42.6s16.71-67.4 16.63-111.6c0.04-44.3-7.61-84-16.68-111.7-9.09-27.7-19.16-43.5-23.54-42.5-4.53 0.9-2.63 18.1 0.39 45.7 3.05 27.6 6.85 65.9 6.81 108.5" />\n                            </g>\n                            <g id="g4135" transform="matrix(.070655 0 0 -.070655 -93.82 1289)">\n                                <path id="path4137" fill="#ef4625" d="m1891 16090c-0.07 29-1.87 56.5-4.6 81.4-2.71 24.9-6.32 47.1-9.65 65.7-6.69 37.2-12.01 59.9-5.92 61.9 2.98 1 8.41-3.5 15.15-12.9 6.72-9.4 14.66-23.7 22.22-42.4 7.53-18.7 14.64-41.7 19.79-67.7 5.16-26.1 8.34-55.3 8.41-85.9 0.1-30.6-2.95-59.8-7.97-85.9-4.99-26.1-11.99-49.1-19.42-67.8-7.42-18.7-15.28-33.1-21.93-42.6-6.66-9.4-12.08-13.9-15.05-13-6.1 2-0.97 24.8 5.5 62 6.54 37.1 13.7 89.2 13.47 147.2" />\n                            </g>\n                            <g id="g4139" transform="matrix(.070599 0 0 -.070599 -93.82 1289)">\n                                <path id="path4141" fill="#ef4625" d="m1830 16103c-0.07 27.2-1.7 53-4.14 76.3s-5.67 44.2-8.63 61.6c-5.95 34.9-10.61 56.3-4.89 58 2.78 0.9 7.81-3.4 13.99-12.2 6.19-8.9 13.45-22.4 20.35-39.9 6.89-17.6 13.38-39 18.09-63.4 4.7-24.4 7.61-51.6 7.7-80.2 0.1-28.6-2.64-55.9-7.19-80.3-4.53-24.4-10.87-45.9-17.63-63.5-6.73-17.5-13.93-31.1-20-40-6.12-9-11.1-13.3-13.89-12.4-5.75 1.7-1.29 23.2 4.4 58.1 5.74 34.8 12.1 83.6 11.84 137.9" />\n                            </g>\n                            <g id="g4143" transform="matrix(.070478 0 0 -.070478 -93.82 1289)">\n                                <path id="path4145" fill="#ef4625" d="m1768.6 16132c-0.11 46.1-4.38 87.6-7.84 117.5-3.45 29.8-5.68 48.4-0.78 49.5 4.74 1 15.83-16 25.82-46 10.01-29.9 18.47-72.9 18.58-120.9 0.23-47.9-7.87-91-17.63-121-9.75-30.1-20.63-47.2-25.38-46.2-4.92 1.1-2.87 19.6 0.31 49.6 3.21 29.9 7.15 71.4 6.92 117.5" />\n                            </g>\n                            <g id="g4147" transform="matrix(.070211 0 0 -.070211 -93.82 1289)">\n                                <path id="path4149" fill="#ef4625" d="m1717.8 16195c-0.14 57.8-6.92 104.1-0.76 104.8 3.01 0.3 8.69-10.9 13.68-29.8 5.02-18.8 9.17-45.4 9.3-74.9 0.15-29.5-3.77-56.1-8.57-75s-10.37-30.2-13.38-29.9c-6.17 0.6 0.12 47-0.27 104.8" />\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </div>',i.style.opacity="0.2")}updateLoader(t){let e=document.getElementById("loader-clipPath");if(null==e)return;this._tickCount=t||this._tickCount+1;const n=this._tickCount/this._totalCount;e.transform.baseVal.getItem(0).matrix.e=this._minTranslation+n*this._translationLength,n>=1&&this.hideLoader()}hideLoader(){let t=document.getElementById("progress-loader"),e=document.getElementById(this._options.sceneContainerId);null!=t&&null!=e&&(t.style.display="none",e.style.transition="opacity 1s ease-in-out",e.style.opacity="1")}set totalCount(t){this._totalCount=t}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=e.VROptionsType=e.RenderingOptionsType=void 0;const a=n(24),s=n(19),u=o(n(12)),c=n(36);e.RenderingOptionsType=u.partial({zNear:u.number,zFar:u.number,clearColor:c.vec3type,fps:u.number,rewindSpeed:u.number});const f={zNear:.01,zFar:5e4,clearColor:[0,0,0],fps:30,rewindSpeed:1};e.VROptionsType=u.partial({VRzNear:u.number,VRzFar:u.number,VRModeKey:u.string,VRModeMirrorKey:u.string,VRModeMirrorEnabledState:u.boolean,VRModeInfoElementId:u.string,VRModeOnTitle:u.string,VRModeOffTitle:u.string,VRModeUnavailableTitle:u.string,VRScaleConstant:u.number,VRBaseTranslation:c.vec3type,VRShowSafetyBoundary:u.boolean});const h={VRzNear:.1,VRzFar:50,VRModeKey:"Space",VRModeMirrorKey:"KeyM",VRModeMirrorEnabledState:!1,VRModeInfoElementId:"vrmode",VRModeOnTitle:"VR mode is ON<br /><span style=\"font-size: 0.8em; font-weight: normal;\">press 'm' to toggle mirroring</span>",VRModeOffTitle:'VR mode is OFF<br /><span style="font-size: 0.8em; font-weight: normal;">press spacebar to enable</span>',VRModeUnavailableTitle:"Browser does not have VR capabilities",VRScaleConstant:.3,VRBaseTranslation:[0,0,0],VRShowSafetyBoundary:!0};e.Renderer=class{constructor(t,e,n,r,i,o,a){this.canvas=t,this.scene=e,this.animator=n,this.onVRModeChange=o,this.perFrameFunction=a,this.vrMirrorProjectionMatrix=s.mat4.identity(s.mat4.create()),this.animationRewindTarget=void 0,this.animationRewindShouldJump=void 0,this.render=t=>{if(this.vrDisplay?this.vrDisplay.requestAnimationFrame(this.render):window.requestAnimationFrame(this.render),this.gl&&this.scene){if(void 0===this.animationRewindTarget)this.animator.update(!0,t,this.renderingOptions.fps);else if(!0===this.animationRewindShouldJump)this.animator.sliderUpdate(this.animationRewindTarget,t),this.animationRewindShouldJump=void 0;else{let e=Math.floor(this.animator.animationTime-Math.sign(this.animator.animationTime-Math.floor(this.animationRewindTarget)));this.animator.sliderUpdate(e,t)}this.vrDisplay&&this.frameData&&(this.vrDisplay.getFrameData(this.frameData),this.vrDisplay.isPresenting&&(this.gl.clearColor(this.renderingOptions.clearColor[0],this.renderingOptions.clearColor[1],this.renderingOptions.clearColor[2],1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.scene.vrViewport.setupLeftFrame(this.gl,this.canvas),this.scene.vrViewport.updateVRCameraUniformObject(this.gl,this.vrDisplay,this.frameData.leftViewMatrix,this.frameData.leftProjectionMatrix),this.renderVRFrame(this.frameData),this.scene.vrViewport.setupRightFrame(this.gl,this.canvas),this.scene.vrViewport.updateVRCameraUniformObject(this.gl,this.vrDisplay,this.frameData.rightViewMatrix,this.frameData.rightProjectionMatrix),this.renderVRFrame(this.frameData),this.vrDisplay.submitFrame()),this.vrDisplay.capabilities.hasExternalDisplay&&this.vrOptions.VRModeMirrorEnabledState&&(this.gl.clearColor(this.renderingOptions.clearColor[0],this.renderingOptions.clearColor[1],this.renderingOptions.clearColor[2],1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.scene.vrViewport.setupFullFrame(this.gl,this.canvas),s.mat4.perspective(this.vrMirrorProjectionMatrix,.4*Math.PI,this.canvas.clientWidth/this.canvas.clientHeight,this.vrOptions.VRzNear,this.vrOptions.VRzFar),this.scene.vrViewport.updateVRCameraUniformObject(this.gl,this.vrDisplay,this.frameData.leftViewMatrix,this.vrMirrorProjectionMatrix),this.renderVRFrame(this.frameData))),this.vrDisplay&&(!this.vrDisplay||!this.vrDisplay.capabilities.hasExternalDisplay||this.vrOptions.VRModeMirrorEnabledState&&this.vrDisplay.isPresenting)||(this.gl.clearColor(this.renderingOptions.clearColor[0],this.renderingOptions.clearColor[1],this.renderingOptions.clearColor[2],1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.renderFrame())}this.perFrameFunction&&this.perFrameFunction(this.animator)},this.renderingOptions=Object.assign(Object.assign({},f),r),this.vrOptions=Object.assign(Object.assign({},h),i),window.addEventListener("resize",this.onResizeVR)}init(){return requestAnimationFrame(this.render),this.resolveWebGL(this.renderingOptions,this.vrOptions).then(t=>{this.gl=t,this.initScene(t,this.canvas,this.renderingOptions);const e=this.scene.calculateVRSceneBoundingBox();return e&&this.vrDisplay&&this.scene.vrViewport.updateVRSceneSettings(t,this.vrDisplay,e,this.vrOptions),t})}resolveWebGL(t,e){return new Promise(t=>{let n;navigator.getVRDisplays?(this.frameData=new VRFrameData,navigator.getVRDisplays().then(r=>{r.length>0?(this.vrDisplay=r[r.length-1],this.vrDisplay.depthNear=e.VRzNear,this.vrDisplay.depthFar=e.VRzFar,n=this.canvas.getContext("webgl2",{preserveDrawingBuffer:this.vrDisplay.capabilities.hasExternalDisplay}),this.registerVRMode(this.canvas,this.vrDisplay,e)):(console.error("No VR display found"),n=a.getContext(this.canvas)),this.onVRModeChange(this.vrDisplay,this.vrOptions),t(n)})):(console.info("Browser does not support WebVR"),n=a.getContext(this.canvas),this.onVRModeChange(this.vrDisplay,this.vrOptions),t(n))})}initScene(t,e,n){this.onResizeVR(),a.resizeCanvasToDisplaySize(e),t.clearColor(n.clearColor[0],n.clearColor[1],n.clearColor[2],1),t.enable(t.DEPTH_TEST),this.scene.initScene(t,e,this.animator,n)}registerVRMode(t,e,n){document.addEventListener("keydown",r=>{this.vrDisplay&&(r.code==n.VRModeKey&&(this.vrDisplay.isPresenting?this.vrDisplay.exitPresent().then(()=>this.onVRModeChange(e,this.vrOptions),t=>console.log(t)):this.vrDisplay.requestPresent([{source:t}]).then(()=>this.onVRModeChange(e,this.vrOptions),t=>console.log(t))),r.code==n.VRModeMirrorKey&&(n.VRModeMirrorEnabledState=!n.VRModeMirrorEnabledState))})}onResizeVR(){if(this.vrDisplay&&this.vrDisplay.isPresenting){var t=this.vrDisplay.getEyeParameters("left"),e=this.vrDisplay.getEyeParameters("right");this.canvas.width=2*Math.max(t.renderWidth,e.renderWidth),this.canvas.height=Math.max(t.renderHeight,e.renderHeight)}else this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio}renderFrame(){this.scene.layers.forEach((t,e)=>{if(this.gl){e.setupFrame(this.gl,this.canvas),this.renderFrameDataSource(e,t.opaqueIDs);const n=this.gl.getParameter(this.gl.DEPTH_WRITEMASK);this.gl.depthMask(!1),this.renderFrameDataSource(e,t.transparentIDs),this.gl.depthMask(n)}})}renderFrameDataSource(t,e){e.forEach(e=>{if(this.scene.dataSourcesMap.has(e)){const n=this.scene.dataSourcesMap.get(e);n.loaded&&n.visible&&this.gl&&n.shaderProgram&&n.cameraUniformBlockInfo&&(t.updateCameraUniformBlock(this.gl,n.shaderProgram,n.cameraUniformBlockInfo),n.renderFrame(this.gl))}})}renderVRFrame(t){if(this.gl){this.vrOptions.VRShowSafetyBoundary&&this.scene.vrViewport.drawVRSceneSafeBounds(this.gl),this.renderVRFrameDataSource(t,this.scene.vrLayers.opaqueIDs);const e=this.gl.getParameter(this.gl.DEPTH_WRITEMASK);this.gl.depthMask(!1),this.renderVRFrameDataSource(t,this.scene.vrLayers.transparentIDs),this.gl.depthMask(e)}}renderVRFrameDataSource(t,e){e.forEach(e=>{if(this.scene.dataSourcesMap.has(e)){const n=this.scene.dataSourcesMap.get(e);n.loaded&&n.visible&&this.gl&&this.vrDisplay&&n.shaderProgram&&n.cameraUniformBlockInfo&&(this.scene.vrViewport.updateCameraUniformBlock(this.gl,n.shaderProgram,n.cameraUniformBlockInfo),n.renderVRFrame(this.gl,t,this.scene.vrViewport.getSittingToStandingMatrix(this.vrDisplay)))}})}set showSafetyBoundary(t){this.vrOptions.VRShowSafetyBoundary=t}get showSafetyBoundary(){return this.vrOptions.VRShowSafetyBoundary}get currentAnimationTime(){return this.animator.animationTime}get rewindSpeed(){return this.renderingOptions.rewindSpeed}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Gamepads=void 0;const i=n(19),o=n(144),a=n(149),s=n(150),u=r(n(151)),c=r(n(152)),f=r(n(153));e.Gamepads=class{constructor(){this.baseGrabPosition=void 0,this.updateTransformFunction=t=>{let e=i.mat4.create();if(this.gamepadHandler){const n=this.gamepadHandler.getGamepad(t);n&&n.pose&&n.pose.position&&n.pose.orientation&&i.mat4.fromRotationTranslation(e,n.pose.orientation,n.pose.position)}else e=i.mat4.identity(e);return e},this.onConnectFunction=t=>e=>t.gamepadID=e,this.rightController=new a.GamepadGeometry("right controller",this.updateTransformFunction,u.default,f.default),this.leftController=new a.GamepadGeometry("left controller",this.updateTransformFunction,c.default,f.default);const t=s.OculusController.createRightControllerMapping({aButton:{throwKeyEvent:!1,onClickAction:()=>{this.renderer&&(this.renderer.animationRewindTarget?this.renderer.animationRewindTarget=void 0:this.renderer.animationRewindTarget=this.renderer.currentAnimationTime)}},triggerButton:{throwKeyEvent:!1,onPressedAction:()=>{if(void 0!==this.rightController.gamepadID){const t=this.updateTransformFunction(this.rightController.gamepadID);this.baseGrabPosition=i.mat4.getTranslation(i.vec3.create(),t)}},onHoldAction:()=>{void 0!==this.renderer&&void 0!==this.rightController.gamepadID&&void 0!==this.baseGrabPosition&&this.renderer.scene.vrViewport.vrSceneGrabTranslate(this.evalGrabDistance(this.rightController.gamepadID,this.baseGrabPosition))},onReleasedAction:()=>{void 0!==this.renderer&&void 0!==this.rightController.gamepadID&&void 0!==this.baseGrabPosition&&(this.renderer.scene.vrViewport.vrSceneGrabReleaseTranslate(this.evalGrabDistance(this.rightController.gamepadID,this.baseGrabPosition)),this.baseGrabPosition=void 0)}},leftRightAxis:{throwKeyEvent:!1,action1:t=>{this.renderer&&this.renderer.animationRewindTarget&&t&&(this.renderer.animationRewindTarget+=3*t*this.renderer.rewindSpeed)},action2:t=>{this.renderer&&this.renderer.animationRewindTarget&&t&&(this.renderer.animationRewindTarget+=3*t*this.renderer.rewindSpeed)}}},!1);t.onConnect=this.onConnectFunction(this.rightController);const e=s.OculusController.createLeftControllerMapping({upDownAxis:{throwKeyEvent:!1,action1:t=>{this.renderer&&this.renderer.scene.vrViewport&&t&&this.renderer.scene.vrViewport.vrSceneScale(-.07*t)},action2:t=>{this.renderer&&this.renderer.scene.vrViewport&&t&&this.renderer.scene.vrViewport.vrSceneScale(-.07*t)}},xButton:{throwKeyEvent:!1,onClickAction:()=>{this.renderer&&this.renderer.scene.vrViewport&&this.renderer.scene.vrViewport.vrSceneContollerTransformsReset()}}},!1);e.onConnect=this.onConnectFunction(this.leftController),this.gamepadHandler=new o.GamePadHandler([t,e],{defaultActionThrottle:200,listAvailableGamepads:!0}),this.gamepadHandler.start()}evalGrabDistance(t,e){const n=this.updateTransformFunction(t),r=i.mat4.getTranslation(i.vec3.create(),n);return i.vec3.subtract(i.vec3.create(),r,e)}getControllerDataSources(){return new Map([["right oculus controller",this.rightController],["left oculus controller",this.leftController]])}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(145);e.GamePadHandler=r.GamePadHandler},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(146),o=n(81);!function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(r=e.GamePadHandlerState||(e.GamePadHandlerState={}));var a=function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n=window),this.gamepadsMapping=t,this.options=e,this.state=r.OFF,this.idToGamepad=new Map,this.availableGamepads=new Set,this.lastTimestampCheck=0,this.window=n,this.options.defaultActionThrottle=this.options.defaultActionThrottle||500,this.options.defaultNegativeThreshold=this.options.defaultNegativeThreshold||-.3,this.options.defaultPositiveThreshold=this.options.defaultPositiveThreshold||.3,this.options.listAvailableGamepads=this.options.listAvailableGamepads||!1}return t.prototype.start=function(){var t=this;void 0!==this.window.navigator.getGamepads?(this.gamepadsMapping.forEach((function(e){e.buttonsMapping.forEach((function(e){e.onPressedNotified=!1,e.delay=e.delay||t.options.defaultActionThrottle})),e.axesMapping.forEach((function(e){e.canExecuteAction1=!0,e.canExecuteAction2=!0,e.delay=e.delay||t.options.defaultActionThrottle,e.positiveThreshold=e.positiveThreshold||t.options.defaultNegativeThreshold,e.negativeThreshold=e.positiveThreshold||t.options.defaultPositiveThreshold}))})),this.listen()):console.warn("Browser does not support Gamepad API - https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API")},t.prototype.stop=function(){this.state=r.OFF},t.prototype.listen=function(){var t=this;this.state===r.OFF&&(this.state=r.ON),this.requestNextLoop(),this.window.addEventListener("gamepadconnected",(function(e){t.checkGamepadAvailability(e.gamepad)})),this.window.addEventListener("gamepaddisconnected",(function(e){var n=e.gamepad;if(!1===o.isNil(n)&&!0===t.idToGamepad.has(n.index)){t.idToGamepad.delete(n.index);var r=t.idToGamepad.get(n.index);if(r){var i=r.mapping.onDisconnect;void 0!==i&&i(n.index)}}}))},t.prototype.checkGamepadAvailability=function(t){if(!1===o.isNil(t)&&(!1===this.availableGamepads.has(t.id)&&(this.availableGamepads.add(t.id),this.options.listAvailableGamepads&&console.info("Found available gamepad with id: "+t.id)),!1===this.idToGamepad.has(t.index))){var e=i.linkGamepadToMappings(t,this.gamepadsMapping);if(e){e.mapping.debug&&(console.info("Gamepad mapping found for gamepad id: "+e.gamepad.id),console.info(e)),this.idToGamepad.set(t.index,e);var n=e.mapping.onConnect;void 0!==n&&n(t.index)}}},t.prototype.pollGamepads=function(t){var e=this.window.navigator.getGamepads();if(t-this.lastTimestampCheck>500){if(!1===o.isNil(e))for(var n=0,r=e;n<r.length;n++){(s=r[n])&&this.checkGamepadAvailability(s)}this.lastTimestampCheck=t}for(var i=0,a=e;i<a.length;i++){var s;if(s=a[i]){var u=this.idToGamepad.get(s.index);u&&(u.gamepad=s)}}},t.prototype.handleGamepads=function(){var t=this;0!==this.idToGamepad.size&&this.idToGamepad.forEach((function(e,n){t.idToGamepad.has(n)&&i.handleGamepad(e.gamepad,e.mapping,t.window)}))},t.prototype.requestNextLoop=function(){var t=this;this.state!==r.OFF&&requestAnimationFrame((function(e){return t.gamepadLoop(e)}))},t.prototype.gamepadLoop=function(t){this.pollGamepads(t),this.handleGamepads(),this.requestNextLoop()},t.prototype.getGamepad=function(t){var e=this.idToGamepad.get(t);if(e)return e.gamepad},t.prototype.getAllAvailableGamepadIds=function(){return this.availableGamepads},t}();e.GamePadHandler=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(147),i=n(148),o=n(81);e.linkGamepadToMappings=function(t,e){var n;return e.forEach((function(e){t.id.includes(e.identifier)&&(n={gamepad:t,mapping:e})})),n},e.handleGamepad=function(t,e,n){t.connected?(function(t,e,n){if(!e.buttonsMapping||0===e.buttonsMapping.length)return;t.buttons.forEach((function(t,r){var a=e.buttonsMapping.find((function(t){return t.mappingIndex===r}));o.isNil(a)||i.handleButton(t,a,n,e.debug)}))}(t,e,n),function(t,e,n){if(!e.axesMapping||0===e.axesMapping.length)return;t.axes.forEach((function(t,i){var a=e.axesMapping.find((function(t){return t.mappingIndex===i}));o.isNil(a)||r.handleAxis(t,i,a,n,e.debug)}))}(t,e,n)):console.warn("Gamepad in disconnected state :/",t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(81);e.handleAxis=function(t,e,n,i,o){void 0===o&&(o=!1),!r.isNil(n.negativeThreshold)&&t<0&&t>n.negativeThreshold&&(t=0),!r.isNil(n.positiveThreshold)&&t>0&&t<n.positiveThreshold&&(t=0),o&&0!==t&&console.info("Axis '"+n.axeInfo+"' registered at index "+e+".\n      Value : "+r.truncateDecimal(t,3),n),n.throwKeyEvent?0!==t?function(t,e,n){var r;e?(r=new KeyboardEvent("keydown",{key:t.key1}),t.pressed1=!0):(r=new KeyboardEvent("keydown",{key:t.key2}),t.pressed2=!0);n.document.dispatchEvent(r)}(n,t>0,i):function(t,e){if(t.pressed1){var n=new KeyboardEvent("keyup",{key:t.key1});e.document.dispatchEvent(n),t.pressed1=!1}if(t.pressed2){n=new KeyboardEvent("keyup",{key:t.key2});e.document.dispatchEvent(n),t.pressed2=!1}}(n,i):0!==t&&function(t,e){if(t>0){if(!e.canExecuteAction1)return;if("function"!=typeof e.action1)return void console.warn("No action given to execute");e.action1(t,e.previousValue),e.canExecuteAction1=!1,setTimeout((function(){e.canExecuteAction1=!0}),e.delay)}else{if(!e.canExecuteAction2)return;if("function"!=typeof e.action2)return void console.warn("No action given to execute");e.action2(t,e.previousValue),e.canExecuteAction2=!1,setTimeout((function(){e.canExecuteAction2=!0}),e.delay)}}(t,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleButton=function(t,e,n,r){void 0===r&&(r=!1),r&&t.pressed&&console.info("You pressed the button mapped to :",e),t.pressed?function(t,e){if(t.throwKeyEvent){var n=new KeyboardEvent("keydown",{key:t.key});e.document.dispatchEvent(n)}t.onPressedNotified&&t.onHoldAction&&t.onHoldAction();!t.onPressedNotified&&t.onPressedAction&&(t.onPressedNotified=!0,t.onPressedAction());t.pressed=!0}(e,n):function(t,e){if(t.pressed){if(t.throwKeyEvent){var n=new KeyboardEvent("keyup",{key:t.key});e.document.dispatchEvent(n)}t.onReleasedAction&&(t.onPressedNotified=!1,t.onReleasedAction()),t.onClickAction&&t.onClickAction(),t.pressed=!1}}(e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GamepadGeometry=void 0;const r=n(19),i=n(78);class o extends i.MeshDataSource{constructor(t,e,n,r){super("gamepad - "+t,n,{url:r,width:2048,flipY:!0},!0),this.gamepadName=t,this._onTransformUpdateRequest=e,this._internal=!0}renderFrame(t){}renderVRFrame(t,e,n){if(void 0!==this._gamepadID){const e=this._onTransformUpdateRequest(this._gamepadID);r.mat4.multiply(this.uniforms.u_transformMatrix,n,e),super.renderFrame(t)}}set gamepadID(t){this._gamepadID=t}get gamepadID(){return this._gamepadID}}e.GamepadGeometry=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OculusController=void 0;const r={mappingIndex:0,axeInfo:"Thumbstick  ",delay:60},i={mappingIndex:1,axeInfo:"Thumbstick  ",delay:60},o={mappingIndex:0,btnInfo:"thumbstick"},a={mappingIndex:1,btnInfo:"trigger"},s={mappingIndex:2,btnInfo:"grip"},u={mappingIndex:3,btnInfo:"a"},c={mappingIndex:4,btnInfo:"b"},f={mappingIndex:3,btnInfo:"x"},h={mappingIndex:4,btnInfo:"y"};e.OculusController=class{static addButton(t,e,n){void 0!==e&&t.push(Object.assign(Object.assign({},e),n))}static addAxis(t,e,n){void 0!==e&&t.push(Object.assign(Object.assign({},e),n))}static createBaseController(t,e,n,u){const c=new Array;this.addAxis(c,t.leftRightAxis,r),this.addAxis(c,t.upDownAxis,i);const f=new Array;return this.addButton(f,t.thumbButton,o),this.addButton(f,t.triggerButton,a),this.addButton(f,t.gripButton,s),n.forEach(t=>this.addButton(f,t[0],t[1])),{identifier:e,debug:!0===u,buttonsMapping:f,axesMapping:c}}static createRightControllerMapping(t,e){return this.createBaseController(t,"Oculus Touch (Right)",[[t.aButton,u],[t.bButton,c]],e)}static createLeftControllerMapping(t,e){return this.createBaseController(t,"Oculus Touch (Left)",[[t.xButton,f],[t.yButton,h]],e)}}},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/oculus_cv1_controller_right_v3a4455d113ec4b120ea06db9c081d082c.obj"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/oculus_cv1_controller_left_v3d378f869b3c932b3c9b086a2cf3551c6.obj"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/oculus_controller_colorf703b34a8394dfd6ebd67af480e1fc99.png"},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.VisualizationConfigurator=void 0;const a=n(84),s=n(86),u=n(90),c=n(88),f=n(78),h=n(80),l=n(91),d=n(92),p=n(79),m=n(75),y=n(93),g=n(155),v=n(94),x=n(96),b=n(43),_=n(36),w=o(n(12)),M=n(157),T=n(159),A=n(57),S=n(19),O=n(160),E=w.type({min:_.vec3type,max:_.vec3type}),k=w.intersection([w.type({id:w.string,displayName:w.string,gridOptions:u.GridOptionsType}),w.partial({fontOptions:p.FontOptionsType})]),C=w.intersection([w.type({id:w.string,displayName:w.string,options:c.LinesPathOptionsType,shaderAnimated:w.boolean,subElementCount:w.number}),w.partial({boundingBox:E,polygonOffset:_.vec2type,alphaBlending:w.boolean,predefinedAlpha:w.boolean})]),P=w.intersection([w.type({id:w.string,displayName:w.string,geometryURL:w.string,options:f.MeshRenderingOptions}),w.partial({isInVRWorldSpace:w.boolean})]),I=w.intersection([w.type({id:w.string,displayName:w.string,options:a.PointsPathOptionsType,shaderAnimated:w.boolean,subElementCount:w.number,pointSize:w.number}),w.partial({boundingBox:E,polygonOffset:_.vec2type,enableAlphaBlending:w.boolean})]),R=w.intersection([w.type({id:w.string,displayName:w.string,pathOptions:s.TexturePathOptionsType,shaderAnimated:w.boolean,subElementCount:w.number,dataOptions:s.TextureDataOptionsType}),w.partial({polygonOffset:_.vec2type})]),D=w.intersection([w.type({id:w.string,displayName:w.string,shaderAnimated:w.boolean,subElementCount:w.number,pathOptions:O.VolumePathOptionsType,dataOptions:O.VolumeDataOptionsType}),w.partial({polygonOffset:_.vec2type})]),N=w.type({options:h.ViewportSettingsType,layers:w.array(w.string)}),B=w.partial({static:w.partial({legends:w.array(y.LegendConfigurationType),legendsDisplacement:w.array(g.LegendDisplacementConfigurationType)}),dynamic:w.partial({graphs:w.array(x.GraphConfigurationType),spectrumGraphs:w.array(v.GraphSpectrumConfigurationType)})}),L=w.partial({gridDataSources:w.array(k),lineDataSources:w.array(C),meshDataSources:w.array(P),pointsDataSources:w.array(I),textureDataSources:w.array(R),volumetricDataSource:D}),j=w.intersection([w.type({dataSources:L,viewports:w.array(N),vrLayers:w.array(w.string),visualizationOptions:d.VisualizationOptionsType}),w.partial({graphicalElements:B})]);e.VisualizationConfigurator=class{static fromJSONConfiguration(t){const e=document.getElementById(b.BaseHTMLContainerID);if(null!=e){const n=this.parseJSON(t);if(n){const t=this.getDataSources(n),[r,i]=this.getViewports(n),o=this.getGraphicalElements(n,e),a=new l.Scene(t,r,i);this.initVisualization(a,n,o)}else console.error("No valid configuration provided, scene cannot be initialized")}else console.error("Base HTML container not found in the page!")}static getDataSources(t){let e=new Map;if(t.dataSources){const n=t.dataSources;if(n.gridDataSources&&n.gridDataSources.forEach(t=>this.registerDataSource(e,t.id,new u.GridHelper(t.displayName,t.gridOptions,t.fontOptions),u.GridHelper.name)),n.lineDataSources&&n.lineDataSources.forEach(t=>this.registerDataSource(e,t.id,new c.LinesDataSource(t.displayName,t.options,t.shaderAnimated,t.subElementCount,this.createBBox(t.boundingBox),t.polygonOffset,t.alphaBlending,t.predefinedAlpha),c.LinesDataSource.name)),n.meshDataSources&&n.meshDataSources.forEach(t=>this.registerDataSource(e,t.id,new f.MeshDataSource(t.displayName,t.geometryURL,t.options,t.isInVRWorldSpace),f.MeshDataSource.name)),n.pointsDataSources&&n.pointsDataSources.forEach(t=>this.registerDataSource(e,t.id,new a.PointsDataSource(t.displayName,t.options,t.shaderAnimated,t.subElementCount,t.pointSize,this.createBBox(t.boundingBox),t.polygonOffset,t.enableAlphaBlending),a.PointsDataSource.name)),n.textureDataSources&&n.textureDataSources.forEach(t=>this.registerDataSource(e,t.id,new s.TexturesDataSource(t.displayName,t.pathOptions,t.shaderAnimated,t.subElementCount,t.dataOptions,t.polygonOffset),s.TexturesDataSource.name)),n.volumetricDataSource){const t=n.volumetricDataSource;this.registerDataSource(e,t.id,new O.VolumetricDataSource(t.displayName,t.pathOptions,t.dataOptions,t.shaderAnimated,t.subElementCount,t.polygonOffset),O.VolumetricDataSource.name)}}return 0==e.size&&console.warn("No data sources were registered, scene will be empty"),e}static getViewports(t){let e=new Map;t.viewports&&t.viewports.forEach(t=>{e.set(new h.Viewport(t.options),t.layers),t.options.main||b.createViewportHTML(t.options.name,t.options.leftBottom,t.options.dimension)}),0==e.size&&console.warn("No viewports configured, non-VR scene will be empty");let n=new Array;return t.vrLayers&&(n=t.vrLayers),0==n.length&&console.warn("No VR viewports configured, VR scene will be empty"),[e,n]}static getGraphicalElements(t,e){let n=new Array;if(t.graphicalElements){const r=t.graphicalElements;r.static&&(r.static.legends&&r.static.legends.forEach(t=>{new y.Legend(t,e),console.info(`Adding graphical element of type ${y.Legend.name} with title ${t.legendTitle}`)}),r.static.legendsDisplacement&&r.static.legendsDisplacement.forEach(t=>{new g.LegendDisplacement(t,e),console.info(`Adding graphical element of type ${g.LegendDisplacement.name} ${t.legendTitle?"with title "+t.legendTitle:"without any title"}`)})),r.dynamic&&(r.dynamic.graphs&&r.dynamic.graphs.forEach(t=>{n.push(new x.Graph(t,e)),console.info(`Adding graphical element of type ${x.Graph.name} with title ${t.graphBase.title}`)}),r.dynamic.spectrumGraphs&&r.dynamic.spectrumGraphs.forEach(t=>{n.push(new v.GraphSpectrum(t,e)),console.info(`Adding graphical element of type ${v.GraphSpectrum.name} with title ${t.graphBase.title}`)}))}return n}static initVisualization(t,e,n){e.visualizationOptions?(b.createVisualizationDescriptionHTML(e.visualizationOptions.description),b.updatePageTitle(e.visualizationOptions.description.title),new d.Visualization(t,e.visualizationOptions,t=>n.forEach(e=>e.animationFunction()(t)))):console.error("Visualization cannot be configured without visualization options")}static registerDataSource(t,e,n,r){t.has(e)?console.error(`Duplicated data source id ${e}, skipping data source (type ${r}) initialization`):(console.info(`Registering data source with id ${e} and type ${r}`),t.set(e,n))}static createBBox(t){return t?new m.BoundingBox([S.vec3.clone(t.min),S.vec3.clone(t.max)]):void 0}static parseJSON(t){let e=A.tryCatch(()=>JSON.parse(t),t=>t instanceof Error?t:new Error("unknown error"));const n=T.pipe(e,t=>T.pipe(t,A.mapLeft(t=>[{value:t,context:new Array,message:t.message}])),t=>T.pipe(t,A.chain(t=>j.decode(t))));let r;return A.isRight(n)?r=n.right:(M.failure(n.left).forEach(t=>console.error(t)),r=void 0),r}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LegendDisplacement=e.LegendDisplacementConfigurationType=void 0;const a=n(59),s=o(n(12)),u=n(43);e.LegendDisplacementConfigurationType=s.intersection([s.type({html:u.HTMLElementConfigurationType,dataURL:s.string,valueDomain:s.array(s.number)}),s.partial({gridlineCount:s.number,legendTitle:s.string})]);e.LegendDisplacement=class{constructor(t,e){this.margin={top:20,right:10,bottom:10,left:50};const n=u.createHTMLElement(t.html);e.appendChild(n);const r=n.clientWidth,i=n.clientHeight,o=r-this.margin.left-this.margin.right,s=i-this.margin.top-this.margin.bottom,c=a.select("#"+t.html.elementID).append("svg").attr("width",r).attr("height",i).append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),[f,h]=this.createScales(o,s,t.valueDomain);this.createDisplacementCurve(c,f,h,o,s,t)}createScales(t,e,n){return[a.scaleLinear().range([0,t-this.margin.left]),a.scaleLinear().domain(n).range([e,this.margin.top])]}createDisplacementCurve(t,e,n,r,i,o){const s=a.line().curve(a.curveMonotoneX).x(t=>e(t[0])).y(t=>n(t[1]));this.fetchData(o.dataURL).then(n=>{const a=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],u=new Array;Object.keys(n).forEach((t,e)=>{if(e%10==0){const t=n[e].x;t<a[0]&&(a[0]=t),t>a[1]&&(a[1]=t),u.push([n[e].x,n[e].y])}}),e.domain(a),this.drawCurve(t,s,u),this.addGridlines(t,o,r,i),o.legendTitle&&this.addTitle(t,o.legendTitle,r)})}drawCurve(t,e,n){const r=e(n);null!=r&&t.append("path").attr("class","displacement").attr("fill","none").attr("d",r)}addGridlines(t,e,n,r){const i=a.scaleLinear().domain(e.valueDomain).range([r,this.margin.top]),o=a.axisRight(i).tickValues(this.getTickValues(e)).tickFormat(a.format(".0e")).tickSize(n-this.margin.left);t.append("g").attr("class","grid grid--y").call(o),t.selectAll(".tick").select("text").attr("class","axis-text"),t.selectAll(".domain").remove()}addTitle(t,e,n){t.append("text").attr("dy","1em").attr("y",0-this.margin.top).attr("x",n/2).style("text-anchor","middle").attr("class","legend-title").text(e)}getTickValues(t){if(t.gridlineCount){let e=new Array(t.gridlineCount);e[0]=t.valueDomain[0],e[e.length-1]=t.valueDomain[1];const n=(Math.abs(t.valueDomain[0])+Math.abs(t.valueDomain[1]))/(t.gridlineCount-1);for(let r=1;r<e.length-1;r++)e[r]=t.valueDomain[0]+r*n;return e}return null}fetchData(t){return new Promise(e=>{fetch(t).then(t=>t.json()).then(t=>e(t))})}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.GraphConfigurationType=void 0;const a=n(59),s=o(n(12)),u=n(95),c=n(43);e.GraphConfigurationType=s.type({html:c.HTMLElementConfigurationType,graphBase:u.GraphBaseConfigurationType,colorScheme:s.array(s.string),dataURL:s.string,timeDomain:s.array(s.number),originalValueDomain:s.array(s.number),scaleType:s.keyof({log:null,linear:null}),timeFrameToFs:s.number});const f=20,h=10,l=40,d=50;e.Graph=class{constructor(t,e){this.valuesDomain=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],this.timeFrameToFs=1,this.animationFunc=t=>{};const n=c.createHTMLElement(t.html);e.appendChild(n);const r=n.clientWidth,i=n.clientHeight,o=r-d-h,s=i-f-l;this.timeFrameToFs=t.timeFrameToFs;const u=a.select("#"+t.html.elementID).append("svg").attr("width",r).attr("height",i).append("g").attr("transform",`translate(${d}, ${f})`);this.createGraph(t,u,o,s)}createGraph(t,e,n,r){const[i,o]=this.createScales(t,n,r);this.fetchData(t.dataURL).then(a=>{let s=new Array;Object.keys(a).forEach(e=>{const n=a[e].time;if(n>=t.timeDomain[0]&&n<t.timeDomain[1]){const n=a[e][t.graphBase.yValueName];n<this.valuesDomain[0]&&(this.valuesDomain[0]=n),n>this.valuesDomain[1]&&(this.valuesDomain[1]=n),s.push(a[e])}}),this.createColorGradient(t,e),this.updateScales(t,i,o),this.addLine(t,e,n,r,i,o,s),this.addCurtain(e,n,r),this.addGridlines(e,n,r,i,o),this.addAxis(t,e,n,r,i,o),this.addTitle(t,e,n),this.animationFunc=t=>this.animateCurtain(t,n,i)})}addGridlines(t,e,n,r,i){a.axisLeft(i).tickValues(i.domain().filter((t,e)=>!(e%10))).tickSize(-e),a.axisLeft(i).tickSize(-e),t.append("g").attr("class","grid grid--x").call(a.axisBottom(r).ticks(5).tickSize(n)).selectAll("text").remove(),t.append("g").attr("class","grid grid--y").call(a.axisLeft(i).ticks(5).tickSize(-e)).selectAll("text").remove(),t.selectAll(".grid").selectAll("path").remove()}addTitle(t,e,n){e.append("text").attr("y",0-f).attr("x",n/2).attr("text-anchor","middle").attr("dy","1em").attr("class","graph-title").text(t.graphBase.title)}addCurtain(t,e,n){t.append("rect").attr("x",-e).attr("y",-n).attr("height",n).attr("width",e).attr("transform","rotate(180)").attr("class","curtain").attr("opacity",.9).attr("fill",()=>a.select("body").style("background-color"))}animateCurtain(t,e,n){a.select(".curtain").attr("width",e-n(t/this.timeFrameToFs))}updateCurtainColor(){a.select(".curtain").attr("fill",()=>a.select("body").style("background-color"))}addLine(t,e,n,r,i,o,s){e.append("clipPath").attr("id","clip-line").append("rect").attr("width",n).attr("height",r);const u=a.line().curve(a.curveBasis).x(e=>i(e[t.graphBase.xValueName]/this.timeFrameToFs)).y(e=>o(e[t.graphBase.yValueName]));e.append("path").datum(s).attr("class","line").attr("fill","none").attr("clip-path","url(#clip-line)").attr("stroke","url(#linear-gradient-lineChart").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",2).attr("d",u)}fetchData(t){return new Promise(e=>{fetch(t).then(t=>t.json()).then(t=>e(t))})}createScales(t,e,n){const r="log"==t.scaleType?a.scaleLog():a.scaleLinear();r.range([n,0]);return[a.scaleLinear().range([0,e]),r]}updateScales(t,e,n){n.domain(this.valuesDomain),e.domain([t.timeDomain[0]/this.timeFrameToFs,t.timeDomain[1]/this.timeFrameToFs])}addAxis(t,e,n,r,i,o){const s=a.axisBottom(i).ticks(Math.floor(n/60)),u=a.axisLeft(o).ticks(Math.floor(r/30),".0e");e.append("g").attr("class","axis axis--x").attr("transform",`translate(0, ${r})`).call(s).append("text").attr("class","axis axis-text").attr("y",30).attr("x",n/2).attr("dy","0.71em").attr("dx","0.71em").attr("text-anchor","middle").text(t.graphBase.xAxisLabel),e.append("g").attr("class","axis axis--y").call(u).append("text").attr("class","axis axis-text").attr("transform","rotate(-90)").attr("y",20).attr("x",0-r/2).attr("dy","0.71em").attr("dx","0.71em").attr("text-anchor","middle").text(t.graphBase.yAxisLabel)}createColorGradient(t,e){const n=e.append("defs").append("linearGradient").attr("id","linear-gradient-lineChart").attr("x1","0%").attr("x2","0%").attr("y1","100%").attr("y2","0%").attr("spreadMethod","pad"),r=a.scaleLinear().range(this.updateColorScheme(t));n.selectAll("stop").data(r.range()).enter().append("stop").attr("offset",(t,e)=>e/(r.range().length-1)).attr("stop-color",t=>t)}updateColorScheme(t){let e=new Array;const n=a.scaleLinear().domain(t.originalValueDomain).range([0,t.colorScheme.length]);return e=t.colorScheme.slice(Math.round(n(this.valuesDomain[0])),Math.round(n(this.valuesDomain[1]))),e.length<=1&&e.push(t.colorScheme[0],t.colorScheme[0]),e}animationFunction(){return this.animationFunc}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PathReporter=e.success=e.failure=void 0;var r=n(158),i=n(57);function o(t){return void 0!==t.message?t.message:"Invalid value "+(("function"==typeof(e=t.value)?r.getFunctionName(e):"number"!=typeof e||isFinite(e)?JSON.stringify(e):isNaN(e)?"NaN":e>0?"Infinity":"-Infinity")+" supplied to ")+t.context.map((function(t){return t.key+": "+t.type.name})).join("/");var e}function a(t){return t.map(o)}function s(){return["No errors!"]}e.failure=a,e.success=s,e.PathReporter={report:i.fold(a,s)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getIndex=e.getTags=e.emptyTags=e.alias=e.clean=e.StrictType=e.dictionary=e.Integer=e.refinement=e.object=e.ObjectType=e.Dictionary=e.any=e.AnyType=e.never=e.NeverType=e.getDefaultContext=e.getValidationError=e.void=e.interface=e.Array=e.undefined=e.null=e.exact=e.ExactType=e.taggedUnion=e.TaggedUnionType=e.strict=e.readonlyArray=e.ReadonlyArrayType=e.readonly=e.ReadonlyType=e.tuple=e.TupleType=e.intersection=e.IntersectionType=e.union=e.UnionType=e.record=e.getDomainKeys=e.DictionaryType=e.partial=e.PartialType=e.type=e.InterfaceType=e.array=e.ArrayType=e.recursion=e.RecursiveType=e.keyof=e.KeyofType=e.literal=e.LiteralType=e.Int=e.brand=e.RefinementType=e.Function=e.FunctionType=e.UnknownRecord=e.AnyDictionaryType=e.UnknownArray=e.AnyArrayType=e.boolean=e.BooleanType=e.bigint=e.BigIntType=e.number=e.NumberType=e.string=e.StringType=e.unknown=e.UnknownType=e.voidType=e.VoidType=e.UndefinedType=e.nullType=e.NullType=e.success=e.failure=e.failures=e.appendContext=e.getContextEntry=e.getFunctionName=e.identity=e.Type=void 0;var s=n(57),u=function(){function t(t,e,n,r){this.name=t,this.is=e,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return t.prototype.pipe=function(n,r){var i=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new t(r,n.is,(function(t,e){var r=i.validate(t,e);return s.isLeft(r)?r:n.validate(r.right,e)}),this.encode===e.identity&&n.encode===e.identity?e.identity:function(t){return i.encode(n.encode(t))})},t.prototype.asDecoder=function(){return this},t.prototype.asEncoder=function(){return this},t.prototype.decode=function(t){return this.validate(t,[{key:"",type:this,actual:t}])},t}();e.Type=u,e.identity=function(t){return t},e.getFunctionName=function(t){return t.displayName||t.name||"<function"+t.length+">"},e.getContextEntry=function(t,e){return{key:t,type:e}},e.appendContext=function(t,e,n,r){for(var i=t.length,o=Array(i+1),a=0;a<i;a++)o[a]=t[a];return o[i]={key:e,type:n,actual:r},o},e.failures=s.left,e.failure=function(t,n,r){return e.failures([{value:t,context:n,message:r}])},e.success=s.right;var c=function(t,e){for(var n=e.length,r=0;r<n;r++)t.push(e[r])},f=function(t){function n(){var n=t.call(this,"null",(function(t){return null===t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="NullType",n}return i(n,t),n}(u);e.NullType=f,e.nullType=new f,e.null=e.nullType;var h=function(t){function n(){var n=t.call(this,"undefined",(function(t){return void 0===t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="UndefinedType",n}return i(n,t),n}(u);e.UndefinedType=h;var l=new h;e.undefined=l;var d=function(t){function n(){var n=t.call(this,"void",l.is,l.validate,e.identity)||this;return n._tag="VoidType",n}return i(n,t),n}(u);e.VoidType=d,e.voidType=new d,e.void=e.voidType;var p=function(t){function n(){var n=t.call(this,"unknown",(function(t){return!0}),e.success,e.identity)||this;return n._tag="UnknownType",n}return i(n,t),n}(u);e.UnknownType=p,e.unknown=new p;var m=function(t){function n(){var n=t.call(this,"string",(function(t){return"string"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="StringType",n}return i(n,t),n}(u);e.StringType=m,e.string=new m;var y=function(t){function n(){var n=t.call(this,"number",(function(t){return"number"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="NumberType",n}return i(n,t),n}(u);e.NumberType=y,e.number=new y;var g=function(t){function n(){var n=t.call(this,"bigint",(function(t){return"bigint"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="BigIntType",n}return i(n,t),n}(u);e.BigIntType=g,e.bigint=new g;var v=function(t){function n(){var n=t.call(this,"boolean",(function(t){return"boolean"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="BooleanType",n}return i(n,t),n}(u);e.BooleanType=v,e.boolean=new v;var x=function(t){function n(){var n=t.call(this,"UnknownArray",Array.isArray,(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="AnyArrayType",n}return i(n,t),n}(u);e.AnyArrayType=x,e.UnknownArray=new x,e.Array=e.UnknownArray;var b=function(t){function n(){var n=t.call(this,"UnknownRecord",(function(t){var e=Object.prototype.toString.call(t);return"[object Object]"===e||"[object Window]"===e}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="AnyDictionaryType",n}return i(n,t),n}(u);e.AnyDictionaryType=b,e.UnknownRecord=new b;var _=function(t){function n(){var n=t.call(this,"Function",(function(t){return"function"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="FunctionType",n}return i(n,t),n}(u);e.FunctionType=_,e.Function=new _;var w=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i)||this;return s.type=o,s.predicate=a,s._tag="RefinementType",s}return i(e,t),e}(u);e.RefinementType=w,e.brand=function(t,e,n){return Z(t,e,n)},e.Int=e.brand(e.number,(function(t){return Number.isInteger(t)}),"Int");var M=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.value=o,a._tag="LiteralType",a}return i(e,t),e}(u);e.LiteralType=M,e.literal=function(t,n){void 0===n&&(n=JSON.stringify(t));var r=function(e){return e===t};return new M(n,r,(function(n,i){return r(n)?e.success(t):e.failure(n,i)}),e.identity,t)};var T=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.keys=o,a._tag="KeyofType",a}return i(e,t),e}(u);e.KeyofType=T;var A=Object.prototype.hasOwnProperty;e.keyof=function(t,n){void 0===n&&(n=Object.keys(t).map((function(t){return JSON.stringify(t)})).join(" | "));var r=function(n){return e.string.is(n)&&A.call(t,n)};return new T(n,r,(function(t,n){return r(t)?e.success(t):e.failure(t,n)}),e.identity,t)};var S=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.runDefinition=o,a._tag="RecursiveType",a}return i(e,t),e}(u);e.RecursiveType=S,Object.defineProperty(S.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),e.recursion=function(t,e){var n,r=function(){return n||((n=e(i)).name=t),n},i=new S(t,(function(t){return r().is(t)}),(function(t,e){return r().validate(t,e)}),(function(t){return r().encode(t)}),r);return i};var O=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ArrayType",a}return i(e,t),e}(u);e.ArrayType=O,e.array=function(t,n){return void 0===n&&(n="Array<"+t.name+">"),new O(n,(function(n){return e.UnknownArray.is(n)&&n.every(t.is)}),(function(n,r){var i=e.UnknownArray.validate(n,r);if(s.isLeft(i))return i;for(var o=i.right,a=o.length,u=o,f=[],h=0;h<a;h++){var l=o[h],d=t.validate(l,e.appendContext(r,String(h),t,l));if(s.isLeft(d))c(f,d.left);else{var p=d.right;p!==l&&(u===o&&(u=o.slice()),u[h]=p)}}return f.length>0?e.failures(f):e.success(u)}),t.encode===e.identity?e.identity:function(e){return e.map(t.encode)},t)};var E=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="InterfaceType",a}return i(e,t),e}(u);e.InterfaceType=E;var k=function(t){return Object.keys(t).map((function(e){return e+": "+t[e].name})).join(", ")},C=function(t){for(var n=0;n<t.length;n++)if(t[n].encode!==e.identity)return!1;return!0},P=function(t){return"{ "+k(t)+" }"};e.type=function(t,n){void 0===n&&(n=P(t));var r=Object.keys(t),i=r.map((function(e){return t[e]})),a=r.length;return new E(n,(function(t){if(e.UnknownRecord.is(t)){for(var n=0;n<a;n++){var o=r[n],s=t[o];if(void 0===s&&!A.call(t,o)||!i[n].is(s))return!1}return!0}return!1}),(function(t,n){var u=e.UnknownRecord.validate(t,n);if(s.isLeft(u))return u;for(var f=u.right,h=f,l=[],d=0;d<a;d++){var p=r[d],m=h[p],y=i[d],g=y.validate(m,e.appendContext(n,p,y,m));if(s.isLeft(g))c(l,g.left);else{var v=g.right;(v!==m||void 0===v&&!A.call(h,p))&&(h===f&&(h=o({},f)),h[p]=v)}}return l.length>0?e.failures(l):e.success(h)}),C(i)?e.identity:function(t){for(var n=o({},t),s=0;s<a;s++){var u=r[s],c=i[s].encode;c!==e.identity&&(n[u]=c(t[u]))}return n},t)},e.interface=e.type;var I=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="PartialType",a}return i(e,t),e}(u);e.PartialType=I;var R=function(t){return"Partial<"+t+">"};e.partial=function(t,n){void 0===n&&(n=R(P(t)));var r=Object.keys(t),i=r.map((function(e){return t[e]})),a=r.length;return new I(n,(function(n){if(e.UnknownRecord.is(n)){for(var i=0;i<a;i++){var o=r[i],s=n[o];if(void 0!==s&&!t[o].is(s))return!1}return!0}return!1}),(function(n,i){var u=e.UnknownRecord.validate(n,i);if(s.isLeft(u))return u;for(var f=u.right,h=f,l=[],d=0;d<a;d++){var p=r[d],m=h[p],y=t[p],g=y.validate(m,e.appendContext(i,p,y,m));if(s.isLeft(g))void 0!==m&&c(l,g.left);else{var v=g.right;v!==m&&(h===f&&(h=o({},f)),h[p]=v)}}return l.length>0?e.failures(l):e.success(h)}),C(i)?e.identity:function(t){for(var e=o({},t),n=0;n<a;n++){var s=r[n],u=t[s];void 0!==u&&(e[s]=i[n].encode(u))}return e},t)};var D=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i)||this;return s.domain=o,s.codomain=a,s._tag="DictionaryType",s}return i(e,t),e}(u);function N(t){var n;if(et(t)){var r=t.value;if(e.string.is(r))return(n={})[r]=null,n}else{if("KeyofType"===t._tag)return t.keys;if(rt(t)){var i=t.types.map((function(t){return N(t)}));return i.some(l.is)?void 0:Object.assign.apply(Object,a([{}],i))}}}function B(t,n,r){var i=N(t);return i?function(t,n,r,i){void 0===i&&(i="{ [K in "+n.name+"]: "+r.name+" }");var o=t.length;return new D(i,(function(n){return e.UnknownRecord.is(n)&&t.every((function(t){return r.is(n[t])}))}),(function(n,i){var a=e.UnknownRecord.validate(n,i);if(s.isLeft(a))return a;for(var u=a.right,f={},h=[],l=!1,d=0;d<o;d++){var p=t[d],m=u[p],y=r.validate(m,e.appendContext(i,p,r,m));if(s.isLeft(y))c(h,y.left);else{var g=y.right;l=l||g!==m,f[p]=g}}return h.length>0?e.failures(h):e.success(l||Object.keys(u).length!==o?f:u)}),r.encode===e.identity?e.identity:function(e){for(var n={},i=0;i<o;i++){var a=t[i];n[a]=r.encode(e[a])}return n},n,r)}(Object.keys(i),t,n,r):function(t,n,r){return void 0===r&&(r="{ [K in "+t.name+"]: "+n.name+" }"),new D(r,(function(r){return e.UnknownRecord.is(r)?Object.keys(r).every((function(e){return t.is(e)&&n.is(r[e])})):tt(n)&&Array.isArray(r)}),(function(r,i){if(e.UnknownRecord.is(r)){for(var o={},a=[],u=Object.keys(r),f=u.length,h=!1,l=0;l<f;l++){var d=u[l],p=r[d],m=t.validate(d,e.appendContext(i,d,t,d));if(s.isLeft(m))c(a,m.left);else{var y=m.right;h=h||y!==d,d=y;var g=n.validate(p,e.appendContext(i,d,n,p));if(s.isLeft(g))c(a,g.left);else{var v=g.right;h=h||v!==p,o[d]=v}}}return a.length>0?e.failures(a):e.success(h?o:r)}return tt(n)&&Array.isArray(r)?e.success(r):e.failure(r,i)}),t.encode===e.identity&&n.encode===e.identity?e.identity:function(e){for(var r={},i=Object.keys(e),o=i.length,a=0;a<o;a++){var s=i[a];r[String(t.encode(s))]=n.encode(e[s])}return r},t,n)}(t,n,r)}e.DictionaryType=D,e.getDomainKeys=N,e.record=B;var L=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="UnionType",a}return i(e,t),e}(u);e.UnionType=L;var j=function(t){return"("+t.map((function(t){return t.name})).join(" | ")+")"};e.union=function(t,n){void 0===n&&(n=j(t));var r=at(t);if(void 0!==r&&t.length>0){var i=r[0],o=r[1],a=o.length,u=function(t){for(var e=0;e<a;e++)if(-1!==o[e].indexOf(t))return e};return new q(n,(function(n){if(e.UnknownRecord.is(n)){var r=u(n[i]);return void 0!==r&&t[r].is(n)}return!1}),(function(n,r){var o=e.UnknownRecord.validate(n,r);if(s.isLeft(o))return o;var a=o.right,c=u(a[i]);if(void 0===c)return e.failure(n,r);var f=t[c];return f.validate(a,e.appendContext(r,String(c),f,a))}),C(t)?e.identity:function(e){var r=u(e[i]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return t[r].encode(e)},t,i)}return new L(n,(function(e){return t.some((function(t){return t.is(e)}))}),(function(n,r){for(var i=[],o=0;o<t.length;o++){var a=t[o],u=a.validate(n,e.appendContext(r,String(o),a,n));if(!s.isLeft(u))return e.success(u.right);c(i,u.left)}return e.failures(i)}),C(t)?e.identity:function(e){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.is(e))return o.encode(e)}throw new Error("no codec found to encode value in union type "+n)},t)};var F=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="IntersectionType",a}return i(e,t),e}(u);e.IntersectionType=F;var z=function(t,n){for(var r=!0,i=!0,o=0,a=n;o<a.length;o++){(f=a[o])!==t&&(r=!1),e.UnknownRecord.is(f)&&(i=!1)}if(r)return t;if(i)return n[n.length-1];for(var s={},u=0,c=n;u<c.length;u++){var f=c[u];for(var h in f)f[h]===t[h]&&s.hasOwnProperty(h)||(s[h]=f[h])}return s};e.intersection=function(t,n){void 0===n&&(n="("+t.map((function(t){return t.name})).join(" & ")+")");var r=t.length;return new F(n,(function(e){return t.every((function(t){return t.is(e)}))}),0===t.length?e.success:function(n,i){for(var o=[],a=[],u=0;u<r;u++){var f=t[u],h=f.validate(n,e.appendContext(i,String(u),f,n));s.isLeft(h)?c(a,h.left):o.push(h.right)}return a.length>0?e.failures(a):e.success(z(n,o))},0===t.length?e.identity:function(e){return z(e,t.map((function(t){return t.encode(e)})))},t)};var V=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.types=o,a._tag="TupleType",a}return i(e,t),e}(u);e.TupleType=V,e.tuple=function(t,n){void 0===n&&(n="["+t.map((function(t){return t.name})).join(", ")+"]");var r=t.length;return new V(n,(function(n){return e.UnknownArray.is(n)&&n.length===r&&t.every((function(t,e){return t.is(n[e])}))}),(function(n,i){var o=e.UnknownArray.validate(n,i);if(s.isLeft(o))return o;for(var a=o.right,u=a.length>r?a.slice(0,r):a,f=[],h=0;h<r;h++){var l=a[h],d=t[h],p=d.validate(l,e.appendContext(i,String(h),d,l));if(s.isLeft(p))c(f,p.left);else{var m=p.right;m!==l&&(u===a&&(u=a.slice()),u[h]=m)}}return f.length>0?e.failures(f):e.success(u)}),C(t)?e.identity:function(e){return t.map((function(t,n){return t.encode(e[n])}))},t)};var U=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ReadonlyType",a}return i(e,t),e}(u);e.ReadonlyType=U,e.readonly=function(t,n){return void 0===n&&(n="Readonly<"+t.name+">"),new U(n,t.is,(function(e,n){var r=t.validate(e,n);if(s.isLeft(r))return r;var i=r.right;return s.right(i)}),t.encode===e.identity?e.identity:t.encode,t)};var G=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ReadonlyArrayType",a}return i(e,t),e}(u);e.ReadonlyArrayType=G,e.readonlyArray=function(t,n){void 0===n&&(n="ReadonlyArray<"+t.name+">");var r=e.array(t);return new G(n,r.is,(function(t,e){var n=r.validate(t,e);if(s.isLeft(n))return n;var i=n.right;return s.right(i)}),r.encode,t)},e.strict=function(t,n){return e.exact(e.type(t),n)};var q=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,i,o)||this;return s.tag=a,s}return i(e,t),e}(L);e.TaggedUnionType=q,e.taggedUnion=function(t,n,r){void 0===r&&(r=j(n));var i=e.union(n,r);return i instanceof q?i:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new q(r,i.is,i.validate,i.encode,n,t))};var H=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.type=o,a._tag="ExactType",a}return i(e,t),e}(u);e.ExactType=H;var W=function(t){switch(t._tag){case"RefinementType":case"ReadonlyType":return W(t.type);case"InterfaceType":case"StrictType":case"PartialType":return t.props;case"IntersectionType":return t.types.reduce((function(t,e){return Object.assign(t,W(e))}),{})}},Y=function(t,e){for(var n=Object.getOwnPropertyNames(t),r=!1,i={},o=0;o<n.length;o++){var a=n[o];A.call(e,a)?i[a]=t[a]:r=!0}return r?i:t};e.exact=function(t,n){void 0===n&&(n=function(t){return nt(t)?"{| "+k(t.props)+" |}":function(t){return"PartialType"===t._tag}(t)?R("{| "+k(t.props)+" |}"):"Exact<"+t.name+">"}(t));var r=W(t);return new H(n,t.is,(function(n,i){var o=e.UnknownRecord.validate(n,i);if(s.isLeft(o))return o;var a=t.validate(n,i);return s.isLeft(a)?a:s.right(Y(a.right,r))}),(function(e){return t.encode(Y(e,r))}),t)},e.getValidationError=function(t,e){return{value:t,context:e}},e.getDefaultContext=function(t){return[{key:"",type:t}]};var K=function(t){function n(){var n=t.call(this,"never",(function(t){return!1}),(function(t,n){return e.failure(t,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return i(n,t),n}(u);e.NeverType=K,e.never=new K;var X=function(t){function n(){var n=t.call(this,"any",(function(t){return!0}),e.success,e.identity)||this;return n._tag="AnyType",n}return i(n,t),n}(u);e.AnyType=X,e.any=new X,e.Dictionary=e.UnknownRecord;var $=function(t){function n(){var n=t.call(this,"object",(function(t){return null!==t&&"object"==typeof t}),(function(t,r){return n.is(t)?e.success(t):e.failure(t,r)}),e.identity)||this;return n._tag="ObjectType",n}return i(n,t),n}(u);function Z(t,n,r){return void 0===r&&(r="("+t.name+" | "+e.getFunctionName(n)+")"),new w(r,(function(e){return t.is(e)&&n(e)}),(function(r,i){var o=t.validate(r,i);if(s.isLeft(o))return o;var a=o.right;return n(a)?e.success(a):e.failure(a,i)}),t.encode,t,n)}e.ObjectType=$,e.object=new $,e.refinement=Z,e.Integer=Z(e.number,Number.isInteger,"Integer"),e.dictionary=B;var J=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i)||this;return a.props=o,a._tag="StrictType",a}return i(e,t),e}(u);e.StrictType=J,e.clean=function(t){return t},e.alias=function(t){return function(){return t}};function Q(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];-1!==e.indexOf(o)&&n.push(o)}return n}function tt(t){return"AnyType"===t._tag}function et(t){return"LiteralType"===t._tag}function nt(t){return"InterfaceType"===t._tag}function rt(t){return"UnionType"===t._tag}e.emptyTags={};var it=[];function ot(t){if(-1!==it.indexOf(t))return e.emptyTags;if(nt(t)||function(t){return"StrictType"===t._tag}(t)){var n=e.emptyTags;for(var r in t.props){var i=t.props[r];et(i)&&(n===e.emptyTags&&(n={}),n[r]=[i.value])}return n}if(function(t){return"ExactType"===t._tag}(t)||function(t){return"RefinementType"===t._tag}(t))return ot(t.type);if(function(t){return"IntersectionType"===t._tag}(t))return t.types.reduce((function(t,n){return function(t,n){if(t===e.emptyTags)return n;if(n===e.emptyTags)return t;var r=Object.assign({},t);for(var i in n)if(t.hasOwnProperty(i)){var o=Q(t[i],n[i]);if(!(o.length>0)){r=e.emptyTags;break}r[i]=o}else r[i]=n[i];return r}(t,ot(n))}),e.emptyTags);if(rt(t))return t.types.slice(1).reduce((function(t,n){return function(t,n){if(t===e.emptyTags||n===e.emptyTags)return e.emptyTags;var r=e.emptyTags;for(var i in t){if(n.hasOwnProperty(i))0===Q(t[i],n[i]).length&&(r===e.emptyTags&&(r={}),r[i]=t[i].concat(n[i]))}return r}(t,ot(n))}),ot(t.types[0]));if(function(t){return"RecursiveType"===t._tag}(t)){it.push(t);var o=ot(t.type);return it.pop(),o}return e.emptyTags}function at(t){var e=ot(t[0]),n=Object.keys(e),r=t.length,i=function(n){for(var i=e[n].slice(),o=[e[n]],a=1;a<r;a++){var s=ot(t[a])[n];if(void 0===s)return"continue-keys";if(s.some((function(t){return-1!==i.indexOf(t)})))return"continue-keys";i.push.apply(i,s),o.push(s)}return{value:[n,o]}};t:for(var o=0,a=n;o<a.length;o++){var s=i(a[o]);if("object"==typeof s)return s.value;switch(s){case"continue-keys":continue t}}}e.getTags=ot,e.getIndex=at},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pipeable=e.pipe=void 0;var r=n(87);e.pipe=function(t,e,n,r,i,o,a,s,u,c){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return o(i(r(n(e(t)))));case 7:return a(o(i(r(n(e(t))))));case 8:return s(a(o(i(r(n(e(t)))))));case 9:return u(s(a(o(i(r(n(e(t))))))));case 10:return c(u(s(a(o(i(r(n(e(t)))))))))}};e.pipeable=function(t){var e={};if(function(t){return"function"==typeof t.map}(t)){e.map=function(e){return function(n){return t.map(n,e)}}}if(function(t){return"function"==typeof t.contramap}(t)){e.contramap=function(e){return function(n){return t.contramap(n,e)}}}if(function(t){return"function"==typeof t.mapWithIndex}(t)){e.mapWithIndex=function(e){return function(n){return t.mapWithIndex(n,e)}}}if(function(t){return"function"==typeof t.ap}(t)){e.ap=function(e){return function(n){return t.ap(n,e)}},e.apFirst=function(e){return function(n){return t.ap(t.map(n,(function(t){return function(){return t}})),e)}},e.apSecond=function(e){return function(n){return t.ap(t.map(n,(function(){return function(t){return t}})),e)}}}if(function(t){return"function"==typeof t.chain}(t)){e.chain=function(e){return function(n){return t.chain(n,e)}},e.chainFirst=function(e){return function(n){return t.chain(n,(function(n){return t.map(e(n),(function(){return n}))}))}},e.flatten=function(e){return t.chain(e,r.identity)}}if(function(t){return"function"==typeof t.bimap}(t)){e.bimap=function(e,n){return function(r){return t.bimap(r,e,n)}},e.mapLeft=function(e){return function(n){return t.mapLeft(n,e)}}}if(function(t){return"function"==typeof t.extend}(t)){e.extend=function(e){return function(n){return t.extend(n,e)}},e.duplicate=function(e){return t.extend(e,r.identity)}}if(function(t){return"function"==typeof t.reduce}(t)){e.reduce=function(e,n){return function(r){return t.reduce(r,e,n)}},e.foldMap=function(e){var n=t.foldMap(e);return function(t){return function(e){return n(e,t)}}},e.reduceRight=function(e,n){return function(r){return t.reduceRight(r,e,n)}}}if(function(t){return"function"==typeof t.reduceWithIndex}(t)){e.reduceWithIndex=function(e,n){return function(r){return t.reduceWithIndex(r,e,n)}},e.foldMapWithIndex=function(e){var n=t.foldMapWithIndex(e);return function(t){return function(e){return n(e,t)}}},e.reduceRightWithIndex=function(e,n){return function(r){return t.reduceRightWithIndex(r,e,n)}}}if(function(t){return"function"==typeof t.alt}(t)){e.alt=function(e){return function(n){return t.alt(n,e)}}}if(function(t){return"function"==typeof t.compact}(t)&&(e.compact=t.compact,e.separate=t.separate),function(t){return"function"==typeof t.filter}(t)){e.filter=function(e){return function(n){return t.filter(n,e)}},e.filterMap=function(e){return function(n){return t.filterMap(n,e)}},e.partition=function(e){return function(n){return t.partition(n,e)}},e.partitionMap=function(e){return function(n){return t.partitionMap(n,e)}}}if(function(t){return"function"==typeof t.filterWithIndex}(t)){e.filterWithIndex=function(e){return function(n){return t.filterWithIndex(n,e)}},e.filterMapWithIndex=function(e){return function(n){return t.filterMapWithIndex(n,e)}},e.partitionWithIndex=function(e){return function(n){return t.partitionWithIndex(n,e)}},e.partitionMapWithIndex=function(e){return function(n){return t.partitionMapWithIndex(n,e)}}}if(function(t){return"function"==typeof t.promap}(t)){e.promap=function(e,n){return function(r){return t.promap(r,e,n)}}}if(function(t){return"function"==typeof t.compose}(t)){e.compose=function(e){return function(n){return t.compose(n,e)}}}if(function(t){return"function"==typeof t.throwError}(t)){e.fromOption=function(e){return function(n){return"None"===n._tag?t.throwError(e()):t.of(n.value)}},e.fromEither=function(e){return"Left"===e._tag?t.throwError(e.left):t.of(e.right)},e.fromPredicate=function(e,n){return function(r){return e(r)?t.of(r):t.throwError(n(r))}},e.filterOrElse=function(e,n){return function(r){return t.chain(r,(function(r){return e(r)?t.of(r):t.throwError(n(r))}))}}}return e}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.VolumetricDataSource=e.VolumePathOptionsType=e.OptionalVolumePathOptions=e.RequiredVolumePathOptions=e.VolumeDataOptionsType=e.VolumePackOptionsType=e.DefaultColorMapsType=void 0;const s=n(24),u=n(19),c=o(n(12)),f=n(38),h=n(75),l=n(36),d=a(n(161)),p=a(n(162)),m=a(n(163)),y=a(n(164)),g=a(n(165)),v=a(n(166)),x=a(n(167)),b=a(n(168)),_=n(77),w=c.type({name:c.string,url:c.string});e.DefaultColorMapsType=c.keyof({COOL_WARM:null,PLASMA:null,VIRIDIS:null,RAINBOW:null,GREEN:null,YGB_1211:null});const M={COOL_WARM:{name:"Cool warm",url:m.default},PLASMA:{name:"Plasma",url:y.default},VIRIDIS:{name:"Viridis",url:g.default},RAINBOW:{name:"Rainbow",url:v.default},GREEN:{name:"Linear Green",url:x.default},YGB_1211:{name:"Linear YGB",url:b.default}};e.VolumePackOptionsType=c.intersection([c.type({displayName:c.string,colorMap:c.union([e.DefaultColorMapsType,w])}),c.partial({enabled:c.boolean})]),e.VolumeDataOptionsType=c.type({textureDimensions:l.vec3type,volumeWorldDimensions:l.vec3type,volumeWorldCenterPosition:l.vec3type,packedVolumes:c.array(e.VolumePackOptionsType)}),e.RequiredVolumePathOptions=c.type({url:c.string}),e.OptionalVolumePathOptions=c.partial({volumeUrl:c.string,digitCount:c.number}),e.VolumePathOptionsType=c.intersection([e.RequiredVolumePathOptions,e.OptionalVolumePathOptions]);const T={volumeUrl:"-volume.dat",digitCount:3},A=[{format:WebGL2RenderingContext.RED,internalFormat:WebGL2RenderingContext.R8},{format:WebGL2RenderingContext.RG,internalFormat:WebGL2RenderingContext.RG8},{format:WebGL2RenderingContext.RGB,internalFormat:WebGL2RenderingContext.RGB8},{format:WebGL2RenderingContext.RGBA,internalFormat:WebGL2RenderingContext.RGBA8}];class S extends f.DataSource{constructor(t,e,n,r,i,o){super(t,i,r,new h.BoundingBox([u.vec3.scale(u.vec3.create(),n.volumeWorldDimensions,-.5),u.vec3.scale(u.vec3.create(),n.volumeWorldDimensions,.5)]),o,!0),this.uniforms={},this.volumes=new Array,this.customColorMaps=new Map,this.targetFrameTime=1e3/180,this.lastSamplingRate=1,this.samplingRate=1,this.targetSamplingRate=this.samplingRate,this.changeColorMapFn=void 0,this.pathOptions=Object.assign(Object.assign({},T),e),this.dataOptions=n;let a=this.dataOptions.packedVolumes;a.length>4&&(console.warn(`Too many volume parts defined (${a.length}), will be limited to first 4`),a=a.slice(0,4));const s=this.dataOptions.packedVolumes.map(t=>t.colorMap).filter(t=>w.is(t)).map(t=>t);this.customColorMaps=s.reduce((t,e)=>t.set(e.name,e),new Map),this.volumeParts=a.map(t=>{var e;return{name:t.displayName,visible:null===(e=t.enabled)||void 0===e||e,colorMap:t.colorMap}}),this.lastFrameTimestamp=performance.now(),this.frameTime=60}init(t,e){let n=p.default.replace("$_part_count$",""+this.volumeParts.length);this._programInfo=s.createProgramInfo(t,[d.default,n]);let r=u.mat4.identity(u.mat4.create());this.uniforms={volumeScale:this.dataOptions.volumeWorldDimensions,volumeDimensions:this.dataOptions.textureDimensions,volumePosition:u.mat4.translate(r,r,this.dataOptions.volumeWorldCenterPosition),colormaps:void 0,enabledVolumes:[!1,!1,!1,!1].map((t,e)=>{var n;return!!(null===(n=this.volumeParts[e])||void 0===n?void 0:n.visible)})},this.animator=e,this.changeColorMapFn=e=>this.changeColorMap(t,e)}load(t,e){const n={position:[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0]};void 0!==this._programInfo&&(this.vertexArrayInfo=s.createVertexArrayInfo(t,this._programInfo,s.createBufferInfoFromArrays(t,n)));const r=Object.keys(M).map(t=>{const e=t;return new Promise((t,n)=>{this.loadColorMap(M[e]).then(n=>t([e,n])).catch(t=>n(t))})}),i=[...this.customColorMaps.values()].map(t=>new Promise((e,n)=>{this.loadColorMap(t).then(n=>e([t.name,n])).catch(t=>n(t))}));Promise.all([...r,...i]).then(e=>{this.colorMaps=new Map(e),this.changeColorMap(t,this.volumeParts)}).catch(t=>console.error("Default color maps could not be resolved, "+t));const o=new Array;if(void 0!==this.animator)for(let t=this.animator.minTime;t<this.subElementCount+this.animator.minTime;t++){const e=t.toString().padStart(this.pathOptions.digitCount,"0");o.push(new O(`${this.pathOptions.url}${e}${this.pathOptions.volumeUrl}`,this.dataOptions.textureDimensions,this.volumeParts.length))}return new Promise(n=>{Promise.all(o.map(n=>n.parseData(t).then(t=>(e(),t)))).then(t=>{this.volumes=t.filter(t=>void 0!==t),n()})})}loadColorMap(t){return fetch(t.url).then(t=>t.blob()).then(t=>createImageBitmap(t))}renderFrame(t){if(void 0!==this.animator&&void 0!==this.uniforms.colormaps&&void 0!==this._programInfo&&void 0!==this.vertexArrayInfo){const e=Math.floor(this.animator.firstFrame);e<this.subElementCount&&(this.uniforms.volume=this.volumes[e],this.frameTime=performance.now()-this.lastFrameTimestamp,this.targetSamplingRate=this.frameTime/this.targetFrameTime,this.samplingRate=.99*this.samplingRate+.01*this.targetSamplingRate,Math.abs(this.lastSamplingRate-this.samplingRate)/this.lastSamplingRate>.05?(this.uniforms.dtScale=this.samplingRate,this.lastSamplingRate=this.samplingRate):this.uniforms.dtScale=this.lastSamplingRate,t.enable(t.CULL_FACE),t.cullFace(t.FRONT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.useProgram(this._programInfo.program),s.setBuffersAndAttributes(t,this._programInfo,this.vertexArrayInfo),s.setUniforms(this._programInfo,this.uniforms),s.drawBufferInfo(t,this.vertexArrayInfo,t.TRIANGLE_STRIP),t.bindVertexArray(null),t.disable(t.CULL_FACE),t.disable(t.BLEND))}this.lastFrameTimestamp=performance.now()}renderVRFrame(t){this.renderFrame(t)}changeColorMap(t,e){const n=e.map(t=>{var e;return null===(e=this.colorMaps)||void 0===e?void 0:e.get(this.resolveColorMapID(t))});this.uniforms.colormaps=s.createTexture(t,{width:180,height:1,src:n,target:t.TEXTURE_2D_ARRAY,internalFormat:t.SRGB8_ALPHA8})}resolveColorMapID(t){return w.is(t.colorMap)?t.colorMap.name:t.colorMap}resolveColorMapName(t){return w.is(t.colorMap)?t.colorMap.name:M[t.colorMap].name}resolveColorMapDataFromID(t){let e=Object.keys(M).filter(e=>M[e].name==t).map(t=>t).pop();return void 0===e&&(e=this.customColorMaps.get(t)),e}changePartVisibility(t){this.uniforms.enabledVolumes=[!1,!1,!1,!1].map((e,n)=>{var r;return!!(null===(r=t[n])||void 0===r?void 0:r.visible)||e})}createGUIElements(){return this.volumeParts.reduce((t,e)=>(null==t||t.push(new _.VisibilityGUIElement(e.name,e.visible,t=>{e.visible=t,this.changePartVisibility(this.volumeParts)})),null==t||t.push(new _.SelectionGUIElement(" ~ color map",[...Object.keys(M).map(t=>M[t].name),...this.customColorMaps.keys()],this.resolveColorMapName(e),t=>{const n=this.resolveColorMapDataFromID(t);n&&(e.colorMap=n,void 0!==this.changeColorMapFn&&this.changeColorMapFn(this.volumeParts))})),t),[])}}e.VolumetricDataSource=S;class O{constructor(t,e,n){this.url=t,this.dimensions=e,this.volumePartsCount=n}parseData(t){return new Promise(e=>{this.fetchData(this.url).then(n=>e(s.createTexture(t,{target:t.TEXTURE_3D,format:A[this.volumePartsCount-1].format,internalFormat:A[this.volumePartsCount-1].internalFormat,min:t.LINEAR,src:n,width:this.dimensions[0],height:this.dimensions[1],depth:this.dimensions[2],wrap:t.CLAMP_TO_EDGE}))).catch(t=>e(void 0))})}fetchData(t){return new Promise(e=>{fetch(t).then(t=>t.arrayBuffer()).then(t=>e(new Uint8Array(t)))})}}},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n#define GLSLIFY 1\n\nuniform Camera {\n    mat4 u_view;\n    mat4 u_projection;\n    mat4 u_globalVRTransform;\n};\n\nin vec3 position;\n\nuniform vec3 volumeScale;\nuniform mat4 volumePosition;\n\nout vec3 vrayDir;\nflat out vec3 transformedEye;\n\nvoid main(void) {\n\t// https://www.3dgep.com/understanding-the-view-matrix/\n\t// http://in2gpu.com/2015/05/17/view-matrix/\n\tmat4 vrView = u_view * u_globalVRTransform * volumePosition;\n\tmat4 inverseView = inverse(vrView);\n    vec3 eyePos = vec3(inverseView[3].x, inverseView[3].y, inverseView[3].z);\n\t\n\t// Translate the cube to center it at the origin.\n\tvec3 volumeTranslation = volumeScale * -0.5;\n\tgl_Position = u_projection * vrView * vec4(position * volumeScale + volumeTranslation, 1);\n\t\n\t// Compute eye position and ray directions in the unit cube space\n\ttransformedEye = (eyePos - volumeTranslation) / volumeScale;\n\tvrayDir = position - transformedEye;\n}"},function(t,e,n){"use strict";n.r(e),e.default="#version 300 es\n\nprecision highp int;\nprecision highp float;\n#define GLSLIFY 1\n\nuniform highp sampler3D volume;\nuniform highp sampler2DArray colormaps;\nuniform bool enabledVolumes[4]; \nuniform ivec3 volumeDimensions;\nuniform float dtScale;\n\nin vec3 vrayDir;\nflat in vec3 transformedEye;\n\nout vec4 color;\n\nvec2 intersect_box(vec3 orig, vec3 dir) {\n\tconst vec3 box_min = vec3(0);\n\tconst vec3 box_max = vec3(1);\n\tvec3 inv_dir = 1.0 / dir;\n\tvec3 tmin_tmp = (box_min - orig) * inv_dir;\n\tvec3 tmax_tmp = (box_max - orig) * inv_dir;\n\tvec3 tmin = min(tmin_tmp, tmax_tmp);\n\tvec3 tmax = max(tmin_tmp, tmax_tmp);\n\tfloat t0 = max(tmin.x, max(tmin.y, tmin.z));\n\tfloat t1 = min(tmax.x, min(tmax.y, tmax.z));\n\treturn vec2(t0, t1);\n}\n\n// pseudo-random number gen from\n// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/\n// with some tweaks for the range of values\nfloat wang_hash(int seed) {\n\tseed = (seed ^ 61) ^ (seed >> 16);\n\tseed *= 9;\n\tseed = seed ^ (seed >> 4);\n\tseed *= 0x27d4eb2d;\n\tseed = seed ^ (seed >> 15);\n\treturn float(seed % 2147483647) / float(2147483647);\n}\n\nfloat linear_to_srgb(float x) {\n\tif (x <= 0.0031308f) {\n\t\treturn 12.92f * x;\n\t}\n\treturn 1.055f * pow(x, 1.f / 2.4f) - 0.055f;\n}\n\nvec4 evalVoxel(float volumeVal, int textureSlice, float samplingRate, vec4 colorAcc) {\n\t// we don't use the opacity from the transfer function, just use the sample value as the opacity\n\tvec4 val_color = vec4(texture(colormaps, vec3(volumeVal, 0.5, textureSlice)).rgb, volumeVal);\n\t// opacity correction based on sampling rate\n\tval_color.a = 1.0 - pow(1.0 - val_color.a, samplingRate);\n\t// accumulate the color and opacity using the front-to-back compositing equation\n\tcolorAcc.rgb += (1.0 - colorAcc.a) * val_color.a * val_color.rgb;\n\tcolorAcc.a += (1.0 - colorAcc.a) * val_color.a;\n\treturn colorAcc;\n}\n\nvec4 sampleVolume1(vec3 p, float samplingRate, vec4 colorAcc) {\n\tfloat volumeVal = texture(volume, p).r;\n\treturn evalVoxel(volumeVal, 0, samplingRate, colorAcc);\n}\n\nvec4 sampleVolume2(vec3 p, float samplingRate, vec4 colorAcc) {\n\tvec2 volumeVal = texture(volume, p).rg;\n\tvec4 color = vec4(colorAcc);\n\tif (enabledVolumes[0] == true) { color = evalVoxel(volumeVal.r, 0, samplingRate, color); }\n\tif (enabledVolumes[1] == true) { color = evalVoxel(volumeVal.g, 1, samplingRate, color); }\n\treturn color;\n}\n\nvec4 sampleVolume3(vec3 p, float samplingRate, vec4 colorAcc) {\n\tvec3 volumeVal = texture(volume, p).rgb;\n\tvec4 color = vec4(colorAcc);\n\tif (enabledVolumes[0] == true) { color = evalVoxel(volumeVal.r, 0, samplingRate, color); }\n\tif (enabledVolumes[1] == true) { color = evalVoxel(volumeVal.g, 1, samplingRate, color); }\n\tif (enabledVolumes[2] == true) { color = evalVoxel(volumeVal.b, 2, samplingRate, color); }\n\treturn color;\n}\n\nvec4 sampleVolume4(vec3 p, float samplingRate, vec4 colorAcc) {\n\tvec4 volumeVal = texture(volume, p).rgba;\n\tvec4 color = vec4(colorAcc);\n\tif (enabledVolumes[0] == true) { color = evalVoxel(volumeVal.r, 0, samplingRate, color); }\n\tif (enabledVolumes[1] == true) { color = evalVoxel(volumeVal.g, 1, samplingRate, color); }\n\tif (enabledVolumes[2] == true) { color = evalVoxel(volumeVal.b, 2, samplingRate, color); }\n\tif (enabledVolumes[3] == true) { color = evalVoxel(volumeVal.a, 3, samplingRate, color); }\n\treturn color;\n}\n\nvoid main(void) {\n\t// normalize the view ray\n\tvec3 ray_dir = normalize(vrayDir);\n\t\n\t// intersect the ray with the volume bounds to find the interval along the ray overlapped by the volume.\n\tvec2 t_hit = intersect_box(transformedEye, ray_dir);\n\tif (t_hit.x > t_hit.y) {\n\t\tdiscard;\n\t}\n\t// we don't want to sample voxels behind the eye if it's inside the volume, \n\t// so keep the starting point at or in front of the eye\n\tt_hit.x = max(t_hit.x, 0.0);\n\n\t// compute the step size to march through the volume grid\n    vec3 dt_vec = 1.0 / (vec3(volumeDimensions) * abs(ray_dir));\n\tfloat dt = dtScale * min(dt_vec.x, min(dt_vec.y, dt_vec.z));\n\t\n\t// hide aliasing with some noise\n\tfloat offset = wang_hash(int(gl_FragCoord.x + 1920.0 * gl_FragCoord.y));\n\t\n\t// starting from the entry point, march the ray through the volume and sample it\n\tvec3 p = transformedEye + (t_hit.x + offset * dt) * ray_dir;\n\tfor (float t = t_hit.x; t < t_hit.y; t += dt) {\n\t\tcolor = sampleVolume$_part_count$(p, dtScale, color);\n\t\tif (color.a >= 0.95) {\n\t\t\tbreak;\n\t\t}\n\n\t\tp += ray_dir * dt;\n\t}\n    color.r = linear_to_srgb(color.r);\n    color.g = linear_to_srgb(color.g);\n    color.b = linear_to_srgb(color.b);\n}"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/cool-warm-paraviewaad74533c70863e5419a0a6f2681a5a1.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/matplotlib-plasmaa5c11a572e6b4f458a45b9400d93e982.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/matplotlib-viridis97fec048f06baef3d282c713b942247d.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/rainbow1ef74900fa05b21736ffc8263c7f3bdb.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/samsel-linear-greenb340b67402670cf370a3582358930ace.png"},function(t,e,n){"use strict";n.r(e),e.default=n.p+"assets/samsel-linear-ygb-1211gc5acd61a762601c422720c68d4820b02.png"},function(t,e,n){"use strict";n.r(e),n.d(e,"audit",(function(){return a})),n.d(e,"auditTime",(function(){return h})),n.d(e,"buffer",(function(){return l})),n.d(e,"bufferCount",(function(){return y})),n.d(e,"bufferTime",(function(){return _})),n.d(e,"bufferToggle",(function(){return k})),n.d(e,"bufferWhen",(function(){return I})),n.d(e,"catchError",(function(){return B})),n.d(e,"combineAll",(function(){return z})),n.d(e,"combineLatest",(function(){return G})),n.d(e,"concat",(function(){return H})),n.d(e,"concatAll",(function(){return W.a})),n.d(e,"concatMap",(function(){return K})),n.d(e,"concatMapTo",(function(){return X})),n.d(e,"count",(function(){return $})),n.d(e,"debounce",(function(){return Q})),n.d(e,"debounceTime",(function(){return nt})),n.d(e,"defaultIfEmpty",(function(){return at})),n.d(e,"delay",(function(){return ht})),n.d(e,"delayWhen",(function(){return yt})),n.d(e,"dematerialize",(function(){return _t})),n.d(e,"distinct",(function(){return Tt})),n.d(e,"distinctUntilChanged",(function(){return Ot})),n.d(e,"distinctUntilKeyChanged",(function(){return Ct})),n.d(e,"elementAt",(function(){return Ut})),n.d(e,"endWith",(function(){return qt})),n.d(e,"every",(function(){return Ht})),n.d(e,"exhaust",(function(){return Kt})),n.d(e,"exhaustMap",(function(){return Jt})),n.d(e,"expand",(function(){return ee})),n.d(e,"filter",(function(){return It.a})),n.d(e,"finalize",(function(){return ie})),n.d(e,"find",(function(){return se})),n.d(e,"findIndex",(function(){return fe})),n.d(e,"first",(function(){return le})),n.d(e,"groupBy",(function(){return de.b})),n.d(e,"ignoreElements",(function(){return pe})),n.d(e,"isEmpty",(function(){return ge})),n.d(e,"last",(function(){return Me})),n.d(e,"map",(function(){return Zt.a})),n.d(e,"mapTo",(function(){return Te})),n.d(e,"materialize",(function(){return Oe})),n.d(e,"max",(function(){return Ne})),n.d(e,"merge",(function(){return Le})),n.d(e,"mergeAll",(function(){return je.a})),n.d(e,"mergeMap",(function(){return Y.a})),n.d(e,"flatMap",(function(){return Y.a})),n.d(e,"mergeMapTo",(function(){return Fe})),n.d(e,"mergeScan",(function(){return ze})),n.d(e,"min",(function(){return Ge})),n.d(e,"multicast",(function(){return He})),n.d(e,"observeOn",(function(){return Ye.b})),n.d(e,"onErrorResumeNext",(function(){return Ke})),n.d(e,"pairwise",(function(){return Ze})),n.d(e,"partition",(function(){return en})),n.d(e,"pluck",(function(){return nn})),n.d(e,"publish",(function(){return an})),n.d(e,"publishBehavior",(function(){return un})),n.d(e,"publishLast",(function(){return fn})),n.d(e,"publishReplay",(function(){return ln})),n.d(e,"race",(function(){return pn})),n.d(e,"reduce",(function(){return De})),n.d(e,"repeat",(function(){return mn})),n.d(e,"repeatWhen",(function(){return vn})),n.d(e,"retry",(function(){return _n})),n.d(e,"retryWhen",(function(){return Tn})),n.d(e,"refCount",(function(){return On.a})),n.d(e,"sample",(function(){return En})),n.d(e,"sampleTime",(function(){return Pn})),n.d(e,"scan",(function(){return Ce})),n.d(e,"sequenceEqual",(function(){return Nn})),n.d(e,"share",(function(){return zn})),n.d(e,"shareReplay",(function(){return Vn})),n.d(e,"single",(function(){return Un})),n.d(e,"skip",(function(){return Hn})),n.d(e,"skipLast",(function(){return Kn})),n.d(e,"skipUntil",(function(){return Zn})),n.d(e,"skipWhile",(function(){return tr})),n.d(e,"startWith",(function(){return rr})),n.d(e,"subscribeOn",(function(){return sr})),n.d(e,"switchAll",(function(){return lr})),n.d(e,"switchMap",(function(){return cr})),n.d(e,"switchMapTo",(function(){return dr})),n.d(e,"take",(function(){return Ft})),n.d(e,"takeLast",(function(){return be})),n.d(e,"takeUntil",(function(){return pr})),n.d(e,"takeWhile",(function(){return gr})),n.d(e,"tap",(function(){return wr})),n.d(e,"throttle",(function(){return Sr})),n.d(e,"throttleTime",(function(){return kr})),n.d(e,"throwIfEmpty",(function(){return Dt})),n.d(e,"timeInterval",(function(){return Dr})),n.d(e,"timeout",(function(){return Vr})),n.d(e,"timeoutWith",(function(){return Lr})),n.d(e,"timestamp",(function(){return Ur})),n.d(e,"toArray",(function(){return Hr})),n.d(e,"window",(function(){return Wr})),n.d(e,"windowCount",(function(){return Xr})),n.d(e,"windowTime",(function(){return Jr})),n.d(e,"windowToggle",(function(){return oi})),n.d(e,"windowWhen",(function(){return ui})),n.d(e,"withLatestFrom",(function(){return hi})),n.d(e,"zip",(function(){return mi})),n.d(e,"zipAll",(function(){return yi}));var r=n(0),i=n(4),o=n(3);function a(t){return function(e){return e.lift(new s(t))}}var s=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=Object(o.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(i.a),c=n(8),f=n(67);function h(t,e){return void 0===e&&(e=c.a),a((function(){return Object(f.a)(t,e)}))}function l(t){return function(e){return e.lift(new d(t))}}var d=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.closingNotifier))},t}(),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(Object(o.a)(r,n)),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(i.a),m=n(1);function y(t,e){return void 0===e&&(e=null),function(n){return n.lift(new g(t,e))}}var g=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?x:v}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),v=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(m.a),x=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var a=r[o];a.push(t),a.length===e&&(r.splice(o,1),this.destination.next(a))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(m.a),b=n(10);function _(t){var e=arguments.length,n=c.a;Object(b.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new w(t,r,i,n))}}var w=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new T(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),M=function(){return function(){this.buffer=[]}}(),T=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=r,a.maxBufferSize=i,a.scheduler=o,a.contexts=[];var s=a.openContext();if(a.timespanOnly=null==r||r<0,a.timespanOnly){var u={subscriber:a,context:s,bufferTimeSpan:n};a.add(s.closeAction=o.schedule(A,n,u))}else{var c={subscriber:a,context:s},f={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:a,scheduler:o};a.add(s.closeAction=o.schedule(O,n,c)),a.add(o.schedule(S,r,f))}return a}return r.a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],a=o.buffer;a.push(t),a.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(A,n,r))}},e.prototype.openContext=function(){var t=new M;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(m.a);function A(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function S(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(O,n,{subscriber:r,context:o})),this.schedule(t,e))}function O(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var E=n(5);function k(t,e){return function(n){return n.lift(new C(t,e))}}var C=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new P(t,this.openings,this.closingSelector))},t}(),P=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(o.a)(i,n)),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new E.a,r={buffer:[],subscription:n};e.push(r);var i=Object(o.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(i.a);function I(t){return function(e){return e.lift(new R(t))}}var R=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new D(t,this.closingSelector))},t}(),D=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(t){return this.error(t)}t=new E.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(o.a)(this,e)),this.subscribing=!1},e}(i.a),N=n(14);function B(t){return function(e){var n=new L(t),r=e.lift(n);return n.caught=r}}var L=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new j(t,this.selector,this.caught))},t}(),j=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new N.a(this,void 0,void 0);this.add(r);var i=Object(o.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}},e}(i.a),F=n(47);function z(t){return function(e){return e.lift(new F.a(t))}}var V=n(7),U=n(13);function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(V.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(U.a)([e].concat(t)),new F.a(n))}}var q=n(34);function H(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(q.a.apply(void 0,[e].concat(t)))}}var W=n(64),Y=n(25);function K(t,e){return Object(Y.a)(t,e,1)}function X(t,e){return K((function(){return t}),e)}function $(t){return function(e){return e.lift(new Z(t,e))}}var Z=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.predicate,this.source))},t}(),J=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(m.a);function Q(t){return function(e){return e.lift(new tt(t))}}var tt=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.durationSelector))},t}(),et=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(o.a)(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.a);function nt(t,e){return void 0===e&&(e=c.a),function(n){return n.lift(new rt(t,e))}}var rt=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new it(t,this.dueTime,this.scheduler))},t}(),it=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ot,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(m.a);function ot(t){t.debouncedNext()}function at(t){return void 0===t&&(t=null),function(e){return e.lift(new st(t))}}var st=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new ut(t,this.defaultValue))},t}(),ut=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(m.a);function ct(t){return t instanceof Date&&!isNaN(+t)}var ft=n(18);function ht(t,e){void 0===e&&(e=c.a);var n=ct(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new lt(n,e))}}var lt=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new dt(t,this.delay,this.scheduler))},t}(),dt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.a(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new pt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ft.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ft.a.createComplete()),this.unsubscribe()},e}(m.a),pt=function(){return function(t,e){this.time=t,this.notification=e}}(),mt=n(2);function yt(t,e){return e?function(n){return new xt(n,e).lift(new gt(t))}:function(e){return e.lift(new gt(t))}}var gt=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new vt(t,this.delayDurationSelector))},t}(),vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=Object(o.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(i.a),xt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new bt(t,this.source))},e}(mt.a),bt=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(m.a);function _t(){return function(t){return t.lift(new wt)}}var wt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Mt(t))},t}(),Mt=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(m.a);function Tt(t,e){return function(n){return n.lift(new At(t,e))}}var At=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.keySelector,this.flushes))},t}(),St=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(o.a)(i,r)),i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.a);function Ot(t,e){return function(n){return n.lift(new Et(t,e))}}var Et=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new kt(t,this.compare,this.keySelector))},t}(),kt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(m.a);function Ct(t,e){return Ot((function(n,r){return e?e(n[t],r[t]):n[t]===r[t]}))}var Pt=n(26),It=n(17),Rt=n(28);function Dt(t){return void 0===t&&(t=Lt),function(e){return e.lift(new Nt(t))}}var Nt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new Bt(t,this.errorFactory))},t}(),Bt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(m.a);function Lt(){return new Rt.a}var jt=n(11);function Ft(t){return function(e){return 0===t?Object(jt.b)():e.lift(new zt(t))}}var zt=function(){function t(t){if(this.total=t,this.total<0)throw new Pt.a}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.total))},t}(),Vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(m.a);function Ut(t,e){if(t<0)throw new Pt.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(It.a)((function(e,n){return n===t})),Ft(1),n?at(e):Dt((function(){return new Pt.a})))}}var Gt=n(37);function qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Object(q.a)(e,Gt.a.apply(void 0,t))}}function Ht(t,e){return function(n){return n.lift(new Wt(t,e,n))}}var Wt=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.predicate,this.thisArg,this.source))},t}(),Yt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(m.a);function Kt(){return function(t){return t.lift(new Xt)}}var Xt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new $t(t))},t}(),$t=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(o.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.a),Zt=n(9);function Jt(t,e){return e?function(n){return n.pipe(Jt((function(n,r){return Object(U.a)(t(n,r)).pipe(Object(Zt.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new Qt(t))}}var Qt=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new te(t,this.project))},t}(),te=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new N.a(this,e,n),i=this.destination;i.add(r);var a=Object(o.a)(this,t,void 0,void 0,r);a!==r&&i.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.a);function ee(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new ne(t,e,n))}}var ne=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.project,this.concurrent,this.scheduler))},t}(),re=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r.a(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);try{var i=(0,this.project)(t,r);if(this.scheduler){var o={subscriber:this,result:i,value:t,index:r};this.destination.add(this.scheduler.schedule(e.dispatch,0,o))}else this.subscribeToProjection(i,t,r)}catch(t){n.error(t)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(o.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(i.a);function ie(t){return function(e){return e.lift(new oe(t))}}var oe=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ae(t,this.callback))},t}(),ae=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new E.a(n)),r}return r.a(e,t),e}(m.a);function se(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new ue(t,n,!1,e))}}var ue=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new ce(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),ce=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.predicate=n,a.source=r,a.yieldIndex=i,a.thisArg=o,a.index=0,a}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(m.a);function fe(t,e){return function(n){return n.lift(new ue(t,n,!0,e))}}var he=n(16);function le(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(It.a)((function(e,n){return t(e,n,r)})):he.a,Ft(1),n?at(e):Dt((function(){return new Rt.a})))}}var de=n(58);function pe(){return function(t){return t.lift(new me)}}var me=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ye(t))},t}(),ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype._next=function(t){},e}(m.a);function ge(){return function(t){return t.lift(new ve)}}var ve=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new xe(t))},t}(),xe=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(m.a);function be(t){return function(e){return 0===t?Object(jt.b)():e.lift(new _e(t))}}var _e=function(){function t(t){if(this.total=t,this.total<0)throw new Pt.a}return t.prototype.call=function(t,e){return e.subscribe(new we(t,this.total))},t}(),we=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(m.a);function Me(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(It.a)((function(e,n){return t(e,n,r)})):he.a,be(1),n?at(e):Dt((function(){return new Rt.a})))}}function Te(t){return function(e){return e.lift(new Ae(t))}}var Ae=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.value))},t}(),Se=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(m.a);function Oe(){return function(t){return t.lift(new Ee)}}var Ee=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ke(t))},t}(),ke=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){this.destination.next(ft.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(ft.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(ft.a.createComplete()),t.complete()},e}(m.a);function Ce(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Pe(t,e,n))}}var Pe=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Ie(t,this.accumulator,this.seed,this.hasSeed))},t}(),Ie=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(m.a),Re=n(39);function De(t,e){return arguments.length>=2?function(n){return Object(Re.a)(Ce(t,e),be(1),at(e))(n)}:function(e){return Object(Re.a)(Ce((function(e,n,r){return t(e,n,r+1)})),be(1))(e)}}function Ne(t){return De("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var Be=n(65);function Le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Be.a.apply(void 0,[e].concat(t)))}}var je=n(48);function Fe(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?Object(Y.a)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object(Y.a)((function(){return t}),n))}function ze(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new Ve(t,e,n))}}var Ve=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new Ue(t,this.accumulator,this.seed,this.concurrent))},t}(),Ue=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,t,e)}catch(t){return n.error(t)}this.active++,this._innerSub(r,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var r=new N.a(this,e,n),i=this.destination;i.add(r);var a=Object(o.a)(this,t,void 0,void 0,r);a!==r&&i.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(i.a);function Ge(t){return De("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var qe=n(60);function He(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new We(r,e));var i=Object.create(n,qe.b);return i.source=n,i.subjectFactory=r,i}}var We=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}(),Ye=n(62);function Ke(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),function(e){return e.lift(new Xe(t))}}var Xe=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new $e(t,this.nextSources))},t}(),$e=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r.a(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new N.a(this,void 0,void 0),n=this.destination;n.add(e);var r=Object(o.a)(this,t,void 0,void 0,e);r!==e&&n.add(r)}else this.destination.complete()},e}(i.a);function Ze(){return function(t){return t.lift(new Je)}}var Je=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Qe(t))},t}(),Qe=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(m.a),tn=n(74);function en(t,e){return function(n){return[Object(It.a)(t,e)(n),Object(It.a)(Object(tn.a)(t,e))(n)]}}function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(Zt.a)(rn(t,n))(e)}}function rn(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}var on=n(6);function an(t){return t?He((function(){return new on.a}),t):He(new on.a)}var sn=n(61);function un(t){return function(e){return He(new sn.a(t))(e)}}var cn=n(31);function fn(){return function(t){return He(new cn.a)(t)}}var hn=n(45);function ln(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new hn.a(t,e,r);return function(t){return He((function(){return o}),i)(t)}}var dn=n(66);function pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),e.lift.call(dn.a.apply(void 0,[e].concat(t)))}}function mn(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(jt.b)():t<0?e.lift(new yn(-1,e)):e.lift(new yn(t-1,e))}}var yn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new gn(t,this.count,this.source))},t}(),gn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(m.a);function vn(t){return function(e){return e.lift(new xn(t))}}var xn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new bn(t,this.notifier,e))},t}(),bn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new on.a;try{e=(0,this.notifier)(this.notifications)}catch(e){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Object(o.a)(this,e)},e}(i.a);function _n(t){return void 0===t&&(t=-1),function(e){return e.lift(new wn(t,e))}}var wn=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Mn(t,this.count,this.source))},t}(),Mn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(m.a);function Tn(t){return function(e){return e.lift(new An(t,e))}}var An=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Sn(t,this.notifier,this.source))},t}(),Sn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new on.a;try{r=(0,this.notifier)(n)}catch(e){return t.prototype.error.call(this,e)}i=Object(o.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(i.a),On=n(44);function En(t){return function(e){return e.lift(new kn(t))}}var kn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Cn(t),r=e.subscribe(n);return r.add(Object(o.a)(n,this.notifier)),r},t}(),Cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.a);function Pn(t,e){return void 0===e&&(e=c.a),function(n){return n.lift(new In(t,e))}}var In=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Rn(t,this.period,this.scheduler))},t}(),Rn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Dn,n,{subscriber:i,period:n})),i}return r.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(m.a);function Dn(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function Nn(t,e){return function(n){return n.lift(new Bn(t,e))}}var Bn=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Ln(t,this.compareTo,this.comparator))},t}(),Ln=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new jn(e,i))),i}return r.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;try{o=n?n(r,i):r===i}catch(t){this.destination.error(t)}o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(m.a),jn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(m.a);function Fn(){return new on.a}function zn(){return function(t){return Object(On.a)()(He(Fn)(t))}}function Vn(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,c=0,f=!1,h=!1;return function(t){c++,e&&!f||(f=!1,e=new hn.a(i,a,u),n=t.subscribe({next:function(t){e.next(t)},error:function(t){f=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}));var r=e.subscribe(this);this.add((function(){c--,r.unsubscribe(),n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}}function Un(t){return function(e){return e.lift(new Gn(t,e))}}var Gn=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new qn(t,this.predicate,this.source))},t}(),qn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Rt.a)},e}(m.a);function Hn(t){return function(e){return e.lift(new Wn(t))}}var Wn=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new Yn(t,this.total))},t}(),Yn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(m.a);function Kn(t){return function(e){return e.lift(new Xn(t))}}var Xn=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Pt.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new m.a(t)):e.subscribe(new $n(t,this._skipCount))},t}(),$n=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.a(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(m.a);function Zn(t){return function(e){return e.lift(new Jn(t))}}var Jn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Qn(t,this.notifier))},t}(),Qn=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var i=new N.a(r,void 0,void 0);r.add(i),r.innerSubscription=i;var a=Object(o.a)(r,n,void 0,void 0,i);return a!==i&&(r.add(a),r.innerSubscription=a),r}return r.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(i.a);function tr(t){return function(e){return e.lift(new er(t))}}var er=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new nr(t,this.predicate))},t}(),nr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(m.a);function rr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(b.a)(n)?(t.pop(),function(e){return Object(q.a)(t,e,n)}):function(e){return Object(q.a)(t,e)}}var ir=n(54),or=n(33),ar=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=ir.a);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!Object(or.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=ir.a),i}return r.a(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=ir.a),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(mt.a);function sr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new ur(t,e))}}var ur=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new ar(e,this.delay,this.scheduler).subscribe(t)},t}();function cr(t,e){return"function"==typeof e?function(n){return n.pipe(cr((function(n,r){return Object(U.a)(t(n,r)).pipe(Object(Zt.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new fr(t))}}var fr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new hr(t,this.project))},t}(),hr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new N.a(this,e,n),a=this.destination;a.add(i),this.innerSubscription=Object(o.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&a.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(i.a);function lr(){return cr(he.a)}function dr(t,e){return e?cr((function(){return t}),e):cr((function(){return t}))}function pr(t){return function(e){return e.lift(new mr(t))}}var mr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new yr(t),r=Object(o.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),yr=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.a);function gr(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new vr(t,e))}}var vr=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new xr(t,this.predicate,this.inclusive))},t}(),xr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(m.a),br=n(21),_r=n(27);function wr(t,e,n){return function(r){return r.lift(new Mr(t,e,n))}}var Mr=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Tr(t,this.nextOrObserver,this.error,this.complete))},t}(),Tr=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=br.a,o._tapError=br.a,o._tapComplete=br.a,o._tapError=r||br.a,o._tapComplete=i||br.a,Object(_r.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||br.a,o._tapError=n.error||br.a,o._tapComplete=n.complete||br.a),o}return r.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(m.a),Ar={leading:!0,trailing:!1};function Sr(t,e){return void 0===e&&(e=Ar),function(n){return n.lift(new Or(t,e.leading,e.trailing))}}var Or=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new Er(t,this.durationSelector,this.leading,this.trailing))},t}(),Er=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(o.a)(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(i.a);function kr(t,e,n){return void 0===e&&(e=c.a),void 0===n&&(n=Ar),function(r){return r.lift(new Cr(t,e,n.leading,n.trailing))}}var Cr=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new Pr(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Pr=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.duration=n,a.scheduler=r,a.leading=i,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return r.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Ir,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(m.a);function Ir(t){t.subscriber.clearThrottle()}var Rr=n(49);function Dr(t){return void 0===t&&(t=c.a),function(e){return Object(Rr.a)((function(){return e.pipe(Ce((function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}}),{current:t.now(),value:void 0,last:void 0}),Object(Zt.a)((function(t){var e=t.current,n=t.last,r=t.value;return new Nr(r,e-n)})))}))}}var Nr=function(){return function(t,e){this.value=t,this.interval=e}}(),Br=n(63);function Lr(t,e,n){return void 0===n&&(n=c.a),function(r){var i=ct(t),o=i?+t-n.now():Math.abs(t);return r.lift(new jr(o,i,e,n))}}var jr=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Fr(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Fr=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.absoluteTimeout=n,a.waitFor=r,a.withObservable=i,a.scheduler=o,a.action=null,a.scheduleTimeout(),a}return r.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(o.a)(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(i.a),zr=n(46);function Vr(t,e){return void 0===e&&(e=c.a),Lr(t,Object(zr.a)(new Br.a),e)}function Ur(t){return void 0===t&&(t=c.a),Object(Zt.a)((function(e){return new Gr(e,t.now())}))}var Gr=function(){return function(t,e){this.value=t,this.timestamp=e}}();function qr(t,e,n){return 0===n?[e]:(t.push(e),t)}function Hr(){return De(qr,[])}function Wr(t){return function(e){return e.lift(new Yr(t))}}var Yr=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new Kr(t),r=e.subscribe(n);return r.closed||n.add(Object(o.a)(n,this.windowBoundaries)),r},t}(),Kr=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new on.a,e.next(n.window),n}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new on.a;e.next(n)},e}(i.a);function Xr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new $r(t,e))}}var $r=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Zr(t,this.windowSize,this.startWindowEvery))},t}(),Zr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new on.a],i.count=0,e.next(i.windows[0]),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,a=0;a<o&&!this.closed;a++)i[a].next(t);var s=this.count-r+1;if(s>=0&&s%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new on.a;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(m.a);function Jr(t){var e=c.a,n=null,r=Number.POSITIVE_INFINITY;return Object(b.a)(arguments[3])&&(e=arguments[3]),Object(b.a)(arguments[2])?e=arguments[2]:Object(or.a)(arguments[2])&&(r=arguments[2]),Object(b.a)(arguments[1])?e=arguments[1]:Object(or.a)(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new Qr(t,n,r,e))}}var Qr=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new ei(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(on.a),ei=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;a.destination=e,a.windowTimeSpan=n,a.windowCreationInterval=r,a.maxWindowSize=i,a.scheduler=o,a.windows=[];var s=a.openWindow();if(null!==r&&r>=0){var u={subscriber:a,window:s,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:a,scheduler:o};a.add(o.schedule(ii,n,u)),a.add(o.schedule(ri,r,c))}else{var f={subscriber:a,window:s,windowTimeSpan:n};a.add(o.schedule(ni,n,f))}return a}return r.a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new ti;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(m.a);function ni(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function ri(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),a={action:this,subscription:null},s={subscriber:n,window:o,context:a};a.subscription=r.schedule(ii,e,s),this.add(a.subscription),this.schedule(t,i)}function ii(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function oi(t,e){return function(n){return n.lift(new ai(t,e))}}var ai=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new si(t,this.openings,this.closingSelector))},t}(),si=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(o.a)(i,n,n)),i}return r.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var a=void 0;try{a=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var s=new on.a,u=new E.a,c={window:s,subscription:u};this.contexts.push(c);var f=Object(o.a)(this,a,c);f.closed?this.closeWindow(this.contexts.length-1):(f.context=c,u.add(f)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(i.a);function ui(t){return function(e){return e.lift(new ci(t))}}var ci=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new fi(t,this.closingSelector))},t}(),fi=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new on.a;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=Object(o.a)(this,n))},e}(i.a);function hi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new li(r,n))}}var li=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new di(t,this.observables,this.project))},t}(),di=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var a=n.length;i.values=new Array(a);for(var s=0;s<a;s++)i.toRespond.push(s);for(s=0;s<a;s++){var u=n[s];i.add(Object(o.a)(i,u,u,s))}return i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a),pi=n(50);function mi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(pi.b.apply(void 0,[e].concat(t)))}}function yi(t){return function(e){return e.lift(new pi.a(t))}}}]);